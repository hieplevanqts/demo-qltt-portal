import{b2 as n}from"./vendor-Cja35lIC.js";import{e as a,h as c}from"./plans-CUEgwpG0.js";async function u(){var r;try{return(await n.get(`${a}/provinces`,{params:{select:"_id,code,name",order:"code.asc"},headers:c()})).data||[]}catch(s){throw console.error("‚ùå Error fetching provinces:",s),s.response?new Error(`Failed to fetch provinces: ${s.response.status} - ${((r=s.response.data)==null?void 0:r.message)||s.response.statusText}`):new Error(`Failed to fetch provinces: ${s.message}`)}}async function g(){var r;try{let s=[],e=0;const o=1e3;let t=!0;for(;t;){const i=e*o,d=(await n.get(`${a}/wards`,{params:{select:"_id,code,name,province_id",order:"code.asc",limit:o,offset:i},headers:c()})).data||[];!d||d.length===0?t=!1:(s=[...s,...d],d.length<o?t=!1:e++)}return s}catch(s){throw console.error("‚ùå Error fetching wards:",s),s.response?new Error(`Failed to fetch wards: ${s.response.status} - ${((r=s.response.data)==null?void 0:r.message)||s.response.statusText}`):new Error(`Failed to fetch wards: ${s.message}`)}}async function w(r){var s;try{let e=[],o=0;const t=1e3;let i=!0;for(;i;){const f=o*t,l=(await n.get(`${a}/wards`,{params:{select:"_id,code,name,province_id",province_id:`eq.${r}`,order:"code.asc",limit:t,offset:f},headers:c()})).data||[];!l||l.length===0?i=!1:(e=[...e,...l],l.length<t?i=!1:o++)}return e}catch(e){throw console.error(`‚ùå Error fetching wards for province ${r}:`,e),e.response?new Error(`Failed to fetch wards: ${e.response.status} - ${((s=e.response.data)==null?void 0:s.message)||e.response.statusText}`):new Error(`Failed to fetch wards: ${e.message}`)}}async function m(r){var s;try{if(!r||r.trim()==="")return console.warn("‚ö†Ô∏è Province ID is empty"),[];console.log("üì° Fetching wards for province ID:",r);const o=(await n.get(`${a}/wards`,{params:{select:"_id,code,name,province_id",province_id:`eq.${r.trim()}`,order:"code.asc",limit:1e4},headers:c()})).data||[];return console.log("‚úÖ Wards fetched for province ID:",r,"-",o.length,"wards"),o||[]}catch(e){return console.error(`‚ùå Error fetching wards for province ${r}:`,e),e.response&&console.error(`Failed to fetch wards: ${e.response.status} - ${((s=e.response.data)==null?void 0:s.message)||e.response.statusText}`),[]}}async function $(r){var s;try{if(!r||r.trim()==="")return console.warn("‚ö†Ô∏è Province ID is empty"),null;console.log("üì° Fetching province by ID:",r);const o=(await n.get(`${a}/provinces`,{params:{select:"_id,code,name",_id:`eq.${r.trim()}`,limit:1},headers:c()})).data||[];return o&&o.length>0?(console.log("‚úÖ Province found:",o[0].name),o[0]):(console.warn("‚ö†Ô∏è Province not found with ID:",r),null)}catch(e){return console.error(`‚ùå Error fetching province ${r}:`,e),e.response&&console.error(`Failed to fetch province: ${e.response.status} - ${((s=e.response.data)==null?void 0:s.message)||e.response.statusText}`),null}}async function y(r){var s;try{if(!r||r.trim()==="")return console.warn("‚ö†Ô∏è Ward ID is empty"),null;console.log("üì° Fetching ward by ID:",r);const o=(await n.get(`${a}/wards`,{params:{select:"_id,code,name,province_id",_id:`eq.${r.trim()}`,limit:1},headers:c()})).data||[];return o&&o.length>0?(console.log("‚úÖ Ward found:",o[0].name),o[0]):(console.warn("‚ö†Ô∏è Ward not found with ID:",r),null)}catch(e){return console.error(`‚ùå Error fetching ward ${r}:`,e),e.response&&console.error(`Failed to fetch ward: ${e.response.status} - ${((s=e.response.data)==null?void 0:s.message)||e.response.statusText}`),null}}async function _(r){var s;if(!r)return null;try{const o=(await n.get(`${a}/province_coordinates`,{params:{select:"province_id,center_lat,center_lng,bounds,area,officer",province_id:`eq.${r}`,limit:1},headers:c()})).data||[];if(o.length===0)return null;const t=o[0];return t.bounds&&typeof t.bounds=="string"&&(t.bounds=JSON.parse(t.bounds)),t}catch(e){throw console.error(`‚ùå Error fetching province coordinates for ${r}:`,e),e.response?new Error(`Failed to fetch province coordinates: ${e.response.status} - ${((s=e.response.data)==null?void 0:s.message)||e.response.statusText}`):new Error(`Failed to fetch province coordinates: ${e.message}`)}}async function v(r){var s;if(!r)return null;try{const o=(await n.get(`${a}/ward_coordinates`,{params:{select:"ward_id,center_lat,center_lng,bounds,area,officer",ward_id:`eq.${r}`,limit:1},headers:c()})).data||[];if(o.length===0)return null;const t=o[0];return t.bounds&&typeof t.bounds=="string"&&(t.bounds=JSON.parse(t.bounds)),t}catch(e){throw console.error(`‚ùå Error fetching ward coordinates for ${r}:`,e),e.response?new Error(`Failed to fetch ward coordinates: ${e.response.status} - ${((s=e.response.data)==null?void 0:s.message)||e.response.statusText}`):new Error(`Failed to fetch ward coordinates: ${e.message}`)}}export{_ as a,u as b,w as c,$ as d,y as e,v as f,m as g,g as h};
