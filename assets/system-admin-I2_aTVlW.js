import{c as lm,r as E,j as e,u as nm,a as mm,t as rm,b as om,S as yl,d as El,e as ys,f as Hl,O as Dl,P as dm,C as Pl,T as Ll,D as jl,R as um,g as cm,h as pm,i as gm,k as d,l as hm,L as As,m as Nm,n as fm,o as vm,p as bm,q as Vm,I as Tm,s as xm,v as Ys,w as ym,x as Em,y as Hm,z as Dm,A as Pm,B as Lm,E as jm,F as Qm,G as $s,H as ei,J as re,K as J,M as q,N as O,Q as us,U as qs,V as ps,W as Re,X as ze,Y as ma,Z as ni,_ as oa,$ as ws,a0 as ja,a1 as _m,a2 as Cm,a3 as Ya,a4 as et,a5 as _e,a6 as Li,a7 as Le,a8 as Za,a9 as qa,aa as C,ab as mi,ac as Sm,ad as Qa,ae as Mm,af as ha,ag as da,ah as cs,ai as _a,aj as Im,ak as Fa,al as Is,am as Am,an as wm,ao as Da,ap as km,aq as Pa,ar as Ns,as as st,at as Rm,au as ra,av as ri,aw as Ye,ax as Om,ay as Ql,az as za,aA as _l,aB as ls}from"./vendor-Cja35lIC.js";import{S as ya,A as sa,H as Um,C as Cl,a as $m,b as xt,T as La,R as oi,G as di,U as ui,c as ci,d as yt,e as Et,F as pi,X as Ht,f as ji,g as Qi,h as Mt,P as Km,E as gi,M as Sl,i as Zm,j as zm,B as Ml,k as Ea,l as Il,D as Ga,m as Al,n as wl,o as hi,p as Bm,L as kl,K as qm,q as Fm,r as Gm,s as Jm,t as Wm,u as Rl,v as Xm,w as Ym,x as ua,y as er,z as sr,I as ar,J as tr,N as Dt,O as ir,Q as lr,V as nr,W as mr,Y as rr,Z as Ca,_ as _i,$ as or,a0 as Ni,a1 as fi,a2 as Ol,a3 as si,a4 as dr,a5 as ur,a6 as cr,a7 as pr,a8 as Ci,a9 as ai}from"./icons-BAlVBlw-.js";const gr="modulepreload",hr=function(s){return"/"+s},Si={},ke=function(a,t,i){let l=Promise.resolve();if(t&&t.length>0){let r=function(p){return Promise.all(p.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),o=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));l=r(t.map(p=>{if(p=hr(p),p in Si)return;Si[p]=!0;const h=p.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const c=document.createElement("link");if(c.rel=h?"stylesheet":gr,h||(c.as="script"),c.crossOrigin="",c.href=p,o&&c.setAttribute("nonce",o),document.head.appendChild(c),h)return new Promise((N,g)=>{c.addEventListener("load",N),c.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${p}`)))})}))}function n(r){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=r,window.dispatchEvent(u),!u.defaultPrevented)throw r}return l.then(r=>{for(const u of r||[])u.status==="rejected"&&n(u.reason);return a().catch(n)})};function Nr(s){try{const a=s.match(/https?:\/\/([^.]+)\.supabase\.co/);return a?a[1]:""}catch{return""}}const fr="https://mwuhuixkybbwrnoqcibg.supabase.co",vr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im13dWh1aXhreWJid3Jub3FjaWJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2MDU3OTIsImV4cCI6MjA4MzE4MTc5Mn0.PstUVxgK1XMU3UCmUApduu8OFzx4uQxKxSdiLzkMTh0",Ha=Nr(fr),Ul=vr;Ha||console.warn("‚ö†Ô∏è VITE_SUPABASE_PROJECT_ID ho·∫∑c VITE_SUPABASE_URL ch∆∞a ƒë∆∞·ª£c c·∫•u h√¨nh. Vui l√≤ng th√™m v√†o file .env. Xem README.md ƒë·ªÉ bi·∫øt c√°ch c·∫•u h√¨nh.");const br=`https://${Ha}.supabase.co`,Mi=Ul;if(!Ha||Ha==="undefined"||Ha==="null")throw new Error("Missing or invalid Supabase projectId. Check src/utils/supabase/info.ts or .env");const M=lm(br,Mi,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce",redirectTo:typeof window<"u"?window.location.origin:void 0},global:{headers:{apikey:Mi}}}),Ja={MODULES:"modules",PERMISSIONS:"permissions",ROLES:"roles",ROLE_PERMISSIONS:"role_permissions",USERS:"users",USER_ROLES:"user_roles",FACILITIES:"facilities",TEAMS:"teams",TERRITORIES:"territories",CATEGORIES:"categories"},$l=E.createContext(void 0);async function It(s){var a;try{const t=await M.rpc("rpc_user_permissions_codes",{p_user_id:s});if(!t.error){const N=(t.data||[]).map(g=>g==null?void 0:g.code).filter(Boolean);return[...new Set(N)]}if(!((a=t.error.message)==null?void 0:a.includes("rpc_user_permissions_codes")))return console.error("‚ùå Error fetching user permissions via RPC:",t.error),[];const{data:l,error:n}=await M.from(Ja.USER_ROLES).select("role_id").eq("user_id",s);if(n)return console.error("‚ùå Error fetching user roles:",n),[];if(!l||l.length===0)return[];const r=l.map(N=>N.role_id),{data:u,error:o}=await M.from(Ja.ROLE_PERMISSIONS).select("permission_id").in("role_id",r);if(o)return console.error("‚ùå Error fetching role permissions:",o),[];if(!u||u.length===0)return[];const p=[...new Set(u.map(N=>N.permission_id))],{data:h,error:m}=await M.from(Ja.PERMISSIONS).select("code").in("_id",p);if(m)return console.error("‚ùå Error fetching permission codes:",m),[];if(!h||h.length===0)return[];const c=h.map(N=>N.code).filter(Boolean);return[...new Set(c)]}catch(t){return console.error("‚ùå Error fetching user permissions:",t),[]}}async function Aa(s){try{const{data:a,error:t}=await M.from(Ja.USER_ROLES).select("role_id").eq("user_id",s).limit(1);if(t)return console.error("‚ùå Error fetching user roles:",t),null;if(!a||a.length===0)return null;const i=a[0].role_id,{data:l,error:n}=await M.from(Ja.ROLES).select("name").eq("_id",i).single();return n?(console.error("‚ùå Error fetching role name:",n),null):!l||!l.name?null:l.name}catch(a){return console.error("‚ùå Error fetching user role name:",a),null}}function Vr(s){if(!s)return;const a=s.trim();if(!(a.length<2||a.length%2!==0))return a.length/2}async function At(s){var a;try{const{data:t,error:i}=await M.from("department_users").select(`
        department_id,
        departments (
          id:_id,
          name,
          code,
          level,
          address,
          latitude,
          longitude,
          parent_id
        )
      `).eq("user_id",s).limit(1);if(i)return console.error("‚ùå Error fetching user department:",i),null;if(!t||t.length===0)return null;const l=(a=t[0])==null?void 0:a.departments;if(!l||!l._id)return null;const n=Vr(l.code);return{_id:l._id,name:l.name||"",code:l.code||void 0,level:l.level??n,address:l.address||void 0,latitude:l.latitude??void 0,longitude:l.longitude??void 0,parent_id:l.parent_id??null}}catch(t){return console.error("‚ùå Error fetching user department:",t),null}}function Kl(s){const a=s.toUpperCase();if(a.startsWith("QT_"))return{level:"cuc",username:s};const t=a.match(/^QT(\d{2})_(.+)$/);if(t){const l=t[1];return{level:"chicuc",username:s,provinceCode:l,provinceName:{"01":"H√† N·ªôi",24:"H·ªì Ch√≠ Minh",48:"ƒê√† N·∫µng",31:"H·∫£i Ph√≤ng",92:"C·∫ßn Th∆°"}[l]||`T·ªânh ${l}`}}const i=a.match(/^QT(\d{2})(\d{2})_(.+)$/);if(i){const l=i[1],n=i[2];return{level:"doi",username:s,provinceCode:l,provinceName:{"01":"H√† N·ªôi",24:"H·ªì Ch√≠ Minh",48:"ƒê√† N·∫µng",31:"H·∫£i Ph√≤ng",92:"C·∫ßn Th∆°"}[l]||`T·ªânh ${l}`,teamCode:n,teamName:`ƒê·ªôi ${parseInt(n)}`}}return{level:"cuc",username:s}}function Tr(s){const a=Kl(s);let t="thanhtra",i="Thanh tra vi√™n";s.toLowerCase().includes("lanhdao")?(t="lanhdao",i="L√£nh ƒë·∫°o"):s.toLowerCase().includes("kehoach")?(t="kehoach",i="Chuy√™n vi√™n k·∫ø ho·∫°ch"):s.toLowerCase().includes("doitruong")&&(t="doitruong",i="ƒê·ªôi tr∆∞·ªüng");let l="",n="";return a.level==="cuc"?(l="Qu·∫£n l√Ω c·ª•c",n="C·ª•c Qu·∫£n l√Ω th·ªã tr∆∞·ªùng"):a.level==="chicuc"?(l=`Qu·∫£n l√Ω chi c·ª•c ${a.provinceName}`,n=`Chi c·ª•c QLTT ${a.provinceName}`):a.level==="doi"&&(l=`Qu·∫£n l√Ω ${a.teamName} - ${a.provinceName}`,n=`Chi c·ª•c QLTT ${a.provinceName} - ${a.teamName}`),{role:t,roleDisplay:l,position:i,department:n}}function $N({children:s}){const[a,t]=E.useState(null),[i,l]=E.useState(!1),[n,r]=E.useState(!0),u=E.useRef(!1),o=async()=>{var N,g;if(!u.current){u.current=!0;try{try{localStorage.clear(),typeof sessionStorage<"u"&&sessionStorage.clear(),typeof document<"u"&&document.cookie&&document.cookie.split(";").forEach(b=>{const V=b.indexOf("="),D=V>-1?b.substr(0,V).trim():b.trim();document.cookie=`${D}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,document.cookie=`${D}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`,document.cookie=`${D}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.${window.location.hostname}`,(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(document.cookie=`${D}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`)})}catch(v){console.error("Error clearing storage:",v)}t(null),l(!1);try{const v=M.auth.signOut(),b=new Promise((V,D)=>setTimeout(()=>D(new Error("SignOut timeout")),2e3));await Promise.race([v,b])}catch(v){(v==null?void 0:v.name)!=="AbortError"&&!((N=v==null?void 0:v.message)!=null&&N.includes("aborted"))&&!((g=v==null?void 0:v.message)!=null&&g.includes("timeout"))&&console.error("Error during signOut:",v)}window.location.pathname.includes("/auth/login")?u.current=!1:setTimeout(()=>{window.location.replace("/auth/login")},100)}catch(v){console.error("Error during auto-logout:",v);try{localStorage.clear(),typeof sessionStorage<"u"&&sessionStorage.clear(),typeof document<"u"&&document.cookie&&document.cookie.split(";").forEach(V=>{const D=V.indexOf("="),f=D>-1?V.substr(0,D).trim():V.trim();document.cookie=`${f}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,document.cookie=`${f}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`,document.cookie=`${f}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.${window.location.hostname}`})}catch(b){console.error("Error clearing storage:",b)}t(null),l(!1),window.location.pathname.includes("/auth/login")?u.current=!1:setTimeout(()=>{window.location.replace("/auth/login")},100)}}};E.useEffect(()=>{if(localStorage.getItem("mappa_auth_access_token")){r(!1);return}(async()=>{var v,b,V;try{const D=window.location.pathname==="/auth/login";let f,P;try{const x=await M.auth.getSession();f=x.data.session,P=x.error}catch(x){if((x==null?void 0:x.name)==="AbortError"||(v=x==null?void 0:x.message)!=null&&v.includes("aborted")){if(console.warn("‚ö†Ô∏è AuthContext: Session check aborted - likely session expired"),localStorage.getItem("mappa_auth_access_token")){t(null),l(!1),r(!1);return}D?(t(null),l(!1)):await o(),r(!1);return}P=x}if(P){if(console.error("‚ö†Ô∏è AuthContext: Error restoring session:",P),localStorage.getItem("mappa_auth_access_token")){t(null),l(!1),r(!1);return}D?(t(null),l(!1)):await o(),r(!1);return}if(f&&f.user){if(f.expires_at){const Q=f.expires_at*1e3;if(Date.now()>=Q){if(localStorage.getItem("mappa_auth_access_token")){t(null),l(!1),r(!1);return}D?(t(null),l(!1)):await o(),r(!1);return}}const x=f.user,y=localStorage.getItem("mappa-user");if(y){const Q=JSON.parse(y);if(!Q.permissions||Q.permissions.length===0||!Q.departmentInfo||!Q.roleDisplay||Q.roleDisplay==="Ng∆∞·ªùi d√πng"||Q.roleDisplay.includes("Qu·∫£n l√Ω")){const[U,j,A]=await Promise.all([It(x.id),At(x.id),Aa(x.id)]);Q.permissions=U,Q.departmentInfo=j||void 0,A&&(Q.roleDisplay=A),localStorage.setItem("mappa-user",JSON.stringify(Q))}t(Q),l(!0)}else{const[Q,U,j]=await Promise.all([It(x.id),At(x.id),Aa(x.id)]),A={_id:x.id,username:x.email||"",fullName:((b=x.user_metadata)==null?void 0:b.full_name)||((V=x.email)==null?void 0:V.split("@")[0])||"User",level:"cuc",role:"thanhtra",roleDisplay:j||"Ng∆∞·ªùi d√πng",position:"Ng∆∞·ªùi d√πng",department:"H·ªá th·ªëng",permissions:Q,departmentInfo:U||void 0};t(A),l(!0)}}else{if(localStorage.getItem("mappa_auth_access_token")){t(null),l(!1),r(!1);return}t(null),l(!1)}}catch(D){if(console.error("‚ö†Ô∏è AuthContext: Error in restoreSession:",D),localStorage.getItem("mappa_auth_access_token")){t(null),l(!1),r(!1);return}window.location.pathname==="/auth/login"?(t(null),l(!1)):await o()}finally{r(!1)}})()},[]),E.useEffect(()=>{if(localStorage.getItem("mappa_auth_access_token"))return;const{data:{subscription:g}}=M.auth.onAuthStateChange(async(b,V)=>{var D,f;if(b==="SIGNED_OUT"||b==="TOKEN_REFRESHED"&&!V){if(localStorage.getItem("mappa_auth_access_token")){t(null),l(!1);return}await o();return}if(b==="SIGNED_IN"||b==="TOKEN_REFRESHED"&&V){if(V&&V.user){if(V.expires_at){const x=V.expires_at*1e3;if(Date.now()>=x){if(localStorage.getItem("mappa_auth_access_token")){t(null),l(!1);return}await o();return}}const P=localStorage.getItem("mappa-user");if(P){const x=JSON.parse(P);if(!x.roleDisplay||x.roleDisplay==="Ng∆∞·ªùi d√πng"||x.roleDisplay.includes("Qu·∫£n l√Ω")){const y=await Aa(V.user._id);y&&(x.roleDisplay=y,localStorage.setItem("mappa-user",JSON.stringify(x)))}t(x),l(!0)}else{const x=V.user,y=await Aa(x.id),Q={_id:x.id,username:x.email||"",fullName:((D=x.user_metadata)==null?void 0:D.full_name)||((f=x.email)==null?void 0:f.split("@")[0])||"User",level:"cuc",role:"thanhtra",roleDisplay:y||"Ng∆∞·ªùi d√πng",position:"Ng∆∞·ªùi d√πng",department:"H·ªá th·ªëng"};t(Q),l(!0)}}}else b==="USER_UPDATED"&&!V?await o():V||await o()}),v=setInterval(async()=>{var b;if(!(!i||u.current))try{let V,D;try{const f=await M.auth.getSession();V=f.data.session,D=f.error}catch(f){if((f==null?void 0:f.name)==="AbortError"||(b=f==null?void 0:f.message)!=null&&b.includes("aborted")){console.warn("Session expiry check aborted - likely session expired"),await o();return}D=f}if(D||!V){await o();return}if(V.expires_at){const f=V.expires_at*1e3,P=Date.now();if(P>=f||f-P<5e3){await o();return}}}catch(V){console.error("Error checking session expiry:",V),await o()}},1e4);return()=>{g.unsubscribe(),clearInterval(v)}},[i]);const p=async(N,g)=>{var v;if(!N||!g)return{success:!1,error:"Email v√† m·∫≠t kh·∫©u kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng"};try{const{data:b,error:V}=await M.auth.signInWithPassword({email:N.trim(),password:g});if(V)return console.error("Login error:",V),{success:!1,error:V.message||"T√™n ƒëƒÉng nh·∫≠p ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ƒë√∫ng"};if(!b.user||!b.session)return{success:!1,error:"ƒêƒÉng nh·∫≠p th·∫•t b·∫°i"};const D=b.user,f=N.trim(),P=Kl(f),x=Tr(f),y=f.split("@")[0]||f.split("_").pop()||"User",Q=y.charAt(0).toUpperCase()+y.slice(1).toLowerCase(),U=!1,[j,A,z]=await Promise.all([It(D.id),At(D.id),Aa(D.id)]),W={_id:D.id,username:f,fullName:((v=D.user_metadata)==null?void 0:v.full_name)||Q,...P,...x,roleDisplay:z||x.roleDisplay,permissions:j,departmentInfo:A||void 0};if(localStorage.setItem("mappa-user",JSON.stringify(W)),b.session.expires_at){const X=b.session.expires_at*1e3;localStorage.setItem("mappa-session-expiry",X.toString())}return t(W),l(!0),{success:!0,requiresUnitSelection:!1}}catch(b){return console.error("Login exception:",b),{success:!1,error:b instanceof Error?b.message:"C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i sau."}}},h=N=>{const g=localStorage.getItem("mappa-user-pending");if(!g)return;const v=JSON.parse(g),b=Date.now()+480*60*1e3;localStorage.setItem("mappa-user",JSON.stringify(v)),localStorage.setItem("mappa-session-expiry",b.toString()),localStorage.removeItem("mappa-user-pending"),t(v),l(!0)},m=async()=>{if(!u.current){u.current=!0;try{const{data:{session:N}}=await M.auth.getSession();if(N!=null&&N.access_token)try{const v=`${`https://${Ha}.supabase.co`}/auth/v1/logout`;await fetch(v,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N.access_token}`,apikey:Ul},body:JSON.stringify({})})}catch{}await M.auth.signOut(),localStorage.clear(),typeof sessionStorage<"u"&&sessionStorage.clear(),typeof document<"u"&&document.cookie&&document.cookie.split(";").forEach(v=>{const b=v.indexOf("="),V=b>-1?v.substr(0,b).trim():v.trim();document.cookie=`${V}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,document.cookie=`${V}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`,document.cookie=`${V}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.${window.location.hostname}`}),t(null),l(!1)}catch(N){console.error("‚ùå Logout error:",N);try{localStorage.clear(),typeof sessionStorage<"u"&&sessionStorage.clear(),typeof document<"u"&&document.cookie&&document.cookie.split(";").forEach(v=>{const b=v.indexOf("="),V=b>-1?v.substr(0,b).trim():v.trim();document.cookie=`${V}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,document.cookie=`${V}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`,document.cookie=`${V}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.${window.location.hostname}`})}catch(g){console.error("Error clearing storage:",g)}t(null),l(!1)}finally{u.current=!1}}},c=()=>!!i;return e.jsxDEV($l.Provider,{value:{user:a,isAuthenticated:i,isLoading:n,login:p,selectUnit:h,logout:m,checkSession:c},children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/contexts/AuthContext.tsx",lineNumber:1035,columnNumber:5},this)}function Sa(){const s=E.useContext($l);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}const KN=()=>mm(),vi=nm,Zl=E.createContext(void 0),Ii=s=>{if(!s)return;const a=s.trim();if(!(a.length<2||a.length%2!==0))return a.length/2};function ZN({children:s}){var B,ge,be,ie,Ne;const{user:a}=vi(w=>w.auth),[t,i]=E.useState({divisionId:null,teamId:null,areaId:null,province:null,ward:null}),[l,n]=E.useState([]),[r,u]=E.useState([]),[o,p]=E.useState([]),[h,m]=E.useState([]),[c,N]=E.useState([]),[g,v]=E.useState(!0),[b,V]=E.useState(!1);E.useEffect(()=>{V(!1)},[a==null?void 0:a.username]),E.useEffect(()=>{let w=!0;async function _(){try{v(!0);const[{data:H,error:L},{data:G,error:ye},{data:He,error:le},{data:te,error:Ce},{data:ne,error:ae}]=await Promise.all([M.from("departments").select("id:_id, parent_id, name, code, level").is("deleted_at",null).order("path",{ascending:!0}),M.from("department_areas").select("department_id, area_id"),M.from("areas").select("id:_id, code, name, level, province_id, ward_id"),M.from("wards").select("id:_id, code, name, province_id"),M.from("provinces").select("id:_id, code, name")]);if(L&&console.error("‚ùå QLTTScopeContext: Failed to load departments:",L),ye&&console.error("‚ùå QLTTScopeContext: Failed to load department_areas:",ye),le&&console.error("‚ùå QLTTScopeContext: Failed to load areas:",le),Ce&&console.error("‚ùå QLTTScopeContext: Failed to load wards:",Ce),ae&&console.error("‚ùå QLTTScopeContext: Failed to load provinces:",ae),!w)return;n((H||[]).map(T=>({id:T.id,parent_id:T.parent_id,name:T.name,code:T.code,level:T.level}))),u(G||[]),p((He||[]).map(T=>({id:T.id,code:T.code,name:T.name,level:T.level,province_id:T.province_id,ward_id:T.ward_id}))),m((te||[]).map(T=>({id:T.id,code:T.code,name:T.name,province_id:T.province_id}))),N((ne||[]).map(T=>({id:T.id,code:T.code,name:T.name})))}catch(H){console.error("‚ùå QLTTScopeContext: Failed to load scope data:",H)}finally{w&&v(!1)}}return _(),()=>{w=!1}},[]);const D=E.useMemo(()=>new Map(l.map(w=>[w.id,w])),[l]),f=E.useMemo(()=>new Map(o.map(w=>[w.id,w])),[o]),P=E.useMemo(()=>new Map(h.map(w=>[w.id,w])),[h]),x=E.useMemo(()=>new Map(c.map(w=>[w.id,w])),[c]),y=w=>w.level??Ii(w.code),Q=E.useMemo(()=>l.filter(w=>y(w)===2),[l]),U=E.useMemo(()=>l.filter(w=>y(w)===3),[l]),j=w=>{if(!w)return null;const _=w.trim().toUpperCase(),H=Q.find(L=>{var ye;const G=(ye=L.code)==null?void 0:ye.trim().toUpperCase();return G?_.startsWith(G):!1});return(H==null?void 0:H.id)||null},A=((B=a==null?void 0:a.departmentInfo)==null?void 0:B.id)||null,z=A?D.get(A):void 0,W=((ge=a==null?void 0:a.departmentInfo)==null?void 0:ge.level)??Ii((be=a==null?void 0:a.departmentInfo)==null?void 0:be.code),X=E.useMemo(()=>{var w,_;return W===2?(z==null?void 0:z.id)||A:W&&W>=3&&((z==null?void 0:z.parent_id)||((w=a==null?void 0:a.departmentInfo)==null?void 0:w.parent_id)||j((z==null?void 0:z.code)||((_=a==null?void 0:a.departmentInfo)==null?void 0:_.code)))||null},[z,W,A,(ie=a==null?void 0:a.departmentInfo)==null?void 0:ie.parent_id,(Ne=a==null?void 0:a.departmentInfo)==null?void 0:Ne.code,Q]),fe=E.useMemo(()=>({division:!!(W&&W>=2),team:!!(W&&W>=3)}),[W]),me=E.useMemo(()=>{if(!W||W<=1)return Q;if(W===2){const w=(z==null?void 0:z.id)||A;return w?Q.filter(_=>_.id===w):[]}return W>=3&&X?Q.filter(w=>w.id===X):[]},[Q,W,z,A,X]),ue=E.useMemo(()=>{var L;if(!t.divisionId)return[];const w=D.get(t.divisionId),_=((L=w==null?void 0:w.code)==null?void 0:L.trim().toUpperCase())||null,H=U.filter(G=>G.parent_id&&G.parent_id===t.divisionId?!0:_&&G.code?G.code.trim().toUpperCase().startsWith(_):!1);return W&&W>=3&&z?H.filter(G=>G.id===z.id):H},[U,t.divisionId,W,z,D]),xe=E.useMemo(()=>{const w=new Map;return r.forEach(_=>{w.has(_.department_id)||w.set(_.department_id,[]),w.get(_.department_id).push(_.area_id)}),w},[r]),Ee=E.useMemo(()=>t.teamId?(xe.get(t.teamId)||[]).map(_=>f.get(_)).filter(_=>!!_).map(_=>{const H=_.ward_id?P.get(_.ward_id):void 0,L=H?x.get(H.province_id):void 0,G=_.province_id?x.get(_.province_id):void 0;return{id:_.id,name:(H==null?void 0:H.name)||_.name,code:_.code,wardCode:(H==null?void 0:H.code)||null,provinceCode:(L==null?void 0:L.code)||(G==null?void 0:G.code)||null}}):[],[t.teamId,xe,f,P,x]),je=()=>{var w,_;return W===2?{divisionId:(z==null?void 0:z.id)||A,teamId:null,areaId:null,province:null,ward:null}:W&&W>=3?{divisionId:(z==null?void 0:z.parent_id)||((w=a==null?void 0:a.departmentInfo)==null?void 0:w.parent_id)||j((z==null?void 0:z.code)||((_=a==null?void 0:a.departmentInfo)==null?void 0:_.code))||null,teamId:(z==null?void 0:z.id)||A,areaId:null,province:null,ward:null}:{divisionId:null,teamId:null,areaId:null,province:null,ward:null}};E.useEffect(()=>{if(!a||g||b)return;try{const _=localStorage.getItem("mappa-scope");if(_){const H=JSON.parse(_);if(console.log("üîÑ QLTTScopeContext: Loading scope from localStorage:",H),H&&typeof H=="object"){i(H),V(!0);return}}}catch(_){console.error("‚ùå QLTTScopeContext: Failed to load scope from localStorage:",_)}const w=je();console.log("üîÑ QLTTScopeContext: Using default scope:",w),i(w),V(!0)},[a,g,b,z,W]);const Y=w=>{console.log("üîÑ QLTTScopeContext: handleSetScope called with:",w),i(w);try{localStorage.setItem("mappa-scope",JSON.stringify(w)),console.log("‚úÖ QLTTScopeContext: Scope saved to localStorage")}catch(_){console.error("‚ùå QLTTScopeContext: Failed to save scope to localStorage:",_)}},de=()=>{const w=je();i(w)},Te=()=>{var G,ye,He,le;const w=t.divisionId?(G=D.get(t.divisionId))==null?void 0:G.name:null,_=t.teamId?(ye=D.get(t.teamId))==null?void 0:ye.name:null,H=t.areaId?((He=Ee.find(te=>te.id===t.areaId))==null?void 0:He.name)||((le=f.get(t.areaId))==null?void 0:le.name):null,L=[w,_,H].filter(Boolean);return L.length>0?L.join(" / "):"To√†n qu·ªëc"},S=!!(W&&W<=2);return e.jsxDEV(Zl.Provider,{value:{scope:t,setScope:Y,resetScope:de,canChangeScope:S,locks:fe,availableDivisions:me,availableTeams:ue,availableAreas:Ee,getScopeDisplayText:Te,isLoading:g,hasInitialized:b},children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/contexts/QLTTScopeContext.tsx",lineNumber:427,columnNumber:5},this)}function xr(){const s=E.useContext(Zl);if(s===void 0)throw new Error("useQLTTScope must be used within a QLTTScopeProvider");return s}function Fe(...s){return rm(om(s))}const yr=El("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),we=E.forwardRef(({className:s,variant:a,size:t,asChild:i=!1,...l},n)=>{const r=i?yl:"button";return e.jsxDEV(r,{"data-slot":"button",className:Fe(yr({variant:a,size:t,className:s})),ref:n,...l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/button.tsx",lineNumber:47,columnNumber:5},void 0)});we.displayName="Button";const lt="mappa.menu.registry",zl=()=>{const[s,a]=E.useState(null),[t,i]=E.useState(!1),[l,n]=E.useState(null);return E.useEffect(()=>{const r=localStorage.getItem(lt);if(r)try{const m=JSON.parse(r);a(m)}catch{localStorage.removeItem(lt)}const u=m=>m.includes("Could not find the table")||m.includes("does not exist")||m.includes("schema cache"),o=async()=>{const m=async(g,v)=>{let b=M.from("v_my_menu").select("*");return g&&(b=b.order(g,{ascending:!0})),v&&(b=b.order(v,{ascending:!0})),b};let c=await m("sort_order","label");if(c.error){if(u(c.error.message))return null;if((c.error.message.includes("sort_order")||c.error.message.includes("label"))&&(c=await m("order_index","name")),c.error&&(c.error.message.includes("order_index")||c.error.message.includes("name"))&&(c=await m(null,null)),c.error)throw new Error(`menu select failed: ${c.error.message}`)}const N=c.data||[];return N.length===0?[]:N.map(g=>({id:g._id??g.id,label:g.label??g.name??"",path:g.route_path??g.path??null,icon:g.icon??void 0,order:g.sort_order??g.order_index??g.order??0,parentId:g.parent_id??null,moduleId:g.module_id??null,permissionsAny:Array.isArray(g.permission_codes)?g.permission_codes:[],isEnabled:g.is_visible??g.is_active??!0}))},p=async()=>{try{i(!0),n(null);const m=await o();if(m!==null){a(m),localStorage.setItem(lt,JSON.stringify(m));return}throw new Error("Kh√¥ng th·ªÉ t·∫£i menu t·ª´ c∆° s·ªü d·ªØ li·ªáu.")}catch(m){n(m instanceof Error?m.message:"Failed to load menus.")}finally{i(!1)}},h=()=>{localStorage.removeItem(lt),p()};return p(),window.addEventListener("mappa:menu-refresh",h),()=>{window.removeEventListener("mappa:menu-refresh",h)}},[]),{menus:s,loading:t,error:l}};function os(){const{user:s}=vi(g=>g.auth);zl();const a="admin3@vhv.vn",t=["MAP_VIEW","STORES_VIEW","LEAD_RISK","PLAN_VIEW","TASKS_VIEW","EVIDENCE_VIEW","ADMIN_VIEW","TV_VIEW"],i=((s==null?void 0:s.permissions)||[]).filter(Boolean),l=((s==null?void 0:s.email)||"").toLowerCase()===a?[...t]:[],n=Array.from(new Set([...i,...l])),r=new Set(n.map(g=>g.toUpperCase())),u=r.has("ADMIN:ACCESS")||r.has("ADMIN_VIEW"),o={"sa.iam.user.delete":["USER.DELETE","user.delete","USER_DELETE"],"sa.iam.user.update":["USER.UPDATE","user.update","USER_UPDATE"],"sa.iam.user.create":["USER.CREATE","user.create","USER_CREATE"],"sa.iam.user.read":["USER.READ","user.read","USER_READ","USER.VIEW"]},p=g=>{const v=g.toUpperCase();if(r.has(v))return!0;const b=o[g];return b?b.some(V=>r.has(V.toUpperCase())):!1};return{userPermissions:n,hasPermission:g=>u&&g.startsWith("sa.")?!0:p(g),hasAnyPermission:g=>u&&g.some(v=>v.startsWith("sa."))?!0:g.some(v=>p(v)),hasAllPermissions:g=>u&&g.every(v=>v.startsWith("sa."))?!0:g.every(v=>p(v)),hasPermissionPattern:g=>{const v=new RegExp("^"+g.replace(/\*/g,".*")+"$");return n.some(b=>v.test(b))}}}const Er="_errorContainer_1eonb_2",Hr="_errorContent_1eonb_11",Dr="_errorIcon403_1eonb_19",Pr="_errorCode_1eonb_31",Lr="_errorTitle_1eonb_39",jr="_errorMessage_1eonb_46",Qr="_errorActions_1eonb_53",_r="_primaryButton_1eonb_59",Cr="_secondaryButton_1eonb_80",Sr="_errorHelp_1eonb_101",Fs={errorContainer:Er,errorContent:Hr,errorIcon403:Dr,errorCode:Pr,errorTitle:Lr,errorMessage:jr,errorActions:Qr,primaryButton:_r,secondaryButton:Cr,errorHelp:Sr};function wt(){const s=ys();return e.jsxDEV("div",{className:Fs.errorContainer,children:e.jsxDEV("div",{className:Fs.errorContent,children:[e.jsxDEV("div",{className:Fs.errorIcon403,children:e.jsxDEV(ya,{size:64},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:12,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:11,columnNumber:9},this),e.jsxDEV("div",{className:Fs.errorCode,children:"403"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:15,columnNumber:9},this),e.jsxDEV("h1",{className:Fs.errorTitle,children:"Truy c·∫≠p b·ªã t·ª´ ch·ªëi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:16,columnNumber:9},this),e.jsxDEV("p",{className:Fs.errorMessage,children:["B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p v√†o trang n√†y.",e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:19,columnNumber:11},this),"Vui l√≤ng li√™n h·ªá qu·∫£n tr·ªã vi√™n ƒë·ªÉ ƒë∆∞·ª£c c·∫•p quy·ªÅn."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:17,columnNumber:9},this),e.jsxDEV("div",{className:Fs.errorActions,children:[e.jsxDEV("button",{className:Fs.primaryButton,onClick:()=>s(-1),children:[e.jsxDEV(sa,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:25,columnNumber:13},this),"Quay l·∫°i"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:24,columnNumber:11},this),e.jsxDEV("button",{className:Fs.secondaryButton,onClick:()=>s("/"),children:[e.jsxDEV(Um,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:29,columnNumber:13},this),"V·ªÅ trang ch·ªß"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:28,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:23,columnNumber:9},this),e.jsxDEV("div",{className:Fs.errorHelp,children:[e.jsxDEV("p",{children:"C·∫ßn tr·ª£ gi√∫p?"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:35,columnNumber:11},this),e.jsxDEV("a",{href:"mailto:support@qltt.gov.vn",children:"support@qltt.gov.vn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:36,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:34,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:10,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/error-states/Error403.tsx",lineNumber:9,columnNumber:5},this)}const Mr={"/overview":void 0,"/map":"MAP_VIEW","/stores":"STORES_VIEW","/leads":"LEAD_RISK","/plans":"PLAN_VIEW","/tasks":"TASKS_VIEW","/evidence":"EVIDENCE_VIEW","/reports":void 0,"/admin":"ADMIN_VIEW","/tv":"TV_VIEW"};function Bl({children:s,requiredPermission:a}){const{isLoading:t}=vi(p=>p.auth),{menus:i,loading:l}=zl(),{hasPermission:n,hasAnyPermission:r}=os(),u=Hl();if(u.pathname.startsWith("/system-admin")||u.pathname.startsWith("/system/"))return e.jsxDEV(e.Fragment,{children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/auth/PermissionProtectedRoute.tsx",lineNumber:44,columnNumber:12},this);if(t||l)return null;if(a)return n(a)?e.jsxDEV(e.Fragment,{children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/auth/PermissionProtectedRoute.tsx",lineNumber:57,columnNumber:12},this):e.jsxDEV(wt,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/auth/PermissionProtectedRoute.tsx",lineNumber:55,columnNumber:14},this);if(i){const p=[...i].filter(h=>h.path&&h.path!=="/").sort((h,m)=>{var c,N;return(((c=m.path)==null?void 0:c.length)||0)-(((N=h.path)==null?void 0:N.length)||0)});for(const h of p)if(h.path&&(u.pathname===h.path||u.pathname.startsWith(h.path+"/"))){if(h.permissionsAny&&h.permissionsAny.length>0)return r(h.permissionsAny)?e.jsxDEV(e.Fragment,{children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/auth/PermissionProtectedRoute.tsx",lineNumber:73,columnNumber:18},this):e.jsxDEV(wt,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/auth/PermissionProtectedRoute.tsx",lineNumber:71,columnNumber:20},this);break}}const o=Mr[u.pathname];return o&&!n(o)?e.jsxDEV(wt,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/auth/PermissionProtectedRoute.tsx",lineNumber:85,columnNumber:12},this):e.jsxDEV(e.Fragment,{children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/auth/PermissionProtectedRoute.tsx",lineNumber:88,columnNumber:10},this)}const bi=um,zN=cm,Ir=dm,BN=pm,ql=E.forwardRef(({className:s,...a},t)=>e.jsxDEV(Dl,{ref:t,className:Fe("fixed inset-0 z-[19] bg-black/80 transition-opacity duration-150",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/dialog.tsx",lineNumber:19,columnNumber:3},void 0));ql.displayName=Dl.displayName;const Pt=E.forwardRef(({className:s,children:a,...t},i)=>e.jsxDEV(Ir,{children:[e.jsxDEV(ql,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/dialog.tsx",lineNumber:35,columnNumber:5},void 0),e.jsxDEV(Pl,{ref:i,className:Fe("fixed left-[50%] top-[50%] z-[20] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg transition-all duration-150",s),...t,children:a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/dialog.tsx",lineNumber:36,columnNumber:5},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/dialog.tsx",lineNumber:34,columnNumber:3},void 0));Pt.displayName=Pl.displayName;const Lt=({className:s,...a})=>e.jsxDEV("div",{className:Fe("flex flex-col space-y-1.5",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/dialog.tsx",lineNumber:54,columnNumber:3},void 0);Lt.displayName="DialogHeader";const jt=({className:s,...a})=>e.jsxDEV("div",{className:Fe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/dialog.tsx",lineNumber:65,columnNumber:3},void 0);jt.displayName="DialogFooter";const Qt=E.forwardRef(({className:s,...a},t)=>e.jsxDEV(Ll,{ref:t,className:Fe("text-lg font-semibold leading-none tracking-tight",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/dialog.tsx",lineNumber:79,columnNumber:3},void 0));Qt.displayName=Ll.displayName;const _t=E.forwardRef(({className:s,...a},t)=>e.jsxDEV(jl,{ref:t,className:Fe("text-sm text-muted-foreground",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/dialog.tsx",lineNumber:94,columnNumber:3},void 0));_t.displayName=jl.displayName;function ea({className:s,...a}){return e.jsxDEV(gm,{"data-slot":"label",className:Fe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/label.tsx",lineNumber:13,columnNumber:5},this)}const Ar=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Ko),void 0)),wr=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Fo),void 0)),kr=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Ad),void 0)),Rr=d.lazy(()=>ke(()=>Promise.resolve().then(()=>iu),void 0)),Or=d.lazy(()=>ke(()=>Promise.resolve().then(()=>ru),void 0)),Ur=d.lazy(()=>ke(()=>Promise.resolve().then(()=>cu),void 0)),$r=d.lazy(()=>ke(()=>Promise.resolve().then(()=>gu),void 0)),qN={path:"system",element:e.jsxDEV(Bl,{requiredPermission:"ADMIN_VIEW",children:e.jsxDEV(hm,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/routes.tsx",lineNumber:18,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/routes.tsx",lineNumber:17,columnNumber:5},void 0),children:[{path:"modules",element:e.jsxDEV(Rr,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/routes.tsx",lineNumber:22,columnNumber:33},void 0)},{path:"modules/import",element:e.jsxDEV(kr,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/routes.tsx",lineNumber:23,columnNumber:40},void 0)},{path:"modules/history",element:e.jsxDEV(wr,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/routes.tsx",lineNumber:24,columnNumber:41},void 0)},{path:"modules/:id/update",element:e.jsxDEV(Ur,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/routes.tsx",lineNumber:25,columnNumber:44},void 0)},{path:"modules/:id",element:e.jsxDEV(Ar,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/routes.tsx",lineNumber:26,columnNumber:37},void 0)},{path:"menus",element:e.jsxDEV($r,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/routes.tsx",lineNumber:27,columnNumber:31},void 0)}]},Kr={path:"system-admin",element:e.jsxDEV(Bl,{requiredPermission:"ADMIN_VIEW",children:e.jsxDEV(Or,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/routes.tsx",lineNumber:35,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/routes.tsx",lineNumber:34,columnNumber:5},void 0)},FN={key:"system-admin.dashboard",name:"System Admin Dashboard",group:"SYSTEM",order:0,routes:[Kr]},Zr=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Fc),void 0)),zr=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Xc),void 0)),Br=d.lazy(()=>ke(()=>Promise.resolve().then(()=>dp),void 0)),qr=d.lazy(()=>ke(()=>Promise.resolve().then(()=>vp),void 0)),Ai=d.lazy(()=>ke(()=>Promise.resolve().then(()=>yp),void 0)),Fr=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Dp),void 0)),Gr=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Qp),void 0)),Jr=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Cp),void 0)),Wr=d.lazy(()=>ke(()=>Promise.resolve().then(()=>$p),void 0)),Xr=d.lazy(()=>ke(()=>Promise.resolve().then(()=>rg),void 0)),Yr={path:"system-admin/iam",children:[{path:"users",element:e.jsxDEV(Zr,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/routes.tsx",lineNumber:30,columnNumber:16},void 0)},{path:"users/:id",element:e.jsxDEV(zr,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/routes.tsx",lineNumber:35,columnNumber:16},void 0)},{path:"roles",element:e.jsxDEV(Br,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/routes.tsx",lineNumber:42,columnNumber:16},void 0)},{path:"permissions",element:e.jsxDEV(qr,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/routes.tsx",lineNumber:49,columnNumber:16},void 0)},{path:"role-permissions",element:e.jsxDEV(Ai,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/routes.tsx",lineNumber:56,columnNumber:16},void 0)},{path:"role-permissions/:roleId",element:e.jsxDEV(Ai,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/routes.tsx",lineNumber:61,columnNumber:16},void 0)},{path:"assignments",element:e.jsxDEV(Fr,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/routes.tsx",lineNumber:68,columnNumber:16},void 0)},{path:"assignments/users/:id",element:e.jsxDEV(Gr,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/routes.tsx",lineNumber:73,columnNumber:16},void 0)},{path:"assignments/roles/:id",element:e.jsxDEV(Jr,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/routes.tsx",lineNumber:79,columnNumber:16},void 0)},{path:"modules",element:e.jsxDEV(Wr,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/routes.tsx",lineNumber:87,columnNumber:16},void 0)},{path:"menus",element:e.jsxDEV(Xr,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/routes.tsx",lineNumber:94,columnNumber:16},void 0)}]},GN={key:"system-admin.iam",name:"Identity & Access Management",group:"IAM",order:10,routes:[Yr]},eo=d.lazy(()=>ke(()=>Promise.resolve().then(()=>fg),void 0)),so=d.lazy(()=>ke(()=>Promise.resolve().then(()=>xg),void 0)),ao=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Lg),void 0)),to=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Sg),void 0)),io=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Ig),void 0)),lo=d.lazy(()=>ke(()=>Promise.resolve().then(()=>wg),void 0)),no=d.lazy(()=>ke(()=>Promise.resolve().then(()=>$g),void 0)),mo=d.lazy(()=>ke(()=>Promise.resolve().then(()=>dh),void 0)),ro=d.lazy(()=>ke(()=>Promise.resolve().then(()=>vh),void 0)),oo=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Vh),void 0)),uo=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Fh),void 0)),co=d.lazy(()=>ke(()=>Promise.resolve().then(()=>Yh),void 0)),po={path:"system-admin/master-data",children:[{path:"org-units",element:e.jsxDEV(eo,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:32,columnNumber:16},void 0)},{path:"departments",element:e.jsxDEV(so,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:39,columnNumber:16},void 0)},{path:"admin-areas",element:e.jsxDEV(ao,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:46,columnNumber:16},void 0)},{path:"common-catalogs",element:e.jsxDEV(to,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:53,columnNumber:16},void 0)},{path:"dms-catalogs",element:e.jsxDEV(io,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:58,columnNumber:16},void 0)},{path:"system-catalogs",element:e.jsxDEV(lo,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:63,columnNumber:16},void 0)},{path:"common-catalogs/:catalogId",element:e.jsxDEV(no,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:68,columnNumber:16},void 0)},{path:"jurisdictions",element:e.jsxDEV(mo,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:75,columnNumber:16},void 0)},{path:"jurisdictions/:id/map",element:e.jsxDEV(ro,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:80,columnNumber:16},void 0)},{path:"catalogs",element:e.jsxDEV(oo,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:87,columnNumber:16},void 0)},{path:"catalogs/:catalogKey/items",element:e.jsxDEV(uo,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:92,columnNumber:16},void 0)},{path:"catalogs/:catalogKey/schema",element:e.jsxDEV(co,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/routes.tsx",lineNumber:97,columnNumber:16},void 0)}]},JN={key:"system-admin.master-data",name:"System Admin Master Data",group:"SYSTEM",order:20,routes:[po]},go=d.lazy(()=>ke(()=>Promise.resolve().then(()=>pN),void 0)),ho=d.lazy(()=>ke(()=>Promise.resolve().then(()=>VN),void 0)),No=d.lazy(()=>ke(()=>Promise.resolve().then(()=>xN),void 0)),fo=d.lazy(()=>ke(()=>Promise.resolve().then(()=>EN),void 0)),vo=d.lazy(()=>ke(()=>Promise.resolve().then(()=>DN),void 0)),bo=d.lazy(()=>ke(()=>Promise.resolve().then(()=>LN),void 0)),Vo=d.lazy(()=>ke(()=>Promise.resolve().then(()=>RN),void 0)),To={path:"system-admin/system-config",children:[{path:"parameters",element:e.jsxDEV(go,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/routes.tsx",lineNumber:27,columnNumber:16},void 0)},{path:"organization-info",element:e.jsxDEV(ho,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/routes.tsx",lineNumber:35,columnNumber:16},void 0)},{path:"operations",element:e.jsxDEV(No,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/routes.tsx",lineNumber:43,columnNumber:16},void 0)},{path:"notifications",element:e.jsxDEV(fo,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/routes.tsx",lineNumber:51,columnNumber:16},void 0)},{path:"security",element:e.jsxDEV(vo,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/routes.tsx",lineNumber:59,columnNumber:16},void 0)},{path:"database/logs",element:e.jsxDEV(bo,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/routes.tsx",lineNumber:67,columnNumber:16},void 0)},{path:"database/backups",element:e.jsxDEV(Vo,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/routes.tsx",lineNumber:75,columnNumber:16},void 0)}]},WN={key:"system-admin.system-config",name:"System Admin Configuration",group:"SYSTEM",order:30,routes:[To]},xo="_header_1n1el_1",yo="_container_1n1el_11",Eo="_breadcrumbs_1n1el_19",Ho="_breadcrumbItem_1n1el_39",Do="_chevron_1n1el_51",Po="_breadcrumbLink_1n1el_63",Lo="_breadcrumbActive_1n1el_89",jo="_titleRow_1n1el_103",Qo="_titleGroup_1n1el_115",_o="_title_1n1el_103",Co="_subtitle_1n1el_143",So="_actions_1n1el_155",ks={header:xo,container:yo,breadcrumbs:Eo,breadcrumbItem:Ho,chevron:Do,breadcrumbLink:Po,breadcrumbActive:Lo,titleRow:jo,titleGroup:Qo,title:_o,subtitle:Co,actions:So};function hs({breadcrumbs:s,title:a,subtitle:t,actions:i}){return e.jsxDEV("div",{className:ks.header,children:e.jsxDEV("div",{className:ks.container,children:[s&&s.length>0&&e.jsxDEV("nav",{className:ks.breadcrumbs,children:s.map((l,n)=>e.jsxDEV("div",{className:ks.breadcrumbItem,children:[n>0&&e.jsxDEV(Cl,{className:ks.chevron},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:22,columnNumber:31},this),l.href?e.jsxDEV(As,{to:l.href,className:ks.breadcrumbLink,children:l.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:24,columnNumber:19},this):e.jsxDEV("span",{className:ks.breadcrumbActive,children:l.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:28,columnNumber:19},this)]},n,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:21,columnNumber:15},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:19,columnNumber:11},this),e.jsxDEV("div",{className:ks.titleRow,children:[e.jsxDEV("div",{className:ks.titleGroup,children:[e.jsxDEV("h1",{className:ks.title,children:a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:38,columnNumber:13},this),t&&e.jsxDEV("div",{className:ks.subtitle,children:t},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:39,columnNumber:26},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:37,columnNumber:11},this),i&&e.jsxDEV("div",{className:ks.actions,children:i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:41,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:36,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:16,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/layouts/PageHeader.tsx",lineNumber:15,columnNumber:5},this)}const Mo=El("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function $e({className:s,variant:a,asChild:t=!1,...i}){const l=t?yl:"span";return e.jsxDEV(l,{"data-slot":"badge",className:Fe(Mo({variant:a}),s),...i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/badge.tsx",lineNumber:38,columnNumber:5},this)}function Ke({className:s,...a}){return e.jsxDEV("div",{"data-slot":"card",className:Fe("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/card.tsx",lineNumber:7,columnNumber:5},this)}function Be({className:s,...a}){return e.jsxDEV("div",{"data-slot":"card-header",className:Fe("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/card.tsx",lineNumber:20,columnNumber:5},this)}function qe({className:s,...a}){return e.jsxDEV("h4",{"data-slot":"card-title",className:Fe("leading-none",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/card.tsx",lineNumber:33,columnNumber:5},this)}function XN({className:s,...a}){return e.jsxDEV("p",{"data-slot":"card-description",className:Fe("text-muted-foreground",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/card.tsx",lineNumber:43,columnNumber:5},this)}function Ze({className:s,...a}){return e.jsxDEV("div",{"data-slot":"card-content",className:Fe("px-6 [&:last-child]:pb-6",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/card.tsx",lineNumber:66,columnNumber:5},this)}function Fl({className:s,...a}){return e.jsxDEV(Nm,{"data-slot":"tabs",className:Fe("flex flex-col gap-2",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/tabs.tsx",lineNumber:13,columnNumber:5},this)}function Gl({className:s,...a}){return e.jsxDEV(fm,{"data-slot":"tabs-list",className:Fe("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/tabs.tsx",lineNumber:26,columnNumber:5},this)}function Wa({className:s,...a}){return e.jsxDEV(vm,{"data-slot":"tabs-trigger",className:Fe("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/tabs.tsx",lineNumber:42,columnNumber:5},this)}function Xa({className:s,...a}){return e.jsxDEV(bm,{"data-slot":"tabs-content",className:Fe("flex-1 outline-none",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/tabs.tsx",lineNumber:58,columnNumber:5},this)}const Io="http://localhost:7788",_s=async(s,a)=>{const t=await fetch(`${Io}${s}`,a);if(!t.ok){const i=await t.json().catch(()=>({})),l=(i==null?void 0:i.message)||`Request failed: ${t.status}`;throw new Error(l)}return await t.json()},vs={getModules:()=>_s("/system-admin/modules"),getModule:s=>_s(`/system-admin/modules/${s}`),importModule:async(s,a)=>{const t=new FormData;return t.append("file",s),a&&Object.keys(a).length>0&&t.append("manifestOverrides",JSON.stringify(a)),_s("/system-admin/modules/import",{method:"POST",body:t})},getImportJobs:()=>_s("/system-admin/modules/import-jobs"),getImportJob:s=>_s(`/system-admin/modules/import-jobs/${s}`),rollbackModule:async(s,a)=>{if(a!=null&&a.file){const i=new FormData;return i.append("file",a.file),a.requestedBy&&i.append("requestedBy",a.requestedBy),a.requestedByName&&i.append("requestedByName",a.requestedByName),_s(`/system-admin/modules/${s}/rollback/upload`,{method:"POST",body:i})}const t=a&&(a.jobId||a.requestedBy||a.requestedByName)?JSON.stringify({jobId:a.jobId,requestedBy:a.requestedBy,requestedByName:a.requestedByName}):void 0;return _s(`/system-admin/modules/${s}/rollback`,{method:"POST",headers:t?{"Content-Type":"application/json"}:void 0,body:t})},inspectUpdate:async(s,a)=>{const t=new FormData;return t.append("file",a),_s(`/system-admin/modules/${s}/update/inspect`,{method:"POST",body:t})},updateModule:async(s,a)=>{const t=new FormData;return t.append("file",a.file),t.append("updateType",a.updateType),a.selectedMenuIds&&t.append("selectedMenuIds",JSON.stringify(a.selectedMenuIds)),a.updatedBy&&t.append("updatedBy",a.updatedBy),a.updatedByName&&t.append("updatedByName",a.updatedByName),_s(`/system-admin/modules/${s}/update`,{method:"POST",body:t})},getMenus:()=>_s("/system-admin/menus"),createMenu:s=>_s("/system-admin/menus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),updateMenu:(s,a)=>_s(`/system-admin/menus/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),deleteMenu:s=>_s(`/system-admin/menus/${s}`,{method:"DELETE"}),deleteJobZip:s=>_s(`/system-admin/modules/import-jobs/${s}/zip`,{method:"DELETE"})};function Jl({className:s,...a}){return e.jsxDEV(Vm,{"data-slot":"radio-group",className:Fe("grid gap-3",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/radio-group.tsx",lineNumber:14,columnNumber:5},this)}function Wl({className:s,...a}){return e.jsxDEV(Tm,{"data-slot":"radio-group-item",className:Fe("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsxDEV(xm,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsxDEV($m,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/radio-group.tsx",lineNumber:39,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/radio-group.tsx",lineNumber:35,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/radio-group.tsx",lineNumber:27,columnNumber:5},this)}function zs({className:s,type:a,...t}){return e.jsxDEV("input",{type:a,"data-slot":"input",className:Fe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 flex h-9 w-full min-w-0 rounded-md px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","border border-border","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...t},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/input.tsx",lineNumber:7,columnNumber:5},this)}const Ao=s=>{if(!s)return"-";const a=new Date(s);return Number.isNaN(a.getTime())?s:a.toLocaleString()},wo=5;function Xl({open:s,onOpenChange:a,moduleId:t,moduleName:i,onCompleted:l}){const{user:n}=Sa(),[r,u]=E.useState("history"),[o,p]=E.useState([]),[h,m]=E.useState(""),[c,N]=E.useState(null),[g,v]=E.useState(!1),[b,V]=E.useState(!1),[D,f]=E.useState(null);E.useEffect(()=>{if(!s||!t)return;(async()=>{try{v(!0),f(null);const Q=await vs.getImportJobs();p(Q)}catch(Q){f(Q instanceof Error?Q.message:"Kh√¥ng th·ªÉ t·∫£i l·ªãch s·ª≠ rollback.")}finally{v(!1)}})()},[s,t]),E.useEffect(()=>{s||(u("history"),m(""),N(null),f(null))},[s]);const P=E.useMemo(()=>o.filter(y=>y.moduleId===t&&y.backupPath).sort((y,Q)=>Q.createdAt.localeCompare(y.createdAt)).slice(0,wo),[o,t]),x=async()=>{if(t){if(r==="history"&&!h){f("H√£y ch·ªçn m·ªôt phi√™n b·∫£n ƒë·ªÉ rollback.");return}if(r==="upload"&&!c){f("H√£y ch·ªçn file ZIP ƒë·ªÉ rollback.");return}try{V(!0),f(null);const y=await vs.rollbackModule(t,{jobId:r==="history"?h:void 0,file:r==="upload"?c??void 0:void 0,requestedBy:n==null?void 0:n.username,requestedByName:n==null?void 0:n.fullName});l==null||l(y),a(!1)}catch(y){f(y instanceof Error?y.message:"Rollback th·∫•t b·∫°i.")}finally{V(!1)}}};return e.jsxDEV(bi,{open:s,onOpenChange:a,children:e.jsxDEV(Pt,{className:"max-w-2xl",children:[e.jsxDEV(Lt,{children:[e.jsxDEV(Qt,{children:"Rollback m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:118,columnNumber:11},this),e.jsxDEV(_t,{children:i?`M√¥-ƒëun: ${i}`:"Ch·ªçn ngu·ªìn rollback cho m√¥-ƒëun."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:119,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:117,columnNumber:9},this),e.jsxDEV(Fl,{value:r,onValueChange:y=>u(y),children:[e.jsxDEV(Gl,{className:"grid w-full grid-cols-2",children:[e.jsxDEV(Wa,{value:"history",children:"Theo l·ªãch s·ª≠"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:126,columnNumber:13},this),e.jsxDEV(Wa,{value:"upload",children:"T·∫£i ZIP th·ªß c√¥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:127,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:125,columnNumber:11},this),e.jsxDEV(Xa,{value:"history",className:"space-y-4",children:[e.jsxDEV("div",{className:"rounded-md border border-dashed p-3 text-xs text-muted-foreground",children:"L∆∞u t·ªëi ƒëa 5 phi√™n b·∫£n g·∫ßn nh·∫•t. ∆Øu ti√™n rollback theo l·ªãch s·ª≠ ƒë·ªÉ ƒë·∫£m b·∫£o ƒë·ªìng b·ªô."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:131,columnNumber:13},this),g&&e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"ƒêang t·∫£i l·ªãch s·ª≠..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:134,columnNumber:32},this),!g&&P.length===0&&e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Ch∆∞a c√≥ phi√™n b·∫£n backup ƒë·ªÉ rollback."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:136,columnNumber:15},this),!g&&P.length>0&&e.jsxDEV(Jl,{value:h,onValueChange:m,className:"space-y-3",children:P.map(y=>{const Q=y.backupVersion??y.previousVersion??"-";return e.jsxDEV("label",{className:"flex items-start gap-3 rounded-md border p-3 hover:bg-muted/30",children:[e.jsxDEV(Wl,{value:y.id,id:`rollback-${y.id}`},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:147,columnNumber:23},this),e.jsxDEV("div",{className:"flex-1 space-y-1",children:[e.jsxDEV("div",{className:"font-medium",children:["Rollback v·ªÅ v",Q]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:149,columnNumber:25},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["Job ",y.id," ¬∑ ",Ao(y.createdAt)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:150,columnNumber:25},this),y.version&&e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["Phi√™n b·∫£n ƒë√£ c√†i: v",y.version]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:154,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:148,columnNumber:23},this),y.operation&&e.jsxDEV($e,{variant:"outline",children:y.operation},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:159,columnNumber:41},this)]},y.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:143,columnNumber:21},this)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:139,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:130,columnNumber:11},this),e.jsxDEV(Xa,{value:"upload",className:"space-y-4",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"ZIP ph·∫£i c√≥ module.json ƒë√∫ng chu·∫©n v√† t√™n file tr√πng v·ªõi module ID."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:168,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(zs,{type:"file",accept:".zip",onChange:y=>{var Q;return N(((Q=y.target.files)==null?void 0:Q[0])??null)},disabled:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:172,columnNumber:15},this),e.jsxDEV(xt,{className:"h-5 w-5 text-muted-foreground"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:178,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:171,columnNumber:13},this),c&&e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["ƒê√£ ch·ªçn: ",e.jsxDEV("span",{className:"font-medium text-foreground",children:c.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:182,columnNumber:26},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:167,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:124,columnNumber:9},this),D&&e.jsxDEV("div",{className:"rounded-md border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive flex items-start gap-2",children:[e.jsxDEV(La,{className:"h-4 w-4 mt-0.5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:190,columnNumber:13},this),e.jsxDEV("span",{children:D},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:191,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:189,columnNumber:11},this),e.jsxDEV(jt,{children:e.jsxDEV(we,{variant:"destructive",onClick:()=>void x(),disabled:b||!t,children:b?"ƒêang rollback...":"Rollback"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:196,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:195,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:116,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModuleRollbackDialog.tsx",lineNumber:115,columnNumber:5},this)}const wi=s=>{if(!s)return"-";const a=new Date(s);return Number.isNaN(a.getTime())?s:a.toLocaleString()},ko=s=>s==="inactive"?"T·∫°m d·ª´ng":"Ho·∫°t ƒë·ªông",kt=(s,a,t,i)=>e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsxDEV($e,{variant:t,children:a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:34,columnNumber:7},void 0),e.jsxDEV("span",{className:"text-muted-foreground",children:[s.length," file"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:35,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:33,columnNumber:5},void 0),s.length===0?e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Kh√¥ng c√≥ thay ƒë·ªïi."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:38,columnNumber:7},void 0):e.jsxDEV("ul",{className:"space-y-1 text-xs text-muted-foreground",children:s.map(l=>e.jsxDEV("li",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-medium text-foreground",children:i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:43,columnNumber:13},void 0),e.jsxDEV("span",{children:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:44,columnNumber:13},void 0)]},l,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:42,columnNumber:11},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:40,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:32,columnNumber:3},void 0),Ro=s=>s==="added"?e.jsxDEV($e,{variant:"secondary",children:"Th√™m"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:53,columnNumber:34},void 0):s==="modified"?e.jsxDEV($e,{variant:"outline",children:"S·ª≠a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:54,columnNumber:37},void 0):e.jsxDEV($e,{variant:"default",children:"·ªîn ƒë·ªãnh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:55,columnNumber:10},void 0),ki=s=>s==="exists"?e.jsxDEV($e,{variant:"secondary",children:"ƒê√£ c√≥"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:59,columnNumber:35},void 0):s==="missing"?e.jsxDEV($e,{variant:"destructive",children:"Thi·∫øu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:60,columnNumber:36},void 0):e.jsxDEV($e,{variant:"outline",children:"Ch∆∞a x√°c ƒë·ªãnh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:61,columnNumber:10},void 0),Oo=s=>e.jsxDEV($e,{variant:s?"secondary":"destructive",children:["Mock ",s?"c√≥":"thi·∫øu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:65,columnNumber:3},void 0),Uo=s=>e.jsxDEV($e,{variant:s===!1?"outline":"secondary",children:s===!1?"T·∫Øt":"B·∫≠t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:71,columnNumber:3},void 0);function $o(){var N,g,v,b,V,D,f,P,x,y,Q,U;const{id:s}=Ys(),[a,t]=E.useState(null),[i,l]=E.useState(!0),[n,r]=E.useState(null),[u,o]=E.useState(!1);E.useEffect(()=>{(async()=>{if(!s){r("Thi·∫øu module ID."),l(!1);return}try{l(!0),r(null);const A=await vs.getModule(s);t(A)}catch(A){r(A instanceof Error?A.message:"Kh√¥ng th·ªÉ t·∫£i chi ti·∫øt m√¥-ƒëun.")}finally{l(!1)}})()},[s]);const p=async()=>{if(a!=null&&a.id)try{const j=await vs.getModule(a.id);t(j)}catch(j){r(j instanceof Error?j.message:"Kh√¥ng th·ªÉ t·∫£i l·∫°i m√¥-ƒëun sau rollback.")}},h=((N=a==null?void 0:a.dataModel)==null?void 0:N.tables)??[],m=h.reduce((j,A)=>(A.dbStatus==="exists"?j.exists+=1:A.dbStatus==="missing"?j.missing+=1:j.unknown+=1,j),{exists:0,missing:0,unknown:0}),c=(a==null?void 0:a.linkedMenus)??[];return e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã",href:"/admin"},{label:"Qu·∫£n tr·ªã Module",href:"/system/modules"},{label:(a==null?void 0:a.name)??s??"Chi ti·∫øt m√¥-ƒëun"}],title:(a==null?void 0:a.name)??"Chi ti·∫øt m√¥-ƒëun",actions:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(we,{variant:"outline",asChild:!0,children:e.jsxDEV(As,{to:"/system/modules",children:[e.jsxDEV(sa,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:142,columnNumber:17},this),"Quay l·∫°i"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:141,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:140,columnNumber:13},this),(a==null?void 0:a.id)&&e.jsxDEV(we,{variant:"outline",asChild:!0,children:e.jsxDEV(As,{to:`/system/modules/${a.id}/update`,children:"C·∫≠p nh·∫≠t m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:148,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:147,columnNumber:15},this),e.jsxDEV(we,{variant:"destructive",onClick:()=>o(!0),disabled:!a,children:[e.jsxDEV(oi,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:154,columnNumber:15},this),"Rollback"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:153,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:139,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:130,columnNumber:7},this),e.jsxDEV("div",{className:"px-6 pb-8 space-y-6",children:[i&&e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"ƒêang t·∫£i m√¥-ƒëun..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:162,columnNumber:21},this),n&&e.jsxDEV("div",{className:"text-sm text-destructive",children:n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:163,columnNumber:19},this),!i&&a&&e.jsxDEV(Fl,{defaultValue:"overview",className:"space-y-6",children:[e.jsxDEV(Gl,{children:[e.jsxDEV(Wa,{value:"overview",children:"T·ªïng quan file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:168,columnNumber:15},this),e.jsxDEV(Wa,{value:"data-model",children:"L∆∞·ª£c ƒë·ªì d·ªØ li·ªáu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:169,columnNumber:15},this),e.jsxDEV(Wa,{value:"menus",children:"Li√™n k·∫øt menu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:170,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:167,columnNumber:13},this),e.jsxDEV(Xa,{value:"overview",className:"space-y-6",children:[e.jsxDEV("div",{className:"grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"Th√¥ng tin m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:177,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:176,columnNumber:19},this),e.jsxDEV(Ze,{className:"space-y-4 text-sm",children:[e.jsxDEV("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"ID m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:182,columnNumber:25},this),e.jsxDEV("div",{className:"font-medium",children:a.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:183,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:181,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"Tr·∫°ng th√°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:186,columnNumber:25},this),e.jsxDEV($e,{variant:a.status==="inactive"?"outline":"secondary",children:ko(a.status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:187,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:185,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"Phi√™n b·∫£n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:192,columnNumber:25},this),e.jsxDEV("div",{className:"font-medium",children:["v",a.version]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:193,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:191,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"Base path"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:196,columnNumber:25},this),e.jsxDEV("div",{className:"font-medium",children:a.basePath},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:197,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:195,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"Entry"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:200,columnNumber:25},this),e.jsxDEV("div",{className:"font-medium",children:a.entry},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:201,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:199,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"Routes"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:204,columnNumber:25},this),e.jsxDEV("div",{className:"font-medium",children:a.routes},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:205,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:203,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"Route export"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:208,columnNumber:25},this),e.jsxDEV("div",{className:"font-medium",children:a.routeExport??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:209,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:207,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"C√†i ƒë·∫∑t l√∫c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:212,columnNumber:25},this),e.jsxDEV("div",{className:"font-medium",children:wi(a.installedAt)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:213,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:211,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:180,columnNumber:21},this),(g=a.permissions)!=null&&g.length?e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground mb-2",children:"Permissions"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:218,columnNumber:25},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:a.permissions.map(j=>e.jsxDEV($e,{variant:"outline",children:j},j,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:221,columnNumber:29},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:219,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:217,columnNumber:23},this):null]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:179,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:175,columnNumber:17},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"Danh s√°ch file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:233,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:232,columnNumber:19},this),e.jsxDEV(Ze,{children:a.files&&a.files.length>0?e.jsxDEV("div",{className:"max-h-[360px] overflow-auto rounded-md border p-3 text-sm",children:e.jsxDEV("ul",{className:"space-y-1",children:a.files.map(j=>e.jsxDEV("li",{className:"text-muted-foreground",children:j},j,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:240,columnNumber:29},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:238,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:237,columnNumber:23},this):e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Ch∆∞a c√≥ file n√†o."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:247,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:235,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:231,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:174,columnNumber:15},this),e.jsxDEV("div",{className:"grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"File CSS trong m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:256,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:255,columnNumber:19},this),e.jsxDEV(Ze,{className:"space-y-4 text-sm",children:[a.cssAudit&&a.cssAudit.length>0?e.jsxDEV("div",{className:"max-h-[240px] overflow-auto rounded-md border",children:e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{className:"bg-muted text-muted-foreground",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"p-2 text-left",children:"File"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:264,columnNumber:31},this),e.jsxDEV("th",{className:"p-2 text-left",children:"Tr·∫°ng th√°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:265,columnNumber:31},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:263,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:262,columnNumber:27},this),e.jsxDEV("tbody",{children:a.cssAudit.map(j=>e.jsxDEV("tr",{className:"border-t",children:[e.jsxDEV("td",{className:"p-2 text-muted-foreground",children:j.path},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:271,columnNumber:33},this),e.jsxDEV("td",{className:"p-2",children:Ro(j.status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:272,columnNumber:33},this)]},j.path,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:270,columnNumber:31},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:268,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:261,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:260,columnNumber:23},this):e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Kh√¥ng t√¨m th·∫•y file CSS."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:279,columnNumber:23},this),a.missingCssImports&&a.missingCssImports.length>0?e.jsxDEV("div",{className:"rounded-md border border-destructive/30 bg-destructive/10 p-3 text-sm text-destructive",children:[e.jsxDEV("div",{className:"font-medium",children:"Import CSS b·ªã thi·∫øu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:284,columnNumber:25},this),e.jsxDEV("ul",{className:"mt-2 space-y-1 text-xs",children:a.missingCssImports.map(j=>e.jsxDEV("li",{children:j},j,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:287,columnNumber:29},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:285,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:283,columnNumber:23},this):e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Kh√¥ng ph√°t hi·ªán l·ªói import CSS."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:292,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:258,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:254,columnNumber:17},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"T√¨nh tr·∫°ng file h·ªá th·ªëng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:299,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:298,columnNumber:19},this),e.jsxDEV(Ze,{className:"space-y-3 text-sm",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Entry file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:303,columnNumber:23},this),e.jsxDEV($e,{variant:(v=a.fileHealth)!=null&&v.entryExists?"secondary":"destructive",children:(b=a.fileHealth)!=null&&b.entryExists?"T·ªìn t·∫°i":"Thi·∫øu file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:304,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:302,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Routes file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:309,columnNumber:23},this),e.jsxDEV($e,{variant:(V=a.fileHealth)!=null&&V.routesExists?"secondary":"destructive",children:(D=a.fileHealth)!=null&&D.routesExists?"T·ªìn t·∫°i":"Thi·∫øu file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:310,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:308,columnNumber:21},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Ki·ªÉm tra c√°c file m√† module.json ƒëang tr·ªè t·ªõi ƒë·ªÉ ƒë·∫£m b·∫£o module ho·∫°t ƒë·ªông."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:314,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:301,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:297,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:253,columnNumber:15},this),a.fileChanges&&e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base flex items-center gap-2",children:[e.jsxDEV(di,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:325,columnNumber:23},this),"Thay ƒë·ªïi file so v·ªõi b·∫£n tr∆∞·ªõc"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:324,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:323,columnNumber:19},this),e.jsxDEV(Ze,{className:"space-y-4 text-sm",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-4 text-xs text-muted-foreground",children:[e.jsxDEV("span",{children:["So v·ªõi phi√™n b·∫£n: ",a.fileChanges.baseVersion??"-"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:331,columnNumber:23},this),a.fileChanges.baseAt&&e.jsxDEV("span",{children:["Th·ªùi ƒëi·ªÉm: ",wi(a.fileChanges.baseAt)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:333,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:330,columnNumber:21},this),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-3",children:[kt(a.fileChanges.added??[],"Th√™m","secondary","A"),kt(a.fileChanges.modified??[],"S·ª≠a","outline","M"),kt(a.fileChanges.removed??[],"X√≥a","destructive","D")]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:336,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:329,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:322,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:173,columnNumber:13},this),e.jsxDEV(Xa,{value:"data-model",className:"space-y-6",children:e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"L∆∞·ª£c ƒë·ªì d·ªØ li·ªáu c·∫ßn c√≥"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:349,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:348,columnNumber:17},this),e.jsxDEV(Ze,{className:"space-y-4 text-sm",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-4 text-xs text-muted-foreground",children:[e.jsxDEV("span",{children:["Prefix: ",((f=a.dataModel)==null?void 0:f.prefix)??"-"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:353,columnNumber:21},this),e.jsxDEV("span",{children:["Ngu·ªìn schema: ",((P=a.dataModel)==null?void 0:P.schemaSource)??"Ch∆∞a c√≥ snapshot"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:354,columnNumber:21},this),e.jsxDEV("span",{children:["T·ªïng b·∫£ng: ",h.length]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:355,columnNumber:21},this),e.jsxDEV("span",{children:["ƒê√£ c√≥: ",m.exists," | Thi·∫øu: ",m.missing," | Ch∆∞a x√°c ƒë·ªãnh: ",m.unknown]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:356,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:352,columnNumber:19},this),h.length>0?e.jsxDEV("div",{className:"space-y-4",children:h.map(j=>{var A,z,W;return e.jsxDEV("div",{className:"rounded-md border p-4 space-y-3",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxDEV("div",{className:"font-medium",children:j.table},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:366,columnNumber:29},this),ki(j.dbStatus)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:365,columnNumber:27},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["Ngu·ªìn mock: ",(A=j.source)!=null&&A.length?j.source.join(", "):"Ch∆∞a c√≥ d·ªØ li·ªáu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:369,columnNumber:27},this),(z=j.fields)!=null&&z.length?e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:j.fields.map(X=>e.jsxDEV($e,{variant:"outline",children:X},X,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:375,columnNumber:33},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:373,columnNumber:29},this):e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Ch∆∞a suy di·ªÖn ƒë∆∞·ª£c c·ªôt t·ª´ mock data."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:381,columnNumber:29},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"text-xs font-medium text-muted-foreground",children:"Li√™n k·∫øt b·∫£ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:385,columnNumber:29},this),(W=j.relations)!=null&&W.length?e.jsxDEV("div",{className:"space-y-2 text-xs",children:j.relations.map(X=>e.jsxDEV("div",{className:"flex flex-wrap items-center gap-2 rounded-md border px-3 py-2",children:[e.jsxDEV("span",{className:"font-medium",children:X.column},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:390,columnNumber:37},this),e.jsxDEV("span",{className:"text-muted-foreground",children:["‚Üí ",X.targetTable]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:391,columnNumber:37},this),ki(X.status),Oo(X.existsInMock)]},`${j.table}-${X.column}`,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:389,columnNumber:35},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:387,columnNumber:31},this):e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Kh√¥ng ph√°t hi·ªán c·ªôt li√™n k·∫øt."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:398,columnNumber:31},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:384,columnNumber:27},this)]},j.table,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:364,columnNumber:25},this)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:362,columnNumber:21},this):e.jsxDEV("div",{className:"rounded-md border border-dashed p-4 text-sm text-muted-foreground",children:["Ch∆∞a t√¨m th·∫•y mock data trong th∆∞ m·ª•c ",e.jsxDEV("code",{children:"data/"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:406,columnNumber:61},this)," c·ªßa m√¥-ƒëun."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:405,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:351,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:347,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:346,columnNumber:13},this),e.jsxDEV(Xa,{value:"menus",className:"space-y-6",children:e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{className:"flex flex-row items-start justify-between gap-2",children:[e.jsxDEV("div",{children:[e.jsxDEV(qe,{className:"text-base",children:"Menu ƒëang li√™n k·∫øt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:417,columnNumber:21},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"C√°c menu hi·ªán ƒëang tr·ªè t·ªõi m√¥-ƒëun n√†y."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:418,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:416,columnNumber:19},this),e.jsxDEV(we,{variant:"outline",asChild:!0,children:e.jsxDEV(As,{to:"/system/menus",children:"Qu·∫£n tr·ªã menu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:423,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:422,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:415,columnNumber:17},this),e.jsxDEV(Ze,{className:"space-y-4 text-sm",children:c.length>0?e.jsxDEV("div",{className:"max-h-[360px] overflow-auto rounded-md border",children:e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{className:"bg-muted text-muted-foreground",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"p-2 text-left",children:"Nh√£n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:432,columnNumber:29},this),e.jsxDEV("th",{className:"p-2 text-left",children:"ƒê∆∞·ªùng d·∫´n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:433,columnNumber:29},this),e.jsxDEV("th",{className:"p-2 text-left",children:"Tr·∫°ng th√°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:434,columnNumber:29},this),e.jsxDEV("th",{className:"p-2 text-left",children:"Menu ID"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:435,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:431,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:430,columnNumber:25},this),e.jsxDEV("tbody",{children:c.map(j=>e.jsxDEV("tr",{className:"border-t",children:[e.jsxDEV("td",{className:"p-2 font-medium",children:j.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:441,columnNumber:31},this),e.jsxDEV("td",{className:"p-2 text-muted-foreground",children:j.path??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:442,columnNumber:31},this),e.jsxDEV("td",{className:"p-2",children:Uo(j.isEnabled)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:443,columnNumber:31},this),e.jsxDEV("td",{className:"p-2 text-muted-foreground",children:j.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:444,columnNumber:31},this)]},j.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:440,columnNumber:29},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:438,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:429,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:428,columnNumber:21},this):e.jsxDEV("div",{className:"rounded-md border border-dashed p-4 text-sm text-muted-foreground space-y-2",children:[e.jsxDEV("div",{className:"font-medium text-foreground",children:"Ch∆∞a c√≥ menu li√™n k·∫øt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:452,columnNumber:23},this),e.jsxDEV("div",{children:"H√£y t·∫°o menu ho·∫∑c li√™n k·∫øt m√¥-ƒëun t·∫°i ph√¢n h·ªá qu·∫£n tr·ªã menu."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:453,columnNumber:23},this),(x=a.ui)!=null&&x.menuLabel||(y=a.ui)!=null&&y.menuPath?e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["G·ª£i √Ω t·ª´ manifest: ",((Q=a.ui)==null?void 0:Q.menuLabel)??"-"," (",((U=a.ui)==null?void 0:U.menuPath)??"-",")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:455,columnNumber:25},this):null]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:451,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:426,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:414,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:413,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:166,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:161,columnNumber:7},this),e.jsxDEV(Xl,{open:u,onOpenChange:o,moduleId:a==null?void 0:a.id,moduleName:a==null?void 0:a.name,onCompleted:p},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:468,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleDetailPage.tsx",lineNumber:129,columnNumber:5},this)}const Ko=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"}));function Nt({className:s,...a}){return e.jsxDEV("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsxDEV("table",{"data-slot":"table",className:Fe("w-full caption-bottom text-sm table-fixed",s),style:{tableLayout:"fixed"},...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/table.tsx",lineNumber:13,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/table.tsx",lineNumber:9,columnNumber:5},this)}function ft({className:s,...a}){return e.jsxDEV("thead",{"data-slot":"table-header",className:Fe("[&_tr]:border-b",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/table.tsx",lineNumber:25,columnNumber:5},this)}function vt({className:s,...a}){return e.jsxDEV("tbody",{"data-slot":"table-body",className:Fe("[&_tr:last-child]:border-0",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/table.tsx",lineNumber:35,columnNumber:5},this)}function Ms({className:s,...a}){return e.jsxDEV("tr",{"data-slot":"table-row",className:Fe("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/table.tsx",lineNumber:58,columnNumber:5},this)}function xs({className:s,...a}){return e.jsxDEV("th",{"data-slot":"table-head",className:Fe("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap overflow-hidden text-ellipsis [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/table.tsx",lineNumber:71,columnNumber:5},this)}function ts({className:s,...a}){return e.jsxDEV("td",{"data-slot":"table-cell",className:Fe("p-2 align-middle overflow-hidden text-ellipsis whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/table.tsx",lineNumber:84,columnNumber:5},this)}const Ri=s=>{if(!s)return"-";const a=new Date(s);return Number.isNaN(a.getTime())?s:a.toLocaleString()},Zo=s=>{if(!s)return"-";const a=1024,t=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(s)/Math.log(a));return`${Math.round(s/Math.pow(a,i)*100)/100} ${t[i]}`},zo={pending:"ƒêang ch·ªù",validating:"ƒêang ki·ªÉm tra",importing:"ƒêang c√†i",completed:"Ho√†n t·∫•t",failed:"Th·∫•t b·∫°i",rolled_back:"ƒê√£ rollback"},Bo=s=>s==="failed"?"destructive":s==="completed"||s==="rolled_back"?"default":"secondary";function qo(){var m;const[s,a]=E.useState([]),[t,i]=E.useState(!0),[l,n]=E.useState(null),[r,u]=E.useState(null),o=async()=>{try{i(!0),n(null);const c=await vs.getImportJobs();a(c)}catch(c){n(c instanceof Error?c.message:"Kh√¥ng th·ªÉ t·∫£i l·ªãch s·ª≠ import.")}finally{i(!1)}};E.useEffect(()=>{o()},[]);const p=async c=>{if(window.confirm("X√≥a file ZIP l∆∞u tr·ªØ c·ªßa job n√†y?"))try{u(c),await vs.deleteJobZip(c),await o()}catch(g){n(g instanceof Error?g.message:"Kh√¥ng th·ªÉ x√≥a ZIP l∆∞u tr·ªØ.")}finally{u(null)}},h=E.useMemo(()=>s.filter(c=>c.status==="completed").length,[s]);return e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã",href:"/admin"},{label:"Qu·∫£n tr·ªã Module",href:"/system/modules"},{label:"L·ªãch s·ª≠ import"}],title:"L·ªãch s·ª≠ import m√¥-ƒëun",actions:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(we,{variant:"outline",asChild:!0,children:e.jsxDEV(As,{to:"/system/modules/import",children:[e.jsxDEV(ui,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:101,columnNumber:17},this),"Import m·ªõi"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:100,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:99,columnNumber:13},this),e.jsxDEV(we,{variant:"ghost",onClick:()=>void o(),children:[e.jsxDEV(ci,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:106,columnNumber:15},this),"L√†m m·ªõi"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:105,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:89,columnNumber:7},this),e.jsxDEV("div",{className:"px-6 pb-8 space-y-6",children:[e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-sm font-medium",children:"T·ªïng job"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:117,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:116,columnNumber:13},this),e.jsxDEV(Ze,{children:[e.jsxDEV("div",{className:"text-2xl font-semibold",children:s.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:120,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"T·∫•t c·∫£ job import"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:121,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:119,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:115,columnNumber:11},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-sm font-medium",children:"Ho√†n t·∫•t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:126,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:125,columnNumber:13},this),e.jsxDEV(Ze,{children:[e.jsxDEV("div",{className:"text-2xl font-semibold",children:h},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:129,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Job import th√†nh c√¥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:130,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:124,columnNumber:11},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsxDEV(yt,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:136,columnNumber:17},this),"C·∫≠p nh·∫≠t g·∫ßn nh·∫•t"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:135,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:134,columnNumber:13},this),e.jsxDEV(Ze,{children:[e.jsxDEV("div",{className:"text-sm font-medium",children:(m=s[0])!=null&&m.createdAt?Ri(s[0].createdAt):"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:141,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Theo job m·ªõi nh·∫•t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:144,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:140,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:133,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:114,columnNumber:9},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"Danh s√°ch job"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:151,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:150,columnNumber:11},this),e.jsxDEV(Ze,{className:"space-y-4",children:[t&&e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"ƒêang t·∫£i l·ªãch s·ª≠..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:154,columnNumber:25},this),l&&e.jsxDEV("div",{className:"text-sm text-destructive",children:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:155,columnNumber:23},this),!t&&s.length===0?e.jsxDEV("div",{className:"rounded-lg border border-dashed p-6 text-center text-sm text-muted-foreground",children:"Ch∆∞a c√≥ job import n√†o."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:157,columnNumber:15},this):e.jsxDEV(Nt,{children:[e.jsxDEV(ft,{children:e.jsxDEV(Ms,{children:[e.jsxDEV(xs,{children:"Job"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:164,columnNumber:21},this),e.jsxDEV(xs,{children:"M√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:165,columnNumber:21},this),e.jsxDEV(xs,{children:"Tr·∫°ng th√°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:166,columnNumber:21},this),e.jsxDEV(xs,{children:"File"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:167,columnNumber:21},this),e.jsxDEV(xs,{children:"ZIP l∆∞u"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:168,columnNumber:21},this),e.jsxDEV(xs,{children:"Dung l∆∞·ª£ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:169,columnNumber:21},this),e.jsxDEV(xs,{children:"Th·ªùi gian"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:170,columnNumber:21},this),e.jsxDEV(xs,{children:"Th√¥ng b√°o"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:171,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:163,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:162,columnNumber:17},this),e.jsxDEV(vt,{children:s.map(c=>e.jsxDEV(Ms,{children:[e.jsxDEV(ts,{className:"font-medium",children:c.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:177,columnNumber:23},this),e.jsxDEV(ts,{children:c.moduleName??c.moduleId??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:178,columnNumber:23},this),e.jsxDEV(ts,{children:e.jsxDEV($e,{variant:Bo(c.status),children:zo[c.status]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:180,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:179,columnNumber:23},this),e.jsxDEV(ts,{children:c.fileName??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:182,columnNumber:23},this),e.jsxDEV(ts,{children:c.storedZipName?e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-xs",children:c.storedZipName},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:186,columnNumber:29},this),e.jsxDEV(we,{variant:"ghost",size:"icon",title:"X√≥a ZIP l∆∞u tr·ªØ",onClick:()=>void p(c.id),disabled:r===c.id,children:e.jsxDEV(Et,{className:"h-4 w-4 text-destructive"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:194,columnNumber:31},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:187,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:185,columnNumber:27},this):"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:183,columnNumber:23},this),e.jsxDEV(ts,{children:Zo(c.storedZipSize??c.fileSize)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:201,columnNumber:23},this),e.jsxDEV(ts,{children:Ri(c.createdAt)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:202,columnNumber:23},this),e.jsxDEV(ts,{className:"text-muted-foreground",children:c.errorMessage??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:203,columnNumber:23},this)]},c.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:176,columnNumber:21},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:174,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:161,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:153,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:149,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:113,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportHistoryPage.tsx",lineNumber:88,columnNumber:5},this)}const Fo=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"}));function Go({delayDuration:s=0,...a}){return e.jsxDEV(Lm,{"data-slot":"tooltip-provider",delayDuration:s,...a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/tooltip.tsx",lineNumber:13,columnNumber:5},this)}function Rt({...s}){return e.jsxDEV(Go,{children:e.jsxDEV(ym,{"data-slot":"tooltip",...s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/tooltip.tsx",lineNumber:26,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/tooltip.tsx",lineNumber:25,columnNumber:5},this)}function Ot({...s}){return e.jsxDEV(Em,{"data-slot":"tooltip-trigger",...s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/tooltip.tsx",lineNumber:34,columnNumber:10},this)}function Ut({className:s,sideOffset:a=0,children:t,...i}){return e.jsxDEV(Hm,{children:e.jsxDEV(Dm,{"data-slot":"tooltip-content",sideOffset:a,className:Fe("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),...i,children:[t,e.jsxDEV(Pm,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/tooltip.tsx",lineNumber:55,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/tooltip.tsx",lineNumber:45,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/tooltip.tsx",lineNumber:44,columnNumber:5},this)}const Jo="_zipUploadBox_1p0w2_1",Wo="_dragOver_1p0w2_31",Xo="_uploadIcon_1p0w2_43",Yo="_uploadTitle_1p0w2_57",ed="_uploadHint_1p0w2_69",sd="_uploadedFile_1p0w2_81",ad="_fileInfo_1p0w2_101",td="_fileName_1p0w2_113",id="_fileSize_1p0w2_123",ld="_removeButton_1p0w2_133",Gs={zipUploadBox:Jo,dragOver:Wo,uploadIcon:Xo,uploadTitle:Yo,uploadHint:ed,uploadedFile:sd,fileInfo:ad,fileName:td,fileSize:id,removeButton:ld};function Yl({onFileSelect:s,acceptedFile:a,onRemove:t,disabled:i=!1}){const[l,n]=E.useState(!1),r=E.useRef(null),u=N=>{N.preventDefault(),i||n(!0)},o=()=>{n(!1)},p=N=>{if(N.preventDefault(),n(!1),i)return;const v=Array.from(N.dataTransfer.files).find(b=>b.name.endsWith(".zip"));v&&s(v)},h=N=>{const g=N.target.files;g&&g.length>0&&s(g[0])},m=()=>{var N;!i&&!a&&((N=r.current)==null||N.click())},c=N=>{if(N===0)return"0 Bytes";const g=1024,v=["Bytes","KB","MB","GB"],b=Math.floor(Math.log(N)/Math.log(g));return Math.round(N/Math.pow(g,b)*100)/100+" "+v[b]};return e.jsxDEV("div",{children:[e.jsxDEV("div",{className:`${Gs.zipUploadBox} ${l?Gs.dragOver:""}`,onDragOver:u,onDragLeave:o,onDrop:p,onClick:m,style:{opacity:i?.6:1,cursor:i?"not-allowed":"pointer"},children:[e.jsxDEV(ui,{className:Gs.uploadIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV("div",{className:Gs.uploadTitle,children:a?"File ƒë√£ ch·ªçn":"K√©o th·∫£ file .zip v√†o ƒë√¢y"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:76,columnNumber:9},this),e.jsxDEV("div",{className:Gs.uploadHint,children:a?'Click n√∫t "X√≥a" ƒë·ªÉ ch·ªçn file kh√°c':"ho·∫∑c click ƒë·ªÉ ch·ªçn file t·ª´ m√°y t√≠nh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:79,columnNumber:9},this),e.jsxDEV("input",{ref:r,type:"file",accept:".zip",onChange:h,style:{display:"none"},disabled:i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:82,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:67,columnNumber:7},this),a&&e.jsxDEV("div",{className:Gs.uploadedFile,children:[e.jsxDEV("div",{className:Gs.fileInfo,children:[e.jsxDEV(pi,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:95,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:Gs.fileName,children:a.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:97,columnNumber:15},this),e.jsxDEV("div",{className:Gs.fileSize,children:c(a.size)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:98,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:96,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:94,columnNumber:11},this),t&&e.jsxDEV("button",{className:Gs.removeButton,onClick:N=>{N.stopPropagation(),t()},disabled:i,children:e.jsxDEV(Ht,{className:"h-5 w-5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:110,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:102,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:93,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ZipUploadBox.tsx",lineNumber:66,columnNumber:5},this)}const nd="_validationResults_1xeyo_1",md="_resultItem_1xeyo_9",rd="_success_1xeyo_27",od="_error_1xeyo_37",dd="_warning_1xeyo_47",ud="_resultIcon_1xeyo_57",cd="_resultContent_1xeyo_91",pd="_resultMessage_1xeyo_99",gd="_resultDetails_1xeyo_111",hd="_summary_1xeyo_123",Nd="_summaryItem_1xeyo_143",fd="_summaryCount_1xeyo_157",Ds={validationResults:nd,resultItem:md,success:rd,error:od,warning:dd,resultIcon:ud,resultContent:cd,resultMessage:pd,resultDetails:gd,summary:hd,summaryItem:Nd,summaryCount:fd};function en({results:s,showSummary:a=!0}){const t=s.filter(r=>r.type==="success").length,i=s.filter(r=>r.type==="error").length,l=s.filter(r=>r.type==="warning").length,n=r=>{switch(r){case"success":return e.jsxDEV(ji,{className:"h-5 w-5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:23,columnNumber:16},this);case"error":return e.jsxDEV(Qi,{className:"h-5 w-5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:25,columnNumber:16},this);case"warning":return e.jsxDEV(La,{className:"h-5 w-5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:27,columnNumber:16},this)}};return e.jsxDEV("div",{className:Ds.validationResults,children:[a&&e.jsxDEV("div",{className:Ds.summary,children:[t>0&&e.jsxDEV("div",{className:Ds.summaryItem,children:[e.jsxDEV(ji,{className:"h-4 w-4 text-success"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:37,columnNumber:15},this),e.jsxDEV("span",{className:Ds.summaryCount,children:t},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:38,columnNumber:15},this),e.jsxDEV("span",{children:"Th√†nh c√¥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:39,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:36,columnNumber:13},this),i>0&&e.jsxDEV("div",{className:Ds.summaryItem,children:[e.jsxDEV(Qi,{className:"h-4 w-4 text-destructive"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:44,columnNumber:15},this),e.jsxDEV("span",{className:Ds.summaryCount,children:i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:45,columnNumber:15},this),e.jsxDEV("span",{children:"L·ªói"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:46,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:43,columnNumber:13},this),l>0&&e.jsxDEV("div",{className:Ds.summaryItem,children:[e.jsxDEV(La,{className:"h-4 w-4 text-warning"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:51,columnNumber:15},this),e.jsxDEV("span",{className:Ds.summaryCount,children:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:52,columnNumber:15},this),e.jsxDEV("span",{children:"C·∫£nh b√°o"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:53,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:50,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:34,columnNumber:9},this),s.map((r,u)=>e.jsxDEV("div",{className:`${Ds.resultItem} ${Ds[r.type]}`,children:[e.jsxDEV("div",{className:`${Ds.resultIcon} ${Ds[r.type]}`,children:n(r.type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:61,columnNumber:11},this),e.jsxDEV("div",{className:Ds.resultContent,children:[e.jsxDEV("div",{className:Ds.resultMessage,children:r.message},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:65,columnNumber:13},this),r.details&&e.jsxDEV("div",{className:Ds.resultDetails,children:r.details},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:67,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:64,columnNumber:11},this)]},u,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:60,columnNumber:9},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ValidationResults.tsx",lineNumber:32,columnNumber:5},this)}const vd="_timeline_1wyqw_1",bd="_timelineItem_1wyqw_11",Vd="_timelineDot_1wyqw_57",Td="_pending_1wyqw_85",xd="_validating_1wyqw_95",yd="_importing_1wyqw_105",Ed="_completed_1wyqw_115",Hd="_failed_1wyqw_125",Dd="_rolled_back_1wyqw_135",Pd="_timelineContent_1wyqw_145",Ld="_timelineStatus_1wyqw_157",jd="_timelineMessage_1wyqw_205",Qd="_timelineTimestamp_1wyqw_215",_d="_timelineDetails_1wyqw_225",Js={timeline:vd,timelineItem:bd,timelineDot:Vd,pending:Td,validating:xd,importing:yd,completed:Ed,failed:Hd,rolled_back:Dd,timelineContent:Pd,timelineStatus:Ld,timelineMessage:jd,timelineTimestamp:Qd,timelineDetails:_d},Cd={pending:"ƒêang ch·ªù",validating:"ƒêang ki·ªÉm tra",importing:"ƒêang c√†i",completed:"Ho√†n t·∫•t",failed:"Th·∫•t b·∫°i",rolled_back:"ƒê√£ rollback"};function ti({events:s}){const a=t=>new Date(t).toLocaleString("vi-VN",{hour:"2-digit",minute:"2-digit",second:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"});return e.jsxDEV("div",{className:Js.timeline,children:s.map((t,i)=>e.jsxDEV("div",{className:Js.timelineItem,children:[e.jsxDEV("div",{className:`${Js.timelineDot} ${Js[t.status]}`},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ImportJobTimeline.tsx",lineNumber:39,columnNumber:11},this),e.jsxDEV("div",{className:Js.timelineContent,children:[e.jsxDEV("div",{className:`${Js.timelineStatus} ${Js[t.status]}`,children:Cd[t.status]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ImportJobTimeline.tsx",lineNumber:41,columnNumber:13},this),e.jsxDEV("div",{className:Js.timelineMessage,children:t.message},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ImportJobTimeline.tsx",lineNumber:44,columnNumber:13},this),e.jsxDEV("div",{className:Js.timelineTimestamp,children:a(t.timestamp)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ImportJobTimeline.tsx",lineNumber:45,columnNumber:13},this),t.details&&e.jsxDEV("div",{className:Js.timelineDetails,children:t.details},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ImportJobTimeline.tsx",lineNumber:49,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ImportJobTimeline.tsx",lineNumber:40,columnNumber:11},this)]},i,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ImportJobTimeline.tsx",lineNumber:38,columnNumber:9},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ImportJobTimeline.tsx",lineNumber:36,columnNumber:5},this)}const Sd=s=>{if(!s)return"-";const a=new Date(s);return Number.isNaN(a.getTime())?s:a.toLocaleString()},Oi=s=>{if(!s)return"-";const a=1024,t=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(s)/Math.log(a));return`${Math.round(s/Math.pow(a,i)*100)/100} ${t[i]}`},Ui={pending:"ƒêang ch·ªù",validating:"ƒêang ki·ªÉm tra",importing:"ƒêang c√†i",completed:"Ho√†n t·∫•t",failed:"Th·∫•t b·∫°i",rolled_back:"ƒê√£ rollback"},$i=s=>s?s==="failed"?"destructive":s==="completed"||s==="rolled_back"?"default":"secondary":"secondary";function Md(){const[s,a]=E.useState(null),[t,i]=E.useState("idle"),[l,n]=E.useState(null),[r,u]=E.useState(null),[o,p]=E.useState(!1),[h,m]=E.useState({name:"",version:"",basePath:"",entry:"",routes:"",routeExport:"",permissions:"",menuLabel:"",menuPath:""});E.useEffect(()=>{let f;return o&&(l!=null&&l.id)&&(f=window.setInterval(async()=>{try{const P=await vs.getImportJob(l.id);n(P),["pending","validating","importing"].includes(P.status)||(p(!1),i(P.status==="failed"?"error":"done"))}catch(P){p(!1),u(P instanceof Error?P.message:"Kh√¥ng th·ªÉ t·∫£i tr·∫°ng th√°i job.")}},1500)),()=>{f&&window.clearInterval(f)}},[o,l==null?void 0:l.id]);const c=f=>{a(f),u(null),n(null),i("idle"),p(!1)},N=async()=>{if(!s){u("H√£y ch·ªçn file ZIP ƒë·ªÉ import.");return}try{i("uploading"),u(null);const f=Id(h),P=await vs.importModule(s,f);n(P),["pending","validating","importing"].includes(P.status)?(i("processing"),p(!0)):i(P.status==="failed"?"error":"done")}catch(f){i("error"),u(f instanceof Error?f.message:"Import th·∫•t b·∫°i.")}},g=E.useMemo(()=>(l==null?void 0:l.validationResults)??[],[l]),v=E.useMemo(()=>(l==null?void 0:l.timeline)??[],[l]),b=t==="uploading"||t==="processing",V=E.useMemo(()=>g.filter(f=>f.type==="error"&&/module\\.json/i.test(f.message)),[g]),D=(f,P)=>{m(x=>({...x,[f]:P}))};return e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã",href:"/admin"},{label:"Qu·∫£n tr·ªã Module",href:"/system/modules"},{label:"Import m√¥-ƒëun"}],title:"Import m√¥-ƒëun",actions:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(we,{variant:"outline",asChild:!0,children:e.jsxDEV(As,{to:"/system/modules/history",children:[e.jsxDEV(yt,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:156,columnNumber:17},this),"L·ªãch s·ª≠ import"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:155,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:154,columnNumber:13},this),e.jsxDEV(we,{variant:"ghost",asChild:!0,children:e.jsxDEV(As,{to:"/system/modules",children:[e.jsxDEV(ci,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:162,columnNumber:17},this),"Quay l·∫°i danh s√°ch"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:161,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:160,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:153,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:144,columnNumber:7},this),e.jsxDEV("div",{className:"px-6 pb-8 space-y-6",children:[e.jsxDEV("div",{className:"grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base flex items-center gap-2",children:[e.jsxDEV(xt,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:175,columnNumber:17},this),"T·∫£i g√≥i m√¥-ƒëun"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:174,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:173,columnNumber:13},this),e.jsxDEV(Ze,{className:"space-y-4",children:[e.jsxDEV(Yl,{acceptedFile:s??void 0,onFileSelect:f=>c(f),onRemove:()=>c(null),disabled:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:180,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxDEV(we,{onClick:()=>void N(),disabled:!s||b,children:[e.jsxDEV(pi,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:188,columnNumber:19},this),b?"ƒêang x·ª≠ l√Ω...":"B·∫Øt ƒë·∫ßu import"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:187,columnNumber:17},this),l&&e.jsxDEV($e,{variant:$i(l.status),children:Ui[l.status]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:192,columnNumber:19},this),s&&e.jsxDEV($e,{variant:"outline",children:Oi(s.size)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:196,columnNumber:26},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:186,columnNumber:15},this),r&&e.jsxDEV("div",{className:"rounded-md border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive flex items-start gap-2",children:[e.jsxDEV(La,{className:"h-4 w-4 mt-0.5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:200,columnNumber:19},this),e.jsxDEV("span",{children:r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:201,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:199,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:179,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:172,columnNumber:11},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"B·∫£ng h∆∞·ªõng d·∫´n g√≥i m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:209,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:208,columnNumber:13},this),e.jsxDEV(Ze,{className:"text-sm text-muted-foreground",children:e.jsxDEV(Nt,{children:[e.jsxDEV(ft,{children:e.jsxDEV(Ms,{children:[e.jsxDEV(xs,{children:"M·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:215,columnNumber:21},this),e.jsxDEV(xs,{children:"Chi ti·∫øt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:216,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:214,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:213,columnNumber:17},this),e.jsxDEV(vt,{children:[e.jsxDEV(Ms,{children:[e.jsxDEV(ts,{className:"font-medium",children:["module.json",e.jsxDEV(Rt,{children:[e.jsxDEV(Ot,{asChild:!0,children:e.jsxDEV("button",{type:"button",className:"ml-2 inline-flex items-center text-muted-foreground",children:e.jsxDEV(Mt,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:226,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:225,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:224,columnNumber:25},this),e.jsxDEV(Ut,{side:"right",children:e.jsxDEV("div",{className:"max-w-xs space-y-1",children:[e.jsxDEV("div",{children:"Tr∆∞·ªùng t·ªëi thi·ªÉu:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:231,columnNumber:29},this),e.jsxDEV("div",{children:"id, name, version, basePath"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:232,columnNumber:29},this),e.jsxDEV("div",{children:"entry, routes, permissions"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:233,columnNumber:29},this),e.jsxDEV("div",{children:"ui.menuLabel, ui.menuPath"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:234,columnNumber:29},this),e.jsxDEV("div",{children:"routeExport"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:235,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:230,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:229,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:223,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:221,columnNumber:21},this),e.jsxDEV(ts,{children:"B·∫Øt bu·ªôc ·ªü th∆∞ m·ª•c g·ªëc c·ªßa m√¥-ƒëun."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:240,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:220,columnNumber:19},this),e.jsxDEV(Ms,{children:[e.jsxDEV(ts,{className:"font-medium",children:["C·∫•u tr√∫c th∆∞ m·ª•c",e.jsxDEV(Rt,{children:[e.jsxDEV(Ot,{asChild:!0,children:e.jsxDEV("button",{type:"button",className:"ml-2 inline-flex items-center text-muted-foreground",children:e.jsxDEV(Mt,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:250,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:249,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:248,columnNumber:25},this),e.jsxDEV(Ut,{side:"right",children:e.jsxDEV("div",{className:"max-w-xs space-y-1",children:[e.jsxDEV("div",{children:"Cho ph√©p:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:255,columnNumber:29},this),e.jsxDEV("div",{children:"<moduleId>/* ho·∫∑c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:256,columnNumber:29},this),e.jsxDEV("div",{children:"src/modules/<moduleId>/*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:257,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:254,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:253,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:247,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:245,columnNumber:21},this),e.jsxDEV(ts,{children:"T√™n th∆∞ m·ª•c ph·∫£i tr√πng v·ªõi ID m√¥-ƒëun."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:262,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:244,columnNumber:19},this),e.jsxDEV(Ms,{children:[e.jsxDEV(ts,{className:"font-medium",children:"ƒê·ªãnh d·∫°ng file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:267,columnNumber:21},this),e.jsxDEV(ts,{children:"Ch·ªâ nh·∫≠n .ts, .tsx, .css, .json, .md v√† t√†i nguy√™n ·∫£nh."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:268,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:266,columnNumber:19},this),e.jsxDEV(Ms,{children:[e.jsxDEV(ts,{className:"font-medium",children:"Base path"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:273,columnNumber:21},this),e.jsxDEV(ts,{children:"Kh√¥ng ƒë∆∞·ª£c tr√πng v·ªõi m√¥-ƒëun ƒë√£ c√†i."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:274,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:272,columnNumber:19},this),e.jsxDEV(Ms,{children:[e.jsxDEV(ts,{className:"font-medium",children:["File b·ªã c·∫•m",e.jsxDEV(Rt,{children:[e.jsxDEV(Ot,{asChild:!0,children:e.jsxDEV("button",{type:"button",className:"ml-2 inline-flex items-center text-muted-foreground",children:e.jsxDEV(Mt,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:284,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:283,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:282,columnNumber:25},this),e.jsxDEV(Ut,{side:"right",children:e.jsxDEV("div",{className:"max-w-xs space-y-1",children:[e.jsxDEV("div",{children:"V√≠ d·ª•: package.json, App.tsx"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:289,columnNumber:29},this),e.jsxDEV("div",{children:"main.tsx, routes/*, .env*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:290,columnNumber:29},this),e.jsxDEV("div",{children:"vite.config.ts, tsconfig*.json"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:291,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:288,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:287,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:281,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:279,columnNumber:21},this),e.jsxDEV(ts,{children:"Kh√¥ng ƒë∆∞·ª£c ch·∫°m v√†o file h·ªá th·ªëng."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:296,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:278,columnNumber:19},this),e.jsxDEV(Ms,{children:[e.jsxDEV(ts,{className:"font-medium",children:"Gi·ªõi h·∫°n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:301,columnNumber:21},this),e.jsxDEV(ts,{children:"T·ªëi ƒëa 5MB v√† 300 file."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:302,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:300,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:219,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:212,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:211,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:207,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:171,columnNumber:9},this),e.jsxDEV("div",{className:"grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"Tr·∫°ng th√°i job"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:315,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:314,columnNumber:13},this),e.jsxDEV(Ze,{className:"space-y-4",children:l?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"grid gap-3 md:grid-cols-2 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"Job ID"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:322,columnNumber:23},this),e.jsxDEV("div",{className:"font-medium",children:l.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:323,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:321,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"Tr·∫°ng th√°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:326,columnNumber:23},this),e.jsxDEV("div",{children:e.jsxDEV($e,{variant:$i(l.status),children:Ui[l.status]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:328,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:327,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:325,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"M√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:332,columnNumber:23},this),e.jsxDEV("div",{className:"font-medium",children:l.moduleName??l.moduleId??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:333,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:331,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"Phi√™n b·∫£n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:336,columnNumber:23},this),e.jsxDEV("div",{className:"font-medium",children:l.version??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:337,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:335,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"File"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:340,columnNumber:23},this),e.jsxDEV("div",{className:"font-medium",children:l.fileName??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:341,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:339,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"Dung l∆∞·ª£ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:344,columnNumber:23},this),e.jsxDEV("div",{className:"font-medium",children:Oi(l.fileSize)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:345,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:343,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-muted-foreground",children:"T·∫°o l√∫c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:348,columnNumber:23},this),e.jsxDEV("div",{className:"font-medium",children:Sd(l.createdAt)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:349,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:347,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:320,columnNumber:19},this),l.errorMessage&&e.jsxDEV("div",{className:"rounded-md border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:l.errorMessage},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:353,columnNumber:21},this),v.length>0&&e.jsxDEV(ti,{events:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:357,columnNumber:49},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:319,columnNumber:17},this):e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Ch∆∞a c√≥ job import n√†o ƒë∆∞·ª£c t·∫°o."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:360,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:317,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:313,columnNumber:11},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"K·∫øt qu·∫£ validate"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:367,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:366,columnNumber:13},this),e.jsxDEV(Ze,{children:[g.length>0?e.jsxDEV(en,{results:g},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:371,columnNumber:17},this):e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Ch∆∞a c√≥ d·ªØ li·ªáu ki·ªÉm tra."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:373,columnNumber:17},this),s&&e.jsxDEV("div",{className:"mt-4 space-y-4 border-t pt-4",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"text-sm font-medium",children:"S·ª≠a nhanh module.json"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:378,columnNumber:21},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"ƒêi·ªÅn c√°c tr∆∞·ªùng c√≤n thi·∫øu r·ªìi b·∫•m import l·∫°i. Gi√° tr·ªã tr·ªëng s·∫Ω kh√¥ng ghi ƒë√®."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:379,columnNumber:21},this),V.length>0&&e.jsxDEV("div",{className:"text-xs text-destructive",children:V.map(f=>f.message).join(", ")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:383,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:377,columnNumber:19},this),e.jsxDEV("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(ea,{htmlFor:"module-route-export-inline",children:"routeExport"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:390,columnNumber:23},this),e.jsxDEV(zs,{id:"module-route-export-inline",placeholder:"kpiQlttRoute",value:h.routeExport,onChange:f=>D("routeExport",f.target.value),disabled:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:391,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:389,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(ea,{htmlFor:"module-basepath-inline",children:"basePath"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:400,columnNumber:23},this),e.jsxDEV(zs,{id:"module-basepath-inline",placeholder:"/kpi",value:h.basePath,onChange:f=>D("basePath",f.target.value),disabled:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:401,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:399,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(ea,{htmlFor:"module-entry-inline",children:"entry"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:410,columnNumber:23},this),e.jsxDEV(zs,{id:"module-entry-inline",placeholder:"src/modules/kpi-qltt/index.ts",value:h.entry,onChange:f=>D("entry",f.target.value),disabled:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:411,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:409,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(ea,{htmlFor:"module-routes-inline",children:"routes"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:420,columnNumber:23},this),e.jsxDEV(zs,{id:"module-routes-inline",placeholder:"src/modules/kpi-qltt/routes.tsx",value:h.routes,onChange:f=>D("routes",f.target.value),disabled:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:421,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:419,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(ea,{htmlFor:"module-menu-label-inline",children:"ui.menuLabel"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:430,columnNumber:23},this),e.jsxDEV(zs,{id:"module-menu-label-inline",placeholder:"KPI QLTT",value:h.menuLabel,onChange:f=>D("menuLabel",f.target.value),disabled:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:431,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:429,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(ea,{htmlFor:"module-menu-path-inline",children:"ui.menuPath"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:440,columnNumber:23},this),e.jsxDEV(zs,{id:"module-menu-path-inline",placeholder:"/kpi",value:h.menuPath,onChange:f=>D("menuPath",f.target.value),disabled:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:441,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:439,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2 md:col-span-2",children:[e.jsxDEV(ea,{htmlFor:"module-permissions-inline",children:"permissions (ph√¢n t√°ch b·∫±ng d·∫•u ph·∫©y)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:450,columnNumber:23},this),e.jsxDEV(zs,{id:"module-permissions-inline",placeholder:"reports:read, reports:export",value:h.permissions,onChange:f=>D("permissions",f.target.value),disabled:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:451,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:449,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(ea,{htmlFor:"module-name-inline",children:"T√™n m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:460,columnNumber:23},this),e.jsxDEV(zs,{id:"module-name-inline",placeholder:"KPI & Th·ªëng k√™ QLTT",value:h.name,onChange:f=>D("name",f.target.value),disabled:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:461,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:459,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(ea,{htmlFor:"module-version-inline",children:"Phi√™n b·∫£n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:470,columnNumber:23},this),e.jsxDEV(zs,{id:"module-version-inline",placeholder:"0.1.0",value:h.version,onChange:f=>D("version",f.target.value),disabled:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:471,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:469,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:388,columnNumber:19},this),e.jsxDEV("div",{children:e.jsxDEV(we,{variant:"outline",onClick:()=>void N(),disabled:!s||b,children:b?"ƒêang x·ª≠ l√Ω...":"Import l·∫°i v·ªõi c·∫•u h√¨nh n√†y"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:481,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:480,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:376,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:369,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:365,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:312,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:170,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleImportPage.tsx",lineNumber:143,columnNumber:5},this)}const Id=s=>{const a={},t=s.name.trim(),i=s.version.trim(),l=s.basePath.trim(),n=s.entry.trim(),r=s.routes.trim(),u=s.routeExport.trim(),o=s.permissions.trim(),p=s.menuLabel.trim(),h=s.menuPath.trim();return t&&(a.name=t),i&&(a.version=i),l&&(a.basePath=l),n&&(a.entry=n),r&&(a.routes=r),u&&(a.routeExport=u),o&&(a.permissions=o.split(/[,\\n]/).map(m=>m.trim()).filter(Boolean)),(p||h)&&(a.ui={...p?{menuLabel:p}:{},...h?{menuPath:h}:{}}),Object.keys(a).length>0?a:void 0},Ad=Object.freeze(Object.defineProperty({__proto__:null,default:Md},Symbol.toStringTag,{value:"Module"})),sn="system-admin",an="System Admin",tn="0.1.0",ln="/system",nn="src/modules/system-admin/index.ts",mn="src/modules/system-admin/routes.tsx",rn="systemModulesRoute",on=["ADMIN_VIEW","ADMIN_WRITE"],dn={menuLabel:"Quan tri",menuPath:"/system/modules"},wd={id:sn,name:an,version:tn,basePath:ln,entry:nn,routes:mn,routeExport:rn,permissions:on,ui:dn},kd=Object.freeze(Object.defineProperty({__proto__:null,basePath:ln,default:wd,entry:nn,id:sn,name:an,permissions:on,routeExport:rn,routes:mn,ui:dn,version:tn},Symbol.toStringTag,{value:"Module"})),un="system-admin-iam",cn="Qu·∫£n l√Ω danh t√≠nh & truy c·∫≠p (IAM)",pn="0.2.0",gn="/system-admin/iam",hn="src/modules/system-admin/sa-iam/index.ts",Nn="src/modules/system-admin/sa-iam/routes.tsx",fn=["iam:read","iam:write","sa.iam.user:read","sa.iam.user:write","sa.iam.role:read","sa.iam.role:write","sa.iam.permission:read","sa.iam.permission:write","sa.iam.assignment:read","sa.iam.assignment:assign","sa.iam.assignment:revoke","sa.iam.module:read","sa.iam.menu:read"],vn={menuLabel:"Qu·∫£n l√Ω danh t√≠nh",menuPath:"/system-admin/iam"},bn="saIamRoutes",Vn={type:"minor",notes:"Module IAM: Ng∆∞·ªùi d√πng, Vai tr√≤, Quy·ªÅn h·∫°n, Ph√¢n quy·ªÅn, Ph√¢n h·ªá, Menu v·ªõi ƒë·∫ßy ƒë·ªß CRUD v√† assignment logic",breaking:[]},Tn={minAppVersion:"0.1.0",maxAppVersion:"0.9.0"},Rd={id:un,name:cn,version:pn,basePath:gn,entry:hn,routes:Nn,permissions:fn,ui:vn,routeExport:bn,release:Vn,compat:Tn},Od=Object.freeze(Object.defineProperty({__proto__:null,basePath:gn,compat:Tn,default:Rd,entry:hn,id:un,name:cn,permissions:fn,release:Vn,routeExport:bn,routes:Nn,ui:vn,version:pn},Symbol.toStringTag,{value:"Module"})),xn="system-admin-master-data",yn="D·ªØ li·ªáu n·ªÅn",En="0.2.0",Hn="/system-admin/master-data",Dn="src/modules/system-admin/sa-master-data/index.ts",Pn="src/modules/system-admin/sa-master-data/routes.tsx",Ln=["master_data:read","master_data:write","sa.masterdata.orgunit:read","sa.masterdata.orgunit:write","sa.masterdata.department:read","sa.masterdata.department:write","sa.masterdata.jurisdiction:read","sa.masterdata.jurisdiction:write","sa.masterdata.catalog:read","sa.masterdata.catalog:write"],jn={menuLabel:"D·ªØ li·ªáu n·ªÅn",menuPath:"/system-admin/master-data"},Qn="saMasterDataRoutes",_n={type:"minor",notes:"Module qu·∫£n l√Ω d·ªØ li·ªáu n·ªÅn: ƒê∆°n v·ªã t·ªï ch·ª©c, Ph√≤ng ban, ƒê·ªãa b√†n, Danh m·ª•c h·ªá th·ªëng v·ªõi ƒë·∫ßy ƒë·ªß CRUD v√† TreeTable cho catalogs",breaking:[]},Cn={minAppVersion:"0.1.0",maxAppVersion:"0.9.0"},Ud={id:xn,name:yn,version:En,basePath:Hn,entry:Dn,routes:Pn,permissions:Ln,ui:jn,routeExport:Qn,release:_n,compat:Cn},$d=Object.freeze(Object.defineProperty({__proto__:null,basePath:Hn,compat:Cn,default:Ud,entry:Dn,id:xn,name:yn,permissions:Ln,release:_n,routeExport:Qn,routes:Pn,ui:jn,version:En},Symbol.toStringTag,{value:"Module"})),Sn="system-admin-config",Mn="C·∫•u h√¨nh h·ªá th·ªëng",In="0.2.0",An="/system-admin/system-config",wn="src/modules/system-admin/sa-system-config/index.ts",kn="src/modules/system-admin/sa-system-config/routes.tsx",Rn=["system_config:read","system_config:write","sa.sysconfig.param:read","sa.sysconfig.param:update","sa.sysconfig.orginfo:read","sa.sysconfig.orginfo:update","sa.sysconfig.ops:read","sa.sysconfig.ops:update","sa.sysconfig.notify:read","sa.sysconfig.notify:create","sa.sysconfig.notify:update","sa.sysconfig.security:read","sa.sysconfig.security:update","sa.sysconfig.db.log:read","sa.sysconfig.db.log:export","sa.sysconfig.db.backup:read","sa.sysconfig.db.backup:create","sa.sysconfig.db.backup:restore"],On={menuLabel:"C·∫•u h√¨nh h·ªá th·ªëng",menuPath:"/system-admin/system-config"},Un="saSystemConfigRoutes",$n={type:"minor",notes:"Module c·∫•u h√¨nh: Th√¥ng s·ªë, Th√¥ng tin t·ªï ch·ª©c, V·∫≠n h√†nh, M·∫´u th√¥ng b√°o, B·∫£o m·∫≠t, Database logs & backups",breaking:[]},Kn={minAppVersion:"0.1.0",maxAppVersion:"0.9.0"},Kd={id:Sn,name:Mn,version:In,basePath:An,entry:wn,routes:kn,permissions:Rn,ui:On,routeExport:Un,release:$n,compat:Kn},Zd=Object.freeze(Object.defineProperty({__proto__:null,basePath:An,compat:Kn,default:Kd,entry:wn,id:Sn,name:Mn,permissions:Rn,release:$n,routeExport:Un,routes:kn,ui:On,version:In},Symbol.toStringTag,{value:"Module"})),zd="_modulesTable_9txxs_1",Bd="_moduleName_9txxs_157",qd="_moduleId_9txxs_173",Fd="_moduleInfo_9txxs_191",Gd="_versionBadge_9txxs_203",Jd="_code_9txxs_225",Wd="_mutedText_9txxs_251",Xd="_actions_9txxs_261",Yd="_emptyState_9txxs_277",Ws={modulesTable:zd,moduleName:Bd,moduleId:qd,moduleInfo:Fd,versionBadge:Gd,code:Jd,mutedText:Wd,actions:Xd,emptyState:Yd};function eu({modules:s,onRollback:a,onPreview:t}){const i=n=>{if(!n)return"-";const r=new Date(n);return Number.isNaN(r.getTime())?n:r.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},l=n=>n==="inactive"?e.jsxDEV($e,{variant:"outline",children:"T·∫°m d·ª´ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:35,columnNumber:14},this):e.jsxDEV($e,{variant:"secondary",children:"Ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:37,columnNumber:12},this);return s.length===0?e.jsxDEV("div",{className:Ws.emptyState,children:[e.jsxDEV(Km,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:43,columnNumber:9},this),e.jsxDEV("h3",{children:"Ch∆∞a c√≥ m√¥-ƒëun n√†o"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:44,columnNumber:9},this),e.jsxDEV("p",{children:"B·∫Øt ƒë·∫ßu b·∫±ng c√°ch import m√¥-ƒëun m·ªõi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:45,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:42,columnNumber:7},this):e.jsxDEV("table",{className:Ws.modulesTable,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Module"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:54,columnNumber:11},this),e.jsxDEV("th",{children:"Phi√™n b·∫£n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:55,columnNumber:11},this),e.jsxDEV("th",{children:"Tr·∫°ng th√°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:56,columnNumber:11},this),e.jsxDEV("th",{children:"ƒê∆∞·ªùng d·∫´n base"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:57,columnNumber:11},this),e.jsxDEV("th",{children:"T·ªáp entry"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:58,columnNumber:11},this),e.jsxDEV("th",{children:"C√†i ƒë·∫∑t l√∫c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:59,columnNumber:11},this),e.jsxDEV("th",{children:"Thao t√°c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:60,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:53,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:52,columnNumber:7},this),e.jsxDEV("tbody",{children:s.map(n=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("div",{className:Ws.moduleInfo,children:[e.jsxDEV("div",{className:Ws.moduleName,children:n.name||n.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:68,columnNumber:17},this),e.jsxDEV("div",{className:Ws.moduleId,children:n.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:69,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:67,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:66,columnNumber:13},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:Ws.versionBadge,children:["v",n.version]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:73,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:72,columnNumber:13},this),e.jsxDEV("td",{children:l(n.status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:75,columnNumber:13},this),e.jsxDEV("td",{children:e.jsxDEV("code",{className:Ws.code,children:n.basePath},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:79,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV("td",{children:e.jsxDEV("code",{className:Ws.code,children:n.entry||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:82,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:81,columnNumber:13},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:Ws.mutedText,children:i(n.installedAt)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:85,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:84,columnNumber:13},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:Ws.actions,children:[e.jsxDEV(As,{to:`/system/modules/${n.id}`,children:e.jsxDEV(we,{variant:"ghost",size:"icon",title:"Xem chi ti·∫øt",children:e.jsxDEV(gi,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:91,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:90,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:89,columnNumber:17},this),t&&e.jsxDEV(we,{variant:"ghost",size:"icon",title:"Xem tr∆∞·ªõc phi√™n b·∫£n",onClick:()=>t(n),children:e.jsxDEV(Sl,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:101,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:95,columnNumber:19},this),e.jsxDEV(As,{to:`/system/modules/${n.id}/update`,children:e.jsxDEV(we,{variant:"ghost",size:"icon",title:"C·∫≠p nh·∫≠t m√¥-ƒëun",children:e.jsxDEV(xt,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:106,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:105,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:104,columnNumber:17},this),a&&n.id!=="system-admin"&&e.jsxDEV(we,{variant:"ghost",size:"icon",title:"Rollback m√¥-ƒëun",onClick:()=>a(n.id),children:e.jsxDEV(oi,{className:"h-4 w-4 text-destructive"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:116,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:110,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:88,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:87,columnNumber:13},this)]},n.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:65,columnNumber:11},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:63,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/InstalledModulesTable.tsx",lineNumber:51,columnNumber:5},this)}function su({open:s,onOpenChange:a,moduleId:t,moduleName:i,basePath:l}){const[n,r]=E.useState(null),[u,o]=E.useState(null),[p,h]=E.useState(!1),m=E.useMemo(()=>l?`${window.location.origin}${l}`:"",[l]);return E.useEffect(()=>{if(!s||!t)return;(async()=>{try{h(!0),o(null);const N=await vs.getModule(t);r(N)}catch(N){o(N instanceof Error?N.message:"Kh√¥ng th·ªÉ t·∫£i th√¥ng tin m√¥-ƒëun.")}finally{h(!1)}})()},[s,t]),e.jsxDEV(bi,{open:s,onOpenChange:a,children:e.jsxDEV(Pt,{className:"max-w-5xl",children:[e.jsxDEV(Lt,{children:[e.jsxDEV(Qt,{className:"flex items-center gap-2",children:[e.jsxDEV(Sl,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:56,columnNumber:13},this),"Xem tr∆∞·ªõc m√¥-ƒëun"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:55,columnNumber:11},this),e.jsxDEV(_t,{children:i??t??"Ch·ªçn m√¥-ƒëun ƒë·ªÉ xem tr∆∞·ªõc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:59,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:54,columnNumber:9},this),p&&e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"ƒêang t·∫£i th√¥ng tin..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:64,columnNumber:21},this),u&&e.jsxDEV("div",{className:"text-sm text-destructive",children:u},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:65,columnNumber:19},this),n&&e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[e.jsxDEV($e,{variant:"outline",children:["v",n.version]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:69,columnNumber:13},this),e.jsxDEV("span",{className:"text-muted-foreground",children:"Base path:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:70,columnNumber:13},this),e.jsxDEV("span",{className:"font-medium",children:n.basePath},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:71,columnNumber:13},this),n.fileHealth&&e.jsxDEV($e,{variant:n.fileHealth.entryExists&&n.fileHealth.routesExists?"secondary":"destructive",children:n.fileHealth.entryExists&&n.fileHealth.routesExists?"File OK":"File l·ªói"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:73,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:68,columnNumber:11},this),m?e.jsxDEV("div",{className:"rounded-md border overflow-hidden",children:e.jsxDEV("iframe",{title:"Module preview",src:m,className:"h-[60vh] w-full bg-white"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:82,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:81,columnNumber:11},this):e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Ch∆∞a c√≥ ƒë∆∞·ªùng d·∫´n preview."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:85,columnNumber:11},this),e.jsxDEV(jt,{children:[m&&e.jsxDEV(we,{variant:"outline",asChild:!0,children:e.jsxDEV("a",{href:m,target:"_blank",rel:"noreferrer",children:[e.jsxDEV(Zm,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:92,columnNumber:17},this),"M·ªü tab m·ªõi"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:91,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:90,columnNumber:13},this),e.jsxDEV(we,{onClick:()=>a(!1),children:"ƒê√≥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:97,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:88,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:53,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/components/ModulePreviewDialog.tsx",lineNumber:52,columnNumber:5},this)}const Ki=Object.values(Object.assign({"../module.json":kd,"../sa-iam/module.json":Od,"../sa-master-data/module.json":$d,"../sa-system-config/module.json":Zd})).map(a=>"default"in a?a.default:a).filter(a=>!!(a!=null&&a.id&&(a!=null&&a.version)&&(a!=null&&a.basePath))).map(a=>({...a,status:"active"})),au=(s,a)=>{const t=new Map;return a.forEach(i=>t.set(i.id,i)),s.forEach(i=>t.set(i.id,i)),Array.from(t.values())};function tu(){const[s,a]=E.useState([]),[t,i]=E.useState(!0),[l,n]=E.useState(null),[r,u]=E.useState("name"),[o,p]=E.useState(""),[h,m]=E.useState("all"),[c,N]=E.useState(null),[g,v]=E.useState(!1),[b,V]=E.useState(null),[D,f]=E.useState(!1),P=async()=>{try{i(!0),n(null);const A=await vs.getModules();a(au(A,Ki))}catch(A){n(A instanceof Error?A.message:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch m√¥-ƒëun."),a(Ki)}finally{i(!1)}};E.useEffect(()=>{P()},[]);const x=E.useMemo(()=>{const A=o.trim().toLowerCase();return s.filter(z=>{const W=A.length===0||z.id.toLowerCase().includes(A)||(z.name??"").toLowerCase().includes(A),X=z.status??"active";return W&&(h==="all"||X===h)})},[s,o,h]),y=E.useMemo(()=>[...x].sort((A,z)=>r==="version"?String(A.version).localeCompare(String(z.version)):r==="basePath"?String(A.basePath).localeCompare(String(z.basePath)):String(A.name??A.id).localeCompare(String(z.name??z.id))),[x,r]),Q=E.useMemo(()=>{const A=s.map(W=>W.installedAt?new Date(W.installedAt).getTime():null).filter(W=>W!==null);return A.length===0?"-":new Date(Math.max(...A)).toLocaleString()},[s]),U=E.useMemo(()=>s.filter(A=>(A.status??"active")==="active").length,[s]),j=A=>{const z=s.find(W=>W.id===A)??null;N(z),v(!0)};return e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã",href:"/admin"},{label:"Qu·∫£n tr·ªã Module"}],title:"Qu·∫£n tr·ªã Module",actions:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(we,{variant:"outline",asChild:!0,children:e.jsxDEV(As,{to:"/system/modules/history",children:[e.jsxDEV(yt,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:140,columnNumber:17},this),"L·ªãch s·ª≠ import"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:139,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:138,columnNumber:13},this),e.jsxDEV(we,{asChild:!0,children:e.jsxDEV(As,{to:"/system/modules/import",children:[e.jsxDEV(ui,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:146,columnNumber:17},this),"Import m√¥-ƒëun"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:145,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:144,columnNumber:13},this),e.jsxDEV(we,{variant:"ghost",onClick:()=>void P(),children:[e.jsxDEV(ci,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:151,columnNumber:15},this),"L√†m m·ªõi"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:150,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:137,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:129,columnNumber:7},this),e.jsxDEV("div",{className:"px-6 pb-8 space-y-6",children:[e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-sm font-medium",children:"T·ªïng m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:162,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:161,columnNumber:13},this),e.jsxDEV(Ze,{children:[e.jsxDEV("div",{className:"text-2xl font-semibold",children:s.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:165,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"T·ªïng s·ªë m√¥-ƒëun ƒë√£ c√†i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:166,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:164,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:160,columnNumber:11},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-sm font-medium",children:"ƒêang ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:171,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:170,columnNumber:13},this),e.jsxDEV(Ze,{children:[e.jsxDEV("div",{className:"text-2xl font-semibold",children:U},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:174,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"M√¥-ƒëun ƒëang ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:175,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:173,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:169,columnNumber:11},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsxDEV(zm,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:181,columnNumber:17},this),"C·∫≠p nh·∫≠t g·∫ßn nh·∫•t"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:180,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:179,columnNumber:13},this),e.jsxDEV(Ze,{children:[e.jsxDEV("div",{className:"text-sm font-medium",children:Q},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:186,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Theo th√¥ng tin registry"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:187,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:185,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:178,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:159,columnNumber:9},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base flex items-center gap-2",children:[e.jsxDEV(Ml,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:195,columnNumber:15},this),"Danh s√°ch m√¥-ƒëun"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:194,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:193,columnNumber:11},this),e.jsxDEV(Ze,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxDEV("div",{className:"min-w-[220px] flex-1",children:e.jsxDEV(zs,{placeholder:"T√¨m theo t√™n ho·∫∑c module ID",value:o,onChange:A=>p(A.target.value)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:202,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:201,columnNumber:15},this),e.jsxDEV("select",{className:"h-9 rounded-md border border-input bg-background px-3 text-sm",value:r,onChange:A=>u(A.target.value),children:[e.jsxDEV("option",{value:"name",children:"S·∫Øp x·∫øp: T√™n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:213,columnNumber:17},this),e.jsxDEV("option",{value:"version",children:"S·∫Øp x·∫øp: Phi√™n b·∫£n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:214,columnNumber:17},this),e.jsxDEV("option",{value:"basePath",children:"S·∫Øp x·∫øp: Base path"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:215,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:208,columnNumber:15},this),e.jsxDEV("select",{className:"h-9 rounded-md border border-input bg-background px-3 text-sm",value:h,onChange:A=>m(A.target.value),children:[e.jsxDEV("option",{value:"all",children:"T·∫•t c·∫£ tr·∫°ng th√°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:222,columnNumber:17},this),e.jsxDEV("option",{value:"active",children:"Ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:223,columnNumber:17},this),e.jsxDEV("option",{value:"inactive",children:"T·∫°m d·ª´ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:224,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:217,columnNumber:15},this),e.jsxDEV($e,{variant:"outline",children:[y.length," m√¥-ƒëun"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:226,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:200,columnNumber:13},this),t&&e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"ƒêang t·∫£i m√¥-ƒëun..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:229,columnNumber:25},this),l&&e.jsxDEV("div",{className:"text-sm text-destructive",children:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:230,columnNumber:23},this),!t&&y.length===0?e.jsxDEV("div",{className:"rounded-lg border border-dashed p-6 text-center text-sm text-muted-foreground",children:"Ch∆∞a c√≥ m√¥-ƒëun n√†o. H√£y import m√¥-ƒëun m·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:233,columnNumber:15},this):e.jsxDEV(eu,{modules:y,onRollback:j,onPreview:A=>{V(A),f(!0)}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:237,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:199,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:192,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:158,columnNumber:7},this),e.jsxDEV(Xl,{open:g,onOpenChange:A=>{v(A),A||N(null)},moduleId:c==null?void 0:c.id,moduleName:c==null?void 0:c.name,onCompleted:()=>void P()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:250,columnNumber:7},this),e.jsxDEV(su,{open:D,onOpenChange:A=>{f(A),A||V(null)},moduleId:b==null?void 0:b.id,moduleName:b==null?void 0:b.name,basePath:b==null?void 0:b.basePath},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:261,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleRegistryPage.tsx",lineNumber:128,columnNumber:5},this)}const iu=Object.freeze(Object.defineProperty({__proto__:null,default:tu},Symbol.toStringTag,{value:"Module"})),lu=[{label:"T·ªïng t√†i kho·∫£n",value:"1,247",delta:"+12.5%",icon:Ea,tone:"bg-emerald-50 text-emerald-600"},{label:"T·ª∑ l·ªá ho·∫°t ƒë·ªông",value:"94.2%",delta:"+1.2%",icon:Il,tone:"bg-sky-50 text-sky-600"},{label:"Database Size",value:"2.8 GB",delta:"+350 MB",icon:Ga,tone:"bg-violet-50 text-violet-600"},{label:"Phi√™n ƒëƒÉng nh·∫≠p",value:"236",delta:"H√¥m nay",icon:Al,tone:"bg-amber-50 text-amber-600"}],nu=[{title:"Master Data",description:"Qu·∫£n l√Ω d·ªØ li·ªáu n·ªÅn t·∫£ng c·ªßa h·ªá th·ªëng",items:[{label:"ƒê∆°n v·ªã t·ªï ch·ª©c",description:"C√¢y ƒë∆°n v·ªã, t·ªï ch·ª©c",path:"/system-admin/master-data/org-units",icon:wl,tone:"bg-indigo-50 text-indigo-600"},{label:"Ph√≤ng ban",description:"Qu·∫£n l√Ω ph√≤ng ban, b·ªô ph·∫≠n",path:"/system-admin/master-data/departments",icon:Ea,tone:"bg-fuchsia-50 text-fuchsia-600"},{label:"Danh m·ª•c h√†nh ch√≠nh",description:"Qu·∫£n l√Ω ƒë·ªãa b√†n v√† b·∫£n ƒë·ªì",path:"/system-admin/master-data/admin-areas",icon:hi,tone:"bg-emerald-50 text-emerald-600"},{label:"Danh m·ª•c d√πng chung",description:"Catalogs & items d√πng chung",path:"/system-admin/master-data/common-catalogs",icon:Bm,tone:"bg-amber-50 text-amber-700"},{label:"Danh m·ª•c nghi·ªáp v·ª• QLTT",description:"Catalogs nghi·ªáp v·ª• chuy√™n m√¥n",path:"/system-admin/master-data/dms-catalogs",icon:kl,tone:"bg-rose-50 text-rose-600"},{label:"Danh m·ª•c k·ªπ thu·∫≠t",description:"Catalogs h·ªá th·ªëng v√† technical",path:"/system-admin/master-data/system-catalogs",icon:di,tone:"bg-emerald-50 text-emerald-600"}]},{title:"IAM",description:"Ng∆∞·ªùi d√πng, vai tr√≤, quy·ªÅn h·∫°n, ph√¢n quy·ªÅn",items:[{label:"Ng∆∞·ªùi d√πng",description:"Qu·∫£n l√Ω t√†i kho·∫£n",path:"/system-admin/iam/users",icon:Ea,tone:"bg-sky-50 text-sky-600"},{label:"Vai tr√≤",description:"Role & ph√¢n nh√≥m",path:"/system-admin/iam/roles",icon:ya,tone:"bg-rose-50 text-rose-600"},{label:"Danh m·ª•c quy·ªÅn",description:"Danh s√°ch quy·ªÅn h·∫°n",path:"/system-admin/iam/permissions",icon:qm,tone:"bg-violet-50 text-violet-600"},{label:"Ph√¢n quy·ªÅn",description:"G√°n quy·ªÅn theo ng∆∞·ªùi d√πng/role",path:"/system-admin/iam/role-permissions",icon:Il,tone:"bg-emerald-50 text-emerald-600"}]},{title:"C·∫•u h√¨nh h·ªá th·ªëng",description:"Th√¥ng s·ªë, b·∫£o m·∫≠t, sao l∆∞u",items:[{label:"Th√¥ng s·ªë h·ªá th·ªëng",description:"Thi·∫øt l·∫≠p tham s·ªë",path:"/system-admin/system-config/parameters",icon:Fm,tone:"bg-slate-50 text-slate-600"},{label:"Th√¥ng tin t·ªï ch·ª©c",description:"C·∫•u h√¨nh ƒë∆°n v·ªã",path:"/system-admin/system-config/organization-info",icon:Gm,tone:"bg-orange-50 text-orange-600"},{label:"C√†i ƒë·∫∑t b·∫£o m·∫≠t",description:"Ch√≠nh s√°ch & m·∫≠t kh·∫©u",path:"/system-admin/system-config/security",icon:Al,tone:"bg-red-50 text-red-600"},{label:"Database Backups",description:"Sao l∆∞u v√† ph·ª•c h·ªìi",path:"/system-admin/system-config/database/backups",icon:Jm,tone:"bg-cyan-50 text-cyan-600"}]},{title:"C√¥ng c·ª• qu·∫£n tr·ªã",description:"Qu·∫£n l√Ω module v√† menu h·ªá th·ªëng",items:[{label:"Qu·∫£n tr·ªã Module",description:"Import, update, rollback module",path:"/system/modules",icon:Ml,tone:"bg-indigo-50 text-indigo-600"},{label:"Qu·∫£n tr·ªã Menu",description:"C·∫•u h√¨nh menu ƒëi·ªÅu h∆∞·ªõng",path:"/system/menus",icon:Wm,tone:"bg-amber-50 text-amber-700"},{label:"L·ªãch s·ª≠ import",description:"Theo d√µi job import module",path:"/system/modules/history",icon:yt,tone:"bg-slate-50 text-slate-600"},{label:"Qu·∫£n tr·ªã (c≈©)",description:"Trang qu·∫£n tr·ªã t·ªïng h·ª£p",path:"/admin",icon:Rl,tone:"bg-neutral-50 text-neutral-600"}]}];function mu(){return e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã",href:"/system-admin"}],title:"Dashboard Qu·∫£n tr·ªã vi√™n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:214,columnNumber:7},this),e.jsxDEV("div",{className:"px-6 pb-8 space-y-8",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"T·ªïng quan h·ªá th·ªëng v√† truy c·∫≠p nhanh c√°c ch·ª©c nƒÉng qu·∫£n tr·ªã."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:223,columnNumber:9},this),e.jsxDEV("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4",children:lu.map(s=>{const a=s.icon;return e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:`rounded-lg p-2 ${s.tone}`,children:e.jsxDEV(a,{className:"h-5 w-5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:235,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:234,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-xl font-semibold",children:s.value},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:238,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:s.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:239,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs text-emerald-600",children:s.delta},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:240,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:237,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:233,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:232,columnNumber:17},this)},s.label,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:231,columnNumber:15},this)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:227,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-6",children:nu.map(s=>e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:[e.jsxDEV(qe,{className:"text-base",children:s.title},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:253,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:s.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:254,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:252,columnNumber:15},this),e.jsxDEV(Ze,{children:e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:s.items.map(a=>{const t=a.icon;return e.jsxDEV(As,{to:a.path,className:"group rounded-lg border p-4 transition hover:border-primary/40 hover:shadow-sm",children:e.jsxDEV("div",{className:"flex items-start justify-between gap-3",children:[e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:`rounded-lg p-2 ${a.tone}`,children:e.jsxDEV(t,{className:"h-5 w-5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:269,columnNumber:31},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:268,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:a.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:272,columnNumber:31},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:a.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:273,columnNumber:31},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:271,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:267,columnNumber:27},this),e.jsxDEV(Xm,{className:"h-4 w-4 text-muted-foreground transition group-hover:text-foreground"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:276,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:266,columnNumber:25},this)},a.path,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:261,columnNumber:23},this)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:257,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:256,columnNumber:15},this)]},s.title,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:251,columnNumber:13},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:249,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:222,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/SystemAdminDashboardPage.tsx",lineNumber:213,columnNumber:5},this)}const ru=Object.freeze(Object.defineProperty({__proto__:null,default:mu},Symbol.toStringTag,{value:"Module"}));function Zi({className:s,...a}){return e.jsxDEV(jm,{"data-slot":"checkbox",className:Fe("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsxDEV(Qm,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsxDEV(Ym,{className:"size-3.5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/checkbox.tsx",lineNumber:26,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/checkbox.tsx",lineNumber:22,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/checkbox.tsx",lineNumber:14,columnNumber:5},this)}const ou=[{value:"patch",label:"PATCH",description:"Ch·ªânh UI, fix bug, kh√¥ng ƒë·ªïi contract"},{value:"minor",label:"MINOR",description:"Th√™m m√†n, th√™m filter/field"},{value:"major",label:"MAJOR",description:"ƒê·ªïi route/basePath ho·∫∑c ƒë·ªïi contract"}],du=s=>{if(!s)return"-";const a=new Date(s);return Number.isNaN(a.getTime())?s:a.toLocaleString()},wa=(s,a,t)=>({label:s,current:a??"-",next:t??"-",changed:!!(a&&t&&a!==t)});function uu(){const{id:s}=Ys(),a=ys(),{user:t}=Sa(),[i,l]=E.useState(null),[n,r]=E.useState(!0),[u,o]=E.useState(null),[p,h]=E.useState(null),[m,c]=E.useState(null),[N,g]=E.useState(""),[v,b]=E.useState([]),[V,D]=E.useState(null),[f,P]=E.useState(null),[x,y]=E.useState(!1),[Q,U]=E.useState(!1),[j,A]=E.useState(!1);E.useEffect(()=>{(async()=>{if(!s){o("Thi·∫øu module ID."),r(!1);return}try{r(!0),o(null);const de=await vs.getModule(s);l(de)}catch(de){o(de instanceof Error?de.message:"Kh√¥ng th·ªÉ t·∫£i chi ti·∫øt m√¥-ƒëun.")}finally{r(!1)}})()},[s]);const z=Y=>{h(Y),c(null),g(""),b([]),D(null),P(null)},W=async()=>{var Y;if(!p||!s){P("H√£y ch·ªçn file ZIP ƒë·ªÉ ki·ªÉm tra.");return}try{y(!0),P(null);const de=await vs.inspectUpdate(s,p);c(de),b(((Y=de.newMenus)==null?void 0:Y.map(Te=>Te.id))??[]),g("")}catch(de){P(de instanceof Error?de.message:"Kh√¥ng th·ªÉ ph√¢n t√≠ch g√≥i c·∫≠p nh·∫≠t.")}finally{y(!1)}},X=async()=>{if(!p||!s||!m){P("Ch∆∞a ƒë·ªß d·ªØ li·ªáu ƒë·ªÉ c·∫≠p nh·∫≠t.");return}if(!N){P("H√£y ch·ªçn lo·∫°i c·∫≠p nh·∫≠t.");return}if(m.releaseType&&N!==m.releaseType){P("Lo·∫°i c·∫≠p nh·∫≠t ƒë√£ ch·ªçn kh√¥ng kh·ªõp release.type trong module.json.");return}try{U(!0),P(null),A(!0);const Y=await vs.updateModule(s,{file:p,updateType:N,selectedMenuIds:v,updatedBy:t==null?void 0:t.username,updatedByName:t==null?void 0:t.fullName});D(Y)}catch(Y){P(Y instanceof Error?Y.message:"C·∫≠p nh·∫≠t m√¥-ƒëun th·∫•t b·∫°i.")}finally{U(!1)}};E.useEffect(()=>{if(V&&V.status==="completed"){const Y=setTimeout(()=>{a("/system/modules")},1200);return()=>clearTimeout(Y)}},[V,a]);const fe=E.useMemo(()=>(m==null?void 0:m.validationResults)??[],[m]),me=fe.some(Y=>Y.type==="error"),ue=!!(N&&(m!=null&&m.releaseType)&&N!==m.releaseType),xe=E.useMemo(()=>!i||!m?[]:[wa("Phi√™n b·∫£n",i.version,m.manifest.version),wa("Base path",i.basePath,m.manifest.basePath),wa("Routes",i.routes,m.manifest.routes),wa("Entry",i.entry,m.manifest.entry),wa("Route export",i.routeExport??"-",m.manifest.routeExport??"-")],[i,m]),Ee=(Y,de)=>{b(Te=>de?Array.from(new Set([...Te,Y])):Te.filter(S=>S!==Y))},je=Y=>{m!=null&&m.newMenus&&b(Y?m.newMenus.map(de=>de.id):[])};return e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã",href:"/admin"},{label:"Qu·∫£n tr·ªã Module",href:"/system/modules"},{label:(i==null?void 0:i.name)??s??"C·∫≠p nh·∫≠t m√¥-ƒëun"}],title:"C·∫≠p nh·∫≠t m√¥-ƒëun",actions:e.jsxDEV(we,{variant:"outline",asChild:!0,children:e.jsxDEV(As,{to:s?`/system/modules/${s}`:"/system/modules",children:[e.jsxDEV(sa,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:204,columnNumber:15},this),"Quay l·∫°i"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:203,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:202,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:193,columnNumber:7},this),e.jsxDEV("div",{className:"px-6 pb-8 space-y-6",children:[n&&e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"ƒêang t·∫£i m√¥-ƒëun..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:212,columnNumber:27},this),u&&e.jsxDEV("div",{className:"text-sm text-destructive",children:u},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:213,columnNumber:25},this),!n&&i&&e.jsxDEV("div",{className:"grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base flex items-center gap-2",children:[e.jsxDEV(xt,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:220,columnNumber:19},this),"T·∫£i g√≥i c·∫≠p nh·∫≠t"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:219,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:218,columnNumber:15},this),e.jsxDEV(Ze,{className:"space-y-4",children:[e.jsxDEV(Yl,{acceptedFile:p??void 0,onFileSelect:Y=>z(Y),onRemove:()=>z(null),disabled:x||Q},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:225,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxDEV(we,{onClick:()=>void W(),disabled:!p||x||Q,children:[e.jsxDEV(pi,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:233,columnNumber:21},this),x?"ƒêang ph√¢n t√≠ch...":"Ph√¢n t√≠ch g√≥i c·∫≠p nh·∫≠t"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:232,columnNumber:19},this),(m==null?void 0:m.detectedType)&&e.jsxDEV($e,{variant:"outline",children:["Detect: ",m.detectedType.toUpperCase()]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:237,columnNumber:21},this),(m==null?void 0:m.releaseType)&&e.jsxDEV($e,{variant:"secondary",children:["release.type: ",m.releaseType.toUpperCase()]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:240,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:231,columnNumber:17},this),f&&e.jsxDEV("div",{className:"rounded-md border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive flex items-start gap-2",children:[e.jsxDEV(La,{className:"h-4 w-4 mt-0.5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:245,columnNumber:21},this),e.jsxDEV("span",{children:f},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:246,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:244,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:224,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:217,columnNumber:13},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"Th√¥ng tin hi·ªán t·∫°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:254,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:253,columnNumber:15},this),e.jsxDEV(Ze,{className:"space-y-2 text-sm",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Phi√™n b·∫£n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:258,columnNumber:19},this),e.jsxDEV("span",{className:"font-medium",children:["v",i.version]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:259,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:257,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Base path"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:262,columnNumber:19},this),e.jsxDEV("span",{className:"font-medium",children:i.basePath},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:263,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:261,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Routes"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:266,columnNumber:19},this),e.jsxDEV("span",{className:"font-medium",children:i.routes},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:267,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:265,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"C√†i ƒë·∫∑t l√∫c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:270,columnNumber:19},this),e.jsxDEV("span",{className:"font-medium",children:du(i.installedAt)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:271,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:269,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:256,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:252,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:216,columnNumber:11},this),m&&e.jsxDEV("div",{className:"grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"So s√°nh manifest"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:282,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:281,columnNumber:15},this),e.jsxDEV(Ze,{children:xe.length>0?e.jsxDEV(Nt,{children:[e.jsxDEV(ft,{children:e.jsxDEV(Ms,{children:[e.jsxDEV(xs,{children:"Thu·ªôc t√≠nh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:289,columnNumber:25},this),e.jsxDEV(xs,{children:"Hi·ªán t·∫°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:290,columnNumber:25},this),e.jsxDEV(xs,{children:"B·∫£n c·∫≠p nh·∫≠t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:291,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:288,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:287,columnNumber:21},this),e.jsxDEV(vt,{children:xe.map(Y=>e.jsxDEV(Ms,{children:[e.jsxDEV(ts,{className:"font-medium",children:Y.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:297,columnNumber:27},this),e.jsxDEV(ts,{children:Y.current},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:298,columnNumber:27},this),e.jsxDEV(ts,{className:Y.changed?"text-destructive":void 0,children:Y.next},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:299,columnNumber:27},this)]},Y.label,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:296,columnNumber:25},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:294,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:286,columnNumber:19},this):e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Ch∆∞a c√≥ d·ªØ li·ªáu so s√°nh."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:305,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:284,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:280,columnNumber:13},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"Ch·ªçn lo·∫°i c·∫≠p nh·∫≠t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:312,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:311,columnNumber:15},this),e.jsxDEV(Ze,{className:"space-y-4",children:[e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"H·ªá th·ªëng ƒë√£ detect lo·∫°i c·∫≠p nh·∫≠t nh∆∞ng v·∫´n y√™u c·∫ßu b·∫°n x√°c nh·∫≠n."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:315,columnNumber:17},this),e.jsxDEV(Jl,{value:N,onValueChange:Y=>g(Y),children:e.jsxDEV("div",{className:"space-y-3",children:ou.map(Y=>e.jsxDEV("label",{className:"flex items-start gap-3 rounded-md border p-3",children:[e.jsxDEV(Wl,{value:Y.value,id:`update-${Y.value}`},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:322,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:Y.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:324,columnNumber:27},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:Y.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:325,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:323,columnNumber:25},this)]},Y.value,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:321,columnNumber:23},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:319,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:318,columnNumber:17},this),ue&&e.jsxDEV("div",{className:"text-xs text-destructive",children:"Lo·∫°i c·∫≠p nh·∫≠t b·∫°n ch·ªçn kh√¥ng kh·ªõp release.type trong module.json."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:332,columnNumber:19},this),m.releaseType&&m.detectedType&&m.releaseType!==m.detectedType&&e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Detect kh√°c release.type, vui l√≤ng ki·ªÉm tra l·∫°i n·ªôi dung g√≥i c·∫≠p nh·∫≠t."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:337,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:314,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:310,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:279,columnNumber:11},this),m&&e.jsxDEV("div",{className:"grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"K·∫øt qu·∫£ ki·ªÉm tra"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:350,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:349,columnNumber:15},this),e.jsxDEV(Ze,{children:fe.length>0?e.jsxDEV(en,{results:fe},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:354,columnNumber:19},this):e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Kh√¥ng c√≥ c·∫£nh b√°o n√†o."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:356,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:352,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:348,columnNumber:13},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"Menu m·ªõi (n·∫øu c√≥)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:363,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:362,columnNumber:15},this),e.jsxDEV(Ze,{className:"space-y-4",children:m.newMenus.length===0?e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Kh√¥ng c√≥ menu m·ªõi."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:367,columnNumber:19},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Ch·ªçn menu c·∫ßn th√™m"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:371,columnNumber:23},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV(Zi,{checked:v.length===m.newMenus.length,onCheckedChange:Y=>je(!!Y)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:373,columnNumber:25},this),e.jsxDEV("span",{children:"Ch·ªçn t·∫•t c·∫£"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:377,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:372,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:370,columnNumber:21},this),e.jsxDEV(Nt,{children:[e.jsxDEV(ft,{children:e.jsxDEV(Ms,{children:[e.jsxDEV(xs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:383,columnNumber:27},this),e.jsxDEV(xs,{children:"Label"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:384,columnNumber:27},this),e.jsxDEV(xs,{children:"Path"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:385,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:382,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:381,columnNumber:23},this),e.jsxDEV(vt,{children:m.newMenus.map(Y=>e.jsxDEV(Ms,{children:[e.jsxDEV(ts,{children:e.jsxDEV(Zi,{checked:v.includes(Y.id),onCheckedChange:de=>Ee(Y.id,!!de)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:392,columnNumber:31},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:391,columnNumber:29},this),e.jsxDEV(ts,{className:"font-medium",children:Y.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:397,columnNumber:29},this),e.jsxDEV(ts,{children:Y.path},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:398,columnNumber:29},this)]},Y.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:390,columnNumber:27},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:388,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:380,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:369,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:365,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:361,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:347,columnNumber:11},this),m&&e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"Th·ª±c hi·ªán c·∫≠p nh·∫≠t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:413,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:412,columnNumber:13},this),e.jsxDEV(Ze,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxDEV(we,{onClick:()=>void X(),disabled:!p||!m||!N||Q||x||me||ue,children:Q?"ƒêang c·∫≠p nh·∫≠t...":"C·∫≠p nh·∫≠t m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:417,columnNumber:17},this),me&&e.jsxDEV($e,{variant:"destructive",children:"C√≥ l·ªói validate"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:424,columnNumber:19},this),!N&&e.jsxDEV($e,{variant:"outline",children:"Ch∆∞a ch·ªçn lo·∫°i c·∫≠p nh·∫≠t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:427,columnNumber:19},this),(V==null?void 0:V.status)&&e.jsxDEV($e,{variant:V.status==="failed"?"destructive":"secondary",children:V.status==="failed"?"Th·∫•t b·∫°i":"ƒêang x·ª≠ l√Ω"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:430,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:416,columnNumber:15},this),(V==null?void 0:V.timeline)&&V.timeline.length>0&&e.jsxDEV(ti,{events:V.timeline},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:435,columnNumber:60},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:415,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:411,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:211,columnNumber:7},this),e.jsxDEV(bi,{open:j,onOpenChange:A,children:e.jsxDEV(Pt,{className:"max-w-xl",children:[e.jsxDEV(Lt,{children:[e.jsxDEV(Qt,{children:"ƒêang c·∫≠p nh·∫≠t m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:444,columnNumber:13},this),e.jsxDEV(_t,{children:"H·ªá th·ªëng ƒëang x·ª≠ l√Ω g√≥i c·∫≠p nh·∫≠t. Vui l√≤ng kh√¥ng t·∫Øt tab trong l√∫c ch·∫°y."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:445,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:443,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-4",children:[Q&&!V&&e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"ƒêang g·ª≠i g√≥i c·∫≠p nh·∫≠t..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:451,columnNumber:15},this),(V==null?void 0:V.timeline)&&V.timeline.length>0&&e.jsxDEV(ti,{events:V.timeline},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:454,columnNumber:15},this),(V==null?void 0:V.status)==="completed"&&e.jsxDEV($e,{variant:"secondary",children:"Ho√†n t·∫•t. ƒêang chuy·ªÉn v·ªÅ danh s√°ch m√¥-ƒëun..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:457,columnNumber:15},this),(V==null?void 0:V.status)==="failed"&&e.jsxDEV($e,{variant:"destructive",children:"C·∫≠p nh·∫≠t th·∫•t b·∫°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:460,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:449,columnNumber:11},this),e.jsxDEV(jt,{children:[e.jsxDEV(we,{variant:"outline",onClick:()=>A(!1),children:"ƒê√≥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:464,columnNumber:13},this),e.jsxDEV(we,{onClick:()=>a("/system/modules"),children:"V·ªÅ danh s√°ch m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:467,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:463,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:442,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:441,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/ModuleUpdatePage.tsx",lineNumber:192,columnNumber:5},this)}const cu=Object.freeze(Object.defineProperty({__proto__:null,default:uu},Symbol.toStringTag,{value:"Module"})),nt={id:"",label:"",path:"",icon:"",order:0,parentId:null,permissionsAny:[],rolesAny:[],moduleId:"",isEnabled:!0};function pu(){const[s,a]=E.useState([]),[t,i]=E.useState(!1),[l,n]=E.useState(null),[r,u]=E.useState(nt),[o,p]=E.useState(null),h=async()=>{try{i(!0);const f=await vs.getMenus();a(f)}catch(f){p(f.message||"Kh√¥ng th·ªÉ t·∫£i menu")}finally{i(!1)}};E.useEffect(()=>{h()},[]);const m=E.useMemo(()=>[...s].sort((f,P)=>(f.order||0)-(P.order||0)),[s]),c=f=>{n(f),u({...f,permissionsAny:f.permissionsAny||[],rolesAny:f.rolesAny||[]})},N=()=>{n(null),u({...nt,order:m.length+1})},g=async()=>{p(null);try{const f={...r,permissionsAny:(r.permissionsAny||[]).filter(Boolean),rolesAny:(r.rolesAny||[]).filter(Boolean)};l?await vs.updateMenu(l.id,f):await vs.createMenu(f),u(nt),n(null),await h()}catch(f){p(f.message||"Kh√¥ng th·ªÉ l∆∞u menu")}},v=async f=>{p(null);try{await vs.deleteMenu(f),await h()}catch(P){p(P.message||"Kh√¥ng th·ªÉ x√≥a menu")}},b=async(f,P)=>{const x=m.findIndex(j=>j.id===f);if(x===-1)return;const y=P==="up"?x-1:x+1;if(y<0||y>=m.length)return;const Q=m[x],U=m[y];await Promise.all([vs.updateMenu(Q.id,{order:U.order}),vs.updateMenu(U.id,{order:Q.order})]),await h()},V=f=>f.split(",").map(P=>P.trim()).filter(Boolean),D=f=>(f||[]).join(", ");return e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-xl font-semibold",children:"Qu·∫£n tr·ªã Menu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:115,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Qu·∫£n l√Ω danh s√°ch menu v√† ph√¢n quy·ªÅn hi·ªÉn th·ªã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:116,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:114,columnNumber:9},this),e.jsxDEV(we,{onClick:N,className:"gap-2",children:[e.jsxDEV(ua,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:119,columnNumber:11},this),"Th√™m menu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:118,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:113,columnNumber:7},this),o&&e.jsxDEV("div",{className:"rounded-md border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:o},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:125,columnNumber:9},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:"Danh s√°ch menu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:132,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:131,columnNumber:9},this),e.jsxDEV(Ze,{children:t?e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"ƒêang t·∫£i..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:136,columnNumber:13},this):e.jsxDEV("div",{className:"space-y-2",children:m.map(f=>{var P,x,y,Q;return e.jsxDEV("div",{className:"flex items-center justify-between rounded-md border p-3",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-medium",children:f.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:143,columnNumber:23},this),!f.isEnabled&&e.jsxDEV($e,{variant:"secondary",children:"T·∫Øt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:144,columnNumber:43},this),f.parentId&&e.jsxDEV($e,{variant:"outline",children:"Con"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:145,columnNumber:41},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:142,columnNumber:21},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:[f.path||"Ch∆∞a c√≥ ƒë∆∞·ªùng d·∫´n"," ‚Ä¢ th·ª© t·ª± ",f.order??0]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:147,columnNumber:21},this),(P=f.permissionsAny)!=null&&P.length||(x=f.rolesAny)!=null&&x.length?e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:[(y=f.permissionsAny)!=null&&y.length?`Quy·ªÅn: ${f.permissionsAny.join(", ")}`:"",(Q=f.rolesAny)!=null&&Q.length?` Vai tr√≤: ${f.rolesAny.join(", ")}`:""]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:151,columnNumber:23},this):null]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:141,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(we,{variant:"ghost",size:"icon",onClick:()=>b(f.id,"up"),children:e.jsxDEV(er,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:159,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:158,columnNumber:21},this),e.jsxDEV(we,{variant:"ghost",size:"icon",onClick:()=>b(f.id,"down"),children:e.jsxDEV(sr,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:162,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:161,columnNumber:21},this),e.jsxDEV(we,{variant:"ghost",size:"icon",onClick:()=>c(f),children:e.jsxDEV(ar,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:165,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:164,columnNumber:21},this),e.jsxDEV(we,{variant:"ghost",size:"icon",onClick:()=>v(f.id),children:e.jsxDEV(Et,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:168,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:167,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:157,columnNumber:19},this)]},f.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:140,columnNumber:17},this)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:138,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:134,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:130,columnNumber:7},this),e.jsxDEV(Ke,{children:[e.jsxDEV(Be,{children:e.jsxDEV(qe,{className:"text-base",children:l?"C·∫≠p nh·∫≠t menu":"T·∫°o menu m·ªõi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:180,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:179,columnNumber:9},this),e.jsxDEV(Ze,{children:[e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-xs font-semibold",children:"ID"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:185,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full rounded-md border px-3 py-2 text-sm",value:r.id,onChange:f=>u(P=>({...P,id:f.target.value})),disabled:!!l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:186,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:184,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-xs font-semibold",children:"Label"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:194,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full rounded-md border px-3 py-2 text-sm",value:r.label,onChange:f=>u(P=>({...P,label:f.target.value}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:195,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:193,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-xs font-semibold",children:"Path"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:202,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full rounded-md border px-3 py-2 text-sm",value:r.path||"",onChange:f=>u(P=>({...P,path:f.target.value}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:203,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:201,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-xs font-semibold",children:"Icon"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:210,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full rounded-md border px-3 py-2 text-sm",value:r.icon||"",onChange:f=>u(P=>({...P,icon:f.target.value}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:211,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:209,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-xs font-semibold",children:"ID cha"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:218,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full rounded-md border px-3 py-2 text-sm",value:r.parentId||"",onChange:f=>u(P=>({...P,parentId:f.target.value||null}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:219,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:217,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-xs font-semibold",children:"Th·ª© t·ª±"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:226,columnNumber:15},this),e.jsxDEV("input",{type:"number",className:"mt-1 w-full rounded-md border px-3 py-2 text-sm",value:r.order??0,onChange:f=>u(P=>({...P,order:Number(f.target.value)}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:227,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:225,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-xs font-semibold",children:"Quy·ªÅn (d·∫•u ph·∫©y)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:235,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full rounded-md border px-3 py-2 text-sm",value:D(r.permissionsAny),onChange:f=>u(P=>({...P,permissionsAny:V(f.target.value)}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:236,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:234,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-xs font-semibold",children:"Vai tr√≤ (d·∫•u ph·∫©y)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:243,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full rounded-md border px-3 py-2 text-sm",value:D(r.rolesAny),onChange:f=>u(P=>({...P,rolesAny:V(f.target.value)}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:244,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:242,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-xs font-semibold",children:"ID m√¥-ƒëun"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:251,columnNumber:15},this),e.jsxDEV("input",{className:"mt-1 w-full rounded-md border px-3 py-2 text-sm",value:r.moduleId||"",onChange:f=>u(P=>({...P,moduleId:f.target.value}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:252,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:250,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:r.isEnabled??!0,onChange:f=>u(P=>({...P,isEnabled:f.target.checked}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:259,columnNumber:15},this),e.jsxDEV("span",{className:"text-sm",children:"B·∫≠t menu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:264,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:258,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:183,columnNumber:11},this),e.jsxDEV("div",{className:"mt-4 flex items-center gap-2",children:[e.jsxDEV(we,{onClick:g,children:l?"C·∫≠p nh·∫≠t":"T·∫°o m·ªõi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:268,columnNumber:13},this),e.jsxDEV(we,{variant:"outline",onClick:()=>{n(null),u(nt)},children:"H·ªßy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:271,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:267,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:182,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:178,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/pages/MenuRegistryPage.tsx",lineNumber:112,columnNumber:5},this)}const gu=Object.freeze(Object.defineProperty({__proto__:null,default:pu},Symbol.toStringTag,{value:"Module"})),hu="_denied_105wx_9",mt={denied:hu};function es({permission:s,fallback:a,children:t,requireAll:i=!1}){const l=Hl(),{hasPermission:n,hasAnyPermission:r,hasAllPermissions:u}=os();if(l.pathname.startsWith("/system-admin")||l.pathname.startsWith("/system/"))return t;let p=!1;return Array.isArray(s)?p=i?u(s):r(s):p=n(s),p?t:a||e.jsxDEV("div",{className:mt.denied,children:[e.jsxDEV("div",{className:mt.deniedIcon,children:"üîí"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/PermissionGate.tsx",lineNumber:53,columnNumber:9},this),e.jsxDEV("h3",{className:mt.deniedTitle,children:"Kh√¥ng c√≥ quy·ªÅn truy c·∫≠p"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/PermissionGate.tsx",lineNumber:54,columnNumber:9},this),e.jsxDEV("p",{className:mt.deniedMessage,children:"B·∫°n kh√¥ng c√≥ quy·ªÅn ƒë·ªÉ xem n·ªôi dung n√†y. Vui l√≤ng li√™n h·ªá qu·∫£n tr·ªã vi√™n."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/PermissionGate.tsx",lineNumber:55,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/PermissionGate.tsx",lineNumber:52,columnNumber:7},this)}const Nu="_shell_o6iml_9",fu="_breadcrumbs_o6iml_23",vu="_breadcrumbSeparator_o6iml_71",bu="_header_o6iml_81",Vu="_title_o6iml_107",Tu="_subtitle_o6iml_125",xu="_actions_o6iml_141",yu="_content_o6iml_151",Ks={shell:Nu,breadcrumbs:fu,breadcrumbSeparator:vu,header:bu,title:Vu,subtitle:Tu,actions:xu,content:yu};function bs({title:s,subtitle:a,actions:t,breadcrumbs:i,children:l}){return e.jsxDEV("div",{className:Ks.shell,children:[i&&i.length>0&&e.jsxDEV("nav",{className:Ks.breadcrumbs,children:i.map((n,r)=>e.jsxDEV(d.Fragment,{children:[r>0&&e.jsxDEV("span",{className:Ks.breadcrumbSeparator,children:"/"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:31,columnNumber:27},this),n.path?e.jsxDEV("a",{href:n.path,className:Ks.breadcrumbLink,children:n.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:33,columnNumber:17},this):e.jsxDEV("span",{className:Ks.breadcrumbCurrent,children:n.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:37,columnNumber:17},this)]},r,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:30,columnNumber:13},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:28,columnNumber:9},this),e.jsxDEV("div",{className:Ks.header,children:[e.jsxDEV("div",{className:Ks.headerText,children:[e.jsxDEV("h1",{className:Ks.title,children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:47,columnNumber:11},this),a&&e.jsxDEV("p",{className:Ks.subtitle,children:a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:48,columnNumber:24},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:46,columnNumber:9},this),t&&e.jsxDEV("div",{className:Ks.actions,children:t},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:50,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:45,columnNumber:7},this),e.jsxDEV("div",{className:Ks.content,children:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:54,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/ModuleShell.tsx",lineNumber:25,columnNumber:5},this)}const Eu="_icon_ty1qx_33",Hu="_title_ty1qx_45",Du="_message_ty1qx_61",Pu="_action_ty1qx_79",ka={icon:Eu,title:Hu,message:Du,action:Pu};function aa({icon:s,title:a,message:t,action:i}){return e.jsxDEV("div",{className:ka.empty,children:[s&&e.jsxDEV("div",{className:ka.icon,children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/EmptyState.tsx",lineNumber:19,columnNumber:16},this),e.jsxDEV("h3",{className:ka.title,children:a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/EmptyState.tsx",lineNumber:20,columnNumber:7},this),t&&e.jsxDEV("p",{className:ka.message,children:t},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/EmptyState.tsx",lineNumber:21,columnNumber:19},this),i&&e.jsxDEV("div",{className:ka.action,children:i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/EmptyState.tsx",lineNumber:22,columnNumber:18},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/EmptyState.tsx",lineNumber:18,columnNumber:5},this)}const Lu="_spinner_13rkb_31",ju="_message_13rkb_65",$t={spinner:Lu,message:ju};function Vi({message:s="ƒêang t·∫£i..."}){return e.jsxDEV("div",{className:$t.loading,children:[e.jsxDEV(tr,{size:48,className:$t.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/LoadingState.tsx",lineNumber:17,columnNumber:7},this),e.jsxDEV("p",{className:$t.message,children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/LoadingState.tsx",lineNumber:18,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/LoadingState.tsx",lineNumber:16,columnNumber:5},this)}const Qu="_statusBadge_1ro4h_9",_u="_statusActive_1ro4h_31 _statusBadge_1ro4h_9",Cu="_statusInactive_1ro4h_43 _statusBadge_1ro4h_9",Su="_statusPending_1ro4h_55 _statusBadge_1ro4h_9",Mu="_statusError_1ro4h_67 _statusBadge_1ro4h_9",Ba={statusBadge:Qu,statusActive:_u,statusInactive:Cu,statusPending:Su,statusError:Mu},Iu={active:Ba.statusActive,inactive:Ba.statusInactive,pending:Ba.statusPending,error:Ba.statusError};function bt({variant:s,children:a,className:t}){const i=Iu[s]||Ba.statusBadge,l=t?`${i} ${t}`:i;return e.jsxDEV("span",{className:l,children:a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/StatusBadge.tsx",lineNumber:28,columnNumber:10},this)}const Au="_toolbar_1e7ev_9",wu="_toolbarLeft_1e7ev_27",ku="_toolbarRight_1e7ev_43",Ru="_searchBox_1e7ev_55",Ou="_searchIcon_1e7ev_69",Uu="_searchInput_1e7ev_87",$u="_statsText_1e7ev_133",pa={toolbar:Au,toolbarLeft:wu,toolbarRight:ku,searchBox:Ru,searchIcon:Ou,searchInput:Uu,statsText:$u};function Ti({searchQuery:s,onSearchChange:a,searchPlaceholder:t="T√¨m ki·∫øm...",totalCount:i,entityLabel:l="b·∫£n ghi",filters:n,actions:r}){return e.jsxDEV("div",{className:pa.toolbar,children:[e.jsxDEV("div",{className:pa.toolbarLeft,children:[e.jsxDEV("div",{className:pa.searchBox,children:[e.jsxDEV(Dt,{size:18,className:pa.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataToolbar.tsx",lineNumber:33,columnNumber:11},this),e.jsxDEV("input",{type:"text",placeholder:t,value:s,onChange:u=>a(u.target.value),className:pa.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataToolbar.tsx",lineNumber:34,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataToolbar.tsx",lineNumber:32,columnNumber:9},this),n&&e.jsxDEV("div",{children:n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataToolbar.tsx",lineNumber:42,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataToolbar.tsx",lineNumber:31,columnNumber:7},this),e.jsxDEV("div",{className:pa.toolbarRight,children:[r,e.jsxDEV("span",{className:pa.statsText,children:["T·ªïng: ",e.jsxDEV("strong",{children:i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataToolbar.tsx",lineNumber:47,columnNumber:17},this)," ",l]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataToolbar.tsx",lineNumber:46,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataToolbar.tsx",lineNumber:44,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataToolbar.tsx",lineNumber:30,columnNumber:5},this)}const Ku="_tableContainer_jlxwq_9",Zu="_table_jlxwq_9",zu="_codeCell_jlxwq_137",Bu="_nameCell_jlxwq_151",qu="_mutedCell_jlxwq_161",Fu="_actionsCell_jlxwq_169",Gu="_actionButton_jlxwq_183",Ju="_actionButtonDanger_jlxwq_235",Wu="_pagination_jlxwq_361",Xu="_paginationButton_jlxwq_381",Yu="_paginationInfo_jlxwq_427",Us={tableContainer:Ku,table:Zu,codeCell:zu,nameCell:Bu,mutedCell:qu,actionsCell:Fu,actionButton:Gu,actionButtonDanger:Ju,pagination:Wu,paginationButton:Xu,paginationInfo:Yu};function xi({columns:s,data:a,keyExtractor:t,emptyMessage:i="Kh√¥ng c√≥ d·ªØ li·ªáu"}){return a.length===0&&i?e.jsxDEV("div",{style:{padding:"40px",textAlign:"center",color:"var(--muted-foreground)"},children:i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:30,columnNumber:12},this):e.jsxDEV("div",{className:Us.tableContainer,children:e.jsxDEV("table",{className:Us.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:s.map((l,n)=>e.jsxDEV("th",{style:l.width?{width:l.width}:void 0,children:l.header},n,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:39,columnNumber:15},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:37,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:36,columnNumber:9},this),e.jsxDEV("tbody",{children:a.map(l=>e.jsxDEV("tr",{children:s.map((n,r)=>e.jsxDEV("td",{children:n.render?n.render(l):n.accessor?String(l[n.accessor]):null},r,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:49,columnNumber:17},this))},t(l),!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:47,columnNumber:13},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:45,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:35,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:34,columnNumber:5},this)}function yi({currentPage:s,totalPages:a,onPageChange:t}){return e.jsxDEV("div",{className:Us.pagination,children:[e.jsxDEV("button",{className:Us.paginationButton,onClick:()=>t(s-1),disabled:s===1,children:"Tr∆∞·ªõc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:70,columnNumber:7},this),e.jsxDEV("span",{className:Us.paginationInfo,children:["Trang ",s," / ",a]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:77,columnNumber:7},this),e.jsxDEV("button",{className:Us.paginationButton,onClick:()=>t(s+1),disabled:s===a,children:"Sau"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:80,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/DataTable.tsx",lineNumber:69,columnNumber:5},this)}const fs={code:Us.codeCell,name:Us.nameCell,muted:Us.mutedCell,actions:Us.actionsCell,actionButton:Us.actionButton,actionButtonDanger:Us.actionButtonDanger},ec="_overlay_1161z_9",sc="_dialog_1161z_33",ac="_header_1161z_53",tc="_iconDanger_1161z_87 _iconWrapper_1161z_67",ic="_iconWarning_1161z_99 _iconWrapper_1161z_67",lc="_iconInfo_1161z_111 _iconWrapper_1161z_67",nc="_headerContent_1161z_123",mc="_title_1161z_131",rc="_description_1161z_145",oc="_actions_1161z_159",dc="_buttonCancel_1161z_195 _button_1161z_173",uc="_buttonConfirm_1161z_215 _button_1161z_173",cc="_buttonDanger_1161z_235 _button_1161z_173",Ss={overlay:ec,dialog:sc,header:ac,iconDanger:tc,iconWarning:ic,iconInfo:lc,headerContent:nc,title:mc,description:rc,actions:oc,buttonCancel:dc,buttonConfirm:uc,buttonDanger:cc},pc={danger:e.jsxDEV(lr,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:25,columnNumber:11},void 0),warning:e.jsxDEV(La,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:26,columnNumber:12},void 0),info:e.jsxDEV(ir,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:27,columnNumber:9},void 0)},gc={danger:Ss.iconDanger,warning:Ss.iconWarning,info:Ss.iconInfo};function Ei({open:s,onClose:a,onConfirm:t,title:i,description:l,variant:n="info",confirmLabel:r="X√°c nh·∫≠n",cancelLabel:u="H·ªßy",loading:o=!1}){if(E.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),!s)return null;const p=m=>{m.target===m.currentTarget&&a()},h=()=>{t()};return e.jsxDEV("div",{className:Ss.overlay,onClick:p,children:e.jsxDEV("div",{className:Ss.dialog,children:[e.jsxDEV("div",{className:Ss.header,children:[e.jsxDEV("div",{className:gc[n],children:pc[n]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:75,columnNumber:11},this),e.jsxDEV("div",{className:Ss.headerContent,children:[e.jsxDEV("h3",{className:Ss.title,children:i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:77,columnNumber:13},this),e.jsxDEV("p",{className:Ss.description,children:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:78,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:76,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:74,columnNumber:9},this),e.jsxDEV("div",{className:Ss.actions,children:[e.jsxDEV("button",{className:Ss.buttonCancel,onClick:a,disabled:o,children:u},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:82,columnNumber:11},this),e.jsxDEV("button",{className:n==="danger"?Ss.buttonDanger:Ss.buttonConfirm,onClick:h,disabled:o,children:o?"ƒêang x·ª≠ l√Ω...":r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:85,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:81,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:73,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/ConfirmDialog.tsx",lineNumber:72,columnNumber:5},this)}const hc="_overlay_flrbp_9",Nc="_drawer_flrbp_25",fc="_header_flrbp_55",vc="_headerContent_flrbp_73",bc="_title_flrbp_81",Vc="_subtitle_flrbp_95",Tc="_closeButton_flrbp_107",xc="_body_flrbp_143",yc="_footer_flrbp_155",Ec="_buttonCancel_flrbp_195 _button_flrbp_173",Hc="_buttonPrimary_flrbp_215 _button_flrbp_173",Dc="_formGroup_flrbp_247",Pc="_label_flrbp_255",Lc="_labelRequired_flrbp_271",jc="_input_flrbp_281",Qc="_inputError_flrbp_325",_c="_select_flrbp_341 _input_flrbp_281",Cc="_textarea_flrbp_351 _input_flrbp_281",Sc="_errorText_flrbp_363",Mc="_helpText_flrbp_375",gs={overlay:hc,drawer:Nc,header:fc,headerContent:vc,title:bc,subtitle:Vc,closeButton:Tc,body:xc,footer:yc,buttonCancel:Ec,buttonPrimary:Hc,formGroup:Dc,label:Pc,labelRequired:Lc,input:jc,inputError:Qc,select:_c,textarea:Cc,errorText:Sc,helpText:Mc};function Hi({open:s,onClose:a,title:t,subtitle:i,children:l,onSubmit:n,submitLabel:r="L∆∞u",cancelLabel:u="H·ªßy",loading:o=!1,footerActions:p}){if(E.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),!s)return null;const h=c=>{c.target===c.currentTarget&&!o&&a()},m=c=>{c.preventDefault(),n&&!o&&n()};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:gs.overlay,onClick:h},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:64,columnNumber:7},this),e.jsxDEV("div",{className:gs.drawer,children:[e.jsxDEV("div",{className:gs.header,children:[e.jsxDEV("div",{className:gs.headerContent,children:[e.jsxDEV("h2",{className:gs.title,children:t},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:68,columnNumber:13},this),i&&e.jsxDEV("p",{className:gs.subtitle,children:i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:69,columnNumber:26},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:67,columnNumber:11},this),e.jsxDEV("button",{className:gs.closeButton,onClick:a,disabled:o,children:e.jsxDEV(Ht,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:72,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:71,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV("form",{onSubmit:m,children:[e.jsxDEV("div",{className:gs.body,children:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:77,columnNumber:11},this),e.jsxDEV("div",{className:gs.footer,children:p||e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{type:"button",className:gs.buttonCancel,onClick:a,disabled:o,children:u},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:82,columnNumber:17},this),e.jsxDEV("button",{type:"submit",className:gs.buttonPrimary,disabled:o,children:o?"ƒêang x·ª≠ l√Ω...":r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:85,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:81,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:79,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:76,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:65,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:63,columnNumber:5},this)}function Vs({label:s,required:a,error:t,helpText:i,children:l}){return e.jsxDEV("div",{className:gs.formGroup,children:[e.jsxDEV("label",{className:`${gs.label} ${a?gs.labelRequired:""}`,children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:109,columnNumber:7},this),l,t&&e.jsxDEV("div",{className:gs.errorText,children:t},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:111,columnNumber:17},this),!t&&i&&e.jsxDEV("div",{className:gs.helpText,children:i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:112,columnNumber:30},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/_shared/components/FormDrawer.tsx",lineNumber:108,columnNumber:5},this)}const is={input:gs.input,inputError:gs.inputError,select:gs.select,textarea:gs.textarea};function at(s){const{toolbar:a,bordered:t=!0,size:i="middle",pagination:l,showSorterTooltip:n=!0,...r}=s,u=l===!1?!1:{pageSizeOptions:[10,20,50],showSizeChanger:!0,...l};return e.jsxDEV("div",{className:"app-table",children:[a?e.jsxDEV("div",{className:"app-table__toolbar",children:a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/AppTable.tsx",lineNumber:30,columnNumber:18},this):null,e.jsxDEV($s,{bordered:t,size:i,showSorterTooltip:n,pagination:u,...r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/AppTable.tsx",lineNumber:31,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/AppTable.tsx",lineNumber:29,columnNumber:5},this)}const Ic=s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ac=(s,a)=>{if(!a)return s;const t=new RegExp(`(${Ic(a)})`,"gi");return s.split(t).map((l,n)=>l.toLowerCase()===a.toLowerCase()?e.jsxDEV("mark",{style:{padding:0,backgroundColor:"#ffe58f"},children:l},n,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/columnSearch.tsx",lineNumber:30,columnNumber:7},void 0):e.jsxDEV("span",{children:l},n,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/columnSearch.tsx",lineNumber:34,columnNumber:7},void 0))};function Cs(s,a,t={}){const{placeholder:i,normalize:l,render:n}=t,r=(o,p)=>{p(),a.setSearchText(o[0]||""),a.setSearchedColumn(String(s))},u=(o,p)=>{o(),a.setSearchText(""),a.setSearchedColumn(String(s)),p({closeDropdown:!0})};return{filterDropdown:({setSelectedKeys:o,selectedKeys:p,confirm:h,clearFilters:m,close:c})=>e.jsxDEV("div",{style:{padding:8},children:[e.jsxDEV(re,{ref:a.inputRef,placeholder:i||`T√¨m theo ${String(s)}`,value:p[0],onChange:N=>o(N.target.value?[N.target.value]:[]),onPressEnter:()=>r(p,h),style:{marginBottom:8,display:"block"},allowClear:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/columnSearch.tsx",lineNumber:68,columnNumber:9},this),e.jsxDEV(J,{children:[e.jsxDEV(q,{type:"primary",onClick:()=>r(p,h),icon:e.jsxDEV(ei,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/columnSearch.tsx",lineNumber:81,columnNumber:19},this),size:"small",children:"L·ªçc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/columnSearch.tsx",lineNumber:78,columnNumber:11},this),e.jsxDEV(q,{onClick:()=>m&&u(m,h),size:"small",children:"Reset"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/columnSearch.tsx",lineNumber:86,columnNumber:11},this),e.jsxDEV(q,{type:"link",size:"small",onClick:()=>c(),children:"ƒê√≥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/columnSearch.tsx",lineNumber:92,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/columnSearch.tsx",lineNumber:77,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/columnSearch.tsx",lineNumber:67,columnNumber:7},this),filterIcon:o=>e.jsxDEV(ei,{style:{color:o?"#1677ff":void 0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/data-table/columnSearch.tsx",lineNumber:99,columnNumber:7},this),onFilter:(o,p)=>(l?l(p[s],p):String(p[s]??"")).toLowerCase().includes(String(o).toLowerCase()),onFilterDropdownOpenChange:o=>{o&&setTimeout(()=>{var p,h;return(h=(p=a.inputRef)==null?void 0:p.current)==null?void 0:h.select()},100)},render:(o,p)=>{const h=n?n(o,p):o;return a.searchedColumn!==String(s)||h==null?h:typeof h=="string"||typeof h=="number"?Ac(String(h),a.searchText):h}}}const wc="http://localhost:7788",zi=s=>!s||s==="all"?null:s==="active"?1:s==="inactive"?0:2,kc=async(s,a)=>{const t=await fetch(`${wc}${s}`,a);if(!t.ok){const i=await t.json().catch(()=>({})),l=(i==null?void 0:i.message)||`Request failed: ${t.status}`;throw new Error(l)}return await t.json()},rt=s=>({id:s._id??s.id,username:s.username??null,full_name:s.full_name??null,email:s.email??null,phone:s.phone??null,status:Number(s.status),last_login_at:s.last_login_at??s.lastLoginAt??null,created_at:s.created_at??null,updated_at:s.updated_at??null,note:s.note??null,department_id:s.department_id??s.departmentId??null,department_name:s.department_name??null,department_level:s.department_level??null,roles:Array.isArray(s.roles)?s.roles:[],primary_role_code:s.primary_role_code??null,primary_role_name:s.primary_role_name??null}),Bi=s=>({id:s._id??s.id,parent_id:s.parent_id??null,name:s.name??"",code:s.code??null,level:s.level??null,order_index:s.order_index??null,is_active:s.is_active??null}),Kt=new Map,Rc=(s,a)=>{const t=[],i=[...a.get(s)||[]];for(;i.length>0;){const l=i.pop();t.push(l);const n=a.get(l.id);n&&n.length>0&&i.push(...n)}return t},qi=(s,a,t)=>{const i=new Map(s.map(u=>[u.id,u])),l=new Map;if(s.forEach(u=>{const o=u.parent_id??null,p=l.get(o)||[];p.push(u),l.set(o,p)}),t===1)return s;const n=i.get(a);if(!n)return[];if(t===3)return[n];const r=Rc(a,l);return[n,...r]},Os={async listUsers(s){const{q:a,status:t,roleId:i,departmentId:l,scopeDepartmentId:n,scopeLevel:r,page:u=1,pageSize:o=10,sortBy:p="created_at",sortDir:h="desc"}=s,m=await M.rpc("rpc_iam_users_search",{p_q:(a==null?void 0:a.trim())||null,p_status:zi(t),p_role_id:i||null,p_department_id:l||null,p_scope_department_id:n||null,p_scope_level:r??null,p_sort_by:p,p_sort_dir:h,p_page:u,p_page_size:o}),c=m.error&&m.error.message.includes("rpc_iam_users_search"),N=c?await M.rpc("rpc_users_search",{p_q:(a==null?void 0:a.trim())||null,p_status:zi(t),p_role_id:i||null,p_sort_by:p,p_sort_dir:h,p_page:u,p_page_size:o}):m;if(N.error)throw new Error(`users select failed: ${N.error.message}`);let g=(N.data||[]).map(rt),v=N.data&&N.data.length>0?Number(N.data[0].total_count):0;if(c&&n&&r){const b=`${n}:${r}`,V=Kt.get(b)||await Os.listDepartmentScope(n,r);Kt.has(b)||Kt.set(b,V);let D=V;l&&(D=qi(V,l,2));const f=new Set(D.map(P=>P.id));g=g.filter(P=>P.department_id&&f.has(P.department_id)),v=g.length}return{data:g,total:v}},async getUserById(s){const{data:a,error:t}=await M.from("users").select("*").eq("_id",s).maybeSingle();if(t)throw new Error(`user select failed: ${t.message}`);return a?rt(a):null},async createUser(s){const{default_password:a,...t}=s;if(!a||!a.trim())throw new Error("Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u m·∫∑c ƒë·ªãnh ƒë·ªÉ t·∫°o t√†i kho·∫£n ƒëƒÉng nh·∫≠p.");const i=await kc("/system-admin/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,status:t.status??1,department_id:t.department_id??null,default_password:a.trim()})});return rt(i)},async updateUser(s,a){const{default_password:t,...i}=a,l={...i,departmentId:i.department_id??null,metadata:t?{defaultPassword:t}:void 0,updated_at:new Date().toISOString()};let n=await M.from("users").update(l).eq("_id",s).select("*").single();if(n.error&&i.department_id&&n.error.message.includes("department_id")){const r={...l};delete r.department_id,n=await M.from("users").update(r).eq("_id",s).select("*").single()}if(n.error)throw new Error(`user update failed: ${n.error.message}`);return rt(n.data)},async setUserStatus(s,a){const t={status:a,updated_at:new Date().toISOString()};a===2?t.locked_at=new Date().toISOString():t.locked_at=null;const{error:i}=await M.from("users").update(t).eq("_id",s);if(i)throw new Error(`user status update failed: ${i.message}`)},async softDeleteUser(s){const{error:a}=await M.from("users").update({deleted_at:new Date().toISOString(),status:0,updated_at:new Date().toISOString()}).eq("_id",s);if(a)throw new Error(`user delete failed: ${a.message}`)},async listRoles(){const{data:s,error:a}=await M.from("roles").select("_id, code, name, status, is_system, sort_order").order("sort_order",{ascending:!0}).order("code",{ascending:!0});if(a)throw new Error(`roles select failed: ${a.message}`);return(s||[]).map(t=>({id:t._id??t.id,code:t.code,name:t.name,status:t.status,is_system:t.is_system??null,sort_order:t.sort_order??null}))},async listDepartmentScope(s,a){if(!s||!a)return[];const t=await M.rpc("rpc_my_department_scope",{p_scope_department_id:s,p_scope_level:a});if(t.error&&t.error.message.includes("rpc_my_department_scope")){const i=await M.from("departments").select("_id, parent_id, name, code, level, order_index, is_active").order("level",{ascending:!0}).order("order_index",{ascending:!0}).order("name",{ascending:!0});if(i.error)throw new Error(`departments scope select failed: ${i.error.message}`);const l=(i.data||[]).map(Bi);return qi(l,s,a).filter(r=>r.is_active!==!1)}if(t.error)throw new Error(`departments scope select failed: ${t.error.message}`);return(t.data||[]).map(Bi)},async setUserRoles(s,a,t){const{error:i}=await M.rpc("rpc_user_set_roles",{p_user_id:s,p_role_ids:a.length>0?a:null,p_primary_role_id:t??null,p_actor:null});if(i)throw new Error(`user roles update failed: ${i.message}`)},async listUserRoles(s){const{data:a,error:t}=await M.from("user_roles").select("role_id, is_primary").eq("user_id",s);if(t)throw new Error(`user roles select failed: ${t.message}`);const i=(a||[]).map(u=>u.role_id).filter(Boolean);if(i.length===0)return[];const{data:l,error:n}=await M.from("roles").select("_id, code, name").in("_id",i);if(n)throw new Error(`user roles select failed: ${n.message}`);const r=new Map((l||[]).map(u=>[u._id??u.id,u]));return(a||[]).map(u=>{const o=r.get(u.role_id);return{role_id:u.role_id,code:(o==null?void 0:o.code)??u.role_id,name:(o==null?void 0:o.name)??u.role_id,is_primary:u.is_primary??!1}})}},Oc=s=>{if(!s)return"Ch∆∞a ƒëƒÉng nh·∫≠p";const a=new Date(s);return Number.isNaN(a.getTime())?s:a.toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},Uc=s=>s===1?"green":s===0?"orange":"red",$c=s=>s===1?"Ho·∫°t ƒë·ªông":s===0?"T·∫°m d·ª´ng":"Kh√≥a",Kc=s=>{if(!s)return null;const a=s.trim();if(a.length===2)return 1;if(a.length>=4&&a.length%2===0){const t=a.length/2;if(t===1||t===2||t===3)return t}return null},Zc=(s,a)=>s===1||s===2||s===3?s:s===0?1:Kc(a),zc=s=>{const a=new Map;s.forEach(n=>{a.set(n.id,{...n,children:[]})}),a.forEach(n=>{n.parent_id&&a.has(n.parent_id)&&a.get(n.parent_id).children.push(n.id)});const t=n=>n.sort((r,u)=>{const o=a.get(r),p=a.get(u);if(!o||!p)return 0;const h=o.order_index??0,m=p.order_index??0;return h!==m?h-m:(o.name||"").localeCompare(p.name||"","vi")}),i=n=>{const r=a.get(n);if(!r)return null;const u=t(r.children).map(i).filter(Boolean);return{title:r.code?`${r.name} (${r.code})`:r.name,value:r.id,key:r.id,selectable:!0,children:u.length>0?u:void 0}},l=Array.from(a.values()).filter(n=>!n.parent_id||!a.has(n.parent_id));return t(l.map(n=>n.id)).map(i).filter(Boolean)};function Bc(){var ms,as,ns;const s=ys(),{user:a}=Sa(),{hasPermission:t}=os(),i=d.useRef(null),[l,n]=d.useState(""),[r,u]=d.useState(""),[o,p]=d.useState(""),[h,m]=d.useState(""),[c,N]=d.useState("all"),[g,v]=d.useState("all"),b=Zc(((ms=a==null?void 0:a.departmentInfo)==null?void 0:ms.level)??null,((as=a==null?void 0:a.departmentInfo)==null?void 0:as.code)??null),V=b?((ns=a==null?void 0:a.departmentInfo)==null?void 0:ns.id)??null:null,D=b===2,f=b===3,[P,x]=d.useState("all"),[y,Q]=d.useState([]),[U,j]=d.useState(1),[A,z]=d.useState(10),[W,X]=d.useState(null),[fe,me]=d.useState("desc"),ue=t("sa.iam.user.create"),xe=t("sa.iam.user.update"),Ee=t("sa.iam.user.delete"),[je,Y]=d.useState(!1),[de,Te]=d.useState([]),[S,B]=d.useState(0),[ge,be]=d.useState([]),[ie,Ne]=d.useState(!1),[w,_]=d.useState(null),[H,L]=d.useState(!1),[G,ye]=d.useState(null),[He]=O.useForm(),le=d.useMemo(()=>zc(y),[y]);d.useEffect(()=>{const ee=setTimeout(()=>m(o.trim()),300);return()=>clearTimeout(ee)},[o]),d.useEffect(()=>{j(1)},[h,c,g,P]),d.useEffect(()=>{!V||!b||(f||D&&P==="all")&&x(V)},[P,D,f,V,b]);const te=ee=>({items:[{key:"view",label:"Xem chi ti·∫øt",onClick:()=>s(`/system-admin/iam/users/${ee.id}`)}]}),Ce=d.useCallback(async()=>{try{const ee=await Os.listRoles();be(ee)}catch(ee){const Ie=ee instanceof Error?ee.message:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch vai tr√≤.";us.error({title:"L·ªói t·∫£i vai tr√≤",content:Ie})}},[]),ne=d.useCallback(async()=>{if(!V||!b){Q([]);return}try{const ee=await Os.listDepartmentScope(V,b);Q(ee)}catch(ee){const Ie=ee instanceof Error?ee.message:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch ƒë∆°n v·ªã qu·∫£n l√Ω.";us.error({title:"L·ªói t·∫£i ƒë∆°n v·ªã",content:Ie})}},[V,b]),ae=d.useCallback(async()=>{Y(!0);try{const ee=await Os.listUsers({q:h||void 0,status:c,roleId:g==="all"?null:g,departmentId:P==="all"?f?V:null:P,scopeDepartmentId:V,scopeLevel:b,page:U,pageSize:A,sortBy:W||void 0,sortDir:fe});Te(ee.data),B(ee.total)}catch(ee){const Ie=ee instanceof Error?ee.message:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch ng∆∞·ªùi d√πng.";us.error({title:"L·ªói t·∫£i d·ªØ li·ªáu",content:Ie})}finally{Y(!1)}},[h,P,f,U,A,g,V,b,W,fe,c]);d.useEffect(()=>{Ce()},[Ce]),d.useEffect(()=>{ne()},[ne]),d.useEffect(()=>{ae()},[ae]);const T=()=>{_(null),He.resetFields(),He.setFieldsValue({status:1,department_id:V??void 0}),Ne(!0)},I=ee=>{_(ee),He.setFieldsValue({username:ee.username,full_name:ee.full_name,email:ee.email,phone:ee.phone,status:ee.status,note:ee.note,department_id:ee.department_id??void 0}),Ne(!0)},se=async()=>{try{const ee=await He.validateFields();w?await Os.updateUser(w.id,ee):await Os.createUser(ee),Ne(!1),ae()}catch(ee){if(ee&&typeof ee=="object"&&"errorFields"in ee)return;const Ie=ee instanceof Error?ee.message:"Kh√¥ng th·ªÉ l∆∞u ng∆∞·ªùi d√πng.";us.error({title:"L·ªói l∆∞u d·ªØ li·ªáu",content:Ie})}},he=async ee=>{const Ie=ee.status===2?1:2;try{await Os.setUserStatus(ee.id,Ie),ae()}catch(Ge){const Es=Ge instanceof Error?Ge.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i.";us.error({title:"L·ªói c·∫≠p nh·∫≠t",content:Es})}},De=async ee=>{try{await Os.softDeleteUser(ee.id),ae()}catch(Ie){const Ge=Ie instanceof Error?Ie.message:"Kh√¥ng th·ªÉ x√≥a ng∆∞·ªùi d√πng.";us.error({title:"L·ªói x√≥a d·ªØ li·ªáu",content:Ge})}},ve=ee=>{ye(ee),L(!0)},ss=async(ee,Ie)=>{if(G)try{await Os.setUserRoles(G.id,ee,Ie??null),L(!1),ye(null),ae()}catch(Ge){const Es=Ge instanceof Error?Ge.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t vai tr√≤.";us.error({title:"L·ªói c·∫≠p nh·∫≠t",content:Es})}};return e.jsxDEV(es,{permission:"sa.iam.user.read",children:e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"IAM"},{label:"Ng∆∞·ªùi d√πng"}],title:"Qu·∫£n l√Ω Ng∆∞·ªùi d√πng",subtitle:"Qu·∫£n l√Ω t√†i kho·∫£n v√† th√¥ng tin ng∆∞·ªùi d√πng h·ªá th·ªëng",actions:e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(qs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:375,columnNumber:42},this),disabled:!ue,onClick:T,children:"Th√™m ng∆∞·ªùi d√πng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:375,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:365,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 pb-8",children:e.jsxDEV(ps,{children:e.jsxDEV(at,{rowKey:"id",loading:je,dataSource:de,locale:{emptyText:e.jsxDEV(aa,{title:"Kh√¥ng c√≥ d·ªØ li·ªáu",message:"Ch∆∞a c√≥ ng∆∞·ªùi d√πng n√†o."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:387,columnNumber:36},this)},toolbar:e.jsxDEV(J,{wrap:!0,style:{width:"100%",justifyContent:"space-between"},children:[e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(re,{placeholder:"T√¨m theo username, h·ªç t√™n, email...",value:o,onChange:ee=>p(ee.target.value),allowClear:!0,style:{width:280}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:391,columnNumber:21},this),e.jsxDEV(_e,{value:c,onChange:ee=>N(ee),style:{width:160},options:[{value:"all",label:"T·∫•t c·∫£ tr·∫°ng th√°i"},{value:"active",label:"Ho·∫°t ƒë·ªông"},{value:"inactive",label:"T·∫°m d·ª´ng"},{value:"locked",label:"Kh√≥a"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:398,columnNumber:21},this),e.jsxDEV(_e,{value:g,onChange:ee=>v(ee),style:{width:220},options:[{value:"all",label:"T·∫•t c·∫£ vai tr√≤"},...ge.map(ee=>({value:ee.id,label:`${ee.code} - ${ee.name}`}))]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:409,columnNumber:21},this),e.jsxDEV(Li,{value:P==="all"?void 0:P,onChange:ee=>x(ee??"all"),treeData:le,style:{width:260},placeholder:f?"ƒê∆°n v·ªã c·ªßa b·∫°n":"T·∫•t c·∫£ ƒë∆°n v·ªã qu·∫£n l√Ω",allowClear:!f,disabled:f,treeDefaultExpandAll:!1,showSearch:!0,filterTreeNode:(ee,Ie)=>String(Ie.title).toLowerCase().includes(ee.toLowerCase()),notFoundContent:"Kh√¥ng c√≥ ƒë∆°n v·ªã ph√π h·ª£p",dropdownStyle:{maxHeight:400,overflow:"auto"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:421,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:390,columnNumber:19},this),e.jsxDEV(Le.Text,{type:"secondary",children:["T·ªïng: ",e.jsxDEV("strong",{children:S},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:441,columnNumber:27},this)," ng∆∞·ªùi d√πng"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:440,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:389,columnNumber:17},this),pagination:{current:U,pageSize:A,total:S,onChange:(ee,Ie)=>{j(ee),z(Ie)}},onChange:(ee,Ie,Ge)=>{const Es=ee.current??1,ta=ee.pageSize??A;j(Es),z(ta),!Array.isArray(Ge)&&Ge.field&&(X(String(Ge.field)),Ge.order&&me(Ge.order==="ascend"?"asc":"desc"))},columns:[{title:"Username",dataIndex:"username",key:"username",width:160,ellipsis:!0,sorter:!0,...Cs("username",{searchText:l,searchedColumn:r,setSearchText:n,setSearchedColumn:u,inputRef:i},{placeholder:"T√¨m username"})},{title:"H·ªç v√† t√™n",dataIndex:"full_name",key:"full_name",width:200,ellipsis:!0,sorter:!0,...Cs("full_name",{searchText:l,searchedColumn:r,setSearchText:n,setSearchedColumn:u,inputRef:i},{placeholder:"T√¨m h·ªç t√™n"})},{title:"Email",dataIndex:"email",key:"email",width:220,ellipsis:!0,sorter:!0,...Cs("email",{searchText:l,searchedColumn:r,setSearchText:n,setSearchedColumn:u,inputRef:i},{placeholder:"T√¨m email"})},{title:"ƒêi·ªán tho·∫°i",dataIndex:"phone",key:"phone",width:140,ellipsis:!0},{title:"ƒê∆°n v·ªã qu·∫£n l√Ω",dataIndex:"department_name",key:"department_name",width:220,ellipsis:!0,sorter:!0,render:ee=>ee||"-"},{title:"Vai tr√≤",dataIndex:"roles",key:"roles",width:220,render:ee=>{if(!ee||ee.length===0)return"-";const Ie=[...ee].sort((Ge,Es)=>Ge.is_primary&&!Es.is_primary?-1:!Ge.is_primary&&Es.is_primary?1:(Ge.code||"").localeCompare(Es.code||"","vi"));return e.jsxDEV(J,{wrap:!0,children:Ie.map(Ge=>e.jsxDEV(Re,{color:Ge.is_primary?"blue":"default",children:Ge.code},Ge.role_id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:555,columnNumber:27},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:553,columnNumber:23},this)}},{title:"ƒêƒÉng nh·∫≠p l·∫ßn cu·ªëi",dataIndex:"last_login_at",key:"last_login_at",width:170,render:ee=>Oc(ee),sorter:!0},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:120,align:"center",render:ee=>e.jsxDEV(Re,{color:Uc(ee),children:$c(ee)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:578,columnNumber:21},this)},{title:"Thao t√°c",key:"actions",width:180,fixed:"right",render:(ee,Ie)=>e.jsxDEV(J,{children:[e.jsxDEV(ze,{title:"Xem chi ti·∫øt",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(ma,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:592,columnNumber:33},this),onClick:()=>s(`/system-admin/iam/users/${Ie.id}`)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:589,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:588,columnNumber:23},this),e.jsxDEV(ze,{title:"G√°n vai tr√≤",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(ni,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:600,columnNumber:33},this),disabled:!xe,onClick:()=>ve(Ie)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:597,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:596,columnNumber:23},this),e.jsxDEV(ze,{title:"Ch·ªânh s·ª≠a",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(oa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:609,columnNumber:33},this),disabled:!xe,onClick:()=>I(Ie)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:606,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:605,columnNumber:23},this),e.jsxDEV(ws,{title:"X√≥a ng∆∞·ªùi d√πng?",description:"Thao t√°c n√†y s·∫Ω ·∫©n ng∆∞·ªùi d√πng kh·ªèi danh s√°ch.",okText:"X√≥a",cancelText:"H·ªßy",onConfirm:()=>De(Ie),disabled:!Ee,children:e.jsxDEV(ze,{title:"X√≥a",children:e.jsxDEV(q,{type:"text",size:"small",danger:!0,icon:e.jsxDEV(ja,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:627,columnNumber:35},this),disabled:!Ee},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:623,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:622,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:614,columnNumber:23},this),e.jsxDEV(ze,{title:Ie.status===2?"M·ªü kh√≥a":"Kh√≥a t√†i kho·∫£n",children:e.jsxDEV(q,{type:"text",size:"small",icon:Ie.status===2?e.jsxDEV(_m,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:636,columnNumber:55},this):e.jsxDEV(Cm,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:636,columnNumber:76},this),disabled:!xe,onClick:()=>he(Ie)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:633,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:632,columnNumber:23},this),e.jsxDEV(Ya,{menu:te(Ie),children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(et,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:642,columnNumber:64},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:642,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:641,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:587,columnNumber:21},this)}],scroll:{x:"max-content"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:383,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:382,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:381,columnNumber:9},this),e.jsxDEV(us,{open:ie,title:w?"C·∫≠p nh·∫≠t ng∆∞·ªùi d√πng":"Th√™m ng∆∞·ªùi d√πng",onCancel:()=>Ne(!1),onOk:se,okText:"L∆∞u",cancelText:"H·ªßy",children:e.jsxDEV(O,{form:He,layout:"vertical",children:[e.jsxDEV(O.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p username."}],children:e.jsxDEV(re,{disabled:!!w},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:667,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:662,columnNumber:13},this),e.jsxDEV(O.Item,{label:"H·ªç v√† t√™n",name:"full_name",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p h·ªç v√† t√™n."}],children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:674,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:669,columnNumber:13},this),e.jsxDEV(O.Item,{label:"Email",name:"email",children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:677,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:676,columnNumber:13},this),e.jsxDEV(O.Item,{label:"S·ªë ƒëi·ªán tho·∫°i",name:"phone",children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:680,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:679,columnNumber:13},this),e.jsxDEV(O.Item,{label:"ƒê∆°n v·ªã qu·∫£n l√Ω",name:"department_id",rules:[{required:!0,message:"Vui l√≤ng ch·ªçn ƒë∆°n v·ªã qu·∫£n l√Ω."}],tooltip:f?"B·∫°n ch·ªâ c√≥ th·ªÉ t·∫°o ng∆∞·ªùi d√πng trong ƒë∆°n v·ªã c·ªßa m√¨nh.":void 0,children:e.jsxDEV(Li,{treeData:le,placeholder:"Ch·ªçn ƒë∆°n v·ªã qu·∫£n l√Ω",disabled:f,showSearch:!0,filterTreeNode:(ee,Ie)=>String(Ie.title).toLowerCase().includes(ee.toLowerCase()),notFoundContent:"Kh√¥ng c√≥ ƒë∆°n v·ªã ph√π h·ª£p",dropdownStyle:{maxHeight:400,overflow:"auto"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:692,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:682,columnNumber:13},this),e.jsxDEV(O.Item,{label:"Tr·∫°ng th√°i",name:"status",children:e.jsxDEV(_e,{options:[{value:1,label:"Ho·∫°t ƒë·ªông"},{value:0,label:"T·∫°m d·ª´ng"},{value:2,label:"Kh√≥a"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:705,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:704,columnNumber:13},this),e.jsxDEV(O.Item,{label:"M·∫≠t kh·∫©u m·∫∑c ƒë·ªãnh",name:"default_password",tooltip:"D√πng ƒë·ªÉ g·ª≠i cho ng∆∞·ªùi d√πng sau khi t·∫°o t√†i kho·∫£n.",rules:w?[]:[{required:!0,message:"Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u m·∫∑c ƒë·ªãnh."}],children:e.jsxDEV(re.Password,{placeholder:"Nh·∫≠p m·∫≠t kh·∫©u m·∫∑c ƒë·ªãnh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:723,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:713,columnNumber:13},this),e.jsxDEV(O.Item,{label:"Ghi ch√∫",name:"note",children:e.jsxDEV(re.TextArea,{rows:3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:726,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:725,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:661,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:653,columnNumber:9},this),e.jsxDEV(qc,{open:H,user:G,roles:ge,onClose:()=>{L(!1),ye(null)},onSave:ss},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:731,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:364,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:363,columnNumber:5},this)}function qc({open:s,user:a,roles:t,onClose:i,onSave:l}){const[n,r]=d.useState([]),[u,o]=d.useState(null);d.useEffect(()=>{var N,g,v;if(!s||!a)return;const m=((N=a.roles)==null?void 0:N.map(b=>b.role_id))??[],c=((v=(g=a.roles)==null?void 0:g.find(b=>b.is_primary))==null?void 0:v.role_id)??null;r(m),o(c)},[s,a]),d.useEffect(()=>{s||(r([]),o(null))},[s]);const p=t.map(m=>({label:`${m.code} - ${m.name}`,value:m.id})),h=()=>{l(n,u)};return e.jsxDEV(us,{open:s,title:a?`G√°n vai tr√≤ cho ${a.full_name||a.username||""}`:"G√°n vai tr√≤",onCancel:i,onOk:h,okText:"L∆∞u",cancelText:"H·ªßy",width:680,children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV("div",{children:[e.jsxDEV(Le.Text,{strong:!0,children:"Vai tr√≤"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:793,columnNumber:11},this),e.jsxDEV(Za.Group,{value:n,options:p,onChange:m=>r(m),style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:8}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:794,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:792,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(Le.Text,{strong:!0,children:"Vai tr√≤ ch√≠nh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:802,columnNumber:11},this),e.jsxDEV(qa.Group,{value:u,onChange:m=>o(m.target.value),children:e.jsxDEV(J,{direction:"vertical",children:n.map(m=>{const c=t.find(N=>N.id===m);return e.jsxDEV(qa,{value:m,children:c?`${c.code} - ${c.name}`:m},m,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:811,columnNumber:19},this)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:807,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:803,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:801,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:791,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UsersPage.tsx",lineNumber:782,columnNumber:5},this)}const Fc=Object.freeze(Object.defineProperty({__proto__:null,default:Bc},Symbol.toStringTag,{value:"Module"})),Gc="_buttonPrimary_1bhti_203",Jc="_buttonSecondary_1bhti_261",Pe={buttonPrimary:Gc,buttonSecondary:Jc};function Wc(){const{id:s}=Ys(),a=ys(),{hasPermission:t}=os(),i=t("sa.iam.user.update"),l=t("sa.iam.user.delete"),n=t("sa.iam.assignment.assign"),[r,u]=d.useState(!0),[o,p]=d.useState(null),[h,m]=d.useState([]);if(d.useEffect(()=>{if(!s)return;(async()=>{u(!0);try{const g=await Os.getUserById(s);if(p(g),g){const v=await Os.listUserRoles(s);m(v.map(b=>({code:b.code,name:b.name})))}}catch(g){const v=g instanceof Error?g.message:"Kh√¥ng th·ªÉ t·∫£i ng∆∞·ªùi d√πng.";C.error(v)}finally{u(!1)}})()},[s]),!o&&!r)return e.jsxDEV(bs,{title:"Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi d√πng",children:e.jsxDEV("p",{children:"Ng∆∞·ªùi d√πng kh√¥ng t·ªìn t·∫°i."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:51,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:50,columnNumber:7},this);const c=N=>{switch(N){case 1:return e.jsxDEV("span",{className:Pe.statusActive,children:"Ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:59,columnNumber:16},this);case 0:return e.jsxDEV("span",{className:Pe.statusInactive,children:"T·∫°m d·ª´ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:61,columnNumber:16},this);case 2:return e.jsxDEV("span",{className:Pe.statusLocked,children:"Kh√≥a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:63,columnNumber:16},this);default:return e.jsxDEV("span",{className:Pe.statusInactive,children:"Kh√¥ng r√µ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:65,columnNumber:16},this)}};return e.jsxDEV(es,{permission:"sa.iam.user.read",children:e.jsxDEV(bs,{title:(o==null?void 0:o.full_name)||"Ng∆∞·ªùi d√πng",subtitle:o!=null&&o.username?`@${o.username}`:void 0,breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"IAM",path:"/system-admin/iam"},{label:"Ng∆∞·ªùi d√πng",path:"/system-admin/iam/users"},{label:(o==null?void 0:o.full_name)||"Chi ti·∫øt"}],actions:e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{className:Pe.buttonSecondary,onClick:()=>a("/system-admin/iam/users"),children:[e.jsxDEV(sa,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:87,columnNumber:15},this),"Quay l·∫°i"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:83,columnNumber:13},this),e.jsxDEV("button",{className:Pe.buttonSecondary,disabled:!i,title:(o==null?void 0:o.status)===2?"M·ªü kh√≥a":"Kh√≥a t√†i kho·∫£n",onClick:async()=>{if(!o)return;const N=o.status===2?1:2;try{await Os.setUserStatus(o.id,N),p({...o,status:N})}catch(g){const v=g instanceof Error?g.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i.";C.error(v)}},children:[(o==null?void 0:o.status)===2?e.jsxDEV(mr,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:106,columnNumber:37},this):e.jsxDEV(rr,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:106,columnNumber:60},this),(o==null?void 0:o.status)===2?"M·ªü kh√≥a":"Kh√≥a"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:90,columnNumber:13},this),e.jsxDEV("button",{className:Pe.buttonPrimary,disabled:!i,children:[e.jsxDEV(Ca,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:110,columnNumber:15},this),"Ch·ªânh s·ª≠a"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:109,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:82,columnNumber:11},this),children:[e.jsxDEV("div",{className:Pe.detailGrid,children:[e.jsxDEV("div",{className:Pe.infoCard,children:[e.jsxDEV("div",{className:Pe.cardHeader,children:[e.jsxDEV("h3",{children:"Th√¥ng tin c∆° b·∫£n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:120,columnNumber:15},this),o?c(o.status):null]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:119,columnNumber:13},this),e.jsxDEV("div",{className:Pe.infoGrid,children:[e.jsxDEV("div",{className:Pe.infoRow,children:[e.jsxDEV("span",{className:Pe.label,children:"Username:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:125,columnNumber:17},this),e.jsxDEV("span",{className:Pe.value,children:(o==null?void 0:o.username)||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:126,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:124,columnNumber:15},this),e.jsxDEV("div",{className:Pe.infoRow,children:[e.jsxDEV("span",{className:Pe.label,children:"H·ªç v√† t√™n:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:129,columnNumber:17},this),e.jsxDEV("span",{className:Pe.value,children:(o==null?void 0:o.full_name)||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:130,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:128,columnNumber:15},this),e.jsxDEV("div",{className:Pe.infoRow,children:[e.jsxDEV("span",{className:Pe.label,children:"Email:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:133,columnNumber:17},this),e.jsxDEV("span",{className:Pe.value,children:(o==null?void 0:o.email)||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:134,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:132,columnNumber:15},this),e.jsxDEV("div",{className:Pe.infoRow,children:[e.jsxDEV("span",{className:Pe.label,children:"ƒêi·ªán tho·∫°i:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:137,columnNumber:17},this),e.jsxDEV("span",{className:Pe.value,children:(o==null?void 0:o.phone)||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:138,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:136,columnNumber:15},this),e.jsxDEV("div",{className:Pe.infoRow,children:[e.jsxDEV("span",{className:Pe.label,children:"ƒêƒÉng nh·∫≠p l·∫ßn cu·ªëi:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:141,columnNumber:17},this),e.jsxDEV("span",{className:Pe.value,children:o!=null&&o.last_login_at?new Date(o.last_login_at).toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):e.jsxDEV("em",{children:"Ch∆∞a ƒëƒÉng nh·∫≠p"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:152,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:142,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:140,columnNumber:15},this),e.jsxDEV("div",{className:Pe.infoRow,children:[e.jsxDEV("span",{className:Pe.label,children:"Ng√†y t·∫°o:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:157,columnNumber:17},this),e.jsxDEV("span",{className:Pe.value,children:o!=null&&o.created_at?new Date(o.created_at).toLocaleDateString("vi-VN"):"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:158,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:156,columnNumber:15},this),e.jsxDEV("div",{className:Pe.infoRow,children:[e.jsxDEV("span",{className:Pe.label,children:"C·∫≠p nh·∫≠t:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:163,columnNumber:17},this),e.jsxDEV("span",{className:Pe.value,children:o!=null&&o.updated_at?new Date(o.updated_at).toLocaleDateString("vi-VN"):"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:164,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:162,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:123,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:118,columnNumber:11},this),e.jsxDEV("div",{className:Pe.rolesCard,children:[e.jsxDEV("div",{className:Pe.cardHeader,children:[e.jsxDEV("h3",{children:["Vai tr√≤ ƒë∆∞·ª£c g√°n (",h.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:174,columnNumber:15},this),e.jsxDEV("button",{className:Pe.buttonSecondary,disabled:!n,onClick:()=>a(`/system-admin/iam/assignments/users/${o==null?void 0:o.id}`),children:[e.jsxDEV(ya,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:180,columnNumber:17},this),"Qu·∫£n l√Ω ph√¢n quy·ªÅn"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:175,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:173,columnNumber:13},this),h.length===0?e.jsxDEV("div",{className:Pe.emptyRoles,children:e.jsxDEV("p",{children:"Ng∆∞·ªùi d√πng ch∆∞a ƒë∆∞·ª£c g√°n vai tr√≤ n√†o."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:186,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:185,columnNumber:15},this):e.jsxDEV("div",{className:Pe.rolesList,children:h.map(N=>e.jsxDEV("div",{className:Pe.roleCard,children:[e.jsxDEV("div",{className:Pe.roleInfo,children:[e.jsxDEV("div",{className:Pe.roleName,children:N.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:193,columnNumber:23},this),e.jsxDEV("div",{className:Pe.roleCode,children:N.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:194,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:192,columnNumber:21},this),e.jsxDEV("div",{className:Pe.roleType,children:e.jsxDEV("span",{className:Pe.typeCustom,children:"Vai tr√≤"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:197,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:196,columnNumber:21},this)]},N.code,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:191,columnNumber:19},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:189,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:172,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:116,columnNumber:9},this),l&&e.jsxDEV("div",{className:Pe.dangerZone,children:[e.jsxDEV("h3",{children:"V√πng nguy hi·ªÉm"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:209,columnNumber:13},this),e.jsxDEV("p",{children:"C√°c thao t√°c kh√¥ng th·ªÉ ho√†n t√°c. Vui l√≤ng c·∫©n th·∫≠n."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:210,columnNumber:13},this),e.jsxDEV("button",{className:Pe.buttonDanger,disabled:!0,children:[e.jsxDEV(nr,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:212,columnNumber:15},this),"X√≥a t√†i kho·∫£n"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:211,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:208,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:71,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserDetailPage.tsx",lineNumber:70,columnNumber:5},this)}const Xc=Object.freeze(Object.defineProperty({__proto__:null,default:Wc},Symbol.toStringTag,{value:"Module"})),Ra=s=>({id:s._id??s.id,code:s.code,name:s.name,description:s.description??null,status:Number(s.status),sort_order:s.sort_order??null,is_system:s.is_system??null,created_at:s.created_at??null,updated_at:s.updated_at??null,deleted_at:s.deleted_at??null,user_count:s.user_count==null?null:Number(s.user_count)}),Yc=s=>s==="all"?null:s==="active"?1:0,Xs={async listRoles(s){var m;const a=s.page??1,t=s.pageSize??10,i=(a-1)*t,l=i+t-1;let n=M.from("v_roles_with_user_count").select("*",{count:"exact"}).is("deleted_at",null).order("sort_order",{ascending:!0}).order("code",{ascending:!0}).range(i,l);const r=(m=s.q)==null?void 0:m.trim();r&&(n=n.or(`code.ilike.%${r}%,name.ilike.%${r}%,description.ilike.%${r}%`));const u=Yc(s.status??"all");u!==null&&(n=n.eq("status",u));const{data:o,error:p,count:h}=await n;if(p)throw new Error(`roles select failed: ${p.message}`);return{data:(o||[]).map(Ra),total:h??0}},async getRoleById(s){const{data:a,error:t}=await M.from("roles").select("*").eq("_id",s).maybeSingle();if(t)throw new Error(`role select failed: ${t.message}`);return a?Ra(a):null},async getRoleByCode(s){const{data:a,error:t}=await M.from("roles").select("*").eq("code",s).maybeSingle();if(t)throw new Error(`role select failed: ${t.message}`);return a?Ra(a):null},async createRole(s){const{data:a,error:t}=await M.from("roles").insert([{...s,sort_order:s.sort_order??0}]).select("*").single();if(t)throw new Error(`role insert failed: ${t.message}`);return Ra(a)},async updateRole(s,a){const{data:t,error:i}=await M.from("roles").update({...a,updated_at:new Date().toISOString()}).eq("_id",s).select("*").single();if(i)throw new Error(`role update failed: ${i.message}`);return Ra(t)},async setRoleStatus(s,a){return Xs.updateRole(s,{status:a})},async softDeleteRole(s){const{error:a}=await M.from("roles").update({deleted_at:new Date().toISOString(),status:0}).eq("_id",s);if(a)throw new Error(`role delete failed: ${a.message}`)},async listRoleUsers(s,a){var h;const t=a.page??1,i=a.pageSize??10,l=((h=a.q)==null?void 0:h.trim())||null,n=a.status==="active"?1:a.status==="inactive"?0:a.status==="locked"?2:null,{data:r,error:u}=await M.rpc("rpc_users_by_role",{p_role_id:s,p_q:l,p_status:n,p_page:t,p_page_size:i});if(u)throw new Error(`role users select failed: ${u.message}`);const o=(r||[]).map(m=>({id:m._id??m.id,username:m.username??null,full_name:m.full_name??null,email:m.email??null,status:m.status??null,lastLoginAt:m.last_login_at??m.lastLoginAt??null})),p=r&&r.length>0?Number(r[0].total_count):0;return{data:o,total:p}}},ep=s=>s===1||s==="active"?"Ho·∫°t ƒë·ªông":s===0||s==="inactive"?"T·∫°m d·ª´ng":s===2||s==="locked"?"Kh√≥a":"Kh√¥ng x√°c ƒë·ªãnh",sp=s=>s===1||s==="active"?"green":s===0||s==="inactive"?"red":s===2||s==="locked"?"orange":"default";function ap({open:s,role:a,onClose:t,onAssignUsers:i}){const l=ys(),[n,r]=d.useState(!1),[u,o]=d.useState([]),[p,h]=d.useState(0),[m,c]=d.useState(""),[N,g]=d.useState("all"),[v,b]=d.useState(1),[V,D]=d.useState(10),f=d.useCallback(async()=>{if(a!=null&&a.id){r(!0);try{const x=await Xs.listRoleUsers(a.id,{q:m,status:N,page:v,pageSize:V});o(x.data),h(x.total)}catch(x){const y=x instanceof Error?x.message:"Kh√¥ng th·ªÉ t·∫£i ng∆∞·ªùi d√πng.";C.error(y)}finally{r(!1)}}},[v,V,a==null?void 0:a.id,m,N]);d.useEffect(()=>{s&&f()},[s,f]),d.useEffect(()=>{s&&b(1)},[m,N,s]),d.useEffect(()=>{s||(o([]),h(0),c(""),g("all"),b(1),D(10))},[s]);const P=x=>{x&&l(`/system-admin/iam/users/${x}`)};return e.jsxDEV(us,{open:s,onCancel:t,title:a?`Ng∆∞·ªùi d√πng thu·ªôc vai tr√≤: ${a.name}`:"Danh s√°ch ng∆∞·ªùi d√πng",centered:!0,width:900,footer:[e.jsxDEV(q,{type:"primary",onClick:t,children:"ƒê√≥ng"},"close",!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:92,columnNumber:9},this)],children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(J,{wrap:!0,style:{width:"100%",justifyContent:"space-between"},children:[e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(re.Search,{placeholder:"T√¨m theo username, h·ªç t√™n, email...",value:m,onChange:x=>c(x.target.value),allowClear:!0,style:{width:280}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:100,columnNumber:13},this),e.jsxDEV(_e,{value:N,onChange:x=>g(x),style:{width:180},options:[{value:"all",label:"T·∫•t c·∫£ tr·∫°ng th√°i"},{value:"active",label:"Ho·∫°t ƒë·ªông"},{value:"inactive",label:"T·∫°m d·ª´ng"},{value:"locked",label:"Kh√≥a"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:107,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:99,columnNumber:11},this),a&&i?e.jsxDEV(q,{icon:e.jsxDEV(mi,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:120,columnNumber:27},this),onClick:()=>i(a),children:"G√°n ng∆∞·ªùi d√πng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:120,columnNumber:13},this):null]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:98,columnNumber:9},this),e.jsxDEV($s,{rowKey:"id",loading:n,dataSource:u,bordered:!0,pagination:{current:v,pageSize:V,total:p,showSizeChanger:!0,pageSizeOptions:[10,20,50],onChange:(x,y)=>{b(x),D(y)}},columns:[{title:"Username",dataIndex:"username",key:"username",width:160,render:x=>x||"-"},{title:"H·ªç v√† t√™n",dataIndex:"full_name",key:"full_name",render:x=>x||"-"},{title:"Email",dataIndex:"email",key:"email",render:x=>x||"-"},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:120,render:x=>e.jsxDEV(Re,{color:sp(x),children:ep(x)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:168,columnNumber:17},this)},{title:"ƒêƒÉng nh·∫≠p l·∫ßn cu·ªëi",dataIndex:"lastLoginAt",key:"lastLoginAt",width:180,render:x=>x?new Date(x).toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},{title:"Thao t√°c",key:"actions",width:80,render:(x,y)=>e.jsxDEV(ze,{title:"Xem chi ti·∫øt",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(ma,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:196,columnNumber:27},this),onClick:()=>P(y.id)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:193,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:192,columnNumber:17},this)}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:126,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:97,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUsersModal.tsx",lineNumber:85,columnNumber:5},this)}const tp=s=>({id:s._id??s.id,username:s.username??null,full_name:s.full_name??null,email:s.email??null,status:Number(s.status??0)}),Fi={async loadRoleUserAssignment(s,a){let t=M.from("users").select("_id, username, full_name, email, status").is("deleted_at",null).order("full_name",{ascending:!0}).order("username",{ascending:!0}).limit(500);const i=a==null?void 0:a.trim();i&&(t=t.or(`username.ilike.%${i}%,full_name.ilike.%${i}%,email.ilike.%${i}%`));const[l,n]=await Promise.all([t,M.from("user_roles").select("user_id").eq("role_id",s)]);if(l.error)throw new Error(`users select failed: ${l.error.message}`);if(n.error)throw new Error(`role users select failed: ${n.error.message}`);const r=(n.data||[]).map(u=>u.user_id).filter(Boolean);return{users:(l.data||[]).map(tp),assignedUserIds:r}},async listUserIdsByRole(s){const{data:a,error:t}=await M.from("user_roles").select("user_id").eq("role_id",s);if(t)throw new Error(`role users select failed: ${t.message}`);return(a||[]).map(i=>i.user_id).filter(Boolean)},async saveRoleUsers(s,a,t){const i=new Set(t),l=new Set(a),n=a.filter(u=>!i.has(u)),r=t.filter(u=>!l.has(u));if(n.length>0){const u=n.map(p=>({user_id:p,role_id:s,created_at:new Date().toISOString()})),{error:o}=await M.from("user_roles").upsert(u,{onConflict:"user_id,role_id"});if(o)throw new Error(`role users insert failed: ${o.message}`)}if(r.length>0){const{error:u}=await M.from("user_roles").delete().eq("role_id",s).in("user_id",r);if(u)throw new Error(`role users delete failed: ${u.message}`)}}},ip=s=>s===1?e.jsxDEV(Re,{color:"green",children:"Ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:20,columnNumber:28},void 0):s===0?e.jsxDEV(Re,{color:"orange",children:"T·∫°m d·ª´ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:21,columnNumber:28},void 0):s===2?e.jsxDEV(Re,{color:"red",children:"Kh√≥a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:22,columnNumber:28},void 0):e.jsxDEV(Re,{children:"Kh√¥ng r√µ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:23,columnNumber:10},void 0),lp=s=>{const a=s.username||"(kh√¥ng c√≥ username)",t=s.full_name||"Ch∆∞a c·∫≠p nh·∫≠t",i=s.email||"-";return{key:s.id,title:`${a} ‚Äî ${t}`,description:i,raw:s}},np=(s,a)=>{const t=a.trim().toLowerCase();return t?s.filter(i=>{const{username:l,full_name:n,email:r}=i.raw;return(l||"").toLowerCase().includes(t)||(n||"").toLowerCase().includes(t)||(r||"").toLowerCase().includes(t)}):s};function mp({open:s,role:a,onClose:t,onSaved:i}){const[l,n]=d.useState(!1),[r,u]=d.useState(!1),[o,p]=d.useState([]),[h,m]=d.useState([]),[c,N]=d.useState([]),[g,v]=d.useState(""),b=d.useMemo(()=>{if(h.length!==c.length)return!0;const x=new Set(h);return c.some(y=>!x.has(y))},[h,c]),V=d.useCallback(async()=>{if(a!=null&&a.id){n(!0);try{const x=await Fi.loadRoleUserAssignment(a.id),y=x.users.map(lp);p(y),m(x.assignedUserIds),N(x.assignedUserIds)}catch(x){const y=x instanceof Error?x.message:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch ng∆∞·ªùi d√πng.";C.error(y)}finally{n(!1)}}},[a==null?void 0:a.id]);d.useEffect(()=>{s&&V()},[s,V]),d.useEffect(()=>{s||(p([]),m([]),N([]),v(""))},[s]);const D=async()=>{if(a!=null&&a.id){u(!0);try{await Fi.saveRoleUsers(a.id,c,h),C.success("ƒê√£ c·∫≠p nh·∫≠t ng∆∞·ªùi d√πng cho vai tr√≤."),m(c),i==null||i(),t()}catch(x){const y=x instanceof Error?x.message:"Kh√¥ng th·ªÉ l∆∞u g√°n ng∆∞·ªùi d√πng.";C.error(y)}finally{u(!1)}}},f=d.useMemo(()=>np(o,g),[o,g]),P=(x,y,Q)=>{N(x)};return e.jsxDEV(us,{open:s,onCancel:t,title:a?`G√°n ng∆∞·ªùi d√πng cho vai tr√≤: ${a.name}`:"G√°n ng∆∞·ªùi d√πng",width:980,centered:!0,destroyOnHidden:!0,footer:[e.jsxDEV(q,{onClick:t,disabled:r,children:"H·ªßy"},"cancel",!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:127,columnNumber:9},this),e.jsxDEV(q,{type:"primary",onClick:D,loading:r,disabled:!b||l,children:"L∆∞u thay ƒë·ªïi"},"save",!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:130,columnNumber:9},this)],children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(J,{style:{width:"100%",justifyContent:"space-between"},wrap:!0,children:[e.jsxDEV(re,{placeholder:"T√¨m theo username, h·ªç t√™n, email...",allowClear:!0,value:g,onChange:x=>v(x.target.value),style:{width:320},disabled:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:137,columnNumber:11},this),e.jsxDEV(Le.Text,{type:"secondary",children:["ƒê√£ ch·ªçn: ",e.jsxDEV("strong",{children:c.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:146,columnNumber:22},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:145,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:136,columnNumber:9},this),e.jsxDEV(Sm,{dataSource:f,targetKeys:c,onChange:P,showSearch:!1,titles:["T·∫•t c·∫£ ng∆∞·ªùi d√πng","Thu·ªôc vai tr√≤"],render:x=>e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxDEV("span",{style:{fontWeight:600},children:x.title},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:158,columnNumber:15},this),e.jsxDEV(J,{size:6,wrap:!0,children:[e.jsxDEV(Le.Text,{type:"secondary",style:{fontSize:12},children:x.description||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:160,columnNumber:17},this),ip(x.raw.status)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:159,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:157,columnNumber:13},this),listStyle:{width:430,height:440},disabled:l||r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:150,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:135,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleUserAssignmentModal.tsx",lineNumber:119,columnNumber:5},this)}const Gi=s=>s===1?"Ho·∫°t ƒë·ªông":"Ng·ª´ng",Ji=s=>s===1?"green":"red",rp=s=>s===1?0:1;function op(){const s=ys(),a=d.useRef(null),[t,i]=d.useState(""),[l,n]=d.useState(""),[r,u]=d.useState(!1),[o,p]=d.useState([]),[h,m]=d.useState(0),[c,N]=d.useState(1),[g,v]=d.useState(10),[b,V]=d.useState(""),[D,f]=d.useState("all"),[P,x]=d.useState(!1),[y,Q]=d.useState("create"),[U,j]=d.useState(null),[A,z]=d.useState(!1),[W]=O.useForm(),[X,fe]=d.useState(!1),[me,ue]=d.useState(null),[xe,Ee]=d.useState(!1),[je,Y]=d.useState(null),[de,Te]=d.useState(!1),[S,B]=d.useState(null),ge=d.useCallback(async()=>{u(!0);try{const le=await Xs.listRoles({q:b,status:D,page:c,pageSize:g});p(le.data),m(le.total)}catch(le){const te=le instanceof Error?le.message:"Kh√¥ng th·ªÉ t·∫£i vai tr√≤.";C.error(te)}finally{u(!1)}},[c,g,b,D]);d.useEffect(()=>{ge()},[ge]),d.useEffect(()=>{N(1)},[b,D]);const be=()=>{Q("create"),j(null),W.resetFields(),W.setFieldsValue({status:1,sort_order:0}),x(!0)},ie=le=>{Q("edit"),j(le),W.resetFields(),W.setFieldsValue({code:le.code,name:le.name,description:le.description??"",status:le.status??1,sort_order:le.sort_order??0}),x(!0)},Ne=()=>{A||x(!1)},w=async()=>{var le,te;try{z(!0);const Ce=await W.validateFields();if(y==="create"){if(await Xs.getRoleByCode(Ce.code.trim())){C.error("M√£ vai tr√≤ ƒë√£ t·ªìn t·∫°i."),z(!1);return}await Xs.createRole({code:Ce.code.trim(),name:Ce.name.trim(),description:((le=Ce.description)==null?void 0:le.trim())||null,status:Ce.status??1,sort_order:Ce.sort_order??0}),C.success("ƒê√£ t·∫°o vai tr√≤.")}else U&&(await Xs.updateRole(U.id,{name:Ce.name.trim(),description:((te=Ce.description)==null?void 0:te.trim())||null,status:Ce.status??U.status??1,sort_order:Ce.sort_order??U.sort_order??0}),C.success("ƒê√£ c·∫≠p nh·∫≠t vai tr√≤."));x(!1),await ge()}catch(Ce){const ne=Ce instanceof Error?Ce.message:"Kh√¥ng th·ªÉ l∆∞u vai tr√≤.";C.error(ne)}finally{z(!1)}},_=async le=>{try{await Xs.setRoleStatus(le.id,rp(le.status)),C.success("ƒê√£ c·∫≠p nh·∫≠t tr·∫°ng th√°i."),await ge()}catch(te){const Ce=te instanceof Error?te.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i.";C.error(Ce)}},H=async le=>{try{await Xs.softDeleteRole(le.id),C.success("ƒê√£ x√≥a vai tr√≤."),await ge()}catch(te){const Ce=te instanceof Error?te.message:"Kh√¥ng th·ªÉ x√≥a vai tr√≤.";C.error(Ce)}},L=le=>{ue(le),fe(!0)},G=le=>{Y(le),Ee(!0)},ye=le=>{B(le),Te(!0)},He=le=>({items:[{key:"view",label:"Xem chi ti·∫øt",onClick:()=>L(le)},{key:"assign",label:"Ph√¢n quy·ªÅn",onClick:()=>s(`/system-admin/iam/role-permissions/${le.id}`)}]});return e.jsxDEV(es,{permission:"sa.iam.role.read",children:[e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"IAM",href:"/system-admin/iam"},{label:"Vai tr√≤"}],title:"Qu·∫£n l√Ω Vai tr√≤",subtitle:"Qu·∫£n l√Ω vai tr√≤ v√† ph√¢n quy·ªÅn trong h·ªá th·ªëng",actions:e.jsxDEV(J,{children:[e.jsxDEV(q,{icon:e.jsxDEV(Qa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:250,columnNumber:29},this),onClick:()=>ge(),children:"L√†m m·ªõi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:250,columnNumber:15},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(qs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:253,columnNumber:44},this),onClick:be,children:"Th√™m vai tr√≤"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:253,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:249,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:239,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 pb-8",children:e.jsxDEV(ps,{children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(J,{wrap:!0,style:{width:"100%",justifyContent:"space-between"},children:[e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(re,{placeholder:"T√¨m theo m√£, t√™n vai tr√≤...",value:b,onChange:le=>V(le.target.value),allowClear:!0,style:{width:260}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:265,columnNumber:19},this),e.jsxDEV(_e,{value:D,onChange:le=>f(le),style:{width:160},options:[{value:"all",label:"T·∫•t c·∫£ tr·∫°ng th√°i"},{value:"active",label:"Ho·∫°t ƒë·ªông"},{value:"inactive",label:"Ng·ª´ng"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:272,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:264,columnNumber:17},this),e.jsxDEV(Le.Text,{type:"secondary",children:["T·ªïng: ",e.jsxDEV("strong",{children:h},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:284,columnNumber:25},this)," vai tr√≤"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:283,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:263,columnNumber:15},this),e.jsxDEV(at,{rowKey:"id",loading:r,dataSource:o,pagination:{current:c,pageSize:g,total:h,onChange:(le,te)=>{N(le),v(te)}},columns:[{title:"M√£ vai tr√≤",dataIndex:"code",key:"code",width:160,render:le=>e.jsxDEV("span",{style:{fontWeight:600},children:le},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:307,columnNumber:48},this),sorter:(le,te)=>le.code.localeCompare(te.code,"vi"),ellipsis:!0,...Cs("code",{searchText:t,searchedColumn:l,setSearchText:i,setSearchedColumn:n,inputRef:a},{placeholder:"T√¨m m√£ vai tr√≤"})},{title:"T√™n vai tr√≤",dataIndex:"name",key:"name",sorter:(le,te)=>le.name.localeCompare(te.name,"vi"),ellipsis:!0,...Cs("name",{searchText:t,searchedColumn:l,setSearchText:i,setSearchedColumn:n,inputRef:a},{placeholder:"T√¨m t√™n vai tr√≤"})},{title:"M√¥ t·∫£",dataIndex:"description",key:"description",render:le=>le||"-",ellipsis:!0,...Cs("description",{searchText:t,searchedColumn:l,setSearchText:i,setSearchedColumn:n,inputRef:a},{placeholder:"T√¨m m√¥ t·∫£"})},{title:"S·ªë ng∆∞·ªùi d√πng",dataIndex:"user_count",key:"user_count",width:130,render:le=>le??0,sorter:(le,te)=>(le.user_count??0)-(te.user_count??0),align:"center"},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:120,render:le=>e.jsxDEV(Re,{color:Ji(le),children:Gi(le)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:374,columnNumber:23},this),sorter:(le,te)=>(le.status??0)-(te.status??0),align:"center"},{title:"Thao t√°c",key:"actions",width:280,fixed:"right",render:(le,te)=>e.jsxDEV(J,{children:[e.jsxDEV(ze,{title:"Xem",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(ma,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:388,columnNumber:66},this),onClick:()=>L(te)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:388,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:387,columnNumber:25},this),e.jsxDEV(ze,{title:te.is_system?"System role kh√¥ng th·ªÉ ch·ªânh s·ª≠a":"S·ª≠a",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(oa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:394,columnNumber:35},this),onClick:()=>ie(te),disabled:!!te.is_system},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:391,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:390,columnNumber:25},this),e.jsxDEV(ze,{title:"Ng∆∞·ªùi d√πng thu·ªôc vai tr√≤",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(ni,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:403,columnNumber:35},this),onClick:()=>G(te)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:400,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:399,columnNumber:25},this),e.jsxDEV(ze,{title:"G√°n ng∆∞·ªùi d√πng",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(mi,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:411,columnNumber:35},this),onClick:()=>ye(te)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:408,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:407,columnNumber:25},this),e.jsxDEV(ze,{title:"Ph√¢n quy·ªÅn",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(Mm,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:419,columnNumber:35},this),onClick:()=>s(`/system-admin/iam/role-permissions/${te.id}`)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:416,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:415,columnNumber:25},this),e.jsxDEV(ze,{title:te.is_system?"System role kh√¥ng th·ªÉ ƒë·ªïi tr·∫°ng th√°i":te.status===1?"Ng·ª´ng":"K√≠ch ho·∫°t",children:e.jsxDEV(ws,{title:te.status===1?"Ng·ª´ng vai tr√≤ n√†y?":"K√≠ch ho·∫°t vai tr√≤ n√†y?",okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",onConfirm:()=>_(te),disabled:!!te.is_system,children:e.jsxDEV(q,{type:"text",size:"small",danger:te.status===1,icon:te.status===1?e.jsxDEV(ha,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:443,columnNumber:59},this):e.jsxDEV(da,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:443,columnNumber:78},this),disabled:!!te.is_system},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:439,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:432,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:423,columnNumber:25},this),e.jsxDEV(ze,{title:te.is_system?"System role kh√¥ng th·ªÉ x√≥a":"X√≥a",children:e.jsxDEV(ws,{title:"X√≥a vai tr√≤ n√†y?",okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",onConfirm:()=>H(te),disabled:!!te.is_system,children:e.jsxDEV(q,{type:"text",size:"small",danger:!0,icon:e.jsxDEV(ja,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:460,columnNumber:37},this),disabled:!!te.is_system},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:456,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:449,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:448,columnNumber:25},this),e.jsxDEV(Ya,{menu:He(te),children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(et,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:466,columnNumber:66},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:466,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:465,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:386,columnNumber:23},this)}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:288,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:262,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:261,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:260,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:238,columnNumber:7},this),e.jsxDEV(us,{open:P,title:y==="create"?"Th√™m vai tr√≤":"Ch·ªânh s·ª≠a vai tr√≤",onCancel:Ne,onOk:w,okText:"L∆∞u",cancelText:"H·ªßy",confirmLoading:A,destroyOnClose:!0,children:e.jsxDEV(O,{layout:"vertical",form:W,children:[e.jsxDEV(O.Item,{name:"code",label:"M√£ vai tr√≤",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p m√£ vai tr√≤."},{pattern:/^[A-Z0-9_]+$/,message:"M√£ ch·ªâ g·ªìm ch·ªØ in hoa, s·ªë v√† d·∫•u g·∫°ch d∆∞·ªõi."}],children:e.jsxDEV(re,{disabled:y==="edit"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:500,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:489,columnNumber:11},this),e.jsxDEV(O.Item,{name:"name",label:"T√™n vai tr√≤",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p t√™n vai tr√≤."}],children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:507,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:502,columnNumber:11},this),e.jsxDEV(O.Item,{name:"description",label:"M√¥ t·∫£",children:e.jsxDEV(re.TextArea,{rows:3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:510,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:509,columnNumber:11},this),e.jsxDEV(O.Item,{name:"sort_order",label:"Th·ª© t·ª±",children:e.jsxDEV(cs,{min:0,style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:513,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:512,columnNumber:11},this),e.jsxDEV(O.Item,{name:"status",label:"Tr·∫°ng th√°i",initialValue:1,children:e.jsxDEV(_e,{options:[{value:1,label:"Ho·∫°t ƒë·ªông"},{value:0,label:"Ng·ª´ng"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:516,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:515,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:488,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:478,columnNumber:7},this),e.jsxDEV(_a,{title:"Chi ti·∫øt vai tr√≤",placement:"right",width:420,open:X,onClose:()=>fe(!1),children:me?e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(Le.Title,{level:5,style:{margin:0},children:me.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:535,columnNumber:13},this),e.jsxDEV(Re,{children:me.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:538,columnNumber:13},this),e.jsxDEV(Re,{color:Ji(me.status),children:Gi(me.status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:539,columnNumber:13},this),e.jsxDEV(Le.Paragraph,{children:me.description||"Ch∆∞a c√≥ m√¥ t·∫£."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:540,columnNumber:13},this),e.jsxDEV(Le.Text,{children:["S·ªë ng∆∞·ªùi d√πng: ",e.jsxDEV("strong",{children:me.user_count??0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:542,columnNumber:30},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:541,columnNumber:13},this),e.jsxDEV(Le.Text,{children:["Th·ª© t·ª±: ",e.jsxDEV("strong",{children:me.sort_order??0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:545,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:544,columnNumber:13},this),e.jsxDEV(Le.Text,{children:["System role: ",e.jsxDEV("strong",{children:me.is_system?"C√≥":"Kh√¥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:548,columnNumber:28},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:547,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:534,columnNumber:11},this):e.jsxDEV(Le.Text,{children:"Kh√¥ng c√≥ d·ªØ li·ªáu."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:552,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:526,columnNumber:7},this),e.jsxDEV(ap,{open:xe,role:je,onClose:()=>{Ee(!1),Y(null)},onAssignUsers:le=>{Ee(!1),Y(null),ye(le)}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:556,columnNumber:7},this),e.jsxDEV(mp,{open:de,role:S,onClose:()=>{Te(!1),B(null)},onSaved:()=>{ge()}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:569,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolesPage.tsx",lineNumber:237,columnNumber:5},this)}const dp=Object.freeze(Object.defineProperty({__proto__:null,default:op},Symbol.toStringTag,{value:"Module"})),Oa=s=>({id:s._id??s.id,code:s.code,name:s.name,description:s.description??null,module_id:s.module_id??null,permission_type:s.permission_type??null,status:Number(s.status),sort_order:s.sort_order??null,meta:s.meta??null,role_count:s.role_count==null?null:Number(s.role_count),created_at:s.created_at??null,updated_at:s.updated_at??null}),up=s=>s==="all"?null:s==="active"?1:0,la={async listPermissions(s){const a=s.page??1,t=s.pageSize??10,i=(a-1)*t,l=i+t-1,n=u=>{var N,g,v;let o=M.from(u).select("*",{count:"exact"}).order("sort_order",{ascending:!0}).order("code",{ascending:!0}).range(i,l);const p=(N=s.q)==null?void 0:N.trim();p&&(o=o.or(`code.ilike.%${p}%,name.ilike.%${p}%,description.ilike.%${p}%`));const h=up(s.status??"all");h!==null&&(o=o.eq("status",h));const m=(g=s.moduleId)==null?void 0:g.trim(),c=(v=s.moduleCode)==null?void 0:v.trim();return m&&c?o=o.or(`module_id.eq.${m},permission_type.eq.${c}`):m?o=o.eq("module_id",m):c&&(o=o.eq("permission_type",c)),o};let r=await n("v_permissions_stats");if(r.error&&r.error.message.includes("v_permissions_stats")&&(r=await n("permissions")),r.error)throw new Error(`permissions select failed: ${r.error.message}`);return{data:(r.data||[]).map(Oa),total:r.count??0}},async getPermissionById(s){const{data:a,error:t}=await M.from("permissions").select("*").eq("_id",s).maybeSingle();if(t)throw new Error(`permission select failed: ${t.message}`);return a?Oa(a):null},async getPermissionByCode(s){const{data:a,error:t}=await M.from("permissions").select("*").eq("code",s).maybeSingle();if(t)throw new Error(`permission select failed: ${t.message}`);return a?Oa(a):null},async createPermission(s){const{data:a,error:t}=await M.from("permissions").insert([{...s,sort_order:s.sort_order??0,meta:s.meta??{}}]).select("*").single();if(t)throw new Error(`permission insert failed: ${t.message}`);return Oa(a)},async updatePermission(s,a){const{data:t,error:i}=await M.from("permissions").update({...a,...a.meta?{meta:a.meta}:{},updated_at:new Date().toISOString()}).eq("_id",s).select("*").single();if(i)throw new Error(`permission update failed: ${i.message}`);return Oa(t)},async togglePermissionStatus(s,a){return la.updatePermission(s,{status:a})},async listPermissionModules(){const s=async a=>{const{data:t,error:i}=await M.from("modules").select(`${a}, code, name`).order("order_index",{ascending:!0});if(i)throw i;return(t||[]).map(l=>({id:l[a],code:l.code,name:l.name}))};try{return await s("id")}catch{try{return await s("_id")}catch(t){throw new Error(t instanceof Error?t.message:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch ph√¢n h·ªá.")}}},async listRolesByPermission(s,a){var g;const t=a.page??1,i=a.pageSize??10,l=(t-1)*i,n=l+i-1,{data:r,error:u}=await M.from("role_permissions").select("role_id").eq("permission_id",s);if(u)throw new Error(`permission roles select failed: ${u.message}`);const o=(r||[]).map(v=>v.role_id).filter(Boolean);if(o.length===0)return{data:[],total:0};let p=M.from("roles").select("_id, code, name, status",{count:"exact"}).in("_id",o).order("code",{ascending:!0}).range(l,n);const h=(g=a.q)==null?void 0:g.trim();h&&(p=p.or(`code.ilike.%${h}%,name.ilike.%${h}%`));const{data:m,error:c,count:N}=await p;if(c)throw new Error(`permission roles select failed: ${c.message}`);return{data:(m||[]).map(v=>({id:v._id,code:v.code,name:v.name,status:Number(v.status)})),total:N??0}}},cp=s=>s===1?"Ho·∫°t ƒë·ªông":"Ng·ª´ng",pp=s=>s===1?"green":"red";function gp({open:s,permission:a,onClose:t}){const i=ys(),[l,n]=d.useState(!1),[r,u]=d.useState([]),[o,p]=d.useState(0),[h,m]=d.useState(""),[c,N]=d.useState(1),[g,v]=d.useState(10),b=d.useCallback(async()=>{if(a!=null&&a.id){n(!0);try{const D=await la.listRolesByPermission(a.id,{q:h,page:c,pageSize:g});u(D.data),p(D.total)}catch(D){console.error(D)}finally{n(!1)}}},[c,g,a==null?void 0:a.id,h]);d.useEffect(()=>{s&&b()},[s,b]),d.useEffect(()=>{s&&N(1)},[h,s]),d.useEffect(()=>{s||(u([]),p(0),m(""),N(1),v(10))},[s]);const V=D=>{D&&i(`/system-admin/iam/role-permissions/${D}`)};return e.jsxDEV(us,{open:s,onCancel:t,title:a?`Vai tr√≤ ƒëang d√πng quy·ªÅn: ${a.name}`:"Danh s√°ch vai tr√≤",centered:!0,width:860,footer:[e.jsxDEV(q,{type:"primary",onClick:t,children:"ƒê√≥ng"},"close",!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionRolesModal.tsx",lineNumber:86,columnNumber:9},this)],children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(J,{wrap:!0,style:{width:"100%",justifyContent:"space-between"},children:e.jsxDEV(re.Search,{placeholder:"T√¨m theo m√£, t√™n vai tr√≤...",value:h,onChange:D=>m(D.target.value),allowClear:!0,style:{width:280}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionRolesModal.tsx",lineNumber:93,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionRolesModal.tsx",lineNumber:92,columnNumber:9},this),e.jsxDEV($s,{rowKey:"id",loading:l,dataSource:r,pagination:{current:c,pageSize:g,total:o,showSizeChanger:!0,pageSizeOptions:[10,20,50],onChange:(D,f)=>{N(D),v(f)}},columns:[{title:"M√£ vai tr√≤",dataIndex:"code",key:"code",width:160,render:D=>e.jsxDEV("span",{style:{fontWeight:600},children:D},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionRolesModal.tsx",lineNumber:123,columnNumber:42},this)},{title:"T√™n vai tr√≤",dataIndex:"name",key:"name"},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:120,render:D=>e.jsxDEV(Re,{color:pp(D),children:cp(D)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionRolesModal.tsx",lineNumber:136,columnNumber:17},this)},{title:"Thao t√°c",key:"actions",width:80,render:(D,f)=>e.jsxDEV(ze,{title:"Xem vai tr√≤",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(ma,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionRolesModal.tsx",lineNumber:148,columnNumber:27},this),onClick:()=>V(f.id)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionRolesModal.tsx",lineNumber:145,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionRolesModal.tsx",lineNumber:144,columnNumber:17},this)}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionRolesModal.tsx",lineNumber:102,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionRolesModal.tsx",lineNumber:91,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionRolesModal.tsx",lineNumber:77,columnNumber:5},this)}const Wi=s=>s===1?"Ho·∫°t ƒë·ªông":"Ng·ª´ng",Xi=s=>s===1?"green":"red",hp=s=>s===1?0:1,Np=s=>{const a=s==null?void 0:s.trim();if(!a)return null;try{const t=JSON.parse(a);if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Metadata ph·∫£i l√† object JSON.");return t}catch{throw new Error("Metadata kh√¥ng h·ª£p l·ªá. Vui l√≤ng nh·∫≠p JSON object.")}};function fp(){const[s,a]=d.useState(!1),[t,i]=d.useState([]),[l,n]=d.useState(0),[r,u]=d.useState(1),[o,p]=d.useState(10),[h,m]=d.useState(""),[c,N]=d.useState("all"),[g,v]=d.useState("all"),[b,V]=d.useState([]),[D,f]=d.useState(!1),[P,x]=d.useState("create"),[y,Q]=d.useState(null),[U,j]=d.useState(!1),[A]=O.useForm(),[z,W]=d.useState(!1),[X,fe]=d.useState(null),[me,ue]=d.useState(!1),[xe,Ee]=d.useState(null),je=d.useCallback(async()=>{try{const H=await la.listPermissionModules();V(H)}catch(H){const L=H instanceof Error?H.message:"Kh√¥ng th·ªÉ t·∫£i ph√¢n h·ªá.";C.error(L)}},[]),Y=d.useCallback(async()=>{a(!0);try{const H=b.find(He=>He.id===g)??b.find(He=>He.code===g),L=g==="all"?void 0:(H==null?void 0:H.id)??g,G=g==="all"||H==null?void 0:H.code,ye=await la.listPermissions({q:h,status:c,moduleId:L,moduleCode:G,page:r,pageSize:o});i(ye.data),n(ye.total)}catch(H){const L=H instanceof Error?H.message:"Kh√¥ng th·ªÉ t·∫£i danh m·ª•c quy·ªÅn.";C.error(L)}finally{a(!1)}},[r,o,h,c,g,b]);d.useEffect(()=>{Y()},[Y]),d.useEffect(()=>{je()},[je]),d.useEffect(()=>{u(1)},[h,c,g]);const de=()=>{x("create"),Q(null),A.resetFields(),A.setFieldsValue({status:1,sort_order:0}),f(!0)},Te=H=>b.find(L=>L.code===H),S=H=>{x("edit"),Q(H);const L=Te(H.permission_type??"")??b.find(G=>G.id===H.module_id);A.resetFields(),A.setFieldsValue({code:H.code,name:H.name,description:H.description??"",module_code:(L==null?void 0:L.code)??H.permission_type??"",status:H.status??1,sort_order:H.sort_order??0,meta_text:H.meta?JSON.stringify(H.meta,null,2):""}),f(!0)},B=()=>{U||f(!1)},ge=async()=>{var H,L;try{j(!0);const G=await A.validateFields(),ye=Te(G.module_code);if(!ye){C.error("Vui l√≤ng ch·ªçn ph√¢n h·ªá h·ª£p l·ªá."),j(!1);return}const He=Np(G.meta_text);if(P==="create"){if(await la.getPermissionByCode(G.code.trim())){C.error("M√£ quy·ªÅn ƒë√£ t·ªìn t·∫°i."),j(!1);return}await la.createPermission({code:G.code.trim(),name:G.name.trim(),description:((H=G.description)==null?void 0:H.trim())||null,module_id:ye.id,permission_type:ye.code,status:G.status??1,sort_order:G.sort_order??0,meta:He??{}}),C.success("ƒê√£ t·∫°o quy·ªÅn.")}else y&&(await la.updatePermission(y.id,{name:G.name.trim(),description:((L=G.description)==null?void 0:L.trim())||null,module_id:ye.id,permission_type:ye.code,status:G.status??y.status??1,sort_order:G.sort_order??y.sort_order??0,meta:He??y.meta??{}}),C.success("ƒê√£ c·∫≠p nh·∫≠t quy·ªÅn."));f(!1),await Y()}catch(G){const ye=G instanceof Error?G.message:"Kh√¥ng th·ªÉ l∆∞u quy·ªÅn.";C.error(ye)}finally{j(!1)}},be=async H=>{try{await la.togglePermissionStatus(H.id,hp(H.status)),C.success("ƒê√£ c·∫≠p nh·∫≠t tr·∫°ng th√°i."),await Y()}catch(L){const G=L instanceof Error?L.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i.";C.error(G)}},ie=H=>{fe(H),W(!0)},Ne=H=>{Ee(H),ue(!0)},w=[{value:"all",label:"T·∫•t c·∫£ ph√¢n h·ªá"},...b.map(H=>({value:H.id,label:`${H.code} - ${H.name}`}))],_=H=>{const L=b.find(G=>G.id===H.module_id)??b.find(G=>G.code===H.permission_type);return L?`${L.code} - ${L.name}`:H.permission_type||"-"};return e.jsxDEV(es,{permission:"sa.iam.permission.read",children:[e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"IAM",href:"/system-admin/iam"},{label:"Danh m·ª•c quy·ªÅn"}],title:"Qu·∫£n l√Ω Danh m·ª•c quy·ªÅn",subtitle:"Qu·∫£n l√Ω danh m·ª•c quy·ªÅn v√† ph√¢n quy·ªÅn trong h·ªá th·ªëng",actions:e.jsxDEV(J,{children:[e.jsxDEV(q,{icon:e.jsxDEV(Qa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:287,columnNumber:29},this),onClick:()=>Y(),children:"L√†m m·ªõi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:287,columnNumber:15},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(qs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:290,columnNumber:44},this),onClick:de,children:"Th√™m quy·ªÅn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:290,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:286,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:276,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 pb-8",children:e.jsxDEV(ps,{children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(J,{wrap:!0,style:{width:"100%",justifyContent:"space-between"},children:[e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(re,{placeholder:"T√¨m theo m√£, t√™n quy·ªÅn...",value:h,onChange:H=>m(H.target.value),allowClear:!0,style:{width:260}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:302,columnNumber:19},this),e.jsxDEV(_e,{value:c,onChange:H=>N(H),style:{width:160},options:[{value:"all",label:"T·∫•t c·∫£ tr·∫°ng th√°i"},{value:"active",label:"Ho·∫°t ƒë·ªông"},{value:"inactive",label:"Ng·ª´ng"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:309,columnNumber:19},this),e.jsxDEV(_e,{value:g,onChange:H=>v(H),style:{width:220},options:w},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:319,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:301,columnNumber:17},this),e.jsxDEV(Le.Text,{type:"secondary",children:["T·ªïng: ",e.jsxDEV("strong",{children:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:327,columnNumber:25},this)," quy·ªÅn"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:326,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:300,columnNumber:15},this),e.jsxDEV($s,{rowKey:"id",loading:s,dataSource:t,pagination:{current:r,pageSize:o,total:l,showSizeChanger:!0,pageSizeOptions:[10,20,50],onChange:(H,L)=>{u(H),p(L)}},columns:[{title:"M√£ quy·ªÅn",dataIndex:"code",key:"code",width:180,render:H=>e.jsxDEV("span",{style:{fontWeight:600},children:H},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:352,columnNumber:48},this)},{title:"T√™n quy·ªÅn",dataIndex:"name",key:"name"},{title:"Ph√¢n h·ªá/nh√≥m",key:"module",width:220,render:(H,L)=>_(L)},{title:"M√¥ t·∫£",dataIndex:"description",key:"description",render:H=>H||"-",ellipsis:!0},{title:"S·ªë vai tr√≤",dataIndex:"role_count",key:"role_count",width:110,render:H=>H??0},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:120,render:H=>e.jsxDEV(Re,{color:Xi(H),children:Wi(H)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:385,columnNumber:23},this)},{title:"Thao t√°c",key:"actions",width:220,render:(H,L)=>e.jsxDEV(J,{children:[e.jsxDEV(ze,{title:"Xem",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(ma,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:398,columnNumber:35},this),onClick:()=>ie(L)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:395,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:394,columnNumber:25},this),e.jsxDEV(ze,{title:"S·ª≠a",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(oa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:406,columnNumber:35},this),onClick:()=>S(L)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:403,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:402,columnNumber:25},this),e.jsxDEV(ze,{title:"Danh s√°ch vai tr√≤",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(ni,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:414,columnNumber:35},this),onClick:()=>Ne(L)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:411,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:410,columnNumber:25},this),e.jsxDEV(ze,{title:L.status===1?"Ng·ª´ng":"K√≠ch ho·∫°t",children:e.jsxDEV(ws,{title:L.status===1?"Ng·ª´ng quy·ªÅn n√†y?":"K√≠ch ho·∫°t quy·ªÅn n√†y?",okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",onConfirm:()=>be(L),children:e.jsxDEV(q,{type:"text",size:"small",danger:L.status===1,icon:L.status===1?e.jsxDEV(ha,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:429,columnNumber:59},this):e.jsxDEV(da,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:429,columnNumber:78},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:425,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:419,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:418,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:393,columnNumber:23},this)}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:331,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:299,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:298,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:297,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:275,columnNumber:7},this),e.jsxDEV(us,{open:D,title:P==="create"?"Th√™m quy·ªÅn":"Ch·ªânh s·ª≠a quy·ªÅn",onCancel:B,onOk:ge,okText:"L∆∞u",cancelText:"H·ªßy",confirmLoading:U,destroyOnClose:!0,children:e.jsxDEV(O,{layout:"vertical",form:A,children:[e.jsxDEV(O.Item,{name:"code",label:"M√£ quy·ªÅn",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p m√£ quy·ªÅn."},{pattern:/^[a-zA-Z0-9_.:-]+$/,message:"M√£ ch·ªâ g·ªìm ch·ªØ, s·ªë v√† k√Ω t·ª± . _ : -"}],children:e.jsxDEV(re,{disabled:P==="edit"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:465,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:454,columnNumber:11},this),e.jsxDEV(O.Item,{name:"name",label:"T√™n quy·ªÅn",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p t√™n quy·ªÅn."}],children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:472,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:467,columnNumber:11},this),e.jsxDEV(O.Item,{name:"module_code",label:"Ph√¢n h·ªá/nh√≥m",rules:[{required:!0,message:"Vui l√≤ng ch·ªçn ph√¢n h·ªá."}],children:e.jsxDEV(_e,{showSearch:!0,placeholder:"Ch·ªçn ph√¢n h·ªá",options:b.map(H=>({value:H.code,label:`${H.code} - ${H.name}`}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:479,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:474,columnNumber:11},this),e.jsxDEV(O.Item,{name:"description",label:"M√¥ t·∫£",children:e.jsxDEV(re.TextArea,{rows:3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:489,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:488,columnNumber:11},this),e.jsxDEV(O.Item,{name:"sort_order",label:"Th·ª© t·ª±",children:e.jsxDEV(cs,{min:0,style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:492,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:491,columnNumber:11},this),e.jsxDEV(O.Item,{name:"status",label:"Tr·∫°ng th√°i",initialValue:1,children:e.jsxDEV(_e,{options:[{value:1,label:"Ho·∫°t ƒë·ªông"},{value:0,label:"Ng·ª´ng"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:495,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:494,columnNumber:11},this),e.jsxDEV(O.Item,{name:"meta_text",label:"Metadata (JSON)",children:e.jsxDEV(re.TextArea,{rows:4,placeholder:'VD: {"scope":"iam"}'},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:503,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:502,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:453,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:443,columnNumber:7},this),e.jsxDEV(_a,{title:"Chi ti·∫øt quy·ªÅn",placement:"right",width:420,open:z,onClose:()=>W(!1),children:X?e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(Le.Title,{level:5,style:{margin:0},children:X.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:517,columnNumber:13},this),e.jsxDEV(Re,{children:X.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:520,columnNumber:13},this),e.jsxDEV(Re,{color:Xi(X.status),children:Wi(X.status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:521,columnNumber:13},this),e.jsxDEV(Le.Paragraph,{children:X.description||"Ch∆∞a c√≥ m√¥ t·∫£."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:524,columnNumber:13},this),e.jsxDEV(Le.Text,{children:["Ph√¢n h·ªá: ",e.jsxDEV("strong",{children:_(X)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:528,columnNumber:24},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:527,columnNumber:13},this),e.jsxDEV(Le.Text,{children:["S·ªë vai tr√≤: ",e.jsxDEV("strong",{children:X.role_count??0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:531,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:530,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:516,columnNumber:11},this):e.jsxDEV(Le.Text,{children:"Kh√¥ng c√≥ d·ªØ li·ªáu."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:535,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:508,columnNumber:7},this),e.jsxDEV(gp,{open:me,permission:xe,onClose:()=>{ue(!1),Ee(null)}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:539,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/PermissionsPage.tsx",lineNumber:274,columnNumber:5},this)}const vp=Object.freeze(Object.defineProperty({__proto__:null,default:fp},Symbol.toStringTag,{value:"Module"})),va={normalizeStatus(s){return typeof s=="number"?s===1?1:0:typeof s=="string"?s.toUpperCase()==="ACTIVE"?1:0:1},async listPermissions(){const s=()=>M.from("permissions").select("*").order("code",{ascending:!0});let a=await M.from("permissions").select("*").order("sort_order",{ascending:!0}).order("code",{ascending:!0});if(a.error&&a.error.message.includes("sort_order")&&(a=await s()),a.error)throw new Error(`permissions select failed: ${a.error.message}`);return(a.data||[]).map(t=>({id:t._id??t.id,code:t.code,name:t.name,description:t.description??null,module_id:t.module_id??null,module:t.module??null,permission_type:t.permission_type??null,resource:t.resource??null,action:t.action??null,status:va.normalizeStatus(t.status),sort_order:t.sort_order??null}))},async listModules(){const s=async a=>{const{data:t,error:i}=await M.from("modules").select(`${a}, code, name`).order("code",{ascending:!0});if(i)throw i;return(t||[]).map(l=>({id:l[a],code:l.code,name:l.name}))};try{return await s("id")}catch{return await s("_id")}},async listRolePermissionIds(s){const{data:a,error:t}=await M.from("role_permissions").select("permission_id").eq("role_id",s);if(t)throw new Error(`role permissions select failed: ${t.message}`);return(a||[]).map(i=>i.permission_id).filter(Boolean)},async addRolePermissions(s,a){if(!a.length)return;const t=a.map(l=>({role_id:s,permission_id:l})),{error:i}=await M.from("role_permissions").upsert(t,{onConflict:"role_id,permission_id"});if(i)throw new Error(`role permissions insert failed: ${i.message}`)},async removeRolePermissions(s,a){if(!a.length)return;const{error:t}=await M.from("role_permissions").delete().eq("role_id",s).in("permission_id",a);if(t)throw new Error(`role permissions delete failed: ${t.message}`)}},ii=[{key:"READ",label:"Xem"},{key:"CREATE",label:"Th√™m"},{key:"UPDATE",label:"S·ª≠a"},{key:"DELETE",label:"X√≥a"},{key:"EXPORT",label:"Xu·∫•t"}],Yi={read:"READ",view:"READ",list:"READ",get:"READ",create:"CREATE",add:"CREATE",new:"CREATE",update:"UPDATE",edit:"UPDATE",write:"UPDATE",delete:"DELETE",remove:"DELETE",destroy:"DELETE",export:"EXPORT",download:"EXPORT"},el=s=>s?s.replace(/[-_.]+/g," ").replace(/\s+/g," ").trim().replace(/\b\w/g,a=>a.toUpperCase()):"Ch·ª©c nƒÉng",bp=(s,a)=>{var v;const t=String(s.code??""),i=String(s.name??""),l=s.description??null,n=Number(s.status??1),r=s.sort_order??null,u=s.module_id&&a.has(s.module_id)?a.get(s.module_id):null,o=(u==null?void 0:u.code)??s.module??s.permission_type??"",p=s.resource??"",h=s.action??"";let m=String(o||"").trim(),c=String(p||"").trim(),N=String(h||"").trim().toUpperCase();if(!N){const b=t.replace(/[-]/g,"_").split(/[.:_]/).map(D=>D.trim()).filter(Boolean),V=(v=b[b.length-1])==null?void 0:v.toLowerCase();if(V&&Yi[V]){N=Yi[V];const D=b.slice(0,-1);!m&&D.length>=2?(m=D[0],c=D.slice(1).join("_")):c||(c=D.join("_"))}}if(!m){const b=t.replace(/[-]/g,"_").split(/[.:_]/).map(V=>V.trim()).filter(Boolean);b.length>=3&&(m=b[0],c||(c=b.slice(1,-1).join("_")))}if(!c){const b=t.replace(/[-]/g,"_").split(/[.:_]/).map(V=>V.trim()).filter(Boolean);b.length>=2?c=b.slice(0,-1).join("_"):c=i||t||"Ch·ª©c nƒÉng"}m||(m="Kh√°c");const g=u?`${u.code} - ${u.name}`:m;return{id:s.id,code:t,name:i,description:l,moduleKey:m,moduleLabel:g,resourceKey:c,actionKey:N||"",status:n,sort_order:r}},Vp=(s,a,t,i)=>{const l=t.trim().toLowerCase(),n=i.trim().toLowerCase(),r=s.filter(p=>!(a!=="all"&&p.moduleKey!==a||l&&![p.code,p.name,p.description,p.moduleKey,p.moduleLabel,p.resourceKey].filter(Boolean).join(" ").toLowerCase().includes(l)||n&&!el(p.resourceKey).toLowerCase().includes(n))),u=new Map;r.forEach(p=>{if(!p.actionKey)return;u.has(p.moduleKey)||u.set(p.moduleKey,new Map);const h=u.get(p.moduleKey);h.has(p.resourceKey)||h.set(p.resourceKey,{key:`${p.moduleKey}:${p.resourceKey}`,moduleKey:p.moduleKey,moduleLabel:p.moduleLabel,resourceKey:p.resourceKey,resourceLabel:el(p.resourceKey),actions:{READ:null,CREATE:null,UPDATE:null,DELETE:null,EXPORT:null}});const m=h.get(p.resourceKey);m.actions[p.actionKey]||(m.actions[p.actionKey]={permissionId:p.id,status:p.status,code:p.code,name:p.name})});const o=[];return Array.from(u.entries()).sort(([p],[h])=>p.localeCompare(h,"vi")).forEach(([p,h])=>{var c;const m=Array.from(h.values()).sort((N,g)=>N.resourceLabel.localeCompare(g.resourceLabel,"vi"));o.push({key:`module:${p}`,moduleKey:p,moduleLabel:((c=m[0])==null?void 0:c.moduleLabel)||p,resourceKey:p,resourceLabel:p,actions:{READ:null,CREATE:null,UPDATE:null,DELETE:null,EXPORT:null},isGroup:!0,children:m})}),o},Tp=s=>{const a={READ:[],CREATE:[],UPDATE:[],DELETE:[],EXPORT:[]},t={},i={},l=(n,r)=>{n&&n.status!==0&&r.push(n.permissionId)};return s.forEach(n=>{var r;if(n.isGroup){const u=[];(r=n.children)==null||r.forEach(o=>{const p=[];ii.forEach(h=>{const m=o.actions[h.key];l(m,p),l(m,a[h.key])}),t[o.key]=p,u.push(...p)}),i[n.moduleKey]=u}else{const u=[];ii.forEach(o=>{const p=n.actions[o.key];l(p,u),l(p,a[o.key])}),t[n.key]=u,i[n.moduleKey]=[...i[n.moduleKey]||[],...u]}}),{perAction:a,perRow:t,perModule:i}};function xp(){const s=ys(),{roleId:a}=Ys(),t=d.useRef(null),[i,l]=d.useState([]),[n,r]=d.useState(!1),[u,o]=d.useState(0),[p,h]=d.useState(1),[m,c]=d.useState(8),[N,g]=d.useState(""),[v,b]=d.useState("all"),[V,D]=d.useState(null),[f,P]=d.useState([]),[x,y]=d.useState(new Map),[Q,U]=d.useState(!1),[j,A]=d.useState(new Set),[z,W]=d.useState(new Set),[X,fe]=d.useState("all"),[me,ue]=d.useState(""),[xe,Ee]=d.useState(""),[je,Y]=d.useState(10),de=(V==null?void 0:V.status)===0,Te=d.useCallback(async()=>{r(!0);try{const T=await Xs.listRoles({q:N,status:v,page:p,pageSize:m});l(T.data),o(T.total)}catch(T){const I=T instanceof Error?T.message:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch vai tr√≤.";C.error(I)}finally{r(!1)}},[p,m,N,v]);d.useEffect(()=>{Te()},[Te]),d.useEffect(()=>{h(1)},[N,v]),d.useEffect(()=>{if(!a)return;const T=i.find(I=>I.id===a);if(T){D(T);return}(async()=>{try{const I=await Xs.getRoleById(a);I&&D(I)}catch{C.error("Kh√¥ng th·ªÉ t·∫£i th√¥ng tin vai tr√≤.")}})()},[a,i]);const S=d.useCallback(async()=>{if(t.current){P(t.current);return}try{const T=await va.listPermissions();t.current=T,P(T)}catch(T){const I=T instanceof Error?T.message:"Kh√¥ng th·ªÉ t·∫£i danh m·ª•c quy·ªÅn.";C.error(I)}},[]),B=d.useCallback(async()=>{try{const T=await va.listModules(),I=new Map;T.forEach(se=>{I.set(se.id,se)}),y(I)}catch{y(new Map)}},[]),ge=d.useCallback(async T=>{U(!0);try{const I=await va.listRolePermissionIds(T.id),se=new Set(I);A(new Set(se)),W(new Set(se))}catch(I){const se=I instanceof Error?I.message:"Kh√¥ng th·ªÉ t·∫£i quy·ªÅn ƒë√£ g√°n.";C.error(se)}finally{U(!1)}},[]);d.useEffect(()=>{S(),B()},[S,B]);const be=d.useMemo(()=>f.map(T=>bp(T,x)),[f,x]);d.useEffect(()=>{if(!V){A(new Set),W(new Set);return}ge(V)},[V,ge]);const ie=d.useMemo(()=>{const T=new Map;return be.forEach(I=>{T.has(I.moduleKey)||T.set(I.moduleKey,I.moduleLabel)}),Array.from(T.entries()).map(([I,se])=>({value:I,label:se})).sort((I,se)=>I.label.localeCompare(se.label,"vi"))},[be]),Ne=d.useMemo(()=>Vp(be,X,me,xe),[be,X,me,xe]),w=d.useMemo(()=>Tp(Ne),[Ne]),_=d.useMemo(()=>{if(j.size!==z.size)return!0;for(const T of j)if(!z.has(T))return!0;return!1},[j,z]),H=T=>{D(T),s(`/system-admin/iam/role-permissions/${T.id}`)},L=(T,I)=>{de||A(se=>{const he=new Set(se);return I?he.add(T):he.delete(T),he})},G=(T,I)=>{if(de)return;const se=w.perRow[T]||[];A(he=>{const De=new Set(he);return se.forEach(ve=>{I?De.add(ve):De.delete(ve)}),De})},ye=(T,I)=>{if(de)return;const se=w.perAction[T]||[];A(he=>{const De=new Set(he);return se.forEach(ve=>{I?De.add(ve):De.delete(ve)}),De})},He=(T,I)=>{if(de)return;const se=w.perModule[T]||[];A(he=>{const De=new Set(he);return se.forEach(ve=>{I?De.add(ve):De.delete(ve)}),De})},le=T=>{if(de)return;const I=Object.values(w.perAction).flat();A(()=>T?new Set(I):new Set)},te=()=>{A(new Set(z))},Ce=async()=>{if(!V){C.warning("Vui l√≤ng ch·ªçn vai tr√≤.");return}if(de){C.warning("Vai tr√≤ ƒëang ng·ª´ng, kh√¥ng th·ªÉ ph√¢n quy·ªÅn.");return}const T=[],I=[];j.forEach(se=>{z.has(se)||T.push(se)}),z.forEach(se=>{j.has(se)||I.push(se)});try{U(!0),T.length>0&&await va.addRolePermissions(V.id,T),I.length>0&&await va.removeRolePermissions(V.id,I),C.success("ƒê√£ l∆∞u ph√¢n quy·ªÅn."),await ge(V)}catch(se){const he=se instanceof Error?se.message:"Kh√¥ng th·ªÉ l∆∞u ph√¢n quy·ªÅn.";C.error(he)}finally{U(!1)}},ne=async()=>{V&&await ge(V)},ae=[{title:"Ph√¢n h·ªá",dataIndex:"moduleKey",key:"module",width:180,filterDropdown:()=>e.jsxDEV("div",{style:{padding:8},children:e.jsxDEV(_e,{value:X,onChange:T=>fe(T),style:{width:220},options:[{value:"all",label:"T·∫•t c·∫£ ph√¢n h·ªá"},...ie]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:632,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:631,columnNumber:9},this),render:(T,I)=>{if(I.isGroup){const se=w.perModule[I.moduleKey]||[],he=se.filter(De=>j.has(De)).length;return e.jsxDEV(J,{direction:"vertical",size:2,children:[e.jsxDEV(Le.Text,{strong:!0,children:I.moduleLabel},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:646,columnNumber:15},this),e.jsxDEV(Le.Text,{type:"secondary",children:[he,"/",se.length," quy·ªÅn"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:647,columnNumber:15},this),e.jsxDEV(J,{size:4,children:[e.jsxDEV(q,{type:"link",size:"small",disabled:se.length===0||de,onClick:()=>He(I.moduleKey,!0),children:"Ch·ªçn t·∫•t c·∫£"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:651,columnNumber:17},this),e.jsxDEV(q,{type:"link",size:"small",disabled:se.length===0||de,onClick:()=>He(I.moduleKey,!1),children:"B·ªè ch·ªçn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:659,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:650,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:645,columnNumber:13},this)}return e.jsxDEV(Le.Text,{children:I.moduleLabel},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:671,columnNumber:16},this)}},{title:"Ch·ª©c nƒÉng",dataIndex:"resourceLabel",key:"resource",width:260,sorter:(T,I)=>T.resourceLabel.localeCompare(I.resourceLabel,"vi"),sortDirections:["ascend","descend"],filterDropdown:()=>e.jsxDEV("div",{style:{padding:8},children:e.jsxDEV(re,{placeholder:"L·ªçc theo ch·ª©c nƒÉng",value:xe,onChange:T=>Ee(T.target.value),allowClear:!0,style:{width:220}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:684,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:683,columnNumber:9},this),onFilter:()=>!0,render:(T,I)=>{if(I.isGroup)return e.jsxDEV(Le.Text,{strong:!0,children:I.moduleLabel},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:696,columnNumber:18},this);const se=w.perRow[I.key]||[],he=se.filter(ss=>j.has(ss)).length,De=se.length>0&&he===se.length,ve=he>0&&he<se.length;return e.jsxDEV(J,{children:[e.jsxDEV(Za,{checked:De,indeterminate:ve,disabled:de,onChange:ss=>G(I.key,ss.target.checked)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:704,columnNumber:13},this),e.jsxDEV("span",{children:I.resourceLabel},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:710,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:703,columnNumber:11},this)}},...ii.map(T=>({title:e.jsxDEV(J,{direction:"vertical",size:2,align:"center",children:[e.jsxDEV("span",{children:T.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:718,columnNumber:11},this),e.jsxDEV(Za,{checked:(w.perAction[T.key]||[]).length>0&&(w.perAction[T.key]||[]).every(I=>j.has(I)),indeterminate:(w.perAction[T.key]||[]).some(I=>j.has(I))&&!(w.perAction[T.key]||[]).every(I=>j.has(I)),onChange:I=>ye(T.key,I.target.checked),disabled:de},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:719,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:717,columnNumber:9},this),dataIndex:T.key,key:T.key,align:"center",width:110,render:(I,se)=>{if(se.isGroup)return null;const he=se.actions[T.key];if(!he)return e.jsxDEV(Za,{disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:741,columnNumber:18},this);const De=he.status===0,ve=e.jsxDEV(Za,{checked:j.has(he.permissionId),onChange:ss=>L(he.permissionId,ss.target.checked),disabled:de||De},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:745,columnNumber:11},this);return De?e.jsxDEV(ze,{title:"Quy·ªÅn ƒëang ng·ª´ng",children:e.jsxDEV("span",{children:ve},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:754,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:753,columnNumber:13},this):ve}}))];return e.jsxDEV(es,{permission:"sa.iam.assignment.read",children:e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"IAM",href:"/system-admin/iam"},{label:"Ph√¢n quy·ªÅn"}],title:"Ph√¢n quy·ªÅn theo vai tr√≤",subtitle:"G√°n quy·ªÅn theo vai tr√≤ b·∫±ng ma tr·∫≠n h√†nh ƒë·ªông",actions:e.jsxDEV(J,{children:[e.jsxDEV(q,{icon:e.jsxDEV(Qa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:777,columnNumber:29},this),onClick:ne,disabled:!V,children:"L√†m m·ªõi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:777,columnNumber:15},this),e.jsxDEV(q,{icon:e.jsxDEV(Im,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:780,columnNumber:29},this),onClick:te,disabled:!_,children:"Ho√†n t√°c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:780,columnNumber:15},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(Fa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:785,columnNumber:23},this),onClick:Ce,disabled:!_||de,children:"L∆∞u thay ƒë·ªïi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:783,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:776,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:766,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 pb-8",children:e.jsxDEV("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxDEV("div",{className:"col-span-12 xl:col-span-3",children:e.jsxDEV(ps,{title:"Vai tr√≤",children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(re,{placeholder:"T√¨m theo m√£, t√™n vai tr√≤...",value:N,onChange:T=>g(T.target.value),allowClear:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:800,columnNumber:19},this),e.jsxDEV(_e,{value:v,onChange:T=>b(T),options:[{value:"all",label:"T·∫•t c·∫£ tr·∫°ng th√°i"},{value:"active",label:"Ho·∫°t ƒë·ªông"},{value:"inactive",label:"Ng·ª´ng"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:806,columnNumber:19},this),e.jsxDEV($s,{rowKey:"id",size:"small",loading:n,dataSource:i,pagination:{current:p,pageSize:m,total:u,showSizeChanger:!0,pageSizeOptions:[8,12,20],onChange:(T,I)=>{h(T),c(I)}},rowSelection:{type:"radio",selectedRowKeys:V?[V.id]:[],onSelect:T=>H(T)},columns:[{title:"M√£",dataIndex:"code",key:"code",width:120,render:T=>e.jsxDEV("strong",{children:T},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:842,columnNumber:52},this)},{title:"T√™n vai tr√≤",dataIndex:"name",key:"name"},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:90,render:T=>e.jsxDEV(Re,{color:T===1?"green":"red",children:T===1?"Ho·∫°t ƒë·ªông":"Ng·ª´ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:855,columnNumber:27},this)}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:815,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:799,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:798,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:797,columnNumber:13},this),e.jsxDEV("div",{className:"col-span-12 xl:col-span-9",children:e.jsxDEV(ps,{title:"Ma tr·∫≠n quy·ªÅn",extra:V?e.jsxDEV(Le.Text,{type:"secondary",children:["Vai tr√≤: ",e.jsxDEV("strong",{children:V.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:872,columnNumber:32},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:871,columnNumber:21},this):null,children:V?e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[de&&e.jsxDEV(Is,{type:"warning",message:"Vai tr√≤ ƒëang ng·ª´ng. Kh√¥ng th·ªÉ ch·ªânh s·ª≠a ph√¢n quy·ªÅn."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:885,columnNumber:23},this),_&&e.jsxDEV(Is,{type:"warning",message:"C√≥ thay ƒë·ªïi ch∆∞a l∆∞u.",showIcon:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:891,columnNumber:23},this),e.jsxDEV(J,{wrap:!0,style:{width:"100%",justifyContent:"space-between"},children:[e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(re,{placeholder:"T√¨m theo m√£, t√™n quy·ªÅn...",value:me,onChange:T=>ue(T.target.value),allowClear:!0,style:{width:260}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:895,columnNumber:25},this),e.jsxDEV(_e,{value:X,onChange:T=>fe(T),style:{width:220},options:[{value:"all",label:"T·∫•t c·∫£ ph√¢n h·ªá"},...ie]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:902,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:894,columnNumber:23},this),e.jsxDEV(J,{children:[e.jsxDEV(q,{icon:e.jsxDEV(Am,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:911,columnNumber:33},this),onClick:()=>le(!0),disabled:de,children:"Ch·ªçn t·∫•t c·∫£"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:910,columnNumber:25},this),e.jsxDEV(q,{icon:e.jsxDEV(wm,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:918,columnNumber:33},this),onClick:()=>le(!1),disabled:de,children:"B·ªè ch·ªçn t·∫•t c·∫£"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:917,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:909,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:893,columnNumber:21},this),e.jsxDEV($s,{rowKey:"key",bordered:!0,sticky:!0,tableLayout:"fixed",size:"middle",loading:Q,dataSource:Ne,columns:ae,pagination:{pageSize:je,showSizeChanger:!0,pageSizeOptions:[10,20,50],onShowSizeChange:(T,I)=>Y(I)},expandable:{defaultExpandAllRows:!0,expandRowByClick:!1},scroll:{x:"max-content",y:520}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:927,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:883,columnNumber:19},this):e.jsxDEV(Is,{type:"info",message:"Ch·ªçn m·ªôt vai tr√≤ b√™n tr√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu ph√¢n quy·ªÅn."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:878,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:867,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:866,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:796,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:795,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:765,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RolePermissionsPage.tsx",lineNumber:764,columnNumber:5},this)}const yp=Object.freeze(Object.defineProperty({__proto__:null,default:xp},Symbol.toStringTag,{value:"Module"})),Zn=[{id:"1",username:"qt_admin",fullName:"Nguy·ªÖn VƒÉn Qu·∫£n Tr·ªã",email:"admin@qltt.gov.vn",phone:"0912345678",orgUnitId:"1",departmentId:"3",position:"Qu·∫£n tr·ªã vi√™n h·ªá th·ªëng",status:"active",lastLoginAt:"2025-01-22T08:30:00Z",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-01-22T08:30:00Z"},{id:"2",username:"qt_lanhdao",fullName:"Tr·∫ßn Th·ªã L√£nh ƒê·∫°o",email:"lanhdao@qltt.gov.vn",phone:"0912345679",orgUnitId:"1",departmentId:"1",position:"Tr∆∞·ªüng ph√≤ng TCKT",status:"active",lastLoginAt:"2025-01-21T16:45:00Z",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-01-21T16:45:00Z"},{id:"3",username:"hn_trungnv",fullName:"Ph·∫°m VƒÉn Tr∆∞·ªüng",email:"truongnv.hn@qltt.gov.vn",phone:"0912345680",orgUnitId:"2",departmentId:null,position:"Tr∆∞·ªüng Chi c·ª•c",status:"active",lastLoginAt:"2025-01-22T07:15:00Z",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-01-22T07:15:00Z"},{id:"4",username:"hn_doi01",fullName:"L√™ VƒÉn Ki·ªÉm Tra",email:"kiemtra.hn@qltt.gov.vn",phone:"0912345681",orgUnitId:"4",departmentId:null,position:"ƒê·ªôi tr∆∞·ªüng ƒê·ªôi 01",status:"active",lastLoginAt:"2025-01-22T06:00:00Z",createdAt:"2024-01-15T00:00:00Z",updatedAt:"2025-01-22T06:00:00Z"},{id:"5",username:"test_locked",fullName:"Nguy·ªÖn VƒÉn Test",email:"test@qltt.gov.vn",phone:"0912345682",orgUnitId:"1",departmentId:null,position:"Nh√¢n vi√™n",status:"locked",lastLoginAt:"2024-12-01T00:00:00Z",createdAt:"2024-06-01T00:00:00Z",updatedAt:"2024-12-15T00:00:00Z"}],Vt=[{id:"1",code:"SUPER_ADMIN",name:"Super Admin",description:"Qu·∫£n tr·ªã vi√™n t·ªëi cao, c√≥ to√†n quy·ªÅn tr√™n h·ªá th·ªëng",type:"system",scope:"global",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",code:"LANHDAO_CUC",name:"L√£nh ƒë·∫°o C·ª•c",description:"L√£nh ƒë·∫°o c·∫•p C·ª•c, xem b√°o c√°o t·ªïng h·ª£p",type:"system",scope:"organizational",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"3",code:"TRUONG_CHICUC",name:"Tr∆∞·ªüng Chi c·ª•c",description:"Tr∆∞·ªüng Chi c·ª•c, qu·∫£n l√Ω chi c·ª•c",type:"system",scope:"organizational",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"4",code:"DOI_TRUONG",name:"ƒê·ªôi tr∆∞·ªüng",description:"ƒê·ªôi tr∆∞·ªüng, qu·∫£n l√Ω ƒë·ªôi ki·ªÉm tra",type:"system",scope:"organizational",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"5",code:"THANH_TRA_VIEN",name:"Thanh tra vi√™n",description:"Thanh tra vi√™n, th·ª±c hi·ªán ki·ªÉm tra",type:"custom",scope:"organizational",status:"active",createdAt:"2024-01-15T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z"},{id:"6",code:"VAN_THU",name:"VƒÉn th∆∞",description:"VƒÉn th∆∞, qu·∫£n l√Ω vƒÉn b·∫£n",type:"custom",scope:"organizational",status:"active",createdAt:"2024-01-15T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z"}],li=[{id:"1",code:"sa.iam.user.read",name:"Xem ng∆∞·ªùi d√πng",description:"Xem danh s√°ch v√† chi ti·∫øt ng∆∞·ªùi d√πng",moduleId:"3",resource:"user",action:"read",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",code:"sa.iam.user.create",name:"T·∫°o ng∆∞·ªùi d√πng",description:"T·∫°o t√†i kho·∫£n ng∆∞·ªùi d√πng m·ªõi",moduleId:"3",resource:"user",action:"create",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"3",code:"sa.iam.user.update",name:"C·∫≠p nh·∫≠t ng∆∞·ªùi d√πng",description:"Ch·ªânh s·ª≠a th√¥ng tin ng∆∞·ªùi d√πng",moduleId:"3",resource:"user",action:"update",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"4",code:"sa.iam.user.delete",name:"X√≥a ng∆∞·ªùi d√πng",description:"X√≥a t√†i kho·∫£n ng∆∞·ªùi d√πng",moduleId:"3",resource:"user",action:"delete",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"5",code:"sa.iam.role.read",name:"Xem vai tr√≤",description:"Xem danh s√°ch v√† chi ti·∫øt vai tr√≤",moduleId:"3",resource:"role",action:"read",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"6",code:"sa.iam.role.create",name:"T·∫°o vai tr√≤",description:"T·∫°o vai tr√≤ m·ªõi",moduleId:"3",resource:"role",action:"create",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"7",code:"sa.iam.role.update",name:"C·∫≠p nh·∫≠t vai tr√≤",description:"Ch·ªânh s·ª≠a th√¥ng tin vai tr√≤",moduleId:"3",resource:"role",action:"update",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"8",code:"sa.iam.role.delete",name:"X√≥a vai tr√≤",description:"X√≥a vai tr√≤ (kh√¥ng √°p d·ª•ng cho system roles)",moduleId:"3",resource:"role",action:"delete",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"9",code:"sa.iam.permission.read",name:"Xem quy·ªÅn h·∫°n",description:"Xem danh s√°ch quy·ªÅn h·∫°n",moduleId:"3",resource:"permission",action:"read",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"10",code:"sa.iam.assignment.read",name:"Xem ph√¢n quy·ªÅn",description:"Xem danh s√°ch ph√¢n quy·ªÅn",moduleId:"3",resource:"assignment",action:"read",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"11",code:"sa.iam.assignment.assign",name:"G√°n quy·ªÅn",description:"G√°n vai tr√≤ cho ng∆∞·ªùi d√πng, g√°n quy·ªÅn cho vai tr√≤",moduleId:"3",resource:"assignment",action:"assign",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"12",code:"sa.iam.assignment.revoke",name:"Thu h·ªìi quy·ªÅn",description:"Thu h·ªìi vai tr√≤, quy·ªÅn ƒë√£ g√°n",moduleId:"3",resource:"assignment",action:"revoke",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"13",code:"sa.iam.module.read",name:"Xem module",description:"Xem danh s√°ch module",moduleId:"3",resource:"module",action:"read",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"14",code:"sa.iam.menu.read",name:"Xem menu",description:"Xem c·∫•u h√¨nh menu",moduleId:"3",resource:"menu",action:"read",isSystem:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}],zn=[{id:"1",userId:"1",roleId:"1",orgUnitId:null,assignedBy:"system",assignedAt:"2024-01-01T00:00:00Z",expiresAt:null,status:"active"},{id:"2",userId:"2",roleId:"2",orgUnitId:"1",assignedBy:"1",assignedAt:"2024-01-01T00:00:00Z",expiresAt:null,status:"active"},{id:"3",userId:"3",roleId:"3",orgUnitId:"2",assignedBy:"1",assignedAt:"2024-01-01T00:00:00Z",expiresAt:null,status:"active"},{id:"4",userId:"4",roleId:"4",orgUnitId:"4",assignedBy:"1",assignedAt:"2024-01-15T00:00:00Z",expiresAt:null,status:"active"}],Bn=[{id:"1",roleId:"1",permissionId:"1",assignedBy:"system",assignedAt:"2024-01-01T00:00:00Z",status:"active"},{id:"2",roleId:"1",permissionId:"2",assignedBy:"system",assignedAt:"2024-01-01T00:00:00Z",status:"active"},{id:"3",roleId:"1",permissionId:"3",assignedBy:"system",assignedAt:"2024-01-01T00:00:00Z",status:"active"},{id:"4",roleId:"1",permissionId:"4",assignedBy:"system",assignedAt:"2024-01-01T00:00:00Z",status:"active"},{id:"5",roleId:"1",permissionId:"5",assignedBy:"system",assignedAt:"2024-01-01T00:00:00Z",status:"active"},{id:"6",roleId:"2",permissionId:"1",assignedBy:"system",assignedAt:"2024-01-01T00:00:00Z",status:"active"},{id:"7",roleId:"2",permissionId:"5",assignedBy:"system",assignedAt:"2024-01-01T00:00:00Z",status:"active"},{id:"8",roleId:"2",permissionId:"10",assignedBy:"system",assignedAt:"2024-01-01T00:00:00Z",status:"active"}],Ep={totalUsers:Zn.length,totalRoles:Vt.length,totalPermissions:li.length,totalUserRoleAssignments:zn.filter(s=>s.status==="active").length,totalRolePermissionAssignments:Bn.filter(s=>s.status==="active").length,recentAssignments:[{id:"4",type:"user-role",description:'G√°n vai tr√≤ "ƒê·ªôi tr∆∞·ªüng" cho L√™ VƒÉn Ki·ªÉm Tra',assignedBy:"Nguy·ªÖn VƒÉn Qu·∫£n Tr·ªã",assignedAt:"2024-01-15T00:00:00Z"},{id:"3",type:"user-role",description:'G√°n vai tr√≤ "Tr∆∞·ªüng Chi c·ª•c" cho Ph·∫°m VƒÉn Tr∆∞·ªüng',assignedBy:"Nguy·ªÖn VƒÉn Qu·∫£n Tr·ªã",assignedAt:"2024-01-01T00:00:00Z"}]},Ue={};function Hp(){const s=ys(),a=Ep;return e.jsxDEV(es,{permission:"sa.iam.assignment.read",children:e.jsxDEV(bs,{title:"T·ªïng quan Ph√¢n quy·ªÅn",subtitle:"Th·ªëng k√™ v√† qu·∫£n l√Ω ph√¢n quy·ªÅn trong h·ªá th·ªëng",breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"IAM",path:"/system-admin/iam"},{label:"Ph√¢n quy·ªÅn"}],children:[e.jsxDEV("div",{className:Ue.statsGrid,children:[e.jsxDEV("div",{className:Ue.statCard,children:[e.jsxDEV("div",{className:Ue.statIcon,style:{background:"#eff6ff",color:"#2563eb"},children:e.jsxDEV(Ea,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:33,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:32,columnNumber:13},this),e.jsxDEV("div",{className:Ue.statContent,children:[e.jsxDEV("div",{className:Ue.statValue,children:a.totalUsers},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:36,columnNumber:15},this),e.jsxDEV("div",{className:Ue.statLabel,children:"Ng∆∞·ªùi d√πng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:37,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:35,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:31,columnNumber:11},this),e.jsxDEV("div",{className:Ue.statCard,children:[e.jsxDEV("div",{className:Ue.statIcon,style:{background:"#f5f3ff",color:"#7c3aed"},children:e.jsxDEV(ya,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:43,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:42,columnNumber:13},this),e.jsxDEV("div",{className:Ue.statContent,children:[e.jsxDEV("div",{className:Ue.statValue,children:a.totalRoles},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:46,columnNumber:15},this),e.jsxDEV("div",{className:Ue.statLabel,children:"Vai tr√≤"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:47,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:45,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:41,columnNumber:11},this),e.jsxDEV("div",{className:Ue.statCard,children:[e.jsxDEV("div",{className:Ue.statIcon,style:{background:"#f0fdf4",color:"#16a34a"},children:e.jsxDEV(_i,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:53,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:52,columnNumber:13},this),e.jsxDEV("div",{className:Ue.statContent,children:[e.jsxDEV("div",{className:Ue.statValue,children:a.totalPermissions},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:56,columnNumber:15},this),e.jsxDEV("div",{className:Ue.statLabel,children:"Quy·ªÅn h·∫°n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:57,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:55,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:51,columnNumber:11},this),e.jsxDEV("div",{className:Ue.statCard,children:[e.jsxDEV("div",{className:Ue.statIcon,style:{background:"#fff7ed",color:"#ea580c"},children:e.jsxDEV(or,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:63,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:62,columnNumber:13},this),e.jsxDEV("div",{className:Ue.statContent,children:[e.jsxDEV("div",{className:Ue.statValue,children:a.totalUserRoleAssignments},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:66,columnNumber:15},this),e.jsxDEV("div",{className:Ue.statLabel,children:"Ph√¢n quy·ªÅn ng∆∞·ªùi d√πng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:67,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:65,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:61,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:30,columnNumber:9},this),e.jsxDEV("div",{className:Ue.recentSection,children:[e.jsxDEV("h3",{children:"Ph√¢n quy·ªÅn g·∫ßn ƒë√¢y"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:74,columnNumber:11},this),e.jsxDEV("div",{className:Ue.recentList,children:a.recentAssignments.map(t=>e.jsxDEV("div",{className:Ue.recentItem,children:[e.jsxDEV("div",{className:Ue.recentIcon,children:t.type==="user-role"?e.jsxDEV(Ea,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:80,columnNumber:21},this):e.jsxDEV(ya,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:82,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:78,columnNumber:17},this),e.jsxDEV("div",{className:Ue.recentContent,children:[e.jsxDEV("div",{className:Ue.recentDescription,children:t.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:86,columnNumber:19},this),e.jsxDEV("div",{className:Ue.recentMeta,children:[e.jsxDEV("span",{children:["B·ªüi: ",t.assignedBy]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:88,columnNumber:21},this),e.jsxDEV("span",{children:"‚Ä¢"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:89,columnNumber:21},this),e.jsxDEV("span",{children:new Date(t.assignedAt).toLocaleDateString("vi-VN")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:90,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:87,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:85,columnNumber:17},this)]},t.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:77,columnNumber:15},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:75,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:73,columnNumber:9},this),e.jsxDEV("div",{className:Ue.actionsSection,children:[e.jsxDEV("h3",{children:"Thao t√°c nhanh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:100,columnNumber:11},this),e.jsxDEV("div",{className:Ue.actionCards,children:[e.jsxDEV("button",{className:Ue.actionCard,onClick:()=>s("/system-admin/iam/users"),children:[e.jsxDEV(Ea,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:106,columnNumber:15},this),e.jsxDEV("h4",{children:"Qu·∫£n l√Ω ng∆∞·ªùi d√πng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:107,columnNumber:15},this),e.jsxDEV("p",{children:"Xem v√† qu·∫£n l√Ω t√†i kho·∫£n ng∆∞·ªùi d√πng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:108,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:102,columnNumber:13},this),e.jsxDEV("button",{className:Ue.actionCard,onClick:()=>s("/system-admin/iam/roles"),children:[e.jsxDEV(ya,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:115,columnNumber:15},this),e.jsxDEV("h4",{children:"Qu·∫£n l√Ω vai tr√≤"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:116,columnNumber:15},this),e.jsxDEV("p",{children:"T·∫°o v√† c·∫•u h√¨nh vai tr√≤"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:117,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:111,columnNumber:13},this),e.jsxDEV("button",{className:Ue.actionCard,onClick:()=>s("/system-admin/iam/permissions"),children:[e.jsxDEV(_i,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:124,columnNumber:15},this),e.jsxDEV("h4",{children:"Danh s√°ch quy·ªÅn h·∫°n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:125,columnNumber:15},this),e.jsxDEV("p",{children:"Xem t·∫•t c·∫£ quy·ªÅn h·∫°n h·ªá th·ªëng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:126,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:120,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:101,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:99,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:19,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/AssignmentsPage.tsx",lineNumber:18,columnNumber:5},this)}const Dp=Object.freeze(Object.defineProperty({__proto__:null,default:Hp},Symbol.toStringTag,{value:"Module"})),Pp="_buttonPrimary_14jba_151",Lp="_buttonSecondary_14jba_209",Oe={buttonPrimary:Pp,buttonSecondary:Lp};function jp(){const{id:s}=Ys(),a=ys(),{hasPermission:t}=os(),i=t("sa.iam.assignment.assign"),l=t("sa.iam.assignment.revoke"),n=Zn.find(m=>m.id===s),u=zn.filter(m=>m.userId===s).filter(m=>m.status==="active").map(m=>({...Vt.find(c=>c.id===m.roleId),assignmentId:m.id})).filter(Boolean),o=Vt.filter(m=>!u.some(c=>(c==null?void 0:c.id)===m.id)),[p,h]=E.useState("");return n?e.jsxDEV(es,{permission:"sa.iam.assignment.read",children:e.jsxDEV(bs,{title:`Ph√¢n quy·ªÅn: ${n.fullName}`,subtitle:`Qu·∫£n l√Ω vai tr√≤ ƒë∆∞·ª£c g√°n cho @${n.username}`,breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"IAM",path:"/system-admin/iam"},{label:"Ph√¢n quy·ªÅn",path:"/system-admin/iam/assignments"},{label:n.fullName}],actions:e.jsxDEV("button",{className:Oe.buttonSecondary,onClick:()=>a("/system-admin/iam/assignments"),children:[e.jsxDEV(sa,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:59,columnNumber:13},this),"Quay l·∫°i"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:55,columnNumber:11},this),children:[e.jsxDEV("div",{className:Oe.assignSection,children:[e.jsxDEV("h3",{children:"G√°n vai tr√≤ m·ªõi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:66,columnNumber:11},this),e.jsxDEV("div",{className:Oe.assignForm,children:[e.jsxDEV("select",{value:p,onChange:m=>h(m.target.value),className:Oe.roleSelect,disabled:!i||o.length===0,children:[e.jsxDEV("option",{value:"",children:"-- Ch·ªçn vai tr√≤ --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:74,columnNumber:15},this),o.map(m=>e.jsxDEV("option",{value:m.id,children:[m.name," (",m.code,")"]},m.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:76,columnNumber:17},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:68,columnNumber:13},this),e.jsxDEV("button",{className:Oe.buttonPrimary,disabled:!i||!p,children:[e.jsxDEV(ua,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:85,columnNumber:15},this),"G√°n vai tr√≤"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:81,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:67,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:65,columnNumber:9},this),e.jsxDEV("div",{className:Oe.rolesSection,children:[e.jsxDEV("h3",{children:["Vai tr√≤ ƒë√£ g√°n (",u.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:93,columnNumber:11},this),u.length===0?e.jsxDEV(aa,{title:"Ch∆∞a c√≥ vai tr√≤",message:"Ng∆∞·ªùi d√πng n√†y ch∆∞a ƒë∆∞·ª£c g√°n vai tr√≤ n√†o."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:95,columnNumber:13},this):e.jsxDEV("div",{className:Oe.rolesList,children:u.map(m=>e.jsxDEV("div",{className:Oe.roleCard,children:[e.jsxDEV("div",{className:Oe.roleInfo,children:[e.jsxDEV("div",{className:Oe.roleName,children:m==null?void 0:m.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:104,columnNumber:21},this),e.jsxDEV("div",{className:Oe.roleCode,children:m==null?void 0:m.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:105,columnNumber:21},this),e.jsxDEV("div",{className:Oe.roleDescription,children:m==null?void 0:m.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:106,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:103,columnNumber:19},this),e.jsxDEV("div",{className:Oe.roleActions,children:[e.jsxDEV("div",{className:Oe.roleType,children:(m==null?void 0:m.type)==="system"?e.jsxDEV("span",{className:Oe.typeSystem,children:"System"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:111,columnNumber:25},this):e.jsxDEV("span",{className:Oe.typeCustom,children:"Custom"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:113,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:109,columnNumber:21},this),e.jsxDEV("button",{className:Oe.revokeButton,disabled:!l,title:"Thu h·ªìi vai tr√≤",children:e.jsxDEV(Ht,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:121,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:116,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:108,columnNumber:19},this)]},m==null?void 0:m.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:102,columnNumber:17},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:100,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:92,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:44,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:43,columnNumber:5},this):e.jsxDEV(bs,{title:"Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi d√πng",children:e.jsxDEV("p",{children:"Ng∆∞·ªùi d√πng kh√¥ng t·ªìn t·∫°i."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:37,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/UserAssignmentsPage.tsx",lineNumber:36,columnNumber:7},this)}const Qp=Object.freeze(Object.defineProperty({__proto__:null,default:jp},Symbol.toStringTag,{value:"Module"}));function _p(){const{id:s}=Ys(),a=ys(),{hasPermission:t}=os(),i=t("sa.iam.assignment.assign"),l=t("sa.iam.assignment.revoke"),n=Vt.find(m=>m.id===s),u=Bn.filter(m=>m.roleId===s).filter(m=>m.status==="active").map(m=>({...li.find(c=>c.id===m.permissionId),assignmentId:m.id})).filter(Boolean),o=li.filter(m=>!u.some(c=>(c==null?void 0:c.id)===m.id)),[p,h]=E.useState("");return n?e.jsxDEV(es,{permission:"sa.iam.assignment.read",children:e.jsxDEV(bs,{title:`Ph√¢n quy·ªÅn: ${n.name}`,subtitle:`Qu·∫£n l√Ω quy·ªÅn h·∫°n ƒë∆∞·ª£c g√°n cho vai tr√≤ ${n.code}`,breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"IAM",path:"/system-admin/iam"},{label:"Vai tr√≤",path:"/system-admin/iam/roles"},{label:n.name}],actions:e.jsxDEV("button",{className:Oe.buttonSecondary,onClick:()=>a("/system-admin/iam/roles"),children:[e.jsxDEV(sa,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:59,columnNumber:13},this),"Quay l·∫°i"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:55,columnNumber:11},this),children:[e.jsxDEV("div",{className:Oe.assignSection,children:[e.jsxDEV("h3",{children:"G√°n quy·ªÅn m·ªõi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:66,columnNumber:11},this),e.jsxDEV("div",{className:Oe.assignForm,children:[e.jsxDEV("select",{value:p,onChange:m=>h(m.target.value),className:Oe.roleSelect,disabled:!i||o.length===0,children:[e.jsxDEV("option",{value:"",children:"-- Ch·ªçn quy·ªÅn h·∫°n --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:74,columnNumber:15},this),o.map(m=>e.jsxDEV("option",{value:m.id,children:[m.name," (",m.code,")"]},m.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:76,columnNumber:17},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:68,columnNumber:13},this),e.jsxDEV("button",{className:Oe.buttonPrimary,disabled:!i||!p,children:[e.jsxDEV(ua,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:85,columnNumber:15},this),"G√°n quy·ªÅn"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:81,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:67,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:65,columnNumber:9},this),e.jsxDEV("div",{className:Oe.rolesSection,children:[e.jsxDEV("h3",{children:["Quy·ªÅn h·∫°n ƒë√£ g√°n (",u.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:93,columnNumber:11},this),u.length===0?e.jsxDEV(aa,{title:"Ch∆∞a c√≥ quy·ªÅn",message:"Vai tr√≤ n√†y ch∆∞a ƒë∆∞·ª£c g√°n quy·ªÅn h·∫°n n√†o."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:95,columnNumber:13},this):e.jsxDEV("div",{className:Oe.rolesList,children:u.map(m=>e.jsxDEV("div",{className:Oe.roleCard,children:[e.jsxDEV("div",{className:Oe.roleInfo,children:[e.jsxDEV("div",{className:Oe.roleName,children:m==null?void 0:m.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:104,columnNumber:21},this),e.jsxDEV("div",{className:Oe.roleCode,children:m==null?void 0:m.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:105,columnNumber:21},this),e.jsxDEV("div",{className:Oe.roleDescription,children:m==null?void 0:m.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:106,columnNumber:21},this),e.jsxDEV("div",{style:{display:"flex",gap:"var(--spacing-sm)",marginTop:"var(--spacing-xs)"},children:[e.jsxDEV("span",{style:{fontSize:"var(--font-size-xs)",color:"var(--text-tertiary)"},children:["Resource: ",e.jsxDEV("strong",{children:m==null?void 0:m.resource},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:109,columnNumber:35},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:108,columnNumber:23},this),e.jsxDEV("span",{style:{fontSize:"var(--font-size-xs)",color:"var(--text-tertiary)"},children:["Action: ",e.jsxDEV("strong",{children:m==null?void 0:m.action},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:112,columnNumber:33},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:111,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:107,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:103,columnNumber:19},this),e.jsxDEV("div",{className:Oe.roleActions,children:[e.jsxDEV("div",{className:Oe.roleType,children:m!=null&&m.isSystem?e.jsxDEV("span",{className:Oe.typeSystem,children:"System"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:119,columnNumber:25},this):e.jsxDEV("span",{className:Oe.typeCustom,children:"Custom"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:121,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:117,columnNumber:21},this),e.jsxDEV("button",{className:Oe.revokeButton,disabled:!l,title:"Thu h·ªìi quy·ªÅn",children:e.jsxDEV(Ht,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:129,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:124,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:116,columnNumber:19},this)]},m==null?void 0:m.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:102,columnNumber:17},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:100,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:92,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:44,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:43,columnNumber:5},this):e.jsxDEV(bs,{title:"Kh√¥ng t√¨m th·∫•y vai tr√≤",children:e.jsxDEV("p",{children:"Vai tr√≤ kh√¥ng t·ªìn t·∫°i."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:37,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/RoleAssignmentsPage.tsx",lineNumber:36,columnNumber:7},this)}const Cp=Object.freeze(Object.defineProperty({__proto__:null,default:_p},Symbol.toStringTag,{value:"Module"})),Sp=[{label:"IAM",value:"IAM"},{label:"DMS",value:"DMS"},{label:"OPS",value:"OPS"},{label:"SYSTEM",value:"SYSTEM"}],Mp=[{label:"Ho·∫°t ƒë·ªông",value:1},{label:"Ng·ª´ng",value:0}],sl=s=>s.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9._-]/g,"");function Ip({open:s,loading:a,initialValues:t,onCancel:i,onSubmit:l}){const[n]=O.useForm();d.useEffect(()=>{if(s){if(t){n.setFieldsValue({key:t.key,name:t.name,group:t.group||"SYSTEM",description:t.description??null,icon:t.icon??null,status:t.status??1,sort_order:t.sort_order??0});return}n.resetFields(),n.setFieldsValue({group:"SYSTEM",status:1,sort_order:0})}},[n,t,s]);const r=async()=>{const o=await n.validateFields();await l({...o,key:sl(o.key),sort_order:o.sort_order??0,status:o.status??1})},u=!!t;return e.jsxDEV(us,{title:u?"C·∫≠p nh·∫≠t ph√¢n h·ªá":"Th√™m ph√¢n h·ªá",open:s,onCancel:i,onOk:r,okText:u?"L∆∞u":"T·∫°o",cancelText:"H·ªßy",confirmLoading:a,destroyOnHidden:!0,centered:!0,children:e.jsxDEV(O,{form:n,layout:"vertical",disabled:a,children:[e.jsxDEV(O.Item,{label:"M√£ ph√¢n h·ªá (key)",name:"key",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p m√£ ph√¢n h·ªá."},{min:2,message:"M√£ ph√¢n h·ªá qu√° ng·∫Øn."}],tooltip:"N√™n d√πng d·∫°ng slug: iam, user-management, reports...",children:e.jsxDEV(re,{placeholder:"vd: user-management",onBlur:o=>n.setFieldValue("key",sl(o.target.value)),autoFocus:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:89,columnNumber:9},this),e.jsxDEV(O.Item,{label:"T√™n ph√¢n h·ªá",name:"name",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p t√™n ph√¢n h·ªá."}],children:e.jsxDEV(re,{placeholder:"vd: Qu·∫£n tr·ªã Ng∆∞·ªùi d√πng & Ph√¢n quy·ªÅn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:110,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:105,columnNumber:9},this),e.jsxDEV(O.Item,{label:"Nh√≥m",name:"group",rules:[{required:!0,message:"Vui l√≤ng ch·ªçn nh√≥m."}],children:e.jsxDEV(_e,{options:Sp},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:118,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:113,columnNumber:9},this),e.jsxDEV(O.Item,{label:"M√¥ t·∫£",name:"description",children:e.jsxDEV(re.TextArea,{rows:3,placeholder:"M√¥ t·∫£ ng·∫Øn v·ªÅ ph√¢n h·ªá..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:122,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:121,columnNumber:9},this),e.jsxDEV(O.Item,{label:"Icon",name:"icon",children:e.jsxDEV(re,{placeholder:"vd: UserOutlined"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:126,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:125,columnNumber:9},this),e.jsxDEV(O.Item,{label:"Th·ª© t·ª± hi·ªÉn th·ªã",name:"sort_order",children:e.jsxDEV(cs,{min:0,step:1,style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:130,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:129,columnNumber:9},this),e.jsxDEV(O.Item,{label:"Tr·∫°ng th√°i",name:"status",children:e.jsxDEV(_e,{options:Mp},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:134,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:133,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:88,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModuleFormModal.tsx",lineNumber:77,columnNumber:5},this)}const Ap=s=>s===1?"Ho·∫°t ƒë·ªông":"Ng·ª´ng",wp=s=>s===1?"green":"orange";function kp({data:s,loading:a,total:t,page:i,pageSize:l,statusFilter:n,groupFilter:r,groupOptions:u,canUpdate:o,canDelete:p,onChange:h,onEdit:m,onToggleStatus:c,onDelete:N}){const g=d.useRef(null),[v,b]=d.useState(""),[V,D]=d.useState(""),f={searchText:v,searchedColumn:V,setSearchText:b,setSearchedColumn:D,inputRef:g},P=y=>({items:[{key:"toggle",label:y.status===1?"Ng·ª´ng ph√¢n h·ªá":"K√≠ch ho·∫°t ph√¢n h·ªá",onClick:()=>c(y),disabled:!o},{key:"delete",danger:!0,label:"X√≥a m·ªÅm",onClick:()=>N(y),disabled:!p}]}),x=[{title:"M√£ ph√¢n h·ªá",dataIndex:"key",key:"key",width:180,sorter:(y,Q)=>(y.key||"").localeCompare(Q.key||"","vi"),...Cs("key",f,{placeholder:"T√¨m theo m√£ ph√¢n h·ªá"})},{title:"T√™n ph√¢n h·ªá",dataIndex:"name",key:"name",width:240,sorter:(y,Q)=>(y.name||"").localeCompare(Q.name||"","vi"),...Cs("name",f,{placeholder:"T√¨m theo t√™n ph√¢n h·ªá"})},{title:"Nh√≥m",dataIndex:"group",key:"group",width:140,filters:u.map(y=>({text:y.label,value:y.value})),filteredValue:r!=="all"?[r]:null,onFilter:(y,Q)=>Q.group===y,sorter:(y,Q)=>(y.group||"").localeCompare(Q.group||"","vi"),render:y=>e.jsxDEV(Re,{children:y},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:133,columnNumber:34},this)},{title:"M√¥ t·∫£",dataIndex:"description",key:"description",ellipsis:!0,sorter:(y,Q)=>(y.description||"").localeCompare(Q.description||"","vi"),...Cs("description",f,{placeholder:"T√¨m theo m√¥ t·∫£"}),render:y=>y||"‚Äî"},{title:"S·ªë quy·ªÅn",dataIndex:"permission_count",key:"permission_count",width:110,align:"right",sorter:(y,Q)=>(y.permission_count??0)-(Q.permission_count??0),render:y=>y??0},{title:"Th·ª© t·ª±",dataIndex:"sort_order",key:"sort_order",width:90,align:"right",sorter:(y,Q)=>(y.sort_order??0)-(Q.sort_order??0)},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:120,filters:[{text:"Ho·∫°t ƒë·ªông",value:1},{text:"Ng·ª´ng",value:0}],filteredValue:n==="all"?null:[n==="active"?1:0],onFilter:(y,Q)=>Q.status===y,sorter:(y,Q)=>(y.status??0)-(Q.status??0),render:y=>e.jsxDEV(Re,{color:wp(y),children:Ap(y)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:182,columnNumber:9},this)},{title:"Thao t√°c",key:"actions",fixed:"right",width:170,render:(y,Q)=>e.jsxDEV(J,{size:4,children:[e.jsxDEV(ze,{title:"S·ª≠a",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(oa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:196,columnNumber:21},this),onClick:()=>m(Q),disabled:!o},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:193,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:192,columnNumber:11},this),e.jsxDEV(ws,{title:Q.status===1?"Ng·ª´ng ph√¢n h·ªá?":"K√≠ch ho·∫°t ph√¢n h·ªá?",okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",onConfirm:()=>c(Q),disabled:!o,children:e.jsxDEV(ze,{title:Q.status===1?"Ng·ª´ng":"K√≠ch ho·∫°t",children:e.jsxDEV(q,{type:"text",size:"small",danger:Q.status===1,icon:Q.status===1?e.jsxDEV(ha,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:213,columnNumber:45},this):e.jsxDEV(da,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:213,columnNumber:64},this),disabled:!o},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:209,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:208,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:201,columnNumber:11},this),e.jsxDEV(ws,{title:"X√≥a m·ªÅm ph√¢n h·ªá n√†y?",okText:"X√≥a",cancelText:"H·ªßy",onConfirm:()=>N(Q),disabled:!p,children:e.jsxDEV(ze,{title:"X√≥a m·ªÅm",children:e.jsxDEV(q,{type:"text",size:"small",danger:!0,icon:e.jsxDEV(ja,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:230,columnNumber:23},this),disabled:!p},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:226,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:225,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:218,columnNumber:11},this),e.jsxDEV(Ya,{menu:P(Q),trigger:["click"],children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(et,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:236,columnNumber:52},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:236,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:235,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:191,columnNumber:9},this)}];return e.jsxDEV(at,{rowKey:y=>y.id,bordered:!0,size:"middle",loading:a,columns:x,dataSource:s,scroll:{x:1200},pagination:{current:i,pageSize:l,total:t,showSizeChanger:!0,pageSizeOptions:[10,20,50,100],showTotal:y=>`T·ªïng: ${y} ph√¢n h·ªá`},onChange:h},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/components/modules/ModulesTable.tsx",lineNumber:244,columnNumber:5},this)}const Rp=s=>s===0||s==="INACTIVE"?0:1,Zt=s=>({id:s._id??s.id,key:s.key??s.code??"",code:s.code??s.key??"",name:s.name??"",group:s.group??s.permission_type??"SYSTEM",description:s.description??null,icon:s.icon??null,status:Rp(s.status),sort_order:Number(s.sort_order??s.order_index??0),permission_count:s.permission_count==null?null:Number(s.permission_count),menu_count:s.menu_count==null?null:Number(s.menu_count),created_at:s.created_at??null,updated_at:s.updated_at??null,deleted_at:s.deleted_at??null}),Op=s=>!s||s==="all"?null:s==="active"?1:0,al=(s,a)=>{if(!a)return s;const t=a.match(/column \"([^\"]+)\"/i);if(!t)return s;const i=t[1];if(i in s){const l={...s};return delete l[i],l}return s},Ua={async listModules(s){const a=s.page??1,t=s.pageSize??10,i=(a-1)*t,l=i+t-1,n=s.sortBy??"sort_order",r=s.sortDir??"asc",u=h=>{var g;let m=M.from(h).select("*",{count:"exact"}).range(i,l);const c=(g=s.q)==null?void 0:g.trim();c&&(m=m.or(`key.ilike.%${c}%,code.ilike.%${c}%,name.ilike.%${c}%,description.ilike.%${c}%`)),s.group&&s.group!=="all"&&(m=m.eq("group",s.group));const N=Op(s.status??"all");return N!==null&&(m=m.eq("status",N)),m=m.order(n,{ascending:r==="asc",nullsFirst:!1}).order("name",{ascending:!0}),m};let o=await u("v_modules_stats");const p=o.error&&o.error.message.includes("v_modules_stats");if(p&&(o=await u("modules")),o.error&&o.error.message.toLowerCase().includes("sort_order")&&(o=await M.from(p?"modules":"v_modules_stats").select("*",{count:"exact"}).range(i,l).order("order_index",{ascending:!0}).order("name",{ascending:!0})),o.error)throw new Error(`modules select failed: ${o.error.message}`);return{data:(o.data||[]).map(Zt),total:o.count??0}},async createModule(s){const a={key:s.key,code:s.key,name:s.name,group:s.group,description:s.description??null,icon:s.icon??null,status:s.status??1,sort_order:s.sort_order??0,meta:s.meta??{}};let t=await M.from("modules").insert([a]).select("*").single();if(t.error){const i=al(a,t.error.message);i!==a&&(t=await M.from("modules").insert([i]).select("*").single())}if(t.error)throw new Error(`module insert failed: ${t.error.message}`);return Zt(t.data)},async updateModule(s,a){const t={...a.key?{key:a.key,code:a.key}:{},...a.name?{name:a.name}:{},...a.group?{group:a.group}:{},...a.description!==void 0?{description:a.description}:{},...a.icon!==void 0?{icon:a.icon}:{},...a.status!==void 0?{status:a.status}:{},...a.sort_order!==void 0?{sort_order:a.sort_order}:{},...a.meta!==void 0?{meta:a.meta??{}}:{},updated_at:new Date().toISOString()};let i=await M.from("modules").update(t).eq("_id",s).select("*").single();if(i.error&&i.error.message.includes("_id")&&(i=await M.from("modules").update(t).eq("id",s).select("*").single()),i.error){const l=al(t,i.error.message);l!==t&&(i=await M.from("modules").update(l).eq("_id",s).select("*").single())}if(i.error)throw new Error(`module update failed: ${i.error.message}`);return Zt(i.data)},async setModuleStatus(s,a){let t=await M.from("modules").update({status:a,updated_at:new Date().toISOString()}).eq("_id",s);if(t.error&&t.error.message.includes("_id")&&(t=await M.from("modules").update({status:a,updated_at:new Date().toISOString()}).eq("id",s)),t.error)throw new Error(`module status update failed: ${t.error.message}`)},async softDeleteModule(s){let a=await M.from("modules").update({deleted_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("_id",s);if(a.error&&a.error.message.includes("_id")&&(a=await M.from("modules").update({deleted_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",s)),a.error)throw new Error(`module delete failed: ${a.error.message}`)}},tl=[{label:"T·∫•t c·∫£ nh√≥m",value:"all"},{label:"IAM",value:"IAM"},{label:"DMS",value:"DMS"},{label:"OPS",value:"OPS"},{label:"SYSTEM",value:"SYSTEM"}];function Up(){const{hasPermission:s}=os(),a=s("sa.iam.module.create"),t=s("sa.iam.module.update"),i=s("sa.iam.module.delete"),[l,n]=d.useState(""),[r,u]=d.useState(""),[o,p]=d.useState("all"),[h,m]=d.useState("all"),[c,N]=d.useState(1),[g,v]=d.useState(10),[b,V]=d.useState("sort_order"),[D,f]=d.useState("asc"),[P,x]=d.useState(!1),[y,Q]=d.useState([]),[U,j]=d.useState(0),[A,z]=d.useState(!1),[W,X]=d.useState(null),[fe,me]=d.useState(!1);d.useEffect(()=>{const B=setTimeout(()=>u(l.trim()),300);return()=>clearTimeout(B)},[l]),d.useEffect(()=>{N(1)},[r,o,h]);const ue=d.useCallback(async()=>{x(!0);try{const B=await Ua.listModules({q:r||void 0,group:o==="all"?void 0:o,status:h,page:c,pageSize:g,sortBy:b,sortDir:D});Q(B.data),j(B.total)}catch(B){const ge=B instanceof Error?B.message:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch ph√¢n h·ªá.";us.error({title:"L·ªói t·∫£i d·ªØ li·ªáu",content:ge})}finally{x(!1)}},[r,o,c,g,b,D,h]);d.useEffect(()=>{ue()},[ue]);const xe=(B,ge,be)=>{N(B.current??1),v(B.pageSize??10);const ie=Array.isArray(be)?be[0]:be;ie!=null&&ie.field&&ie.order&&(V(String(ie.field)),f(ie.order==="ascend"?"asc":"desc"))},Ee=()=>{a&&(X(null),z(!0))},je=B=>{t&&(X(B),z(!0))},Y=()=>{fe||z(!1)},de=async B=>{try{me(!0),W?(await Ua.updateModule(W.id,B),C.success("ƒê√£ c·∫≠p nh·∫≠t ph√¢n h·ªá.")):(await Ua.createModule(B),C.success("ƒê√£ t·∫°o ph√¢n h·ªá.")),z(!1),await ue()}catch(ge){const be=ge instanceof Error?ge.message:"Kh√¥ng th·ªÉ l∆∞u ph√¢n h·ªá.";C.error(be)}finally{me(!1)}},Te=async B=>{if(t)try{const ge=B.status===1?0:1;await Ua.setModuleStatus(B.id,ge),C.success("ƒê√£ c·∫≠p nh·∫≠t tr·∫°ng th√°i ph√¢n h·ªá."),await ue()}catch(ge){const be=ge instanceof Error?ge.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i.";C.error(be)}},S=async B=>{if(i)try{await Ua.softDeleteModule(B.id),C.success("ƒê√£ x√≥a m·ªÅm ph√¢n h·ªá."),await ue()}catch(ge){const be=ge instanceof Error?ge.message:"Kh√¥ng th·ªÉ x√≥a ph√¢n h·ªá.";C.error(be)}};return e.jsxDEV(es,{permission:"sa.iam.module.read",children:e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"IAM",href:"/system-admin/iam"},{label:"Ph√¢n h·ªá"}],title:"Qu·∫£n l√Ω Ph√¢n h·ªá",subtitle:"Qu·∫£n l√Ω registry ph√¢n h·ªá v√† routing theo module",actions:e.jsxDEV(J,{children:[e.jsxDEV(q,{icon:e.jsxDEV(Qa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:189,columnNumber:29},this),onClick:()=>ue(),children:"L√†m m·ªõi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:189,columnNumber:15},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(qs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:192,columnNumber:44},this),onClick:Ee,disabled:!a,children:"Th√™m ph√¢n h·ªá"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:192,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:188,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:178,columnNumber:9},this),e.jsxDEV(ps,{children:[e.jsxDEV("div",{className:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(re,{allowClear:!0,placeholder:"T√¨m theo m√£, t√™n ph√¢n h·ªá...",value:l,onChange:B=>n(B.target.value),style:{width:280}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:202,columnNumber:15},this),e.jsxDEV(_e,{value:h,onChange:B=>m(B),style:{width:180},options:[{label:"T·∫•t c·∫£ tr·∫°ng th√°i",value:"all"},{label:"Ho·∫°t ƒë·ªông",value:"active"},{label:"Ng·ª´ng",value:"inactive"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:209,columnNumber:15},this),e.jsxDEV(_e,{value:o,onChange:B=>p(B),style:{width:180},options:tl},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:219,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:201,columnNumber:13},this),e.jsxDEV("div",{className:"text-sm text-gray-500",children:["T·ªïng: ",U," ph√¢n h·ªá"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:226,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:200,columnNumber:11},this),e.jsxDEV(kp,{data:y,loading:P,total:U,page:c,pageSize:g,statusFilter:h,groupFilter:o,groupOptions:tl.filter(B=>B.value!=="all"),canUpdate:t,canDelete:i,onChange:xe,onEdit:je,onToggleStatus:Te,onDelete:S},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:229,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:199,columnNumber:9},this),e.jsxDEV(Ip,{open:A,loading:fe,initialValues:W,onCancel:Y,onSubmit:de},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:247,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:177,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/ModulesPage.tsx",lineNumber:176,columnNumber:5},this)}const $p=Object.freeze(Object.defineProperty({__proto__:null,default:Up},Symbol.toStringTag,{value:"Module"})),Kp=[{path:"/overview",label:"T·ªïng quan",moduleKey:"overview"},{path:"/map",label:"B·∫£n ƒë·ªì ƒëi·ªÅu h√†nh",moduleKey:"map"},{path:"/stores",label:"C∆° s·ªü qu·∫£n l√Ω",moduleKey:"stores"},{path:"/lead-risk",label:"Ngu·ªìn tin",moduleKey:"leads"},{path:"/lead-risk/inbox",label:"Ngu·ªìn tin h·∫±ng ng√†y",moduleKey:"leads"},{path:"/lead-risk/dashboard",label:"T·ªïng quan r·ªßi ro",moduleKey:"leads"},{path:"/lead-risk/hotspots",label:"Ph√¢n t√≠ch ƒëi·ªÉm n√≥ng",moduleKey:"leads"},{path:"/lead-risk/quality-metrics",label:"Ph√¢n t√≠ch ch·∫•t l∆∞·ª£ng",moduleKey:"leads"},{path:"/lead-risk/workload-dashboard",label:"Qu·∫£n l√Ω c√¥ng vi·ªác",moduleKey:"leads"},{path:"/lead-risk/sla-dashboard",label:"Gi√°m s√°t SLA",moduleKey:"leads"},{path:"/plans",label:"K·∫ø ho·∫°ch t√°c nghi·ªáp",moduleKey:"plans"},{path:"/plans/list",label:"Danh s√°ch k·∫ø ho·∫°ch",moduleKey:"plans"},{path:"/plans/inspection-rounds",label:"ƒê·ª£t ki·ªÉm tra",moduleKey:"plans"},{path:"/plans/inspection-session",label:"Phi√™n l√†m vi·ªác",moduleKey:"plans"},{path:"/tasks",label:"Nhi·ªám v·ª• hi·ªán tr∆∞·ªùng",moduleKey:"tasks"},{path:"/evidence",label:"Kho ch·ª©ng c·ª©",moduleKey:"evidence"},{path:"/reports",label:"B√°o c√°o",moduleKey:"reports"},{path:"/dashboard",label:"Dashboard",moduleKey:"reports"},{path:"/kpi",label:"KPI QLTT",moduleKey:"kpi-qltt"},{path:"/todolist",label:"Nh·∫≠t k√Ω c√¥ng vi·ªác",moduleKey:"i-todolist"},{path:"/system-admin",label:"Dashboard Qu·∫£n tr·ªã",moduleKey:"system-admin.dashboard"},{path:"/system-admin/master-data/org-units",label:"ƒê∆°n v·ªã t·ªï ch·ª©c",moduleKey:"system-admin.master-data"},{path:"/system-admin/master-data/departments",label:"Ph√≤ng ban",moduleKey:"system-admin.master-data"},{path:"/system-admin/master-data/admin-areas",label:"Danh m·ª•c h√†nh ch√≠nh",moduleKey:"system-admin.master-data"},{path:"/system-admin/master-data/common-catalogs",label:"Danh m·ª•c d√πng chung",moduleKey:"system-admin.master-data"},{path:"/system-admin/master-data/dms-catalogs",label:"Danh m·ª•c nghi·ªáp v·ª• QLTT",moduleKey:"system-admin.master-data"},{path:"/system-admin/master-data/system-catalogs",label:"Danh m·ª•c k·ªπ thu·∫≠t",moduleKey:"system-admin.master-data"},{path:"/system-admin/iam/users",label:"Ng∆∞·ªùi d√πng",moduleKey:"system-admin.iam"},{path:"/system-admin/iam/roles",label:"Vai tr√≤",moduleKey:"system-admin.iam"},{path:"/system-admin/iam/permissions",label:"Danh m·ª•c quy·ªÅn",moduleKey:"system-admin.iam"},{path:"/system-admin/iam/role-permissions",label:"Ph√¢n quy·ªÅn",moduleKey:"system-admin.iam"},{path:"/system-admin/iam/modules",label:"Ph√¢n h·ªá",moduleKey:"system-admin.iam"},{path:"/system-admin/iam/menus",label:"Menu",moduleKey:"system-admin.iam"},{path:"/system-admin/system-config/parameters",label:"Th√¥ng s·ªë h·ªá th·ªëng",moduleKey:"system-admin.system-config"},{path:"/system-admin/system-config/organization-info",label:"Th√¥ng tin t·ªï ch·ª©c",moduleKey:"system-admin.system-config"},{path:"/system-admin/system-config/operations",label:"C√†i ƒë·∫∑t v·∫≠n h√†nh",moduleKey:"system-admin.system-config"},{path:"/system-admin/system-config/notifications",label:"M·∫´u th√¥ng b√°o",moduleKey:"system-admin.system-config"},{path:"/system-admin/system-config/security",label:"C√†i ƒë·∫∑t b·∫£o m·∫≠t",moduleKey:"system-admin.system-config"},{path:"/system-admin/system-config/database/logs",label:"Database Logs",moduleKey:"system-admin.system-config"},{path:"/system-admin/system-config/database/backups",label:"Database Backups",moduleKey:"system-admin.system-config"},{path:"/system/modules",label:"Qu·∫£n tr·ªã Module (c≈©)",moduleKey:"system-admin"},{path:"/system/menus",label:"Qu·∫£n tr·ªã Menu (c≈©)",moduleKey:"system-admin"},{path:"/system/users",label:"Ng∆∞·ªùi d√πng (c≈©)",moduleKey:"system-admin"},{path:"/system/roles",label:"Vai tr√≤ (c≈©)",moduleKey:"system-admin"},{path:"/system/settings",label:"C·∫•u h√¨nh h·ªá th·ªëng (c≈©)",moduleKey:"system-admin"}],Zp=(s={})=>{var t;const a=(t=s.search)==null?void 0:t.trim().toLowerCase();return Kp.filter(i=>!(s.moduleKey&&i.moduleKey&&i.moduleKey!==s.moduleKey||a&&!`${i.label} ${i.path}`.toLowerCase().includes(a)))},zp=new Set(["ACTIVE","active","1","true"]),Ta=s=>s==null?!0:typeof s=="boolean"?s:zp.has(String(s)),Di=(s,a)=>{const t=(s.sort_order??0)-(a.sort_order??0);return t!==0?t:(s.label??"").localeCompare(a.label??"")},ht=s=>{const a=new Map,t=[];s.forEach(l=>{a.set(l._id,{...l,children:[]})}),a.forEach(l=>{l.parent_id&&a.has(l.parent_id)?a.get(l.parent_id).children.push(l):t.push(l)});const i=l=>{l.sort(Di),l.forEach(n=>i(n.children))};return i(t),t},Bp=(s,a)=>!s.permission_codes||s.permission_codes.length===0?!0:s.permission_codes.some(t=>a.has(t)),qp=(s,a)=>{const t=i=>{const l=Ta(i.status)&&i.is_visible&&Bp(i,a),n=i.children.map(t).filter(r=>!!r);return l||n.length>0?{...i,children:n}:null};return s.map(t).filter(i=>!!i)},Fp=s=>new Set((s??[]).filter(Boolean)),Ts=s=>Array.isArray(s)?s:[],il=s=>{if(!s)return null;const a=s.trim();return a?a.startsWith("/")?a:`/${a}`:null},Tt=s=>{const a=s.is_active!==void 0?!!s.is_active:s.status!==void 0?s.status:"ACTIVE";return{_id:s._id??s.id,code:s.code??"",label:s.label??s.name??"",parent_id:s.parent_id??null,module_id:s.module_id??null,route_path:s.route_path??s.path??null,icon:s.icon??null,sort_order:Number(s.sort_order??s.order_index??s.order??0),status:s.status??a,is_visible:s.is_visible??s.is_active??!0,meta:s.meta??null,created_at:s.created_at??null,updated_at:s.updated_at??null,deleted_at:s.deleted_at??null,module_code:s.module_code??null,module_name:s.module_name??null,module_group:s.module_group??null,permission_ids:Ts(s.permission_ids),permission_codes:Ts(s.permission_codes)}},Gp=s=>({_id:s._id??s.id??"",key:s.key??s.code??"",code:s.code??s.key??"",name:s.name??s.code??s.key??"",group:s.group??null,sort_order:s.sort_order??s.order_index??0,status:s.status??null}),qn=s=>({_id:s._id??s.id??"",code:s.code??"",name:s.name??s.code??"",description:s.description??null,module_id:s.module_id??null,module:s.module??s.permission_type??null,permission_type:s.permission_type??null,resource:s.resource??null,action:s.action??null,status:s.status??null});let ot=null;const Jp=s=>s.includes("Could not find the table")||s.includes("does not exist")||s.includes("schema cache"),Wp=async()=>{const s=async(t,i)=>{let l=M.from("v_menus_full").select("*");return t&&(l=l.order(t,{ascending:!0})),i&&(l=l.order(i,{ascending:!0})),l};let a=await s("sort_order","label");if(a.error){if(Jp(a.error.message))return null;if((a.error.message.includes("sort_order")||a.error.message.includes("label"))&&(a=await s("order_index","name")),a.error&&(a.error.message.includes("order_index")||a.error.message.includes("name"))&&(a=await s(null,null)),a.error)throw new Error(`menu select failed: ${a.error.message}`)}return Ts(a.data).map(Tt)},Xp=async()=>{const s=async(N,g,v)=>{let b=M.from("menus").select("*");return g&&(b=b.order(g,{ascending:!0})),v&&(b=b.order(v,{ascending:!0})),N&&(b=b.is("deleted_at",null)),b},a=[[!0,"sort_order","label"],[!1,"sort_order","label"],[!0,"order_index","name"],[!1,"order_index","name"],[!0,null,null],[!1,null,null]];let t=[],i=null;for(const[N,g,v]of a){const{data:b,error:V}=await s(N,g,v);if(!V){t=Ts(b),i=null;break}if(i=V.message,!V.message.includes("column")&&!V.message.includes("does not exist"))break}if(i)throw new Error(`menus select failed: ${i}`);if(t.length===0)return[];const l=t.map(N=>N._id??N.id).filter(Boolean),{data:n,error:r}=await M.from("menu_permissions").select("menu_id, permission_id").in("menu_id",l);if(r)throw new Error(`menu permissions select failed: ${r.message}`);const u=Ts(n).map(N=>N.permission_id).filter(Boolean);let o=new Map;if(u.length>0){const{data:N,error:g}=await M.from("permissions").select("*").in("_id",u);if(g)throw new Error(`permissions select failed: ${g.message}`);o=new Map(Ts(N).map(v=>{const b=qn(v);return[b._id,b]}))}const p=await Rs.listModules(),h=new Map(p.map(N=>[N._id,N])),m=new Map,c=new Map;return Ts(n).forEach(N=>{const g=N.menu_id,v=N.permission_id;if(!g||!v)return;const b=m.get(g)??[];b.includes(v)||b.push(v),m.set(g,b);const V=o.get(v);if(V!=null&&V.code){const D=c.get(g)??[];D.includes(V.code)||D.push(V.code),c.set(g,D)}}),t.map(N=>{const g=N._id??N.id,v=h.get(N.module_id??"");return Tt({...N,module_code:(v==null?void 0:v.code)??null,module_name:(v==null?void 0:v.name)??null,module_group:(v==null?void 0:v.group)??null,permission_ids:m.get(g)??[],permission_codes:c.get(g)??[]})})},Yp=(s,a)=>{var r,u,o;const t=(r=a.search)==null?void 0:r.trim().toLowerCase(),i=a.status??"all",l=(u=a.moduleGroup)==null?void 0:u.trim(),n=(o=a.moduleId)==null?void 0:o.trim();return s.filter(p=>{if(t&&!`${p.code} ${p.label} ${p.route_path??""}`.toLowerCase().includes(t))return!1;if(i!=="all"){const h=String(p.status)==="ACTIVE"||String(p.status)==="1";if(i==="active"&&!h||i==="inactive"&&h)return!1}return!(l&&p.module_group!==l||n&&p.module_id!==n)})},Rs={async listMenus(s={}){const t=await Wp()??await Xp();return Yp(t,s)},async getMenuTree(s={}){const a=await Rs.listMenus(s);return ht(a)},async createMenu(s){var r,u,o,p;const a=il(s.route_path??null),t={code:(r=s.code)==null?void 0:r.trim(),name:(u=s.label)==null?void 0:u.trim(),path:a,icon:s.icon??null,parent_id:s.parent_id??null,module_id:s.module_id??null,order_index:s.sort_order??0,is_active:s.is_visible===!1?!1:!(s.status==="INACTIVE"||s.status===0)},i={code:(o=s.code)==null?void 0:o.trim(),label:(p=s.label)==null?void 0:p.trim(),parent_id:s.parent_id??null,module_id:s.module_id??null,route_path:a,icon:s.icon??null,sort_order:s.sort_order??0,status:s.status??"ACTIVE",is_visible:s.is_visible??!0,meta:s.meta??{}},l=async h=>M.from("menus").insert([h]).select("*").single();let n=await l(t);if(n.error&&n.error.message.includes("column")&&(n=await l(i)),n.error)throw new Error(`menu insert failed: ${n.error.message}`);return Tt(n.data)},async updateMenu(s,a){var u,o,p,h;const t=a.route_path!==void 0?il(a.route_path):void 0,i={updated_at:new Date().toISOString()};a.code!==void 0&&(i.code=(u=a.code)==null?void 0:u.trim()),a.label!==void 0&&(i.name=(o=a.label)==null?void 0:o.trim()),a.parent_id!==void 0&&(i.parent_id=a.parent_id??null),a.module_id!==void 0&&(i.module_id=a.module_id??null),t!==void 0&&(i.path=t),a.icon!==void 0&&(i.icon=a.icon??null),a.sort_order!==void 0&&(i.order_index=a.sort_order??0),(a.status!==void 0||a.is_visible!==void 0)&&(i.is_active=a.is_visible===!1?!1:!(a.status==="INACTIVE"||a.status===0));const l={updated_at:new Date().toISOString()};a.code!==void 0&&(l.code=(p=a.code)==null?void 0:p.trim()),a.label!==void 0&&(l.label=(h=a.label)==null?void 0:h.trim()),a.parent_id!==void 0&&(l.parent_id=a.parent_id??null),a.module_id!==void 0&&(l.module_id=a.module_id??null),t!==void 0&&(l.route_path=t),a.icon!==void 0&&(l.icon=a.icon??null),a.sort_order!==void 0&&(l.sort_order=a.sort_order??0),a.status!==void 0&&(l.status=a.status),a.is_visible!==void 0&&(l.is_visible=a.is_visible??!0),a.meta!==void 0&&(l.meta=a.meta??{});const n=async m=>M.from("menus").update(m).eq("_id",s).select("*").single();let r=await n(i);if(r.error&&r.error.message.includes("column")&&(r=await n(l)),r.error)throw new Error(`menu update failed: ${r.error.message}`);return Tt(r.data)},async softDeleteMenu(s){const a=async i=>M.from("menus").update(i).eq("_id",s);let t=await a({deleted_at:new Date().toISOString(),status:"INACTIVE"});if(t.error&&t.error.message.includes("deleted_at")&&(t=await a({is_active:!1})),t.error)throw new Error(`menu delete failed: ${t.error.message}`)},async moveMenu(s){const a=async(c,N)=>{let g=M.from("menus").select(N);return c&&(g=g.is("deleted_at",null)),g};let t=await a(!0,"_id, parent_id, sort_order, label");if(t.error&&t.error.message.includes("column")&&(t=await a(!1,"_id, parent_id, order_index, name")),t.error)throw new Error(`menus select failed: ${t.error.message}`);const i=Ts(t.data).map(c=>({...c,sort_order:c.sort_order??c.order_index??0,label:c.label??c.name??""})),l=i.find(c=>(c._id??c.id)===s.dragId);if(!l)return;const n=l.parent_id??null,r=s.dropParentId??null,u=(c,N,g=0)=>{const v=i.filter(b=>(b.parent_id??null)===c).filter(b=>N||(b._id??b.id)!==s.dragId).sort(Di);if(N){const b=v.find(f=>(f._id??f.id)===s.dragId)??l,V=v.filter(f=>(f._id??f.id)!==s.dragId),D=Math.max(0,Math.min(g,V.length));return V.splice(D,0,{...b,parent_id:c}),V.map((f,P)=>({_id:f._id??f.id,parent_id:c,sort_order:(P+1)*10}))}return v.map((b,V)=>({_id:b._id??b.id,parent_id:c,sort_order:(V+1)*10}))},o=[];n!==r&&o.push(...u(n,!1)),o.push(...u(r,!0,s.targetIndex));const p=new Map;o.forEach(c=>p.set(c._id,c));const h=Array.from(p.values());if(h.length===0)return;let m=await M.from("menus").upsert(h,{onConflict:"_id"});if(m.error&&m.error.message.includes("sort_order")){const c=h.map(N=>({_id:N._id,parent_id:N.parent_id,order_index:N.sort_order}));m=await M.from("menus").upsert(c,{onConflict:"_id"})}if(m.error)throw new Error(`menu move failed: ${m.error.message}`)},async setMenuPermissions(s,a){const{data:t,error:i}=await M.from("menu_permissions").select("permission_id").eq("menu_id",s);if(i)throw new Error(`menu permissions select failed: ${i.message}`);const l=new Set(Ts(t).map(o=>o.permission_id)),n=new Set(a.filter(Boolean)),r=Array.from(n).filter(o=>!l.has(o)),u=Array.from(l).filter(o=>!n.has(o));if(r.length>0){const o=r.map(h=>({menu_id:s,permission_id:h})),{error:p}=await M.from("menu_permissions").upsert(o,{onConflict:"menu_id,permission_id"});if(p)throw new Error(`menu permissions insert failed: ${p.message}`)}if(u.length>0){const{error:o}=await M.from("menu_permissions").delete().eq("menu_id",s).in("permission_id",u);if(o)throw new Error(`menu permissions delete failed: ${o.message}`)}return{added:r.length,removed:u.length}},async listModules(s=!1){if(ot&&!s)return ot;const a=async(n,r)=>{let u=M.from("modules").select("*");return r&&(u=u.order("sort_order",{ascending:!0}).order("order_index",{ascending:!0}).order("name",{ascending:!0})),n&&(u=u.is("deleted_at",null)),u};let t=[];const{data:i,error:l}=await a(!0,!0);if(l){const n=l.message.includes("deleted_at"),r=l.message.includes("sort_order")||l.message.includes("order_index"),u=await a(!n,!r);if(u.error)throw new Error(`modules select failed: ${u.error.message}`);t=Ts(u.data)}else t=Ts(i);return ot=t.map(Gp),ot},async listPermissions(s={}){var V,D,f,P;const a=s.pageSize??20,i=((s.page??1)-1)*a,l=i+a-1,n=(V=s.search)==null?void 0:V.trim(),r=s.moduleId??null,u=(D=s.action)==null?void 0:D.trim(),o=(f=s.permissionType)==null?void 0:f.trim(),p=(P=s.resource)==null?void 0:P.trim(),h=s.status??"active",m=s.sortBy??"code",c=s.sortDir??"asc";let N=M.from("permissions").select("*",{count:"exact"});if(r&&(N=N.eq("module_id",r)),o&&(N=N.ilike("permission_type",o)),u){const x=u.trim();N=N.or(`action.ilike.%${x}%,code.ilike.%${x}%`)}if(p&&(N=N.ilike("resource",p)),h!=="all"){const x=h==="active"?1:0;N=N.eq("status",x)}if(n){const x=n.replace(/,/g,"\\,");N=N.or(`code.ilike.%${x}%,name.ilike.%${x}%,description.ilike.%${x}%`)}N=N.order(m,{ascending:c==="asc"}).order("code",{ascending:!0}).range(i,l);const{data:g,error:v,count:b}=await N;if(v)throw new Error(`permissions select failed: ${v.message}`);return{data:Ts(g).map(qn),total:b??0}},async listRoles(){const s=async(l,n)=>{let r=M.from("roles").select("*");return n&&(r=r.order("sort_order",{ascending:!0}).order("code",{ascending:!0})),l&&(r=r.is("deleted_at",null)),r},{data:a,error:t}=await s(!0,!0);let i=[];if(t){const l=t.message.includes("deleted_at"),n=t.message.includes("sort_order"),r=await s(!l,!n);if(r.error)throw new Error(`roles select failed: ${r.error.message}`);i=Ts(r.data)}else i=Ts(a);return i.map(l=>({_id:l._id??l.id??"",code:l.code??"",name:l.name??l.code??"",status:l.status??null,is_system:l.is_system??null}))},async listRolePermissionCodes(s){const{data:a,error:t}=await M.from("role_permissions").select("permission_id").eq("role_id",s);if(t)throw new Error(`role permissions select failed: ${t.message}`);const i=Ts(a).map(r=>r.permission_id).filter(Boolean);if(i.length===0)return[];const{data:l,error:n}=await M.from("permissions").select("_id, code").in("_id",i);if(n)throw new Error(`permissions select failed: ${n.message}`);return Ts(l).map(r=>r.code).filter(Boolean)}},zt=10,eg=s=>{if(!s)return null;const a=s.split("?")[0].split("#")[0].split("/").filter(Boolean);if(a.length===0)return null;let t=0;(a[t]==="system-admin"||a[t]==="system")&&(t+=1);const i=a[t]??a[0];return["iam","master-data","system-config"].includes(i)&&a[t+1]?a[t+1]:i},sg=(s,a)=>{var r;if(!a)return 0;const t=((r=s.resource)==null?void 0:r.toLowerCase())??"",i=s.code.toLowerCase(),l=s.name.toLowerCase(),n=a.toLowerCase();return t===n?3:t.includes(n)?2:i.includes(n)||l.includes(n)?1:0},ag=s=>Number(s)===1||String(s).toLowerCase()==="active"?e.jsxDEV(Re,{color:"green",children:"Ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:70,columnNumber:5},void 0):e.jsxDEV(Re,{color:"red",children:"Ng·ª´ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:72,columnNumber:5},void 0);function tg({menu:s,modules:a,selectedPermissionId:t,onSelectionChange:i,allowCrossModule:l,onAllowCrossModuleChange:n}){const[r,u]=d.useState(!1),[o,p]=d.useState([]),[h,m]=d.useState(0),[c,N]=d.useState(""),[g,v]=d.useState((s==null?void 0:s.module_id)??null),[b,V]=d.useState("read"),[D,f]=d.useState("PAGE"),[P,x]=d.useState(null),[y,Q]=d.useState("active"),[U,j]=d.useState(!0),[A,z]=d.useState(1),[W,X]=d.useState(zt),[fe,me]=d.useState(null),ue=!(s!=null&&s.route_path),xe=d.useMemo(()=>eg(s==null?void 0:s.route_path),[s==null?void 0:s.route_path]);d.useEffect(()=>{v((s==null?void 0:s.module_id)??null),x(null),z(1),X(zt),me(null)},[s==null?void 0:s._id]),d.useEffect(()=>{if(!t){me(null);return}const S=o.find(B=>B._id===t)??null;me(S)},[o,t]),d.useEffect(()=>{const S=setTimeout(()=>{(async()=>{if(ue){p([]),m(0);return}u(!0);try{const B=await Rs.listPermissions({search:c,moduleId:g,action:b,permissionType:D,resource:P,status:y,page:A,pageSize:W,sortBy:"code",sortDir:"asc"});let ge=B.data;U&&(ge=ge.map(be=>({...be,__score:sg(be,xe)})).filter(be=>be.__score>=2).sort((be,ie)=>ie.__score-be.__score||be.code.localeCompare(ie.code))),p(ge),m(B.total)}catch{p([]),m(0)}finally{u(!1)}})()},300);return()=>clearTimeout(S)},[c,g,b,D,P,y,A,W,U,ue,xe]);const Ee=d.useMemo(()=>Array.from(new Set(o.map(S=>S.resource).filter(Boolean))),[o]),je=(fe==null?void 0:fe.code)??t??"Ch∆∞a ch·ªçn",Y=e.jsxDEV(Re,{color:fe?"blue":void 0,children:je},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:184,columnNumber:5},this),de=(s==null?void 0:s.module_id)&&(fe==null?void 0:fe.module_id)&&s.module_id!==fe.module_id,Te=[{title:"M√£ quy·ªÅn",dataIndex:"code",key:"code",width:200,sorter:(S,B)=>S.code.localeCompare(B.code)},{title:"T√™n quy·ªÅn",dataIndex:"name",key:"name",sorter:(S,B)=>S.name.localeCompare(B.name)},{title:"Resource",dataIndex:"resource",key:"resource",width:140},{title:"Action",dataIndex:"action",key:"action",width:120},{title:"Ph√¢n h·ªá",dataIndex:"module",key:"module",width:160},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:120,render:S=>ag(S)}];return e.jsxDEV(J,{direction:"vertical",style:{width:"100%"},size:12,children:[ue?e.jsxDEV(Is,{type:"info",message:"Nh√≥m menu kh√¥ng g·∫Øn quy·ªÅn hi·ªÉn th·ªã.",description:"Menu nh√≥m s·∫Ω t·ª± hi·ªÉn th·ªã khi c√≥ √≠t nh·∫•t 1 menu con ƒë∆∞·ª£c ph√©p.",showIcon:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:236,columnNumber:9},this):e.jsxDEV(e.Fragment,{children:[!t&&e.jsxDEV(Is,{type:"warning",message:"Menu trang ch∆∞a c√≥ quy·ªÅn hi·ªÉn th·ªã (READ/PAGE).",showIcon:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:245,columnNumber:13},this),de&&!l&&e.jsxDEV(Is,{type:"error",message:"Quy·ªÅn thu·ªôc ph√¢n h·ªá kh√°c v·ªõi menu. B·∫≠t 'Cho ph√©p ngo·∫°i l·ªá' ƒë·ªÉ l∆∞u.",showIcon:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:252,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:243,columnNumber:9},this),e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(re,{allowClear:!0,prefix:e.jsxDEV(ei,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:264,columnNumber:19},this),placeholder:"T√¨m theo m√£/t√™n/m√¥ t·∫£...",value:c,onChange:S=>N(S.target.value),style:{width:240},disabled:ue},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:262,columnNumber:9},this),e.jsxDEV(_e,{allowClear:!0,placeholder:"Ph√¢n h·ªá",style:{minWidth:200},value:g??void 0,onChange:S=>v(S??null),options:a.map(S=>({label:`${S.name} (${S.code})`,value:S._id})),disabled:ue},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:271,columnNumber:9},this),e.jsxDEV(_e,{placeholder:"Action",style:{width:160},value:b??"all",onChange:S=>V(S==="all"?null:S),options:[{label:"T·∫•t c·∫£ action",value:"all"},{label:"READ",value:"read"},{label:"VIEW",value:"view"},{label:"CREATE",value:"create"},{label:"UPDATE",value:"update"},{label:"DELETE",value:"delete"},{label:"EXPORT",value:"export"}],disabled:ue},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:283,columnNumber:9},this),e.jsxDEV(_e,{placeholder:"Permission type",style:{width:160},value:D??"all",onChange:S=>f(S==="all"?null:S),options:[{label:"T·∫•t c·∫£ type",value:"all"},{label:"PAGE",value:"PAGE"},{label:"READ",value:"READ"},{label:"VIEW",value:"VIEW"},{label:"FEATURE",value:"FEATURE"},{label:"SYSTEM",value:"SYSTEM"}],disabled:ue},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:299,columnNumber:9},this),e.jsxDEV(_e,{allowClear:!0,showSearch:!0,placeholder:"Resource",style:{minWidth:160},value:P??void 0,onChange:S=>x(S??null),options:Ee.map(S=>({label:S,value:S})),disabled:ue},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:314,columnNumber:9},this),e.jsxDEV(_e,{placeholder:"Tr·∫°ng th√°i",style:{width:140},value:y,onChange:S=>Q(S),options:[{label:"Ho·∫°t ƒë·ªông",value:"active"},{label:"Ng·ª´ng",value:"inactive"},{label:"T·∫•t c·∫£",value:"all"}],disabled:ue},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:324,columnNumber:9},this),e.jsxDEV(ze,{title:"Ch·ªâ g·ª£i √Ω quy·ªÅn ph√π h·ª£p route",children:e.jsxDEV(J,{size:6,children:[e.jsxDEV(Da,{checked:U,onChange:S=>j(S),disabled:ue},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:338,columnNumber:13},this),e.jsxDEV(Le.Text,{children:"G·ª£i √Ω theo route"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:343,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:337,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:336,columnNumber:9},this),e.jsxDEV(ze,{title:"Cho ph√©p quy·ªÅn kh√°c ph√¢n h·ªá",children:e.jsxDEV(J,{size:6,children:[e.jsxDEV(Da,{checked:l,onChange:n,disabled:ue},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:348,columnNumber:13},this),e.jsxDEV(Le.Text,{children:"Cho ph√©p ngo·∫°i l·ªá"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:353,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:347,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:346,columnNumber:9},this),e.jsxDEV(q,{onClick:()=>i(null,null),disabled:ue,children:"Clear selection"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:356,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:261,columnNumber:7},this),e.jsxDEV(J,{children:[e.jsxDEV(Le.Text,{children:"Quy·ªÅn ƒë√£ ch·ªçn:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:362,columnNumber:9},this),Y]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:361,columnNumber:7},this),e.jsxDEV($s,{bordered:!0,size:"middle",rowKey:S=>S._id,columns:Te,dataSource:o,loading:r,pagination:{current:A,pageSize:W,total:h,showSizeChanger:!0,onChange:(S,B)=>{z(S),X(B??zt)}},rowSelection:{type:"radio",selectedRowKeys:t?[t]:[],onChange:S=>{const B=S[0]??null,ge=o.find(be=>be._id===B)??null;i(B,ge)},getCheckboxProps:()=>({disabled:ue})}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:366,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/menu/PermissionPickerPanel.tsx",lineNumber:234,columnNumber:5},this)}const ll={code:"",label:"",parent_id:null,module_id:null,route_path:null,icon:null,sort_order:0,status:"ACTIVE",is_visible:!0},ig=[{label:"T·∫•t c·∫£ tr·∫°ng th√°i",value:"all"},{label:"Ho·∫°t ƒë·ªông",value:"active"},{label:"Ng·ª´ng",value:"inactive"}],lg=s=>Ta(s)?e.jsxDEV(Re,{color:"green",children:"Ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:93,columnNumber:25},void 0):e.jsxDEV(Re,{color:"red",children:"Ng·ª´ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:93,columnNumber:62},void 0),ng=(s,a)=>{if(!a)return s;const t=s.split(new RegExp(`(${a})`,"gi"));return e.jsxDEV(e.Fragment,{children:t.map((i,l)=>i.toLowerCase()===a.toLowerCase()?e.jsxDEV("span",{style:{backgroundColor:"#ffd666"},children:i},l,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:102,columnNumber:11},void 0):e.jsxDEV("span",{children:i},l,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:106,columnNumber:11},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:99,columnNumber:5},void 0)};function mg(){const{hasPermission:s}=os(),[a,t]=d.useState(!1),[i,l]=d.useState(!1),[n,r]=d.useState([]),[u,o]=d.useState(null),[p,h]=d.useState("edit"),[m]=O.useForm(),c=O.useWatch("module_id",m),N=O.useWatch("route_path",m),[g,v]=d.useState(""),[b,V]=d.useState("all"),[D,f]=d.useState(null),[P,x]=d.useState([]),[y,Q]=d.useState(null),[U,j]=d.useState(null),[A,z]=d.useState(!1),[W,X]=d.useState([]),[fe,me]=d.useState(null),[ue,xe]=d.useState(new Set),[Ee,je]=d.useState(!1),Y=s("sa.iam.menu.create"),de=s("sa.iam.menu.update"),Te=s("sa.iam.menu.delete"),S=d.useMemo(()=>n.find(T=>T._id===u)??null,[n,u]),B=d.useCallback(async()=>{t(!0);try{const T=await Rs.listMenus({status:"all"});r(T)}catch(T){C.error(T instanceof Error?T.message:"Kh√¥ng th·ªÉ t·∫£i menu.")}finally{t(!1)}},[]),ge=d.useCallback(async()=>{try{const T=await Rs.listModules();x(T.map(I=>({_id:I._id,code:I.code,name:I.name,group:I.group??null})))}catch(T){C.error(T instanceof Error?T.message:"Kh√¥ng th·ªÉ t·∫£i ph√¢n h·ªá.")}},[]),be=d.useCallback(async()=>{try{const T=await Rs.listRoles();X(T.map(I=>({_id:I._id,code:I.code,name:I.name,status:I.status??null})))}catch(T){C.error(T instanceof Error?T.message:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch vai tr√≤.")}},[]);d.useEffect(()=>{B(),ge(),be()},[B,ge,be]),d.useEffect(()=>{var T;if(!S){m.resetFields(),m.setFieldsValue(ll),Q(null),j(null),z(!1),h("create");return}m.setFieldsValue({code:S.code,label:S.label,parent_id:S.parent_id??null,module_id:S.module_id??null,route_path:S.route_path??null,icon:S.icon??null,sort_order:S.sort_order??0,status:S.status??"ACTIVE",is_visible:S.is_visible??!0}),Q(((T=S.permission_ids)==null?void 0:T[0])??null),j(null),z(!1),h("edit")},[S,m]);const ie=d.useMemo(()=>{const T=ht(n),I=g.trim().toLowerCase(),se=b,he=D,De=ve=>{const ss=!I||ve.code.toLowerCase().includes(I)||ve.label.toLowerCase().includes(I)||(ve.route_path??"").toLowerCase().includes(I),ms=se==="all"||se==="active"&&Ta(ve.status)||se==="inactive"&&!Ta(ve.status),as=!he||ve.module_id===he,ns=ve.children.map(De).filter(ee=>!!ee);return ss&&ms&&as||ns.length>0?{...ve,children:ns}:null};return T.map(De).filter(ve=>!!ve)},[n,g,b,D]),Ne=d.useCallback(T=>T.map(I=>({key:I._id,title:e.jsxDEV(J,{size:6,children:[e.jsxDEV(km,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:261,columnNumber:13},this),e.jsxDEV("span",{children:I.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:262,columnNumber:13},this),I.route_path&&e.jsxDEV(Re,{color:"blue",children:I.route_path},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:263,columnNumber:33},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:260,columnNumber:11},this),menu:I,children:Ne(I.children)})),[]),w=d.useMemo(()=>Ne(ie),[ie,Ne]),_=d.useMemo(()=>{const T=I=>I.filter(se=>se._id!==u).map(se=>({key:se._id,value:se._id,title:se.label,menu:se,children:T(se.children)}));return T(ht(n))},[n,u]),H=(T,I)=>{Q(T),j(I)},L=T=>{const I=T[0];if(!I){o(null);return}o(I)},G=d.useCallback((T,I)=>{var De;if(!T)return!1;const se=new Map(n.map(ve=>[ve._id,ve]));let he=T;for(;he;){if(he===I)return!0;he=((De=se.get(he))==null?void 0:De.parent_id)??null}return!1},[n]),ye=async T=>{const I=T.dragNode,se=T.node,he=I.key,De=se.key;if(he===De)return;const ve=T.dropToGap?se.menu.parent_id??null:se.menu._id;if(G(ve,he)){C.warning("Kh√¥ng th·ªÉ chuy·ªÉn menu v√†o ch√≠nh nh√°nh con c·ªßa n√≥.");return}const ss=n.filter(as=>(as.parent_id??null)===ve&&as._id!==he).sort(Di);let ms=ss.findIndex(as=>as._id===De);ms===-1?ms=ss.length:T.dropToGap&&T.dropPosition>0&&(ms+=1);try{await Rs.moveMenu({dragId:he,dropParentId:ve,targetIndex:ms}),await B(),C.success("ƒê√£ c·∫≠p nh·∫≠t v·ªã tr√≠ menu.")}catch(as){C.error(as instanceof Error?as.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t menu.")}},He=T=>{if(T!=="root"&&!S){C.info("Vui l√≤ng ch·ªçn menu tr∆∞·ªõc.");return}const I=T==="child"?(S==null?void 0:S._id)??null:T==="sibling"?(S==null?void 0:S.parent_id)??null:null;m.resetFields(),m.setFieldsValue({...ll,parent_id:I,sort_order:0}),setPermissionSelection([]),o(null),h("create")},le=async()=>{var T,I;try{const se=await m.validateFields(),he=!!((T=se.route_path)!=null&&T.trim());if(!he&&y){C.error("Menu nh√≥m kh√¥ng ƒë∆∞·ª£c g√°n quy·ªÅn hi·ªÉn th·ªã.");return}if(he&&U){const ve=String(U.permission_type??"").toUpperCase(),ss=String(U.action??"").toLowerCase(),ms=((I=U.code)==null?void 0:I.toLowerCase())??"",as=ms.split(".").pop()??ms.split(":").pop()??"",ns=ss||as;if(ve&&ve!=="PAGE"){C.error("Quy·ªÅn hi·ªÉn th·ªã ph·∫£i c√≥ permission_type = PAGE.");return}if(ns&&!["read","view"].includes(ns)){C.error("Quy·ªÅn hi·ªÉn th·ªã ph·∫£i l√† READ/VIEW.");return}}if(he&&y&&(U!=null&&U.module_id)&&se.module_id&&U.module_id!==se.module_id&&!A){C.error("Quy·ªÅn thu·ªôc ph√¢n h·ªá kh√°c menu. B·∫≠t 'Cho ph√©p ngo·∫°i l·ªá' ƒë·ªÉ l∆∞u.");return}l(!0);let De=null;if(p==="create"?De=await Rs.createMenu(se):u&&(De=await Rs.updateMenu(u,se)),De){const ve=he&&y?[y]:[];await Rs.setMenuPermissions(De._id,ve),await B(),window.dispatchEvent(new Event("mappa:menu-refresh")),o(De._id),h("edit"),C.success("ƒê√£ l∆∞u menu.")}}catch(se){se instanceof Error&&C.error(se.message)}finally{l(!1)}},te=async()=>{if(u)try{await Rs.softDeleteMenu(u),o(null),await B(),window.dispatchEvent(new Event("mappa:menu-refresh")),C.success("ƒê√£ x√≥a menu.")}catch(T){C.error(T instanceof Error?T.message:"Kh√¥ng th·ªÉ x√≥a menu.")}},Ce=async T=>{if(me(T),!T){xe(new Set);return}je(!0);try{const I=await Rs.listRolePermissionCodes(T);xe(Fp(I))}catch(I){C.error(I instanceof Error?I.message:"Kh√¥ng th·ªÉ t·∫£i quy·ªÅn vai tr√≤.")}finally{je(!1)}},ne=d.useMemo(()=>{if(!fe)return[];const T=ht(n);return qp(T,ue)},[n,fe,ue]),ae=d.useMemo(()=>{var I;const T=(I=P.find(se=>se._id===c))==null?void 0:I.code;return Zp({moduleKey:T||void 0,search:N??void 0}).map(se=>({value:se.path,label:`${se.label} (${se.path})`}))},[P,c,N]);return e.jsxDEV(es,{permission:"sa.iam.menu.read",children:[e.jsxDEV(hs,{title:"Qu·∫£n l√Ω Menu",description:"Qu·∫£n l√Ω c·∫•u tr√∫c menu, ph√¢n h·ªá, route v√† ph√¢n quy·ªÅn hi·ªÉn th·ªã",breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"IAM",href:"/system-admin/iam"},{label:"Menu"}],actions:e.jsxDEV(J,{children:[e.jsxDEV(q,{icon:e.jsxDEV(Qa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:503,columnNumber:27},this),onClick:()=>void B(),children:"L√†m m·ªõi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:503,columnNumber:13},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(qs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:506,columnNumber:42},this),onClick:()=>He("root"),disabled:!Y,children:"Th√™m menu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:506,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:502,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:492,columnNumber:7},this),e.jsxDEV(Pa,{gutter:16,children:[e.jsxDEV(Ns,{span:8,children:e.jsxDEV(ps,{title:"C√¢y Menu",extra:e.jsxDEV(J,{children:[e.jsxDEV(q,{size:"small",onClick:()=>He("child"),disabled:!Y,children:"Th√™m con"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:519,columnNumber:17},this),e.jsxDEV(q,{size:"small",onClick:()=>He("sibling"),disabled:!Y,children:"Th√™m ngang"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:522,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:518,columnNumber:15},this),children:e.jsxDEV(J,{direction:"vertical",style:{width:"100%"},size:12,children:[e.jsxDEV(re.Search,{placeholder:"T√¨m theo m√£/nh√£n/route...",value:g,onChange:T=>v(T.target.value),allowClear:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:529,columnNumber:15},this),e.jsxDEV(J,{children:[e.jsxDEV(_e,{style:{flex:1},value:b,options:ig,onChange:T=>V(T)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:536,columnNumber:17},this),e.jsxDEV(_e,{style:{flex:1},placeholder:"T·∫•t c·∫£ ph√¢n h·ªá",allowClear:!0,value:D??void 0,onChange:T=>f(T??null),options:P.map(T=>({label:`${T.name} (${T.code})`,value:T._id}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:542,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:535,columnNumber:15},this),e.jsxDEV(st,{blockNode:!0,draggable:!0,onDrop:ye,onSelect:L,selectedKeys:u?[u]:[],treeData:w,height:520},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:554,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:528,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:515,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:514,columnNumber:9},this),e.jsxDEV(Ns,{span:16,children:[e.jsxDEV(ps,{title:"Chi ti·∫øt menu",extra:e.jsxDEV(J,{children:[S&&e.jsxDEV(ze,{title:"X√≥a menu",children:e.jsxDEV(ws,{title:"X√≥a menu n√†y?",okText:"X√≥a",cancelText:"H·ªßy",onConfirm:te,disabled:!Te,children:e.jsxDEV(q,{danger:!0,icon:e.jsxDEV(ja,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:581,columnNumber:44},this),disabled:!Te,children:"X√≥a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:581,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:574,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:573,columnNumber:19},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(Fa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:589,columnNumber:25},this),loading:i,onClick:le,disabled:!de&&p==="edit",children:p==="create"?"T·∫°o menu":"L∆∞u thay ƒë·ªïi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:587,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:571,columnNumber:15},this),children:e.jsxDEV(O,{form:m,layout:"vertical",children:e.jsxDEV(Pa,{gutter:16,children:[e.jsxDEV(Ns,{span:12,children:e.jsxDEV(O.Item,{label:"M√£ menu",name:"code",rules:[{required:!0,message:"Nh·∫≠p m√£ menu."}],children:e.jsxDEV(re,{disabled:p==="edit"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:607,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:602,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:601,columnNumber:17},this),e.jsxDEV(Ns,{span:12,children:e.jsxDEV(O.Item,{label:"T√™n hi·ªÉn th·ªã",name:"label",rules:[{required:!0,message:"Nh·∫≠p t√™n hi·ªÉn th·ªã."}],children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:616,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:611,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:610,columnNumber:17},this),e.jsxDEV(Ns,{span:12,children:e.jsxDEV(O.Item,{label:"Menu cha",name:"parent_id",children:e.jsxDEV(_e,{allowClear:!0,placeholder:"Menu g·ªëc",options:_.map(T=>({value:T.key,label:T.menu.label}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:621,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:620,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:619,columnNumber:17},this),e.jsxDEV(Ns,{span:12,children:e.jsxDEV(O.Item,{label:"Ph√¢n h·ªá",name:"module_id",children:e.jsxDEV(_e,{allowClear:!0,placeholder:"Ch·ªçn ph√¢n h·ªá",options:P.map(T=>({label:`${T.name} (${T.code})`,value:T._id}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:633,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:632,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:631,columnNumber:17},this),e.jsxDEV(Ns,{span:12,children:e.jsxDEV(O.Item,{label:"Route/path",name:"route_path",children:e.jsxDEV(Rm,{options:ae,placeholder:"/system-admin/iam/users",children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:646,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:645,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:644,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:643,columnNumber:17},this),e.jsxDEV(Ns,{span:12,children:e.jsxDEV(O.Item,{label:"Icon",name:"icon",children:e.jsxDEV(re,{placeholder:"Icon key (lucide/antd)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:652,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:651,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:650,columnNumber:17},this),e.jsxDEV(Ns,{span:8,children:e.jsxDEV(O.Item,{label:"Th·ª© t·ª±",name:"sort_order",children:e.jsxDEV(cs,{min:0,style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:657,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:656,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:655,columnNumber:17},this),e.jsxDEV(Ns,{span:8,children:e.jsxDEV(O.Item,{label:"Tr·∫°ng th√°i",name:"status",children:e.jsxDEV(_e,{options:[{label:"Ho·∫°t ƒë·ªông",value:"ACTIVE"},{label:"Ng·ª´ng",value:"INACTIVE"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:662,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:661,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:660,columnNumber:17},this),e.jsxDEV(Ns,{span:8,children:e.jsxDEV(O.Item,{label:"Hi·ªÉn th·ªã",name:"is_visible",valuePropName:"checked",children:e.jsxDEV(Da,{checkedChildren:"Hi·ªÉn th·ªã",unCheckedChildren:"·∫®n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:672,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:671,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:670,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:600,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:599,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:568,columnNumber:11},this),e.jsxDEV(ps,{title:"Quy·ªÅn hi·ªÉn th·ªã",style:{marginTop:16},children:e.jsxDEV(tg,{menu:S,modules:P,selectedPermissionId:y,onSelectionChange:H,allowCrossModule:A,onAllowCrossModuleChange:z},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:683,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:679,columnNumber:11},this),e.jsxDEV(ps,{title:"Preview theo vai tr√≤",extra:e.jsxDEV(_e,{allowClear:!0,placeholder:"Ch·ªçn vai tr√≤",style:{minWidth:240},loading:Ee,value:fe??void 0,onChange:T=>void Ce(T??null),options:W.map(T=>({value:T._id,label:`${T.name} (${T.code})`}))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:696,columnNumber:15},this),style:{marginTop:16},children:fe?e.jsxDEV(st,{blockNode:!0,treeData:Ne(ne),height:260},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:714,columnNumber:15},this):e.jsxDEV(Le.Text,{type:"secondary",children:"Ch·ªçn vai tr√≤ ƒë·ªÉ xem menu t∆∞∆°ng ·ª©ng."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:712,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:693,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:567,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:513,columnNumber:7},this),e.jsxDEV(ps,{style:{marginTop:16},title:"Danh s√°ch menu (b·∫£ng)",children:e.jsxDEV($s,{bordered:!0,size:"middle",rowKey:T=>T._id,dataSource:n,columns:[{title:"M√£",dataIndex:"code",key:"code",sorter:(T,I)=>T.code.localeCompare(I.code)},{title:"T√™n menu",dataIndex:"label",key:"label",sorter:(T,I)=>T.label.localeCompare(I.label),render:T=>ng(T,g)},{title:"Route",dataIndex:"route_path",key:"route_path",width:200,ellipsis:!0},{title:"Ph√¢n h·ªá",dataIndex:"module_name",key:"module_name",width:160},{title:"Th·ª© t·ª±",dataIndex:"sort_order",key:"sort_order",sorter:(T,I)=>T.sort_order-I.sort_order,width:100},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:120,filters:[{text:"Ho·∫°t ƒë·ªông",value:"active"},{text:"Ng·ª´ng",value:"inactive"}],onFilter:(T,I)=>T==="active"?Ta(I.status):!Ta(I.status),render:(T,I)=>lg(I.status)}],pagination:{pageSize:8},loading:a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:721,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:720,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-iam/pages/MenusPage.tsx",lineNumber:491,columnNumber:5},this)}const rg=Object.freeze(Object.defineProperty({__proto__:null,default:mg},Symbol.toStringTag,{value:"Module"})),dt=s=>({...s,id:s.id??s._id}),ba={async listUnits(){const{data:s,error:a}=await M.from("departments").select("*, id:_id").order("name",{ascending:!0});if(a)throw new Error(`departments select failed: ${a.message}`);return(s||[]).map(dt)},async getUnit(s){const{data:a,error:t}=await M.from("departments").select("*, id:_id").eq("_id",s).maybeSingle();if(t)throw new Error(`departments select failed: ${t.message}`);return a?dt(a):null},async isCodeTaken(s,a){let t=M.from("departments").select("_id",{count:"exact",head:!0}).eq("code",s);a&&(t=t.neq("_id",a));const{count:i,error:l}=await t;if(l)throw new Error(`departments select failed: ${l.message}`);return(i??0)>0},async createUnit(s){const{data:a,error:t}=await M.from("departments").insert([s]).select("*, id:_id").single();if(t)throw new Error(`departments insert failed: ${t.message}`);return dt(a)},async updateUnit(s,a){const{data:t,error:i}=await M.from("departments").update(a).eq("_id",s).select("*, id:_id").single();if(i)throw new Error(`departments update failed: ${i.message}`);return dt(t)},async toggleStatus(s,a){return ba.updateUnit(s,{is_active:a})}},og=s=>({id:s.id??s._id,code:s.code,name:s.name}),nl=s=>({id:s.id??s._id,code:s.code,name:s.name,province_id:s.province_id}),Ps=s=>{if(s==null)return null;const a=typeof s=="number"?s:Number(s);return Number.isNaN(a)?null:a},ml=s=>{const a=Ps(s.center_lat)??Ps(s.center_latitude)??Ps(s.latitude)??Ps(s.lat)??Ps(s.center_y),t=Ps(s.center_lng)??Ps(s.center_long)??Ps(s.center_longitude)??Ps(s.longitude)??Ps(s.lng)??Ps(s.lon)??Ps(s.long)??Ps(s.center_x);if(a!==null&&t!==null)return{lat:a,lng:t};const i=s.coordinates;if(Array.isArray(i)&&i.length>=2){const l=Ps(i[0]),n=Ps(i[1]);if(n!==null&&l!==null)return{lat:n,lng:l}}return null},Fn=s=>({id:s.id??s._id,code:s.code,name:s.name,level:s.level??null,province_id:s.province_id??null,ward_id:s.ward_id??null}),dg=s=>({id:s.id??s._id,department_id:s.department_id,area_id:s.area_id,area:s.area?Fn(s.area):null}),ug=s=>s.find(a=>!a.ward_id)??null,rs={async listProvinces(){const{data:s,error:a}=await M.from("provinces").select("_id, code, name").order("name",{ascending:!0});if(a)throw new Error(`provinces select failed: ${a.message}`);return(s||[]).map(og)},async listWardsByProvince(s,a="",t=50){let i=M.from("wards").select("_id, code, name, province_id").eq("province_id",s).order("name",{ascending:!0}).limit(t);const l=a.trim();l&&(i=i.or(`name.ilike.%${l}%,code.ilike.%${l}%`));const{data:n,error:r}=await i;if(r)throw new Error(`wards select failed: ${r.message}`);return(n||[]).map(nl)},async getWardsByIds(s){if(s.length===0)return[];const{data:a,error:t}=await M.from("wards").select("_id, code, name, province_id").in("_id",s);if(t)throw new Error(`wards select failed: ${t.message}`);return(a||[]).map(nl)},async listDepartmentAreas(s){const{data:a,error:t}=await M.from("department_areas").select("id:_id, department_id, area_id, area:areas(_id, code, name, level, province_id, ward_id)").eq("department_id",s);if(t)throw new Error(`department_areas select failed: ${t.message}`);return(a||[]).map(dg)},async getProvinceAreaByProvinceId(s){const{data:a,error:t}=await M.from("areas").select("_id, code, name, level, province_id, ward_id").eq("province_id",s).is("ward_id",null).limit(1);if(t)throw new Error(`areas select failed: ${t.message}`);return!a||a.length===0?null:Fn(a[0])},async getAreaIdsByWardIds(s){if(s.length===0)return new Map;const{data:a,error:t}=await M.from("areas").select("_id, ward_id").in("ward_id",s);if(t)throw new Error(`areas select failed: ${t.message}`);const i=new Map;return(a||[]).forEach(l=>{l.ward_id&&i.set(l.ward_id,l._id??l.id)}),i},async getProvinceCoordinates(s){const{data:a,error:t}=await M.from("provinces_with_coordinates").select("*").or(`province_id.eq.${s},_id.eq.${s},id.eq.${s}`).limit(1);if(t)throw new Error(`provinces_with_coordinates select failed: ${t.message}`);const i=a==null?void 0:a[0];return i?ml(i):null},async getWardCoordinates(s){const{data:a,error:t}=await M.from("wards_with_coordinates").select("*").or(`ward_id.eq.${s},_id.eq.${s},id.eq.${s}`).limit(1);if(t)throw new Error(`wards_with_coordinates select failed: ${t.message}`);const i=a==null?void 0:a[0];return i?ml(i):null},async getChiCucProvinceAssignment(s){const a=await rs.listDepartmentAreas(s),t=ug(a.map(l=>l.area).filter(Boolean));if(!t||!t.province_id)return null;const i=a.find(l=>l.area_id===t.id);return i?{province_id:t.province_id,area_id:i.area_id}:null},async listTeamAssignments(s){return rs.listDepartmentAreas(s)},async upsertChiCucProvince(s,a){const t=await rs.getProvinceAreaByProvinceId(a);if(!t)throw new Error("Kh√¥ng t√¨m th·∫•y ƒë·ªãa b√†n t·ªânh/TP trong b·∫£ng areas.");const{error:i}=await M.from("department_areas").delete().eq("department_id",s);if(i)throw new Error(`department_areas delete failed: ${i.message}`);const{error:l}=await M.from("department_areas").insert({department_id:s,area_id:t.id});if(l)throw new Error(`department_areas insert failed: ${l.message}`)},async setTeamCoverageAllProvince(s,a){const t=await rs.getProvinceAreaByProvinceId(a);if(!t)throw new Error("Kh√¥ng t√¨m th·∫•y ƒë·ªãa b√†n t·ªânh/TP trong b·∫£ng areas.");const{error:i}=await M.from("department_areas").delete().eq("department_id",s);if(i)throw new Error(`department_areas delete failed: ${i.message}`);const{error:l}=await M.from("department_areas").insert({department_id:s,area_id:t.id});if(l)throw new Error(`department_areas insert failed: ${l.message}`)},async setTeamCoverageWardList(s,a){const t=await rs.getAreaIdsByWardIds(a),{error:i}=await M.from("department_areas").delete().eq("department_id",s);if(i)throw new Error(`department_areas delete failed: ${i.message}`);const l=a.map(r=>t.get(r)).filter(r=>!!r).map(r=>({department_id:s,area_id:r}));if(l.length===0)return;const{error:n}=await M.from("department_areas").insert(l);if(n)throw new Error(`department_areas insert failed: ${n.message}`)},async removeTeamWard(s,a){const i=(await rs.getAreaIdsByWardIds([a])).get(a);if(!i)throw new Error("Kh√¥ng t√¨m th·∫•y ƒë·ªãa b√†n ph∆∞·ªùng/x√£ trong b·∫£ng areas.");const{error:l}=await M.from("department_areas").delete().eq("department_id",s).eq("area_id",i);if(l)throw new Error(`department_areas delete failed: ${l.message}`)}},cg=(s,a)=>{const t=new Map,i=[],l=a.trim().toLowerCase();s.forEach(m=>{t.set(m.id,{key:m.id,data:m,title:m.name,children:[]})}),t.forEach(m=>{const c=m.data.parent_id;if(c&&t.has(c)){const N=t.get(c);N!=null&&N.children&&N.children.push(m)}else i.push(m)});const n=(m,c)=>{const N=m.order_index??Number.POSITIVE_INFINITY,g=c.order_index??Number.POSITIVE_INFINITY;if(N!==g)return N-g;const v=m.name||m.code||"",b=c.name||c.code||"";return v.localeCompare(b,"vi",{numeric:!0,sensitivity:"base"})},r=m=>{m.sort((c,N)=>n(c.data,N.data)),m.forEach(c=>{c.children&&r(c.children)})};if(r(i),!l)return{treeData:i,expandedKeys:[]};const u=new Set,o=m=>{const c=m.toLowerCase().indexOf(l);return c===-1?e.jsxDEV("span",{children:m},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:115,columnNumber:30},void 0):e.jsxDEV("span",{children:[m.slice(0,c),e.jsxDEV("span",{style:{backgroundColor:"#ffe58f"},children:m.slice(c,c+l.length)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:119,columnNumber:9},void 0),m.slice(c+l.length)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:117,columnNumber:7},void 0)},p=m=>{var g;const c=m.data.name.toLowerCase().includes(l)||(m.data.code||"").toLowerCase().includes(l),N=(g=m.children)==null?void 0:g.map(p).filter(v=>!!v);return c||N&&N.length>0?(N&&N.length>0&&u.add(m.key),{...m,title:o(m.data.name),children:N}):null};return{treeData:i.map(p).filter(m=>!!m),expandedKeys:Array.from(u)}},Gn=[{value:"central",label:"C·ª•c"},{value:"provincial",label:"Chi c·ª•c"},{value:"team",label:"ƒê·ªôi"},{value:"other",label:"Kh√°c"}],rl=s=>{var a;return s?((a=Gn.find(t=>t.value===s))==null?void 0:a.label)??s:"-"},ol=s=>s===1?"central":s===2?"provincial":s===3?"team":"other",dl=s=>{if(!s)return;const a=s.trim();if(!(a.length<2||a.length%2!==0))return a.length/2},pg=(s,a)=>{if(!a)return"-";const t=s.find(i=>i.id===a);return t?`${t.name} (${t.code})`:a},gg=s=>{const a=new Map;return s.forEach(t=>{if(!t.parent_id)return;const i=a.get(t.parent_id)??[];i.push(t.id),a.set(t.parent_id,i)}),a};const hg=async(s,a)=>{const t=new URL("https://nominatim.openstreetmap.org/search");t.searchParams.set("format","json"),t.searchParams.set("limit","1"),t.searchParams.set("q",s),t.searchParams.set("accept-language","vi");const i=await fetch(t.toString(),{headers:{Accept:"application/json"}});if(!i.ok)throw new Error(`OSM_HTTP_${i.status}`);const l=await i.json();if(!Array.isArray(l)||l.length===0)throw new Error("OSM_NO_RESULTS");const n=l[0],r=Number(n.lat),u=Number(n.lon);if(Number.isNaN(r)||Number.isNaN(u))throw new Error("OSM_NO_LOCATION");return{latitude:r,longitude:u,ambiguous:l.length>1,provider:"osm"}};function Ng(){var ds,Qs,We;const{user:s}=Sa(),[a,t]=d.useState(!1),[i,l]=d.useState(!1),[n,r]=d.useState([]),[u,o]=d.useState(null),[p,h]=d.useState(""),[m,c]=d.useState([]),[N,g]=d.useState(!0),[v,b]=d.useState(!1),[V,D]=d.useState("create"),[f,P]=d.useState(null),[x,y]=d.useState(!1),[Q,U]=d.useState([]),[j,A]=d.useState(null),[z,W]=d.useState("ALL_PROVINCE"),[X,fe]=d.useState([]),[me,ue]=d.useState([]),[xe,Ee]=d.useState([]),[je,Y]=d.useState(!1),[de,Te]=d.useState(!1),[S,B]=d.useState(!1),[ge,be]=d.useState("Xem t·ªça ƒë·ªô"),[ie,Ne]=d.useState(null),[w]=O.useForm(),_=d.useMemo(()=>n.find(Z=>Z.id===u)??null,[n,u]),H=((ds=s==null?void 0:s.departmentInfo)==null?void 0:ds.id)??null,L=((Qs=s==null?void 0:s.departmentInfo)==null?void 0:Qs.level)??dl((We=s==null?void 0:s.departmentInfo)==null?void 0:We.code),G=(_==null?void 0:_.level)??dl(_==null?void 0:_.code),ye=_!=null&&_.parent_id?n.find(Z=>Z.id===_.parent_id)??null:null,He=d.useMemo(()=>_?L===1?!0:!H||!L?!1:L===2?_.id===H||_.parent_id===H:_.id===H:!1,[_,H,L]),le=d.useMemo(()=>{if(!_)return n.map($=>({label:`${$.name} (${$.code||"-"})`,value:$.id}));const Z=gg(n),oe=new Set([_.id]),k=[...Z.get(_.id)??[]];for(;k.length;){const $=k.pop();if(oe.has($))continue;oe.add($);const pe=Z.get($);pe&&k.push(...pe)}return n.filter($=>!oe.has($.id)).map($=>({label:`${$.name} (${$.code||"-"})`,value:$.id}))},[n,_]),{treeData:te,expandedKeys:Ce}=d.useMemo(()=>cg(n,p),[n,p]);d.useEffect(()=>{p.trim()&&(c(Ce),g(!0))},[Ce,p]);const ne=d.useCallback(async()=>{t(!0);try{const Z=await ba.listUnits();r(Z.map(oe=>({...oe,is_active:oe.is_active??!0})))}catch(Z){const oe=Z instanceof Error?Z.message:"Kh√¥ng th·ªÉ t·∫£i ƒë∆°n v·ªã.";C.error(oe)}finally{t(!1)}},[]);d.useEffect(()=>{ne()},[ne]);const ae=d.useCallback(async()=>{try{const Z=await rs.listProvinces();U(Z)}catch(Z){const oe=Z instanceof Error?Z.message:"Kh√¥ng th·ªÉ t·∫£i t·ªânh/TP.";C.error(oe)}},[]);d.useEffect(()=>{ae()},[ae]);const T=d.useCallback(async()=>{if(!(!_||!G)){y(!0);try{if(A(null),fe([]),Ee([]),ue([]),W("ALL_PROVINCE"),G===2){const Z=await rs.getChiCucProvinceAssignment(_.id);A((Z==null?void 0:Z.province_id)??null)}if(G===3){if(!ye)return;const Z=await rs.getChiCucProvinceAssignment(ye.id),oe=(Z==null?void 0:Z.province_id)??null;A(oe);const k=await rs.listTeamAssignments(_.id),$=k.some(Xe=>{var Hs;return((Hs=Xe.area)==null?void 0:Hs.ward_id)==null});W($?"ALL_PROVINCE":"WARD_LIST");const pe=k.map(Xe=>{var Hs;return(Hs=Xe.area)==null?void 0:Hs.ward_id}).filter(Xe=>!!Xe);Ee(pe);const Me=await rs.getWardsByIds(pe);fe(Me),ue(Me)}}catch(Z){const oe=Z instanceof Error?Z.message:"Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu ƒë·ªãa b√†n.";C.error(oe)}finally{y(!1)}}},[ye,G,_]);d.useEffect(()=>{T()},[T]);const I=()=>{D("create"),P(null),w.resetFields(),w.setFieldsValue({is_active:!0,level:1,type:"central",order_index:void 0}),b(!0)},se=()=>{if(!_)return;D("create"),P(_),w.resetFields();const Z=_.level?_.level+1:1;w.setFieldsValue({parent_id:_.id,is_active:!0,level:Z,type:ol(Z),order_index:void 0}),b(!0)},he=()=>{_&&(D("edit"),P(null),w.resetFields(),w.setFieldsValue({parent_id:_.parent_id??null,name:_.name,code:_.code,short_name:_.short_name??"",type:_.type??ol(_.level),level:_.level??void 0,order_index:_.order_index??void 0,address:_.address??"",latitude:_.latitude??void 0,longitude:_.longitude??void 0,is_active:_.is_active??!0}),b(!0))},De=()=>{a||b(!1)},ve=async()=>{const $=(w.getFieldValue("address")||"").trim();if(!$){C.warning("Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ tr∆∞·ªõc khi c·∫≠p nh·∫≠t v·ªã tr√≠.");return}l(!0),C.loading({content:"ƒêang tra c·ª©u v·ªã tr√≠...",key:"location"});try{const pe=[];let Me=null;if(!Me)try{Me=await hg($,void 0)}catch(Xe){pe.push(Xe instanceof Error?Xe.message:"OSM_UNKNOWN")}if(!Me){const Xe=pe.join(" | ");if(Xe.includes("ZERO_RESULTS")||Xe.includes("NO_RESULTS")){C.warning({content:"Kh√¥ng x√°c ƒë·ªãnh ƒë∆∞·ª£c v·ªã tr√≠. H√£y b·ªï sung ƒë·ªãa ch·ªâ chi ti·∫øt (VD: 123 Tr·∫ßn H∆∞ng ƒê·∫°o, H√† N·ªôi, Vi·ªát Nam).",key:"location"});return}if(Xe.includes("REQUEST_DENIED")||Xe.includes("GOOGLE_")){C.error({content:"Google Geocoding b·ªã t·ª´ ch·ªëi. H√£y ki·ªÉm tra API key, b·∫≠t Geocoding API v√† th√™m referrer 172.16.0.2:5173.",key:"location"});return}C.error({content:"Kh√¥ng th·ªÉ tra c·ª©u v·ªã tr√≠. Vui l√≤ng th·ª≠ l·∫°i.",key:"location"});return}if(w.setFieldsValue({latitude:Number(Me.latitude.toFixed(6)),longitude:Number(Me.longitude.toFixed(6))}),Me.ambiguous)C.warning({content:"ƒê·ªãa ch·ªâ c√≥ th·ªÉ ch∆∞a ƒë·ªß r√µ r√†ng. Vui l√≤ng x√°c nh·∫≠n l·∫°i.",key:"location"});else{const Xe=Me.provider==="osm"?"OpenStreetMap":"Google";C.success({content:`ƒê√£ c·∫≠p nh·∫≠t v·ªã tr√≠ (${Xe}).`,key:"location"})}}catch(pe){const Me=pe instanceof Error?pe.message:"Kh√¥ng th·ªÉ tra c·ª©u v·ªã tr√≠.";C.error({content:Me,key:"location"})}finally{l(!1)}},ss=(Z,oe)=>{if(!oe)return Z;const k=n.find($=>$.id===oe);return k!=null&&k.path?`${k.path}.${Z}`:Z},ms=async()=>{var Z,oe,k,$,pe;try{const Me=await w.validateFields(),Xe=(f==null?void 0:f.id)??Me.parent_id??(V==="edit"?(_==null?void 0:_.parent_id)??null:null),Hs={parent_id:Xe,name:(Z=Me.name)==null?void 0:Z.trim(),code:(oe=Me.code)==null?void 0:oe.trim(),short_name:((k=Me.short_name)==null?void 0:k.trim())||null,type:(($=Me.type)==null?void 0:$.trim())||null,level:Me.level??(f!=null&&f.level?f.level+1:1),order_index:typeof Me.order_index=="number"?Me.order_index:null,address:((pe=Me.address)==null?void 0:pe.trim())||null,latitude:Me.latitude??null,longitude:Me.longitude??null,is_active:Me.is_active??!0,path:Me.code?ss(Me.code.trim(),Xe):null};if(!Hs.code||!Hs.name)return;if(t(!0),V==="create"){if(await ba.isCodeTaken(Hs.code)){C.error(`M√£ ƒë∆°n v·ªã "${Hs.code}" ƒë√£ t·ªìn t·∫°i.`),t(!1);return}await ba.createUnit(Hs),C.success("T·∫°o ƒë∆°n v·ªã th√†nh c√¥ng.")}else _&&(await ba.updateUnit(_.id,Hs),C.success("C·∫≠p nh·∫≠t ƒë∆°n v·ªã th√†nh c√¥ng."));b(!1),await ne()}catch(Me){const Xe=Me instanceof Error?Me.message:"Kh√¥ng th·ªÉ l∆∞u ƒë∆°n v·ªã.";C.error(Xe)}finally{t(!1)}},as=async()=>{if(_)try{t(!0),await ba.toggleStatus(_.id,!_.is_active),C.success(_.is_active?"ƒê√£ ng·ª´ng ho·∫°t ƒë·ªông ƒë∆°n v·ªã.":"ƒê√£ k√≠ch ho·∫°t ƒë∆°n v·ªã."),await ne()}catch(Z){const oe=Z instanceof Error?Z.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i.";C.error(oe)}finally{t(!1)}},ns=async()=>{if(!(!_||!j)){if(!He){C.warning("B·∫°n kh√¥ng c√≥ quy·ªÅn c·∫≠p nh·∫≠t ƒë·ªãa b√†n c·ªßa ƒë∆°n v·ªã n√†y.");return}try{y(!0),await rs.upsertChiCucProvince(_.id,j),C.success("ƒê√£ c·∫≠p nh·∫≠t t·ªânh/TP ph·ª• tr√°ch."),await T()}catch(Z){const oe=Z instanceof Error?Z.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t ƒë·ªãa b√†n.";C.error(oe)}finally{y(!1)}}},ee=Z=>{if(!(!_||!j)&&Z!==z){if(!He){C.warning("B·∫°n kh√¥ng c√≥ quy·ªÅn c·∫≠p nh·∫≠t ƒë·ªãa b√†n c·ªßa ƒë∆°n v·ªã n√†y.");return}us.confirm({title:"Chuy·ªÉn ch·∫ø ƒë·ªô ƒë·ªãa b√†n?",content:"Thao t√°c n√†y s·∫Ω ghi ƒë√® c·∫•u h√¨nh ƒë·ªãa b√†n hi·ªán t·∫°i.",okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",onOk:async()=>{try{y(!0),Z==="ALL_PROVINCE"?await rs.setTeamCoverageAllProvince(_.id,j):await rs.setTeamCoverageWardList(_.id,[]),W(Z),await T()}catch(oe){const k=oe instanceof Error?oe.message:"Kh√¥ng th·ªÉ chuy·ªÉn ch·∫ø ƒë·ªô ƒë·ªãa b√†n.";C.error(k)}finally{y(!1)}}})}},Ie=async()=>{if(!(!_||!j)){if(!He){C.warning("B·∫°n kh√¥ng c√≥ quy·ªÅn c·∫≠p nh·∫≠t ƒë·ªãa b√†n c·ªßa ƒë∆°n v·ªã n√†y.");return}try{y(!0),await rs.setTeamCoverageAllProvince(_.id,j),C.success("ƒê√£ √°p d·ª•ng ph·∫°m vi to√†n t·ªânh/TP."),await T()}catch(Z){const oe=Z instanceof Error?Z.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t ƒë·ªãa b√†n.";C.error(oe)}finally{y(!1)}}},Ge=async Z=>{if(j){Y(!0);try{const oe=await rs.listWardsByProvince(j,Z,50);ue(oe)}catch(oe){const k=oe instanceof Error?oe.message:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch ph∆∞·ªùng/x√£.";C.error(k)}finally{Y(!1)}}},Es=async()=>{if(!(!_||!j)){if(!He){C.warning("B·∫°n kh√¥ng c√≥ quy·ªÅn c·∫≠p nh·∫≠t ƒë·ªãa b√†n c·ªßa ƒë∆°n v·ªã n√†y.");return}try{if(y(!0),(await rs.getWardsByIds(xe)).find(k=>k.province_id!==j)){C.error("Danh s√°ch ph∆∞·ªùng/x√£ c√≥ ph·∫ßn t·ª≠ ngo√†i t·ªânh/TP c·ªßa chi c·ª•c.");return}await rs.setTeamCoverageWardList(_.id,xe),C.success("ƒê√£ c·∫≠p nh·∫≠t danh s√°ch ph∆∞·ªùng/x√£."),await T()}catch(Z){const oe=Z instanceof Error?Z.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t ƒë·ªãa b√†n.";C.error(oe)}finally{y(!1)}}},ta=async Z=>{if(_){if(!He){C.warning("B·∫°n kh√¥ng c√≥ quy·ªÅn c·∫≠p nh·∫≠t ƒë·ªãa b√†n c·ªßa ƒë∆°n v·ªã n√†y.");return}try{y(!0),await rs.removeTeamWard(_.id,Z),C.success("ƒê√£ g·ª° ph∆∞·ªùng/x√£."),await T()}catch(oe){const k=oe instanceof Error?oe.message:"Kh√¥ng th·ªÉ g·ª° ph∆∞·ªùng/x√£.";C.error(k)}finally{y(!1)}}},ia=async(Z,oe,k)=>{if(!oe){C.warning("Ch∆∞a c√≥ ƒë·ªãa b√†n ƒë·ªÉ xem t·ªça ƒë·ªô.");return}be(k?`T·ªça ƒë·ªô: ${k}`:"Xem t·ªça ƒë·ªô"),Te(!0),B(!0),Ne(null);try{const $=Z==="province"?await rs.getProvinceCoordinates(oe):await rs.getWardCoordinates(oe);if(!$){C.warning("Ch∆∞a c√≥ t·ªça ƒë·ªô trong d·ªØ li·ªáu hi·ªán t·∫°i.");return}Ne($)}catch($){const pe=$ instanceof Error?$.message:"Kh√¥ng th·ªÉ t·∫£i t·ªça ƒë·ªô.";C.error(pe)}finally{B(!1)}},F=[{title:"M√£ ph∆∞·ªùng/x√£",dataIndex:"code",key:"code",width:160},{title:"T√™n ph∆∞·ªùng/x√£",dataIndex:"name",key:"name"},{title:"Thao t√°c",key:"actions",width:200,render:(Z,oe)=>e.jsxDEV(J,{children:[e.jsxDEV(q,{size:"small",type:"link",icon:e.jsxDEV(ma,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:861,columnNumber:19},this),onClick:()=>ia("ward",oe.id,oe.name),children:"Xem t·ªça ƒë·ªô"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:858,columnNumber:11},this),e.jsxDEV(q,{size:"small",danger:!0,icon:e.jsxDEV(ja,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:869,columnNumber:19},this),onClick:()=>ta(oe.id),disabled:!He,children:"G·ª°"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:866,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:857,columnNumber:9},this)}],R=G===2,Ve=G===3,Se=j?Q.find(Z=>Z.id===j)??null:null;return e.jsxDEV(es,{permission:"sa.masterdata.orgunit.read",children:[e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"D·ªØ li·ªáu n·ªÅn"},{label:"ƒê∆°n v·ªã t·ªï ch·ª©c"}],title:"Danh m·ª•c ƒê∆°n v·ªã t·ªï ch·ª©c",subtitle:"Qu·∫£n l√Ω c∆° c·∫•u t·ªï ch·ª©c v√† ph√¢n c·∫•p ƒë∆°n v·ªã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:889,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 pb-8",children:e.jsxDEV(Pa,{gutter:16,children:[e.jsxDEV(Ns,{flex:"360px",children:e.jsxDEV(ps,{title:"C√¢y ƒë∆°n v·ªã",extra:e.jsxDEV(J,{children:[e.jsxDEV(q,{onClick:I,icon:e.jsxDEV(qs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:907,columnNumber:60},this),size:"small",children:"Th√™m ƒë∆°n v·ªã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:907,columnNumber:21},this),e.jsxDEV(q,{onClick:se,icon:e.jsxDEV(qs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:912,columnNumber:29},this),size:"small",disabled:!_,children:"Th√™m ƒë∆°n v·ªã con"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:910,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:906,columnNumber:19},this),children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(re,{placeholder:"T√¨m ƒë∆°n v·ªã...",value:p,onChange:Z=>h(Z.target.value)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:922,columnNumber:19},this),e.jsxDEV(st,{treeData:te,selectedKeys:u?[u]:[],expandedKeys:m,autoExpandParent:N,onExpand:Z=>{c(Z),g(!1)},onSelect:Z=>{o(Z.length>0?String(Z[0]):null)}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:927,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:921,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:903,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:902,columnNumber:13},this),e.jsxDEV(Ns,{flex:"auto",children:e.jsxDEV(ps,{title:"Th√¥ng tin ƒë∆°n v·ªã",bodyStyle:{minHeight:520},extra:_?e.jsxDEV(J,{children:[e.jsxDEV(q,{icon:e.jsxDEV(oa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:950,columnNumber:37},this),onClick:he,children:"S·ª≠a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:950,columnNumber:23},this),e.jsxDEV(ws,{title:_.is_active?"Ng·ª´ng ho·∫°t ƒë·ªông ƒë∆°n v·ªã n√†y?":"K√≠ch ho·∫°t l·∫°i ƒë∆°n v·ªã n√†y?",okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",onConfirm:as,children:e.jsxDEV(q,{danger:!!_.is_active,icon:e.jsxDEV(ha,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:963,columnNumber:80},this),children:_.is_active?"Ng·ª´ng":"K√≠ch ho·∫°t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:963,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:953,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:949,columnNumber:21},this):null,children:_?e.jsxDEV(ri,{items:[{key:"info",label:"Th√¥ng tin",children:e.jsxDEV(J,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsxDEV("div",{children:[e.jsxDEV(Le.Title,{level:4,style:{marginBottom:4},children:_.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:982,columnNumber:31},this),e.jsxDEV(J,{size:"middle",children:[e.jsxDEV(Le.Text,{type:"secondary",children:[_.code||"-"," ‚Ä¢ C·∫•p ",_.level??"-"," ‚Ä¢"," ",rl(_.type)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:986,columnNumber:33},this),e.jsxDEV(Re,{color:_.is_active?"green":"red",children:_.is_active?"Ho·∫°t ƒë·ªông":"Ng·ª´ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:990,columnNumber:33},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:985,columnNumber:31},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:981,columnNumber:29},this),e.jsxDEV(Ye,{column:2,bordered:!0,size:"small",children:[e.jsxDEV(Ye.Item,{label:"M√£ ƒë∆°n v·ªã",children:_.code||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:997,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"T√™n ƒë∆°n v·ªã",children:_.name||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1e3,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"T√™n ng·∫Øn",children:_.short_name||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1003,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"C·∫•p",children:_.level??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1006,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"Lo·∫°i",children:rl(_.type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1009,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"Th·ª© t·ª±",children:_.order_index??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1012,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"ƒê∆°n v·ªã cha",children:pg(n,_.parent_id)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1015,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"ƒê·ªãa ch·ªâ",children:_.address||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1018,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"Vƒ© ƒë·ªô",children:_.latitude??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1021,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"Kinh ƒë·ªô",children:_.longitude??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1024,columnNumber:31},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:996,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:980,columnNumber:27},this)},{key:"areas",label:"ƒê·ªãa b√†n",children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[!He&&e.jsxDEV(Is,{type:"warning",showIcon:!0,message:"B·∫°n ch·ªâ ƒë∆∞·ª£c thao t√°c trong ph·∫°m vi ƒë∆°n v·ªã c·ªßa m√¨nh."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1037,columnNumber:31},this),!R&&!Ve&&e.jsxDEV(Is,{type:"info",showIcon:!0,message:"ƒê·ªãa b√†n ch·ªâ √°p d·ª•ng cho Chi c·ª•c (c·∫•p 2) v√† ƒê·ªôi (c·∫•p 3)."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1045,columnNumber:31},this),R&&e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(Le.Text,{strong:!0,children:"Chi c·ª•c ph·ª• tr√°ch t·ªânh/TP"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1054,columnNumber:33},this),e.jsxDEV(_e,{placeholder:"Ch·ªçn t·ªânh/TP",value:j??void 0,options:Q.map(Z=>({value:Z.id,label:`${Z.name} (${Z.code})`})),onChange:Z=>A(Z),disabled:!He,loading:x},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1055,columnNumber:33},this),e.jsxDEV(J,{children:[e.jsxDEV(q,{type:"primary",onClick:ns,disabled:!j||!He,loading:x,children:"L∆∞u"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1067,columnNumber:35},this),e.jsxDEV(q,{type:"link",icon:e.jsxDEV(ma,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1077,columnNumber:43},this),onClick:()=>ia("province",j,Se==null?void 0:Se.name),disabled:!j,children:"Xem t·ªça ƒë·ªô"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1075,columnNumber:35},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1066,columnNumber:33},this),Se&&e.jsxDEV(Re,{color:"blue",children:["Chi c·ª•c ph·ª• tr√°ch t·ªânh/TP: ",Se.name]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1091,columnNumber:35},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1053,columnNumber:31},this),Ve&&e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:Se?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(J,{align:"center",size:"middle",wrap:!0,children:[e.jsxDEV(Le.Text,{children:["Chi c·ª•c cha: ",(ye==null?void 0:ye.name)||"-"," ‚Ä¢ T·ªânh/TP:"," ",Se.name]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1109,columnNumber:39},this),e.jsxDEV(q,{type:"link",icon:e.jsxDEV(ma,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1115,columnNumber:47},this),onClick:()=>ia("province",Se.id,Se.name),children:"Xem t·ªça ƒë·ªô t·ªânh/TP"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1113,columnNumber:39},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1108,columnNumber:37},this),e.jsxDEV(qa.Group,{value:z,onChange:Z=>ee(Z.target.value),disabled:!He,children:[e.jsxDEV(qa,{value:"ALL_PROVINCE",children:"To√†n t·ªânh/TP"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1136,columnNumber:39},this),e.jsxDEV(qa,{value:"WARD_LIST",children:"Ch·ªçn ph∆∞·ªùng/x√£"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1137,columnNumber:39},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1127,columnNumber:37},this),z==="ALL_PROVINCE"?e.jsxDEV(J,{direction:"vertical",size:"small",children:[e.jsxDEV(Le.Text,{type:"secondary",children:["Ph·∫°m vi: ",Se.name]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1142,columnNumber:41},this),e.jsxDEV(q,{type:"primary",onClick:Ie,disabled:!He,loading:x,children:"√Åp d·ª•ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1145,columnNumber:41},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1141,columnNumber:39},this):e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(_e,{mode:"multiple",showSearch:!0,placeholder:"Ch·ªçn ph∆∞·ªùng/x√£ thu·ªôc t·ªânh/TP",value:xe,onChange:Z=>Ee(Z),onSearch:Ge,filterOption:!1,loading:je,options:me.map(Z=>({value:Z.id,label:`${Z.name} (${Z.code})`})),disabled:!He},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1156,columnNumber:41},this),e.jsxDEV(q,{type:"primary",onClick:Es,disabled:!He,loading:x,children:"L∆∞u danh s√°ch"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1171,columnNumber:41},this),e.jsxDEV($s,{rowKey:"id",dataSource:X,columns:F,loading:x,pagination:!1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1179,columnNumber:41},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1155,columnNumber:39},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1107,columnNumber:35},this):e.jsxDEV(Is,{type:"warning",showIcon:!0,message:"Chi c·ª•c ch∆∞a thi·∫øt l·∫≠p t·ªânh/TP. Vui l√≤ng c·∫•u h√¨nh ·ªü chi c·ª•c cha tr∆∞·ªõc."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1101,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1099,columnNumber:31},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1035,columnNumber:27},this)}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:974,columnNumber:19},this):e.jsxDEV(ra,{description:"Ch·ªçn m·ªôt ƒë∆°n v·ªã b√™n tr√°i ƒë·ªÉ xem chi ti·∫øt."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:972,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:944,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:943,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:901,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:900,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:888,columnNumber:7},this),e.jsxDEV(_a,{title:V==="create"?"Th√™m ƒë∆°n v·ªã":"Ch·ªânh s·ª≠a ƒë∆°n v·ªã",placement:"right",width:420,open:v,onClose:De,destroyOnClose:!0,extra:e.jsxDEV(J,{children:[e.jsxDEV(q,{onClick:De,children:"H·ªßy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1213,columnNumber:13},this),e.jsxDEV(q,{type:"primary",onClick:ms,loading:a,children:"L∆∞u"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1214,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1212,columnNumber:11},this),children:e.jsxDEV(O,{layout:"vertical",form:w,children:[e.jsxDEV(O.Item,{name:"parent_id",hidden:!0,children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1222,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1221,columnNumber:11},this),f&&e.jsxDEV(O.Item,{label:"ƒê∆°n v·ªã cha",children:e.jsxDEV(re,{value:`${f.name} (${f.code})`,disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1226,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1225,columnNumber:13},this),!f&&V==="edit"&&e.jsxDEV(O.Item,{name:"parent_id",label:"ƒê∆°n v·ªã cha",children:e.jsxDEV(_e,{options:le,placeholder:"Ch·ªçn ƒë∆°n v·ªã cha",allowClear:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1231,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1230,columnNumber:13},this),e.jsxDEV(O.Item,{name:"code",label:"M√£ ƒë∆°n v·ªã",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p m√£ ƒë∆°n v·ªã."}],children:e.jsxDEV(re,{placeholder:"VD: DV-001",disabled:V==="edit"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1243,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1238,columnNumber:11},this),e.jsxDEV(O.Item,{name:"name",label:"T√™n ƒë∆°n v·ªã",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p t√™n ƒë∆°n v·ªã."}],children:e.jsxDEV(re,{placeholder:"VD: C·ª•c Qu·∫£n l√Ω th·ªã tr∆∞·ªùng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1250,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1245,columnNumber:11},this),e.jsxDEV(O.Item,{name:"short_name",label:"T√™n ng·∫Øn",children:e.jsxDEV(re,{placeholder:"VD: C·ª•c QLTT"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1253,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1252,columnNumber:11},this),e.jsxDEV(O.Item,{name:"type",label:"Lo·∫°i ƒë∆°n v·ªã",children:e.jsxDEV(_e,{options:Gn,placeholder:"Ch·ªçn lo·∫°i ƒë∆°n v·ªã",allowClear:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1256,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1255,columnNumber:11},this),e.jsxDEV(O.Item,{name:"order_index",label:"Th·ª© t·ª± hi·ªÉn th·ªã",children:e.jsxDEV(cs,{min:0,style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1263,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1262,columnNumber:11},this),e.jsxDEV(O.Item,{name:"level",label:"C·∫•p",children:e.jsxDEV(cs,{min:1,style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1266,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1265,columnNumber:11},this),e.jsxDEV(O.Item,{name:"address",label:"ƒê·ªãa ch·ªâ",children:e.jsxDEV(re,{placeholder:"VD: 123 Tr·∫ßn H∆∞ng ƒê·∫°o"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1269,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1268,columnNumber:11},this),e.jsxDEV(q,{type:"link",icon:e.jsxDEV(Om,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1273,columnNumber:19},this),onClick:ve,loading:i,style:{padding:0},children:"C·∫≠p nh·∫≠t v·ªã tr√≠ tr√™n b·∫£n ƒë·ªì"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1271,columnNumber:11},this),e.jsxDEV(Pa,{gutter:12,children:[e.jsxDEV(Ns,{span:12,children:e.jsxDEV(O.Item,{name:"latitude",label:"Vƒ© ƒë·ªô",children:e.jsxDEV(cs,{style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1283,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1282,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1281,columnNumber:13},this),e.jsxDEV(Ns,{span:12,children:e.jsxDEV(O.Item,{name:"longitude",label:"Kinh ƒë·ªô",children:e.jsxDEV(cs,{style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1288,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1287,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1286,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1280,columnNumber:11},this),e.jsxDEV(O.Item,{name:"is_active",label:"Tr·∫°ng th√°i",valuePropName:"checked",children:e.jsxDEV(Da,{checkedChildren:e.jsxDEV(da,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1294,columnNumber:32},this),unCheckedChildren:e.jsxDEV(Ql,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1295,columnNumber:34},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1293,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1292,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1220,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1204,columnNumber:7},this),e.jsxDEV(us,{title:ge,open:de,onCancel:()=>Te(!1),footer:e.jsxDEV(q,{onClick:()=>Te(!1),children:"ƒê√≥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1306,columnNumber:11},this),children:S?e.jsxDEV("div",{style:{display:"flex",justifyContent:"center",padding:24},children:e.jsxDEV(za,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1313,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1312,columnNumber:11},this):ie?e.jsxDEV(J,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsxDEV(Le.Text,{children:["Vƒ© ƒë·ªô: ",ie.lat.toFixed(6)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1317,columnNumber:13},this),e.jsxDEV(Le.Text,{children:["Kinh ƒë·ªô: ",ie.lng.toFixed(6)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1318,columnNumber:13},this),e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(q,{type:"link",href:`https://www.google.com/maps?q=${ie.lat},${ie.lng}`,target:"_blank",rel:"noreferrer",children:"M·ªü Google Maps"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1320,columnNumber:15},this),e.jsxDEV(q,{type:"link",href:`https://www.openstreetmap.org/?mlat=${ie.lat}&mlon=${ie.lng}#map=16/${ie.lat}/${ie.lng}`,target:"_blank",rel:"noreferrer",children:"M·ªü OpenStreetMap"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1328,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1319,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1316,columnNumber:11},this):e.jsxDEV(ra,{description:"Ch∆∞a c√≥ t·ªça ƒë·ªô."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1339,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:1301,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/OrgUnitsPage.tsx",lineNumber:887,columnNumber:5},this)}const fg=Object.freeze(Object.defineProperty({__proto__:null,default:Ng},Symbol.toStringTag,{value:"Module"})),ut=s=>({...s,id:s.id??s._id,department:s.department?{id:s.department.id??s.department._id,name:s.department.name,code:s.department.code??null}:null}),Va={async listSubDepartments(s){var h;const a=s.page??1,t=s.pageSize??10,i=(a-1)*t,l=i+t-1;let n=M.from("sub_departments").select("*, id:_id, department:departments(_id, name, code)",{count:"exact"}).eq("department_id",s.scopeUnitId).order("order_index",{ascending:!0}).order("code",{ascending:!0}).range(i,l);const r=(h=s.search)==null?void 0:h.trim();r&&(n=n.or(`code.ilike.%${r}%,name.ilike.%${r}%`)),s.status==="active"&&(n=n.eq("is_active",!0)),s.status==="inactive"&&(n=n.eq("is_active",!1));const{data:u,error:o,count:p}=await n;if(o)throw new Error(`sub_departments select failed: ${o.message}`);return{data:(u||[]).map(ut),total:p??0,page:a,pageSize:t}},async getSubDepartment(s,a){const{data:t,error:i}=await M.from("sub_departments").select("*, id:_id, department:departments(_id, name, code)").eq("_id",s).eq("department_id",a).maybeSingle();if(i)throw new Error(`sub_departments select failed: ${i.message}`);return t?ut(t):null},async createSubDepartment(s){const{data:a,error:t}=await M.from("sub_departments").insert([s]).select("*, id:_id, department:departments(_id, name, code)").single();if(t)throw new Error(`sub_departments insert failed: ${t.message}`);return ut(a)},async updateSubDepartment(s,a,t){const{data:i,error:l}=await M.from("sub_departments").update(t).eq("_id",s).eq("department_id",a).select("*, id:_id, department:departments(_id, name, code)").single();if(l)throw new Error(`sub_departments update failed: ${l.message}`);return ut(i)},async toggleStatus(s,a,t){return Va.updateSubDepartment(s,a,{is_active:t})}},vg=s=>({...s,user:s.user?{id:s.user.id??s.user._id,full_name:s.user.full_name??null,email:s.user.email??null,username:s.user.username??null}:null}),bg=s=>({...s,sub_department:s.sub_department?{id:s.sub_department.id??s.sub_department._id,name:s.sub_department.name,code:s.sub_department.code??null}:null}),Na={async listMembers(s){const{data:a,error:t}=await M.from("sub_department_users").select("id, sub_department_id, user_id, created_at, user:users(_id, full_name, email, username)").eq("sub_department_id",s).order("created_at",{ascending:!1});if(t)throw new Error(`sub_department_users select failed: ${t.message}`);return(a||[]).map(vg)},async getAssignmentsByUserIds(s){if(s.length===0)return[];const{data:a,error:t}=await M.from("sub_department_users").select("id, sub_department_id, user_id, sub_department:sub_departments(_id, name, code)").in("user_id",s);if(t)throw new Error(`sub_department_users select failed: ${t.message}`);return(a||[]).map(bg)},async moveUsersToSubDepartment(s,a){if(a.length===0)return;const{error:t}=await M.from("sub_department_users").update({sub_department_id:s}).in("user_id",a);if(t)throw new Error(`sub_department_users update failed: ${t.message}`)},async addUsersToSubDepartment(s,a){if(a.length===0)return;const t=a.map(l=>({sub_department_id:s,user_id:l})),{error:i}=await M.from("sub_department_users").insert(t);if(i)throw new Error(`sub_department_users insert failed: ${i.message}`)},async removeUsersFromSubDepartment(s,a){if(a.length===0)return;const{error:t}=await M.from("sub_department_users").delete().eq("sub_department_id",s).in("user_id",a);if(t)throw new Error(`sub_department_users delete failed: ${t.message}`)},async searchUsersInScope(s,a,t=20){let i=M.from("users").select("id:_id, full_name, email, username, department_users!inner(department_id)").eq("department_users.department_id",s).order("full_name",{ascending:!0}).limit(t);const l=a.trim();l&&(i=i.or(`full_name.ilike.%${l}%,email.ilike.%${l}%,username.ilike.%${l}%`));const{data:n,error:r}=await i;if(r)throw new Error(`users select failed: ${r.message}`);return(n||[]).map(u=>({id:u.id??u._id,full_name:u.full_name??null,email:u.email??null,username:u.username??null}))}},Vg=s=>s?"Ho·∫°t ƒë·ªông":"Ng·ª´ng",ul=s=>{const a=s.full_name||s.username||s.email||s.id,t=s.email||s.username;return t&&t!==a?`${a} (${t})`:a};function Tg(){var Ce;const{user:s}=Sa(),{scope:a}=xr(),{hasPermission:t}=os(),i=a.teamId||a.divisionId||((Ce=s==null?void 0:s.departmentInfo)==null?void 0:Ce.id)||null,[l,n]=d.useState(!1),[r,u]=d.useState([]),[o,p]=d.useState(0),[h,m]=d.useState(1),[c,N]=d.useState(10),[g,v]=d.useState(""),[b,V]=d.useState("all"),[D,f]=d.useState(!1),[P,x]=d.useState("create"),[y,Q]=d.useState("info"),[U,j]=d.useState(null),[A,z]=d.useState([]),[W,X]=d.useState(!1),[fe,me]=d.useState(!1),[ue,xe]=d.useState([]),[Ee,je]=d.useState(!1),[Y,de]=d.useState([]),[Te]=O.useForm(),S=t("sa.masterdata.department.create"),B=t("sa.masterdata.department.update"),ge=d.useCallback(async()=>{if(i){n(!0);try{const ne=await Va.listSubDepartments({scopeUnitId:i,search:g,status:b,page:h,pageSize:c});u(ne.data),p(ne.total)}catch(ne){const ae=ne instanceof Error?ne.message:"Kh√¥ng th·ªÉ t·∫£i ph√≤ng ban.";C.error(ae)}finally{n(!1)}}},[h,c,i,g,b]);d.useEffect(()=>{ge()},[ge]);const be=d.useCallback(async ne=>{X(!0);try{const ae=await Na.listMembers(ne);z(ae)}catch(ae){const T=ae instanceof Error?ae.message:"Kh√¥ng th·ªÉ t·∫£i th√†nh vi√™n.";C.error(T)}finally{X(!1)}},[]);d.useEffect(()=>{!D||!U||y!=="members"||be(U.id)},[D,U,y,be]);const ie=()=>{if(!i){C.error("Ch∆∞a x√°c ƒë·ªãnh ƒë∆°n v·ªã qu·∫£n l√Ω.");return}x("create"),j(null),Q("info"),Te.resetFields(),Te.setFieldsValue({is_active:!0}),f(!0)},Ne=async ne=>{if(!i){C.error("Ch∆∞a x√°c ƒë·ªãnh ƒë∆°n v·ªã qu·∫£n l√Ω.");return}try{const ae=await Va.getSubDepartment(ne.id,i);if(!ae){C.warning("Kh√¥ng t√¨m th·∫•y ph√≤ng ban.");return}x("edit"),j(ae),Q("info"),Te.resetFields(),Te.setFieldsValue({code:ae.code,name:ae.name,order_index:ae.order_index??void 0,is_active:ae.is_active??!0}),f(!0)}catch(ae){const T=ae instanceof Error?ae.message:"Kh√¥ng th·ªÉ t·∫£i ph√≤ng ban.";C.error(T)}},w=()=>{l||(f(!1),j(null),Q("info"),z([]))},_=async()=>{if(!i){C.error("Ch∆∞a x√°c ƒë·ªãnh ƒë∆°n v·ªã qu·∫£n l√Ω.");return}if(P==="create"&&!S){C.warning("B·∫°n kh√¥ng c√≥ quy·ªÅn t·∫°o ph√≤ng ban.");return}if(P==="edit"&&!B){C.warning("B·∫°n kh√¥ng c√≥ quy·ªÅn c·∫≠p nh·∫≠t ph√≤ng ban.");return}try{const ne=await Te.validateFields(),ae={department_id:i,code:ne.code.trim(),name:ne.name.trim(),order_index:typeof ne.order_index=="number"?ne.order_index:null,is_active:ne.is_active??!0};P==="create"?(await Va.createSubDepartment(ae),C.success("T·∫°o ph√≤ng ban th√†nh c√¥ng.")):U&&(await Va.updateSubDepartment(U.id,i,ae),C.success("C·∫≠p nh·∫≠t ph√≤ng ban th√†nh c√¥ng.")),f(!1),await ge()}catch(ne){const ae=ne instanceof Error?ne.message:"Kh√¥ng th·ªÉ l∆∞u ph√≤ng ban.";C.error(ae)}},H=async ne=>{if(!i){C.error("Ch∆∞a x√°c ƒë·ªãnh ƒë∆°n v·ªã qu·∫£n l√Ω.");return}try{const ae=!ne.is_active;await Va.toggleStatus(ne.id,i,ae),C.success(ae?"ƒê√£ k√≠ch ho·∫°t ph√≤ng ban.":"ƒê√£ ng·ª´ng ph√≤ng ban."),await ge()}catch(ae){const T=ae instanceof Error?ae.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i.";C.error(T)}},L=()=>{xe([]),de([]),me(!0),i&&G("")},G=async ne=>{if(i){je(!0);try{const ae=await Na.searchUsersInScope(i,ne,20);xe(ae)}catch(ae){const T=ae instanceof Error?ae.message:"Kh√¥ng th·ªÉ t√¨m ng∆∞·ªùi d√πng.";C.error(T)}finally{je(!1)}}},ye=async()=>{if(!U||Y.length===0){me(!1);return}try{const ne=await Na.getAssignmentsByUserIds(Y),ae=new Map(ne.map(he=>[he.user_id,he])),T=ne.filter(he=>he.sub_department_id!==U.id),I=Y.filter(he=>!ae.has(he));if(T.length>0){const he=T.map(ve=>{var as,ns;const ss=ue.find(ee=>ee.id===ve.user_id),ms=((as=ve.sub_department)==null?void 0:as.name)||((ns=ve.sub_department)==null?void 0:ns.code)||"ph√≤ng ban kh√°c";return`${ss?ul(ss):ve.user_id} ‚Üí ${ms}`}).join(", ");if(!await new Promise(ve=>{us.confirm({title:"Chuy·ªÉn ph√≤ng ban cho ng∆∞·ªùi d√πng?",content:`M·ªôt s·ªë ng∆∞·ªùi d√πng ƒëang thu·ªôc ph√≤ng ban kh√°c: ${he}. B·∫°n c√≥ mu·ªën chuy·ªÉn sang ph√≤ng ban hi·ªán t·∫°i kh√¥ng?`,onOk:()=>ve(!0),onCancel:()=>ve(!1)})}))return}const se=T.map(he=>he.user_id);await Promise.all([Na.moveUsersToSubDepartment(U.id,se),Na.addUsersToSubDepartment(U.id,I)]),C.success("ƒê√£ c·∫≠p nh·∫≠t th√†nh vi√™n."),me(!1),de([]),await be(U.id)}catch(ne){const ae=ne instanceof Error?ne.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t th√†nh vi√™n.";C.error(ae)}},He=async ne=>{if(U)try{await Na.removeUsersFromSubDepartment(U.id,[ne.user_id]),C.success("ƒê√£ g·ª° th√†nh vi√™n kh·ªèi ph√≤ng ban."),await be(U.id)}catch(ae){const T=ae instanceof Error?ae.message:"Kh√¥ng th·ªÉ g·ª° th√†nh vi√™n.";C.error(T)}},le=[{title:"M√£ ph√≤ng ban",dataIndex:"code",key:"code",width:180,render:ne=>e.jsxDEV(Le.Text,{strong:!0,children:ne},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:340,columnNumber:26},this)},{title:"T√™n ph√≤ng ban",dataIndex:"name",key:"name"},{title:"ƒê∆°n v·ªã tr·ª±c thu·ªôc",dataIndex:["department","name"],key:"department",render:(ne,ae)=>{var T;return((T=ae.department)==null?void 0:T.name)||ae.department_id}},{title:"Tr·∫°ng th√°i",dataIndex:"is_active",key:"is_active",width:140,render:ne=>e.jsxDEV(Re,{color:ne?"green":"default",children:Vg(ne)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:359,columnNumber:9},this)},{title:"Thao t√°c",key:"actions",width:200,render:(ne,ae)=>e.jsxDEV(J,{children:[e.jsxDEV(q,{type:"default",size:"small",icon:e.jsxDEV(oa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:371,columnNumber:19},this),onClick:()=>Ne(ae),disabled:!B,children:"S·ª≠a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:368,columnNumber:11},this),e.jsxDEV(q,{size:"small",danger:ae.is_active??!1,icon:ae.is_active?e.jsxDEV(ha,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:380,columnNumber:38},this):e.jsxDEV(da,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:380,columnNumber:57},this),onClick:()=>void H(ae),disabled:!B,children:ae.is_active?"Ng·ª´ng":"K√≠ch ho·∫°t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:377,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:367,columnNumber:9},this)}],te=[{title:"H·ªç v√† t√™n",dataIndex:["user","full_name"],key:"full_name",render:(ne,ae)=>{var T,I,se;return((T=ae.user)==null?void 0:T.full_name)||((I=ae.user)==null?void 0:I.username)||((se=ae.user)==null?void 0:se.email)||ae.user_id}},{title:"Email",dataIndex:["user","email"],key:"email"},{title:"T√†i kho·∫£n",dataIndex:["user","username"],key:"username"},{title:"Thao t√°c",key:"actions",width:140,render:(ne,ae)=>e.jsxDEV(q,{size:"small",danger:!0,onClick:()=>void He(ae),children:"G·ª°"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:413,columnNumber:9},this)}];return e.jsxDEV(es,{permission:"sa.masterdata.department.read",children:e.jsxDEV("div",{style:{padding:24},children:[e.jsxDEV(hs,{title:"Qu·∫£n l√Ω Ph√≤ng ban",breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"D·ªØ li·ªáu n·ªÅn",href:"/system-admin/master-data"},{label:"Ph√≤ng ban"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:423,columnNumber:9},this),e.jsxDEV(ps,{children:i?e.jsxDEV(J,{direction:"vertical",style:{width:"100%"},size:"middle",children:[e.jsxDEV(J,{wrap:!0,style:{width:"100%",justifyContent:"space-between"},children:[e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(re.Search,{placeholder:"T√¨m theo m√£, t√™n ph√≤ng ban...",allowClear:!0,onSearch:ne=>{v(ne),m(1)},style:{width:280}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:442,columnNumber:17},this),e.jsxDEV(_e,{value:b,onChange:ne=>{V(ne),m(1)},options:[{value:"all",label:"T·∫•t c·∫£ tr·∫°ng th√°i"},{value:"active",label:"Ho·∫°t ƒë·ªông"},{value:"inactive",label:"Ng·ª´ng"}],style:{width:180}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:451,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:441,columnNumber:15},this),e.jsxDEV(J,{children:[e.jsxDEV(Le.Text,{type:"secondary",children:["T·ªïng: ",o," ph√≤ng ban"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:466,columnNumber:17},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(qs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:469,columnNumber:25},this),onClick:ie,disabled:!S||!i,children:"Th√™m ph√≤ng ban"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:467,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:465,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:440,columnNumber:13},this),e.jsxDEV($s,{rowKey:"id",columns:le,dataSource:r,loading:l,pagination:{current:h,pageSize:c,total:o,onChange:(ne,ae)=>{m(ne),ae!==c&&N(ae??10)}}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:478,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:439,columnNumber:11},this):e.jsxDEV(Le.Text,{type:"danger",children:"Ch∆∞a x√°c ƒë·ªãnh ƒë∆°n v·ªã qu·∫£n l√Ω. Vui l√≤ng ch·ªçn ph·∫°m vi ·ªü thanh tr√™n ho·∫∑c ki·ªÉm tra l·∫°i ƒë∆°n v·ªã c·ªßa t√†i kho·∫£n."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:435,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:433,columnNumber:9},this),e.jsxDEV(_a,{open:D,onClose:w,width:560,title:P==="create"?"Th√™m ph√≤ng ban":"Ch·ªânh s·ª≠a ph√≤ng ban",extra:e.jsxDEV(J,{children:[e.jsxDEV(q,{onClick:w,children:"H·ªßy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:506,columnNumber:15},this),e.jsxDEV(q,{type:"primary",onClick:_,disabled:P==="create"&&!S||P==="edit"&&!B,children:"L∆∞u"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:507,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:505,columnNumber:13},this),children:e.jsxDEV(ri,{activeKey:y,onChange:Q,items:[{key:"info",label:"Th√¥ng tin",children:e.jsxDEV(O,{layout:"vertical",form:Te,children:[e.jsxDEV(O.Item,{name:"code",label:"M√£ ph√≤ng ban",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p m√£ ph√≤ng ban."}],children:e.jsxDEV(re,{placeholder:"VD: QT-TH",disabled:P==="edit"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:531,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:526,columnNumber:21},this),e.jsxDEV(O.Item,{name:"name",label:"T√™n ph√≤ng ban",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p t√™n ph√≤ng ban."}],children:e.jsxDEV(re,{placeholder:"VD: Ph√≤ng T·ªïng h·ª£p"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:538,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:533,columnNumber:21},this),e.jsxDEV(O.Item,{name:"order_index",label:"Th·ª© t·ª± hi·ªÉn th·ªã",children:e.jsxDEV(cs,{min:0,style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:541,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:540,columnNumber:21},this),e.jsxDEV(O.Item,{name:"is_active",label:"Tr·∫°ng th√°i",valuePropName:"checked",children:e.jsxDEV(Da,{checkedChildren:e.jsxDEV(da,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:545,columnNumber:42},this),unCheckedChildren:e.jsxDEV(Ql,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:546,columnNumber:44},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:544,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:543,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:525,columnNumber:19},this)},...P==="edit"?[{key:"members",label:`Th√†nh vi√™n (${A.length})`,children:e.jsxDEV(J,{direction:"vertical",style:{width:"100%"},size:"middle",children:[e.jsxDEV(J,{style:{width:"100%",justifyContent:"space-between"},children:[e.jsxDEV(Le.Text,{type:"secondary",children:"Danh s√°ch ng∆∞·ªùi d√πng trong ph√≤ng ban"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:560,columnNumber:29},this),e.jsxDEV(q,{icon:e.jsxDEV(mi,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:563,columnNumber:43},this),onClick:L,children:"Th√™m th√†nh vi√™n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:563,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:559,columnNumber:27},this),e.jsxDEV($s,{rowKey:ne=>String(ne.id),columns:te,dataSource:A,loading:W,pagination:!1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:567,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:558,columnNumber:25},this)}]:[]]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:517,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:499,columnNumber:9},this),e.jsxDEV(us,{open:fe,onCancel:()=>me(!1),onOk:ye,okText:"L∆∞u",cancelText:"H·ªßy",title:"Th√™m th√†nh vi√™n",children:e.jsxDEV(J,{direction:"vertical",style:{width:"100%"},children:[e.jsxDEV(Le.Text,{children:"Ch·ªçn ng∆∞·ªùi d√πng thu·ªôc c√πng ƒë∆°n v·ªã qu·∫£n l√Ω ƒë·ªÉ th√™m v√†o ph√≤ng ban."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:592,columnNumber:13},this),e.jsxDEV(_e,{mode:"multiple",showSearch:!0,placeholder:"T√¨m ng∆∞·ªùi d√πng theo t√™n/email...",filterOption:!1,onSearch:G,loading:Ee,options:ue.map(ne=>({value:ne.id,label:ul(ne)})),value:Y,onChange:ne=>de(ne),style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:595,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:591,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:583,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:422,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DepartmentsPage.tsx",lineNumber:421,columnNumber:5},this)}const xg=Object.freeze(Object.defineProperty({__proto__:null,default:Tg},Symbol.toStringTag,{value:"Module"})),Bt=s=>({id:s.id??s._id,code:s.code,name:s.name}),ct=s=>({id:s.id??s._id,code:s.code,name:s.name,province_id:s.province_id,area:s.area??null,officer:s.officer??null}),ga={async listProvinces(){const{data:s,error:a}=await M.from("provinces").select("_id, code, name").order("name",{ascending:!0});if(a)throw new Error(`provinces select failed: ${a.message}`);return(s||[]).map(Bt)},async listWardsByProvince(s){const{data:a,error:t}=await M.from("wards").select("_id, code, name, province_id, area, officer").eq("province_id",s).order("name",{ascending:!0});if(t)throw new Error(`wards select failed: ${t.message}`);return(a||[]).map(ct)},async searchWards(s,a){const t=s.trim();if(!t)return[];let i=M.from("wards").select("_id, code, name, province_id, area, officer").or(`name.ilike.%${t}%,code.ilike.%${t}%`).order("name",{ascending:!0}).limit((a==null?void 0:a.limit)??200);a!=null&&a.provinceIds&&a.provinceIds.length>0&&(i=i.in("province_id",a.provinceIds)),a!=null&&a.wardIds&&a.wardIds.length>0&&(i=i.in("_id",a.wardIds));const{data:l,error:n}=await i;if(n)throw new Error(`wards search failed: ${n.message}`);return(l||[]).map(ct)},async getProvince(s){const{data:a,error:t}=await M.from("provinces").select("_id, code, name").eq("_id",s).maybeSingle();if(t)throw new Error(`provinces select failed: ${t.message}`);return a?Bt(a):null},async getWard(s){const{data:a,error:t}=await M.from("wards").select("_id, code, name, province_id, area, officer").eq("_id",s).maybeSingle();if(t)throw new Error(`wards select failed: ${t.message}`);return a?ct(a):null},async updateProvince(s,a){const{data:t,error:i}=await M.from("provinces").update(a).eq("_id",s).select("_id, code, name").single();if(i)throw new Error(`provinces update failed: ${i.message}`);return Bt(t)},async updateWard(s,a){const{data:t,error:i}=await M.from("wards").update(a).eq("_id",s).select("_id, code, name, province_id, area, officer").single();if(i)throw new Error(`wards update failed: ${i.message}`);return ct(t)},async getCoordinates(s,a){const{data:t,error:i}=await M.from("v_admin_units_with_coordinates").select("*").eq("level",s).eq("source_id",a).maybeSingle();if(i)throw new Error(`v_admin_units_with_coordinates select failed: ${i.message}`);return t?{level:t.level,source_id:t.source_id,code:t.code,name:t.name,parent_id:t.parent_id??null,center_lat:t.center_lat??null,center_lng:t.center_lng??null,bounds:t.bounds??null,area:t.area??null,officer:t.officer??null}:null},async upsertCoordinates(s,a,t,i){if(Number.isNaN(t)||Number.isNaN(i))throw new Error("T·ªça ƒë·ªô kh√¥ng h·ª£p l·ªá.");const l=s==="province"?{province_id:a,center_lat:t,center_lng:i,updated_at:new Date().toISOString()}:{ward_id:a,center_lat:t,center_lng:i,updated_at:new Date().toISOString()},{error:n}=await M.from(s==="province"?"province_coordinates":"ward_coordinates").upsert([l],{onConflict:s==="province"?"province_id":"ward_id"});if(n){const r=s==="province"?"province_coordinates":"ward_coordinates";throw new Error(`${r} upsert failed: ${n.message}`)}}},cl=s=>({id:s.id??s._id,level:s.level,source_id:s.source_id,headline:s.headline??null,summary:s.summary??null,homepage_url:s.homepage_url??null,banner_url:s.banner_url??null,thumbnail_url:s.thumbnail_url??null,news_config:s.news_config??null,seo_title:s.seo_title??null,seo_description:s.seo_description??null,tags:s.tags??null,status:s.status??null}),pl={async getProfile(s,a){const{data:t,error:i}=await M.from("admin_unit_profiles").select("*").eq("level",s).eq("source_id",a).maybeSingle();if(i)throw new Error(`admin_unit_profiles select failed: ${i.message}`);return t?cl(t):null},async upsertProfile(s,a,t){const{data:i,error:l}=await M.from("admin_unit_profiles").upsert([{level:s,source_id:a,...t,updated_at:new Date().toISOString()}],{onConflict:"level,source_id"}).select("*").single();if(l)throw new Error(`admin_unit_profiles upsert failed: ${l.message}`);return cl(i)}},yg=s=>String(s).padStart(2,"0"),fa=s=>s.toISOString().slice(0,10),Eg=(s,a,t,i)=>{if(s==="month"){if(!i||i<1||i>12)throw new Error("Th√°ng kh√¥ng h·ª£p l·ªá.");const r=new Date(Date.UTC(a,i-1,1)),u=new Date(Date.UTC(a,i,0));return{quarter:null,month:i,from_date:fa(r),to_date:fa(u),label:`Th√°ng ${yg(i)}/${a}`}}if(s==="quarter"){if(!t||t<1||t>4)throw new Error("Qu√Ω kh√¥ng h·ª£p l·ªá.");const r=(t-1)*3+1,u=new Date(Date.UTC(a,r-1,1)),o=new Date(Date.UTC(a,r+2,0));return{quarter:t,month:null,from_date:fa(u),to_date:fa(o),label:`Qu√Ω ${t}/${a}`}}const l=new Date(Date.UTC(a,0,1)),n=new Date(Date.UTC(a,11,31));return{quarter:null,month:null,from_date:fa(l),to_date:fa(n),label:`NƒÉm ${a}`}},gl=s=>({id:s.id??s._id??s.period_id,granularity:s.granularity,year:s.year,quarter:s.quarter??null,month:s.month??null,from_date:s.from_date,to_date:s.to_date,label:s.label}),hl=s=>({id:s.id??s._id,level:s.level,source_id:s.source_id,period_id:s.period_id,population:s.population??null,area_km2:s.area_km2??null,grdp:s.grdp??null,total_revenue:s.total_revenue??null}),pt={async findPeriod(s,a,t,i){let l=M.from("dim_period").select("*").eq("granularity",s).eq("year",a);s==="quarter"?l=l.eq("quarter",t??null).is("month",null):s==="month"?l=l.eq("month",i??null).is("quarter",null):l=l.is("quarter",null).is("month",null);const{data:n,error:r}=await l.maybeSingle();if(r)throw new Error(`dim_period select failed: ${r.message}`);return n?gl(n):null},async ensurePeriod(s,a,t,i){const l=Eg(s,a,t,i),{data:n,error:r}=await M.from("dim_period").upsert([{granularity:s,year:a,quarter:l.quarter,month:l.month,from_date:l.from_date,to_date:l.to_date,label:l.label}],{onConflict:"granularity,year,quarter,month"}).select("*").single();if(r)throw new Error(`dim_period upsert failed: ${r.message}`);return gl(n)},async getMetric(s,a,t){const{data:i,error:l}=await M.from("fact_admin_unit_metrics").select("*").eq("level",s).eq("source_id",a).eq("period_id",t).maybeSingle();if(l)throw new Error(`fact_admin_unit_metrics select failed: ${l.message}`);return i?hl(i):null},async upsertMetric(s,a,t,i){const{data:l,error:n}=await M.from("fact_admin_unit_metrics").upsert([{level:s,source_id:a,period_id:t,...i,updated_at:new Date().toISOString()}],{onConflict:"level,source_id,period_id"}).select("*").single();if(n)throw new Error(`fact_admin_unit_metrics upsert failed: ${n.message}`);return hl(l)}},Nl=s=>({key:`province:${s.id}`,title:`${s.name} (${s.code})`,isLeaf:!1,level:"province",data:{id:s.id,level:"province",code:s.code,name:s.name}}),fl=s=>({key:`ward:${s.id}`,title:`${s.name} (${s.code})`,isLeaf:!0,level:"ward",data:{id:s.id,level:"ward",code:s.code,name:s.name,province_id:s.province_id,area:s.area??null,officer:s.officer??null}}),Jn=(s,a,t)=>s.map(i=>i.key===a?{...i,children:t}:i.children?{...i,children:Jn(i.children,a,t)}:i),Hg=[{value:"month",label:"Th√°ng"},{value:"quarter",label:"Qu√Ω"},{value:"year",label:"NƒÉm"}],vl=new Date().getFullYear(),Dg=new Date().getMonth()+1;function Pg(){var ta,ia;const{user:s}=Sa(),[a,t]=d.useState(!1),[i,l]=d.useState([]),[n,r]=d.useState([]),[u,o]=d.useState(""),[p,h]=d.useState(!1),[m,c]=d.useState([]),N=d.useRef(null),[g,v]=d.useState([]),[b,V]=d.useState(!0),D=d.useRef(new Set),[f,P]=d.useState(null),[x,y]=d.useState(null),[Q,U]=d.useState({allowAll:!0,provinceIds:[],wardIds:[]}),[j,A]=d.useState(!1),[z,W]=d.useState(!1),[X,fe]=d.useState(!1),[me,ue]=d.useState(null),[xe,Ee]=d.useState(null),[je,Y]=d.useState("month"),[de,Te]=d.useState(vl),[S,B]=d.useState(Dg),[ge,be]=d.useState(1),[ie]=O.useForm(),[Ne]=O.useForm(),[w]=O.useForm(),[_]=O.useForm(),[H,L]=d.useState(!1),[G,ye]=d.useState(!1),He=((ta=s==null?void 0:s.departmentInfo)==null?void 0:ta.id)??null,le=((ia=s==null?void 0:s.departmentInfo)==null?void 0:ia.level)??null,te=d.useMemo(()=>{if(!f)return!1;if(Q.allowAll)return!0;if(f.level==="province")return Q.provinceIds.includes(f.data.id);if(Q.wardIds.length>0)return Q.wardIds.includes(f.data.id);const F=f.data.province_id;return!!(F&&Q.provinceIds.includes(F))},[Q,f]),Ce=d.useCallback(async()=>{var F;if(!He||!le||le===1){U({allowAll:!0,provinceIds:[],wardIds:[]});return}try{const R=await rs.listDepartmentAreas(He),Ve=R.find(We=>{var Z;return((Z=We.area)==null?void 0:Z.ward_id)==null});if((F=Ve==null?void 0:Ve.area)!=null&&F.province_id){U({allowAll:!1,provinceIds:[Ve.area.province_id],wardIds:[]});return}const Se=R.map(We=>{var Z;return(Z=We.area)==null?void 0:Z.ward_id}).filter(We=>!!We);if(Se.length===0){U({allowAll:!1,provinceIds:[],wardIds:[]});return}const ds=await rs.getWardsByIds(Se),Qs=Array.from(new Set(ds.map(We=>We.province_id)));U({allowAll:!1,provinceIds:Qs,wardIds:Se})}catch(R){const Ve=R instanceof Error?R.message:"Kh√¥ng th·ªÉ t·∫£i ph·∫°m vi ƒë·ªãa b√†n.";C.error(Ve)}},[He,le]),ne=d.useCallback(async()=>{t(!0);try{const F=await ga.listProvinces(),R=Q.allowAll?F:F.filter(Ve=>Q.provinceIds.includes(Ve.id));r(R),l(R.map(Nl))}catch(F){const R=F instanceof Error?F.message:"Kh√¥ng th·ªÉ t·∫£i t·ªânh/TP.";C.error(R)}finally{t(!1)}},[Q]);d.useEffect(()=>{Ce()},[Ce]),d.useEffect(()=>{ne()},[ne]),d.useEffect(()=>{const F=u.trim();if(!F){c([]),h(!1);return}return N.current&&window.clearTimeout(N.current),N.current=window.setTimeout(async()=>{h(!0);try{const R=await ga.searchWards(F,{provinceIds:Q.allowAll?void 0:Q.provinceIds,wardIds:Q.allowAll?void 0:Q.wardIds.length>0?Q.wardIds:void 0,limit:200});c(R)}catch(R){const Ve=R instanceof Error?R.message:"Kh√¥ng th·ªÉ t√¨m ph∆∞·ªùng/x√£.";C.error(Ve)}finally{h(!1)}},300),()=>{N.current&&window.clearTimeout(N.current)}},[Q,u]);const ae=d.useMemo(()=>{const F=u.trim().toLowerCase();if(!F)return i;const R=new Map;return m.forEach(Se=>{const ds=R.get(Se.province_id)??[];ds.push(Se),R.set(Se.province_id,ds)}),n.filter(Se=>Se.name.toLowerCase().includes(F)||Se.code.toLowerCase().includes(F)||R.has(Se.id)).map(Se=>{const ds=R.get(Se.id)??[];return{...Nl(Se),children:ds.map(fl)}})},[n,u,m,i]);d.useEffect(()=>{if(!u.trim()){v([]),V(!0);return}const R=ae.map(Ve=>Ve.key);v(R),V(!0)},[ae,u]);const T=async F=>{const R=await ga.listWardsByProvince(F);return Q.allowAll||Q.wardIds.length===0?R:R.filter(Ve=>Q.wardIds.includes(Ve.id))},I=async F=>{if(F.level!=="province")return;const R=F.data.id;if(D.current.has(R))return;const Ve=await T(R);D.current.add(R);const Se=Ve.map(fl);l(ds=>Jn(ds,F.key,Se))},se=F=>{if(P(F),F.level==="province")y({id:F.data.id,code:F.data.code,name:F.data.name});else{const R=F.data.province_id;if(R&&Q.provinceIds.includes(R)){const Ve=i.find(Se=>Se.data.id===R);Ve&&y({id:Ve.data.id,code:Ve.data.code,name:Ve.data.name})}}},he=()=>{ie.resetFields(),Ne.resetFields(),w.resetFields(),ue(null),Ee(null)},De=d.useCallback(async()=>{if(!f){he();return}const F=f.data;ie.setFieldsValue({code:F.code,name:F.name,area:F.area??null,officer:F.officer??null}),A(!0),fe(!0);try{const R=await pl.getProfile(F.level,F.id);Ne.setFieldsValue({headline:(R==null?void 0:R.headline)??"",summary:(R==null?void 0:R.summary)??"",homepage_url:(R==null?void 0:R.homepage_url)??"",banner_url:(R==null?void 0:R.banner_url)??"",thumbnail_url:(R==null?void 0:R.thumbnail_url)??"",news_config:R!=null&&R.news_config?JSON.stringify(R.news_config,null,2):"",seo_title:(R==null?void 0:R.seo_title)??"",seo_description:(R==null?void 0:R.seo_description)??"",tags:(R==null?void 0:R.tags)??[],status:(R==null?void 0:R.status)??"active"})}catch(R){const Ve=R instanceof Error?R.message:"Kh√¥ng th·ªÉ t·∫£i profile.";C.error(Ve)}finally{A(!1)}try{const R=await ga.getCoordinates(F.level,F.id);ue(R)}catch(R){const Ve=R instanceof Error?R.message:"Kh√¥ng th·ªÉ t·∫£i t·ªça ƒë·ªô.";C.error(Ve)}finally{fe(!1)}},[ie,Ne,f]);d.useEffect(()=>{De()},[De]);const ve=d.useCallback(async()=>{if(f){W(!0);try{const F=await pt.findPeriod(je,de,ge,S);if(Ee(F),!F){w.resetFields();return}const R=await pt.getMetric(f.data.level,f.data.id,F.id);w.setFieldsValue({population:(R==null?void 0:R.population)??null,area_km2:(R==null?void 0:R.area_km2)??null,grdp:(R==null?void 0:R.grdp)??null,total_revenue:(R==null?void 0:R.total_revenue)??null})}catch(F){const R=F instanceof Error?F.message:"Kh√¥ng th·ªÉ t·∫£i s·ªë li·ªáu.";C.error(R)}finally{W(!1)}}},[je,S,ge,de,w,f]);d.useEffect(()=>{ve()},[ve]);const ss=async()=>{var F,R,Ve,Se,ds,Qs;if(f){if(!te){C.warning("B·∫°n kh√¥ng c√≥ quy·ªÅn c·∫≠p nh·∫≠t m·ª•c n√†y.");return}try{const We=await ie.validateFields();if(f.level==="province"){const Z=await ga.updateProvince(f.data.id,{code:(F=We.code)==null?void 0:F.trim(),name:(R=We.name)==null?void 0:R.trim()}),oe={...f,title:`${Z.name} (${Z.code})`,data:{...f.data,code:Z.code,name:Z.name}};P(oe)}else{const Z=await ga.updateWard(f.data.id,{code:(Ve=We.code)==null?void 0:Ve.trim(),name:(Se=We.name)==null?void 0:Se.trim(),area:((ds=We.area)==null?void 0:ds.trim())||null,officer:((Qs=We.officer)==null?void 0:Qs.trim())||null}),oe={...f,title:`${Z.name} (${Z.code})`,data:{...f.data,code:Z.code,name:Z.name,area:Z.area??null,officer:Z.officer??null}};P(oe)}C.success("ƒê√£ c·∫≠p nh·∫≠t d·ªØ li·ªáu h√†nh ch√≠nh."),await ne()}catch(We){const Z=We instanceof Error?We.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t.";C.error(Z)}}},ms=async()=>{var F,R,Ve,Se,ds,Qs,We,Z;if(f){if(!te){C.warning("B·∫°n kh√¥ng c√≥ quy·ªÅn c·∫≠p nh·∫≠t profile.");return}try{const oe=await Ne.validateFields();let k=null;if((F=oe.news_config)!=null&&F.trim())try{k=JSON.parse(oe.news_config)}catch{C.error("C·∫•u h√¨nh tin t·ª©c ph·∫£i l√† JSON h·ª£p l·ªá.");return}await pl.upsertProfile(f.data.level,f.data.id,{headline:((R=oe.headline)==null?void 0:R.trim())||null,summary:((Ve=oe.summary)==null?void 0:Ve.trim())||null,homepage_url:((Se=oe.homepage_url)==null?void 0:Se.trim())||null,banner_url:((ds=oe.banner_url)==null?void 0:ds.trim())||null,thumbnail_url:((Qs=oe.thumbnail_url)==null?void 0:Qs.trim())||null,news_config:k,seo_title:((We=oe.seo_title)==null?void 0:We.trim())||null,seo_description:((Z=oe.seo_description)==null?void 0:Z.trim())||null,tags:oe.tags??[],status:oe.status??"active"}),C.success("ƒê√£ l∆∞u profile.")}catch(oe){const k=oe instanceof Error?oe.message:"Kh√¥ng th·ªÉ l∆∞u profile.";C.error(k)}}},as=async()=>{if(f){if(!te){C.warning("B·∫°n kh√¥ng c√≥ quy·ªÅn c·∫≠p nh·∫≠t s·ªë li·ªáu.");return}try{const F=await w.validateFields(),R=await pt.ensurePeriod(je,de,ge,S);Ee(R),await pt.upsertMetric(f.data.level,f.data.id,R.id,{population:F.population??null,area_km2:F.area_km2??null,grdp:F.grdp??null,total_revenue:F.total_revenue??null}),C.success("ƒê√£ l∆∞u s·ªë li·ªáu.")}catch(F){const R=F instanceof Error?F.message:"Kh√¥ng th·ªÉ l∆∞u s·ªë li·ªáu.";C.error(R)}}},ns=F=>{if(!F)return null;const R=F.center_lat,Ve=F.center_lng;return typeof R!="number"||typeof Ve!="number"?null:{lat:R,lng:Ve}},ee=F=>{if(!F)return null;let R=F;if(typeof F=="string")try{R=JSON.parse(F)}catch{return null}return typeof R=="object"&&R&&"west"in R&&"east"in R&&"south"in R&&"north"in R?{west:Number(R.west),east:Number(R.east),south:Number(R.south),north:Number(R.north)}:null},Ie=(F,R,Ve)=>{const ds=(Ve==null?void 0:Ve.west)??R-.02,Qs=(Ve==null?void 0:Ve.east)??R+.02,We=(Ve==null?void 0:Ve.south)??F-.02,Z=(Ve==null?void 0:Ve.north)??F+.02;return`https://www.openstreetmap.org/export/embed.html?bbox=${[ds,We,Qs,Z].join(",")}&layer=mapnik&marker=${F},${R}`},Ge=()=>{f&&(_.setFieldsValue({lat:(me==null?void 0:me.center_lat)??null,lng:(me==null?void 0:me.center_lng)??null}),L(!0))},Es=async()=>{if(f){if(!te){C.warning("B·∫°n kh√¥ng c√≥ quy·ªÅn c·∫≠p nh·∫≠t t·ªça ƒë·ªô.");return}try{const F=await _.validateFields();ye(!0),await ga.upsertCoordinates(f.data.level,f.data.id,Number(F.lat),Number(F.lng)),C.success("ƒê√£ c·∫≠p nh·∫≠t t·ªça ƒë·ªô."),L(!1),await De()}catch(F){const R=F instanceof Error?F.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t t·ªça ƒë·ªô.";C.error(R)}finally{ye(!1)}}};return e.jsxDEV(es,{permission:"sa.masterdata.jurisdiction.read",children:[e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"D·ªØ li·ªáu n·ªÅn"},{label:"Danh m·ª•c h√†nh ch√≠nh"}],title:"Danh m·ª•c h√†nh ch√≠nh",subtitle:"Qu·∫£n l√Ω t·ªânh/TP v√† ph∆∞·ªùng/x√£ theo m√¥ h√¨nh 2 c·∫•p"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:636,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 pb-8",children:e.jsxDEV(Pa,{gutter:16,children:[e.jsxDEV(Ns,{flex:"360px",children:e.jsxDEV(ps,{title:"C√¢y ƒë·ªãa b√†n",bodyStyle:{minHeight:520},children:a?e.jsxDEV("div",{style:{display:"flex",justifyContent:"center",padding:24},children:e.jsxDEV(za,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:653,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:652,columnNumber:19},this):i.length===0?e.jsxDEV(ra,{description:"Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªãa b√†n trong ph·∫°m vi."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:656,columnNumber:19},this):e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(re,{placeholder:"T√¨m t·ªânh/TP ho·∫∑c ph∆∞·ªùng/x√£...",value:u,onChange:F=>o(F.target.value),loading:p},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:659,columnNumber:21},this),e.jsxDEV(st,{treeData:ae,loadData:F=>I(F),selectedKeys:f?[f.key]:[],expandedKeys:g,autoExpandParent:b,onExpand:F=>{v(F),V(!1)},onSelect:(F,R)=>se(R.node)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:665,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:658,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:650,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:649,columnNumber:13},this),e.jsxDEV(Ns,{flex:"auto",children:e.jsxDEV(ps,{title:"Chi ti·∫øt ƒë·ªãa b√†n",bodyStyle:{minHeight:520},children:f?e.jsxDEV(ri,{items:[{key:"admin",label:"H√†nh ch√≠nh",children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[!te&&e.jsxDEV(Is,{type:"warning",showIcon:!0,message:"B·∫°n kh√¥ng c√≥ quy·ªÅn ch·ªânh s·ª≠a m·ª•c n√†y."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:694,columnNumber:31},this),e.jsxDEV(Ye,{bordered:!0,size:"small",column:2,children:[e.jsxDEV(Ye.Item,{label:"C·∫•p",children:e.jsxDEV(Re,{color:f.level==="province"?"blue":"green",children:f.level==="province"?"T·ªânh/TP":"Ph∆∞·ªùng/X√£"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:702,columnNumber:33},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:701,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"M√£",children:f.data.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:706,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"T√™n",children:f.data.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:709,columnNumber:31},this),e.jsxDEV(Ye.Item,{label:"T·ªânh/TP",children:f.level==="ward"&&((x==null?void 0:x.name)||f.data.province_id)||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:712,columnNumber:31},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:700,columnNumber:29},this),e.jsxDEV(O,{layout:"vertical",form:ie,children:[e.jsxDEV(O.Item,{name:"code",label:"M√£ ƒë·ªãa b√†n",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p m√£."}],children:e.jsxDEV(re,{disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:725,columnNumber:33},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:720,columnNumber:31},this),e.jsxDEV(O.Item,{name:"name",label:"T√™n ƒë·ªãa b√†n",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p t√™n."}],children:e.jsxDEV(re,{disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:732,columnNumber:33},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:727,columnNumber:31},this),f.level==="ward"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(O.Item,{name:"area",label:"Khu v·ª±c",children:e.jsxDEV(re,{disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:737,columnNumber:37},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:736,columnNumber:35},this),e.jsxDEV(O.Item,{name:"officer",label:"C√°n b·ªô ph·ª• tr√°ch",children:e.jsxDEV(re,{disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:740,columnNumber:37},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:739,columnNumber:35},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:735,columnNumber:33},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(Fa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:746,columnNumber:39},this),onClick:ss,disabled:!te,children:"L∆∞u th√¥ng tin"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:744,columnNumber:31},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:719,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:692,columnNumber:27},this)},{key:"profile",label:"Profile/N·ªôi dung",children:e.jsxDEV(O,{layout:"vertical",form:Ne,children:j?e.jsxDEV("div",{style:{display:"flex",justifyContent:"center",padding:24},children:e.jsxDEV(za,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:763,columnNumber:33},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:762,columnNumber:31},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(O.Item,{name:"headline",label:"Ti√™u ƒë·ªÅ",children:e.jsxDEV(re,{disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:768,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:767,columnNumber:33},this),e.jsxDEV(O.Item,{name:"summary",label:"T√≥m t·∫Øt",children:e.jsxDEV(re.TextArea,{rows:3,disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:771,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:770,columnNumber:33},this),e.jsxDEV(O.Item,{name:"homepage_url",label:"Trang ch·ªß",children:e.jsxDEV(re,{disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:774,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:773,columnNumber:33},this),e.jsxDEV(O.Item,{name:"banner_url",label:"Banner",children:e.jsxDEV(re,{disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:777,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:776,columnNumber:33},this),e.jsxDEV(O.Item,{name:"thumbnail_url",label:"Thumbnail",children:e.jsxDEV(re,{disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:780,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:779,columnNumber:33},this),e.jsxDEV(O.Item,{name:"news_config",label:"C·∫•u h√¨nh tin t·ª©c (JSON)",children:e.jsxDEV(re.TextArea,{rows:4,disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:783,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:782,columnNumber:33},this),e.jsxDEV(O.Item,{name:"seo_title",label:"SEO Title",children:e.jsxDEV(re,{disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:786,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:785,columnNumber:33},this),e.jsxDEV(O.Item,{name:"seo_description",label:"SEO Description",children:e.jsxDEV(re.TextArea,{rows:3,disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:789,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:788,columnNumber:33},this),e.jsxDEV(O.Item,{name:"tags",label:"Tags",children:e.jsxDEV(_e,{mode:"tags",disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:792,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:791,columnNumber:33},this),e.jsxDEV(O.Item,{name:"status",label:"Tr·∫°ng th√°i",children:e.jsxDEV(_e,{options:[{value:"active",label:"Ho·∫°t ƒë·ªông"},{value:"inactive",label:"Ng·ª´ng"}],disabled:!te},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:795,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:794,columnNumber:33},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(Fa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:805,columnNumber:41},this),onClick:ms,disabled:!te,children:"L∆∞u profile"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:803,columnNumber:33},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:766,columnNumber:31},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:760,columnNumber:27},this)},{key:"metrics",label:"S·ªë li·ªáu",children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(_e,{value:je,options:Hg,onChange:F=>Y(F)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:822,columnNumber:31},this),e.jsxDEV(cs,{min:2e3,max:2100,value:de,onChange:F=>Te(F??vl),placeholder:"NƒÉm"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:827,columnNumber:31},this),je==="month"&&e.jsxDEV(cs,{min:1,max:12,value:S,onChange:F=>B(F??1),placeholder:"Th√°ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:835,columnNumber:33},this),je==="quarter"&&e.jsxDEV(cs,{min:1,max:4,value:ge,onChange:F=>be(F??1),placeholder:"Qu√Ω"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:844,columnNumber:33},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:821,columnNumber:29},this),xe&&e.jsxDEV(Is,{type:"info",showIcon:!0,message:`ƒêang nh·∫≠p d·ªØ li·ªáu cho: ${xe.label}`},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:855,columnNumber:31},this),z?e.jsxDEV("div",{style:{display:"flex",justifyContent:"center",padding:24},children:e.jsxDEV(za,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:864,columnNumber:33},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:863,columnNumber:31},this):e.jsxDEV(O,{layout:"vertical",form:w,children:[e.jsxDEV(O.Item,{name:"population",label:"D√¢n s·ªë",children:e.jsxDEV(cs,{style:{width:"100%"},min:0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:869,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:868,columnNumber:33},this),e.jsxDEV(O.Item,{name:"area_km2",label:"Di·ªán t√≠ch (km¬≤)",children:e.jsxDEV(cs,{style:{width:"100%"},min:0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:872,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:871,columnNumber:33},this),e.jsxDEV(O.Item,{name:"grdp",label:"GRDP",children:e.jsxDEV(cs,{style:{width:"100%"},min:0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:875,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:874,columnNumber:33},this),e.jsxDEV(O.Item,{name:"total_revenue",label:"T·ªïng doanh thu",children:e.jsxDEV(cs,{style:{width:"100%"},min:0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:878,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:877,columnNumber:33},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(Fa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:882,columnNumber:41},this),onClick:as,disabled:!te,children:"L∆∞u s·ªë li·ªáu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:880,columnNumber:33},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:867,columnNumber:31},this),e.jsxDEV(Is,{type:"warning",showIcon:!0,message:"S·ªë li·ªáu theo ng√†nh h√†ng s·∫Ω tri·ªÉn khai ·ªü sprint sau."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:891,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:820,columnNumber:27},this)},{key:"map",label:"Map Preview",children:X?e.jsxDEV("div",{style:{display:"flex",justifyContent:"center",padding:24},children:e.jsxDEV(za,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:904,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:903,columnNumber:27},this):me?e.jsxDEV(J,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsxDEV(Le.Text,{children:["Trung t√¢m: ",me.center_lat??"-",", ",me.center_lng??"-"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:908,columnNumber:29},this),e.jsxDEV(Le.Text,{children:["Bounds: ",me.bounds?JSON.stringify(me.bounds):"-"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:911,columnNumber:29},this),e.jsxDEV(Le.Text,{children:["Di·ªán t√≠ch: ",me.area??"-"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:914,columnNumber:29},this),e.jsxDEV(Le.Text,{children:["C√°n b·ªô ph·ª• tr√°ch: ",me.officer??"-"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:917,columnNumber:29},this),ns(me)?e.jsxDEV("div",{style:{width:"100%",height:360,borderRadius:8,overflow:"hidden",border:"1px solid #e5e7eb"},children:e.jsxDEV("iframe",{title:"OpenStreetMap",width:"100%",height:"100%",style:{border:0},loading:"lazy",src:Ie(ns(me).lat,ns(me).lng,ee(me.bounds))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:930,columnNumber:33},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:921,columnNumber:31},this):e.jsxDEV(Is,{type:"warning",showIcon:!0,message:"Ch∆∞a c√≥ t·ªça ƒë·ªô ƒë·ªÉ hi·ªÉn th·ªã b·∫£n ƒë·ªì."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:944,columnNumber:31},this),e.jsxDEV(q,{type:"link",onClick:Ge,children:ns(me)?"C·∫≠p nh·∫≠t t·ªça ƒë·ªô":"Nh·∫≠p t·ªça ƒë·ªô"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:950,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:907,columnNumber:27},this):e.jsxDEV(ra,{description:"Ch∆∞a c√≥ d·ªØ li·ªáu t·ªça ƒë·ªô."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:955,columnNumber:27},this)}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:686,columnNumber:19},this):e.jsxDEV(ra,{description:"Ch·ªçn m·ªôt ƒë·ªãa b√†n b√™n tr√°i ƒë·ªÉ xem chi ti·∫øt."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:684,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:682,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:681,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:648,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:647,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:635,columnNumber:7},this),e.jsxDEV(us,{title:"C·∫≠p nh·∫≠t t·ªça ƒë·ªô",open:H,onCancel:()=>L(!1),onOk:Es,okText:"L∆∞u",cancelText:"H·ªßy",confirmLoading:G,children:e.jsxDEV(O,{layout:"vertical",form:_,children:[e.jsxDEV(O.Item,{name:"lat",label:"Vƒ© ƒë·ªô",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p vƒ© ƒë·ªô."}],children:e.jsxDEV(cs,{style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:982,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:977,columnNumber:11},this),e.jsxDEV(O.Item,{name:"lng",label:"Kinh ƒë·ªô",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p kinh ƒë·ªô."}],children:e.jsxDEV(cs,{style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:989,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:984,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:976,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:967,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/AdminAreasPage.tsx",lineNumber:634,columnNumber:5},this)}const Lg=Object.freeze(Object.defineProperty({__proto__:null,default:Pg},Symbol.toStringTag,{value:"Module"})),$a=s=>({id:s.id??s._id,key:s.key,name:s.name,description:s.description??null,group:s.group,is_hierarchical:s.is_hierarchical??null,editable_scope:s.editable_scope??null,status:s.status??null,sort_order:s.sort_order??null,meta:s.meta??null,created_at:s.created_at??null,updated_at:s.updated_at??null,deleted_at:s.deleted_at??null,item_count:s.item_count==null?void 0:Number(s.item_count)}),jg=s=>s==="all"?null:s==="active"?["active","ACTIVE"]:["inactive","INACTIVE"],na={async listCatalogsByGroup(s){var r;let a=M.from("v_catalogs_with_item_count").select("*").eq("group",s.group).is("deleted_at",null).order("sort_order",{ascending:!0}).order("name",{ascending:!0});const t=(r=s.search)==null?void 0:r.trim();t&&(a=a.or(`key.ilike.%${t}%,name.ilike.%${t}%,description.ilike.%${t}%`));const i=jg(s.status??"all");i&&(a=a.in("status",i));const{data:l,error:n}=await a;if(n)throw new Error(`catalog select failed: ${n.message}`);return(l||[]).map($a)},async getCatalogById(s){const{data:a,error:t}=await M.from("catalogs").select("*").eq("_id",s).is("deleted_at",null).maybeSingle();if(t)throw new Error(`catalog select failed: ${t.message}`);return a?$a(a):null},async getCatalogByKey(s){const{data:a,error:t}=await M.from("catalogs").select("*").eq("key",s).maybeSingle();if(t)throw new Error(`catalog select failed: ${t.message}`);return a?$a(a):null},async createCatalog(s){const{data:a,error:t}=await M.from("catalogs").insert([{...s,meta:s.meta??{}}]).select("*").single();if(t)throw new Error(`catalog insert failed: ${t.message}`);return $a(a)},async updateCatalog(s,a){const{data:t,error:i}=await M.from("catalogs").update({...a,...a.meta?{meta:a.meta}:{}}).eq("_id",s).select("*").single();if(i)throw new Error(`catalog update failed: ${i.message}`);return $a(t)},async setCatalogStatus(s,a){return na.updateCatalog(s,{status:a})}},gt=s=>({id:s.id??s._id,catalog_id:s.catalog_id,parent_id:s.parent_id??null,code:s.code,name:s.name,description:s.description??null,icon:s.icon??null,badge_color:s.badge_color??null,is_default:s.is_default??null,status:s.status??null,sort_order:s.sort_order??null,meta:s.meta??null,created_at:s.created_at??null,updated_at:s.updated_at??null,deleted_at:s.deleted_at??null}),Qg=s=>s==="all"?null:s==="active"?["active","ACTIVE"]:["inactive","INACTIVE"],Bs={async listItems(s){var m;const a=s.page??1,t=s.pageSize??20,i=(a-1)*t,l=i+t-1;let n=M.from("catalog_items").select("*",{count:"exact"}).eq("catalog_id",s.catalogId).is("deleted_at",null).order("sort_order",{ascending:!0}).order("name",{ascending:!0}).range(i,l);const r=(m=s.search)==null?void 0:m.trim();r&&(n=n.or(`code.ilike.%${r}%,name.ilike.%${r}%`));const u=Qg(s.status??"all");u&&(n=n.in("status",u));const{data:o,error:p,count:h}=await n;if(p)throw new Error(`catalog_item select failed: ${p.message}`);return{data:(o||[]).map(gt),total:h??0}},async listItemsByCatalog(s){const{data:a,error:t}=await M.from("catalog_items").select("*").eq("catalog_id",s).is("deleted_at",null).order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(t)throw new Error(`catalog_item select failed: ${t.message}`);return(a||[]).map(gt)},async createItem(s){const{data:a,error:t}=await M.from("catalog_items").insert([{...s,is_default:s.is_default??!1,sort_order:s.sort_order??0,meta:s.meta??{}}]).select("*").single();if(t)throw new Error(`catalog_item insert failed: ${t.message}`);return gt(a)},async updateItem(s,a){const{data:t,error:i}=await M.from("catalog_items").update({...a,...a.meta?{meta:a.meta}:{}}).eq("_id",s).select("*").single();if(i)throw new Error(`catalog_item update failed: ${i.message}`);return gt(t)},async softDeleteItem(s){const{error:a}=await M.from("catalog_items").update({deleted_at:new Date().toISOString()}).eq("_id",s);if(a)throw new Error(`catalog_item delete failed: ${a.message}`)},async setItemStatus(s,a){return Bs.updateItem(s,{status:a})}},Zs=s=>s?String(s).toLowerCase()==="active"?"Ho·∫°t ƒë·ªông":"Ng·ª´ng":"Kh√¥ng x√°c ƒë·ªãnh",bl=s=>{const a=String(s??"").toLowerCase();return a==="active"?"ACTIVE":a==="inactive"?"INACTIVE":s??"ACTIVE"},qt=s=>String(s??"").toLowerCase()==="active"?"green":"red",Vl=s=>String(s??"").toLowerCase()==="active"?String(s)==="ACTIVE"?"INACTIVE":"inactive":String(s)==="INACTIVE"?"ACTIVE":"active",_g=s=>{const a=s==null?void 0:s.trim();if(!a)return null;try{const t=JSON.parse(a);if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Metadata ph·∫£i l√† object JSON.");return t}catch{throw new Error("Metadata kh√¥ng h·ª£p l·ªá. Vui l√≤ng nh·∫≠p JSON object.")}};function Ct({group:s,title:a,description:t}){const{hasPermission:i}=os(),[l,n]=_l(),r=l.get("catalogId"),[u,o]=d.useState(!1),[p,h]=d.useState([]),m=d.useRef(null),[c,N]=d.useState(""),[g,v]=d.useState(""),[b,V]=d.useState(""),[D,f]=d.useState("all"),[P,x]=d.useState(r),[y,Q]=d.useState(null),[U,j]=d.useState(!1),[A,z]=d.useState("create"),[W,X]=d.useState(null),[fe,me]=d.useState(!1),[ue]=O.useForm(),[xe,Ee]=d.useState(!1),[je,Y]=d.useState([]),[de,Te]=d.useState(0),S=d.useRef(null),[B,ge]=d.useState(""),[be,ie]=d.useState(""),[Ne,w]=d.useState(""),[_,H]=d.useState("all"),[L,G]=d.useState(1),[ye,He]=d.useState(10),[le,te]=d.useState(!1),[Ce,ne]=d.useState("create"),[ae,T]=d.useState(null),[I,se]=d.useState(!1),[he]=O.useForm(),De=i("sa.masterdata.catalog.create"),ve=i("sa.masterdata.catalog.update"),ss=i("sa.masterdata.catalog.delete");d.useEffect(()=>{x(r)},[r]);const ms=d.useCallback(async()=>{o(!0);try{const k=await na.listCatalogsByGroup({group:s,search:b,status:D});h(k)}catch(k){const $=k instanceof Error?k.message:"Kh√¥ng th·ªÉ t·∫£i danh m·ª•c.";C.error($)}finally{o(!1)}},[b,D,s]);d.useEffect(()=>{ms()},[ms]);const as=d.useCallback(async()=>{if(!P){Q(null);return}const k=p.find($=>$.id===P);k&&Q(k);try{const $=await na.getCatalogById(P);if($&&String($.group||"").toUpperCase()!==s){const pe=new URLSearchParams(l);pe.delete("catalogId"),n(pe),Q(null),C.warning("Danh m·ª•c kh√¥ng thu·ªôc nh√≥m hi·ªán t·∫°i.");return}Q($)}catch($){const pe=$ instanceof Error?$.message:"Kh√¥ng th·ªÉ t·∫£i danh m·ª•c ƒë√£ ch·ªçn.";C.error(pe)}},[p,P,s,l,n]);d.useEffect(()=>{as()},[as]);const ns=d.useCallback(async()=>{if(!P){Y([]),Te(0);return}Ee(!0);try{const k=await Bs.listItems({catalogId:P,search:Ne,status:_,page:L,pageSize:ye});Y(k.data),Te(k.total)}catch(k){const $=k instanceof Error?k.message:"Kh√¥ng th·ªÉ t·∫£i m·ª•c danh m·ª•c.";C.error($)}finally{Ee(!1)}},[L,ye,Ne,_,P]);d.useEffect(()=>{ns()},[ns]),d.useEffect(()=>{G(1)},[Ne,_,P]);const ee=k=>{const $=new URLSearchParams(l);$.set("catalogId",k),n($)},Ie=()=>{z("create"),X(null),ue.resetFields(),ue.setFieldsValue({status:"ACTIVE",sort_order:0}),j(!0)},Ge=k=>{z("edit"),X(k),ue.resetFields(),ue.setFieldsValue({key:k.key,name:k.name,description:k.description??"",status:bl(k.status),sort_order:k.sort_order??0}),j(!0)},Es=()=>{fe||j(!1)},ta=async()=>{var k,$;try{me(!0);const pe=await ue.validateFields();if(A==="create"){if(await na.getCatalogByKey(pe.key.trim())){C.error("Kh√≥a danh m·ª•c ƒë√£ t·ªìn t·∫°i."),me(!1);return}await na.createCatalog({key:pe.key.trim(),name:pe.name.trim(),description:((k=pe.description)==null?void 0:k.trim())||null,group:s,status:pe.status??"ACTIVE",sort_order:pe.sort_order??0,is_hierarchical:!1,editable_scope:s.toLowerCase()}),C.success("ƒê√£ t·∫°o danh m·ª•c.")}else W&&(await na.updateCatalog(W.id,{name:pe.name.trim(),description:(($=pe.description)==null?void 0:$.trim())||null,status:pe.status??W.status??"ACTIVE",sort_order:pe.sort_order??W.sort_order??0,is_hierarchical:W.is_hierarchical??!1,editable_scope:s.toLowerCase()}),C.success("ƒê√£ c·∫≠p nh·∫≠t danh m·ª•c."));j(!1),await ms(),await as()}catch(pe){const Me=pe instanceof Error?pe.message:"Kh√¥ng th·ªÉ l∆∞u danh m·ª•c.";C.error(Me)}finally{me(!1)}},ia=async k=>{try{const $=Vl(k.status);await na.setCatalogStatus(k.id,$),C.success("ƒê√£ c·∫≠p nh·∫≠t tr·∫°ng th√°i danh m·ª•c."),await ms(),await as()}catch($){const pe=$ instanceof Error?$.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i danh m·ª•c.";C.error(pe)}},F=k=>({items:[{key:"edit",label:"S·ª≠a danh m·ª•c",onClick:()=>Ge(k)}]}),R=()=>{ne("create"),T(null),he.resetFields(),he.setFieldsValue({status:"ACTIVE",sort_order:0}),te(!0)},Ve=k=>{var $,pe;ne("edit"),T(k),he.resetFields(),he.setFieldsValue({code:k.code,name:k.name,value:typeof(($=k.meta)==null?void 0:$.value)=="string"?k.meta.value:"",sort_order:k.sort_order??0,status:bl(k.status),badge_color:k.badge_color??((pe=k.meta)==null?void 0:pe.badge_color)??""}),te(!0)},Se=()=>{I||te(!1)},ds=async()=>{var k,$;if(P)try{se(!0);const pe=await he.validateFields(),Me=_g(pe.meta_text),Xe={...(ae==null?void 0:ae.meta)??{},...Me??{}},Hs=((k=pe.value)==null?void 0:k.trim())??"";Hs?Xe.value=Hs:delete Xe.value;const Ia=(($=pe.badge_color)==null?void 0:$.trim())??"";Ia?Xe.badge_color=Ia:delete Xe.badge_color,Ce==="create"?(await Bs.createItem({catalog_id:P,code:pe.code.trim(),name:pe.name.trim(),sort_order:pe.sort_order??0,status:pe.status??"ACTIVE",badge_color:Ia||null,meta:Xe}),C.success("ƒê√£ th√™m m·ª•c.")):ae&&(await Bs.updateItem(ae.id,{code:pe.code.trim(),name:pe.name.trim(),sort_order:pe.sort_order??ae.sort_order??0,status:pe.status??ae.status??"ACTIVE",badge_color:Ia||null,meta:Xe}),C.success("ƒê√£ c·∫≠p nh·∫≠t m·ª•c.")),te(!1),await ns()}catch(pe){const Me=pe instanceof Error?pe.message:"Kh√¥ng th·ªÉ l∆∞u m·ª•c.";C.error(Me)}finally{se(!1)}},Qs=async k=>{try{const $=Vl(k.status);await Bs.setItemStatus(k.id,$),C.success("ƒê√£ c·∫≠p nh·∫≠t tr·∫°ng th√°i m·ª•c."),await ns()}catch($){const pe=$ instanceof Error?$.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i m·ª•c.";C.error(pe)}},We=async k=>{try{await Bs.softDeleteItem(k.id),C.success("ƒê√£ ng·ª´ng m·ª•c."),await ns()}catch($){const pe=$ instanceof Error?$.message:"Kh√¥ng th·ªÉ ng·ª´ng m·ª•c.";C.error(pe)}},Z=k=>({items:[{key:"edit",label:"S·ª≠a m·ª•c",onClick:()=>Ve(k)}]}),oe=k=>{const $=k.meta??{},pe=k.badge_color??(typeof $.badge_color=="string"?$.badge_color:void 0)??(typeof $.badgeColor=="string"?$.badgeColor:void 0);if(!pe)return"-";const Me=(typeof $.badge_text=="string"?$.badge_text:void 0)??(typeof $.badgeLabel=="string"?$.badgeLabel:void 0)??"Badge";return e.jsxDEV(Re,{color:pe,children:Me},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:477,columnNumber:12},this)};return e.jsxDEV(es,{permission:"sa.masterdata.catalog.read",children:[e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"D·ªØ li·ªáu n·ªÅn"},{label:a}],title:a,subtitle:t},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:483,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 pb-8",children:e.jsxDEV(Pa,{gutter:16,children:[e.jsxDEV(Ns,{xs:24,xl:10,xxl:9,children:e.jsxDEV(ps,{title:"Danh s√°ch danh m·ª•c",extra:e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(qs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:502,columnNumber:27},this),onClick:Ie,disabled:!De,children:"Th√™m danh m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:500,columnNumber:19},this),children:e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(re,{placeholder:"T√¨m theo kh√≥a, t√™n danh m·ª•c...",value:b,onChange:k=>V(k.target.value),allowClear:!0,style:{width:240}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:512,columnNumber:21},this),e.jsxDEV(_e,{value:D,onChange:k=>f(k),style:{width:160},options:[{value:"all",label:"T·∫•t c·∫£ tr·∫°ng th√°i"},{value:"active",label:"Ho·∫°t ƒë·ªông"},{value:"inactive",label:"Ng·ª´ng"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:519,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:511,columnNumber:19},this),e.jsxDEV(at,{rowKey:"id",loading:u,dataSource:p,pagination:!1,size:"small",tableLayout:"fixed",scroll:{x:900,y:520},rowClassName:k=>k.id===P?"ant-table-row-selected":"",onRow:k=>({onClick:()=>ee(k.id),style:{cursor:"pointer"}}),columns:[{title:"Kh√≥a",dataIndex:"key",key:"key",width:160,render:k=>e.jsxDEV("span",{style:{fontWeight:600},children:k},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:552,columnNumber:52},this),sorter:(k,$)=>k.key.localeCompare($.key,"vi"),ellipsis:!0,...Cs("key",{searchText:c,searchedColumn:g,setSearchText:N,setSearchedColumn:v,inputRef:m},{placeholder:"T√¨m kh√≥a"})},{title:"T√™n danh m·ª•c",dataIndex:"name",key:"name",width:200,ellipsis:!0,sorter:(k,$)=>k.name.localeCompare($.name,"vi"),...Cs("name",{searchText:c,searchedColumn:g,setSearchText:N,setSearchedColumn:v,inputRef:m},{placeholder:"T√¨m t√™n danh m·ª•c"})},{title:"M√¥ t·∫£",dataIndex:"description",key:"description",render:k=>k||"-",width:220,ellipsis:!0,...Cs("description",{searchText:c,searchedColumn:g,setSearchText:N,setSearchedColumn:v,inputRef:m},{placeholder:"T√¨m m√¥ t·∫£"})},{title:"S·ªë m·ª•c",dataIndex:"item_count",key:"item_count",width:90,render:k=>k??"‚Äî",sorter:(k,$)=>(k.item_count??0)-($.item_count??0),align:"center"},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:120,render:k=>e.jsxDEV(Re,{color:qt(k),children:Zs(k)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:623,columnNumber:27},this),align:"center"},{title:"Thao t√°c",key:"actions",width:150,fixed:"right",render:(k,$)=>e.jsxDEV(J,{children:[e.jsxDEV(ze,{title:"S·ª≠a",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(oa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:638,columnNumber:39},this),onClick:()=>Ge($),disabled:!ve},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:635,columnNumber:31},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:634,columnNumber:29},this),e.jsxDEV(ze,{title:Zs($.status)==="Ho·∫°t ƒë·ªông"?"Ng·ª´ng":"K√≠ch ho·∫°t",children:e.jsxDEV(ws,{title:Zs($.status)==="Ho·∫°t ƒë·ªông"?"Ng·ª´ng danh m·ª•c n√†y?":"K√≠ch ho·∫°t danh m·ª•c n√†y?",okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",onConfirm:()=>ia($),disabled:!ss,children:e.jsxDEV(q,{type:"text",size:"small",danger:Zs($.status)==="Ho·∫°t ƒë·ªông",icon:Zs($.status)==="Ho·∫°t ƒë·ªông"?e.jsxDEV(ha,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:663,columnNumber:39},this):e.jsxDEV(da,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:665,columnNumber:39},this),disabled:!ss},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:657,columnNumber:33},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:646,columnNumber:31},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:643,columnNumber:29},this),e.jsxDEV(Ya,{menu:F($),children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(et,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:673,columnNumber:70},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:673,columnNumber:31},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:672,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:633,columnNumber:27},this)}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:531,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:510,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:497,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:496,columnNumber:13},this),e.jsxDEV(Ns,{xs:24,xl:14,xxl:15,children:e.jsxDEV(ps,{title:"Chi ti·∫øt danh m·ª•c",extra:e.jsxDEV(J,{children:[e.jsxDEV(q,{icon:e.jsxDEV(Qa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:690,columnNumber:29},this),onClick:()=>ns(),disabled:!P,children:"L√†m m·ªõi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:689,columnNumber:21},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(qs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:698,columnNumber:29},this),onClick:R,disabled:!P||!De,children:"Th√™m m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:696,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:688,columnNumber:19},this),children:y?e.jsxDEV(J,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsxDEV("div",{children:[e.jsxDEV(J,{align:"center",wrap:!0,children:[e.jsxDEV(Le.Title,{level:5,style:{margin:0},children:y.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:713,columnNumber:25},this),e.jsxDEV(Re,{children:y.key},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:716,columnNumber:25},this),e.jsxDEV(Re,{color:qt(y.status),children:Zs(y.status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:717,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:712,columnNumber:23},this),e.jsxDEV(Le.Text,{type:"secondary",children:y.description||"Ch∆∞a c√≥ m√¥ t·∫£."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:721,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:711,columnNumber:21},this),e.jsxDEV(J,{wrap:!0,children:[e.jsxDEV(re,{placeholder:"T√¨m m·ª•c theo m√£, t√™n...",value:Ne,onChange:k=>w(k.target.value),allowClear:!0,style:{width:240}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:727,columnNumber:23},this),e.jsxDEV(_e,{value:_,onChange:k=>H(k),style:{width:160},options:[{value:"all",label:"T·∫•t c·∫£ tr·∫°ng th√°i"},{value:"active",label:"Ho·∫°t ƒë·ªông"},{value:"inactive",label:"Ng·ª´ng"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:734,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:726,columnNumber:21},this),e.jsxDEV(at,{rowKey:"id",loading:xe,dataSource:je,pagination:{current:L,pageSize:ye,total:de,onChange:(k,$)=>{G(k),He($)}},tableLayout:"fixed",columns:[{title:"M√£",dataIndex:"code",key:"code",width:140,sorter:(k,$)=>k.code.localeCompare($.code,"vi"),ellipsis:!0,...Cs("code",{searchText:B,searchedColumn:be,setSearchText:ge,setSearchedColumn:ie,inputRef:S},{placeholder:"T√¨m m√£ m·ª•c"})},{title:"T√™n m·ª•c",dataIndex:"name",key:"name",ellipsis:!0,sorter:(k,$)=>k.name.localeCompare($.name,"vi"),...Cs("name",{searchText:B,searchedColumn:be,setSearchText:ge,setSearchedColumn:ie,inputRef:S},{placeholder:"T√¨m t√™n m·ª•c"})},{title:"Gi√° tr·ªã",key:"value",ellipsis:!0,render:(k,$)=>{var pe;return typeof((pe=$.meta)==null?void 0:pe.value)=="string"?$.meta.value:"-"}},{title:"Th·ª© t·ª±",dataIndex:"sort_order",key:"sort_order",width:90,sorter:(k,$)=>(k.sort_order??0)-($.sort_order??0),align:"center"},{title:"Badge",key:"badge",width:120,render:(k,$)=>oe($)},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:120,render:k=>e.jsxDEV(Re,{color:qt(k),children:Zs(k)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:828,columnNumber:29},this),align:"center"},{title:"Thao t√°c",key:"actions",width:200,fixed:"right",render:(k,$)=>e.jsxDEV(J,{children:[e.jsxDEV(ze,{title:"S·ª≠a",children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(oa,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:843,columnNumber:41},this),onClick:()=>Ve($),disabled:!ve},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:840,columnNumber:33},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:839,columnNumber:31},this),e.jsxDEV(ze,{title:Zs($.status)==="Ho·∫°t ƒë·ªông"?"Ng·ª´ng":"K√≠ch ho·∫°t",children:e.jsxDEV(ws,{title:Zs($.status)==="Ho·∫°t ƒë·ªông"?"Ng·ª´ng m·ª•c n√†y?":"K√≠ch ho·∫°t m·ª•c n√†y?",okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",onConfirm:()=>Qs($),disabled:!ve,children:e.jsxDEV(q,{type:"text",size:"small",danger:Zs($.status)==="Ho·∫°t ƒë·ªông",icon:Zs($.status)==="Ho·∫°t ƒë·ªông"?e.jsxDEV(ha,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:870,columnNumber:41},this):e.jsxDEV(da,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:872,columnNumber:41},this),disabled:!ve},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:864,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:853,columnNumber:33},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:848,columnNumber:31},this),e.jsxDEV(ze,{title:"X√≥a",children:e.jsxDEV(ws,{title:"X√≥a m·ª•c n√†y?",okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",onConfirm:()=>We($),disabled:!ss,children:e.jsxDEV(q,{type:"text",size:"small",danger:!0,icon:e.jsxDEV(ja,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:891,columnNumber:43},this),disabled:!ss},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:887,columnNumber:35},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:880,columnNumber:33},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:879,columnNumber:31},this),e.jsxDEV(Ya,{menu:Z($),children:e.jsxDEV(q,{type:"text",size:"small",icon:e.jsxDEV(et,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:897,columnNumber:72},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:897,columnNumber:33},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:896,columnNumber:31},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:838,columnNumber:29},this)}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:746,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:710,columnNumber:19},this):e.jsxDEV(ra,{description:"Ch·ªçn m·ªôt danh m·ª•c b√™n tr√°i ƒë·ªÉ xem chi ti·∫øt."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:708,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:685,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:684,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:495,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:494,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:482,columnNumber:7},this),e.jsxDEV(us,{open:U,title:A==="create"?"Th√™m danh m·ª•c":"Ch·ªânh s·ª≠a danh m·ª•c",onCancel:Es,onOk:ta,okText:"L∆∞u",cancelText:"H·ªßy",confirmLoading:fe,destroyOnClose:!0,children:e.jsxDEV(O,{layout:"vertical",form:ue,children:[e.jsxDEV(O.Item,{name:"key",label:"Kh√≥a",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p kh√≥a."}],children:e.jsxDEV(re,{disabled:A==="edit"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:928,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:923,columnNumber:11},this),e.jsxDEV(O.Item,{name:"name",label:"T√™n danh m·ª•c",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p t√™n danh m·ª•c."}],children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:935,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:930,columnNumber:11},this),e.jsxDEV(O.Item,{name:"description",label:"M√¥ t·∫£",children:e.jsxDEV(re.TextArea,{rows:3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:938,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:937,columnNumber:11},this),e.jsxDEV(O.Item,{name:"sort_order",label:"Th·ª© t·ª±",children:e.jsxDEV(cs,{min:0,style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:941,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:940,columnNumber:11},this),e.jsxDEV(O.Item,{name:"status",label:"Tr·∫°ng th√°i",initialValue:"ACTIVE",children:e.jsxDEV(_e,{options:[{value:"ACTIVE",label:"Ho·∫°t ƒë·ªông"},{value:"INACTIVE",label:"Ng·ª´ng"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:944,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:943,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:922,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:912,columnNumber:7},this),e.jsxDEV(_a,{title:Ce==="create"?"Th√™m m·ª•c":"Ch·ªânh s·ª≠a m·ª•c",placement:"right",width:420,open:le,onClose:Se,destroyOnClose:!0,extra:e.jsxDEV(J,{children:[e.jsxDEV(q,{onClick:Se,children:"H·ªßy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:963,columnNumber:13},this),e.jsxDEV(q,{type:"primary",onClick:ds,loading:I,children:"L∆∞u"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:964,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:962,columnNumber:11},this),children:e.jsxDEV(O,{layout:"vertical",form:he,children:[e.jsxDEV(O.Item,{name:"code",label:"M√£ m·ª•c",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p m√£ m·ª•c."}],children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:976,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:971,columnNumber:11},this),e.jsxDEV(O.Item,{name:"name",label:"T√™n m·ª•c",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p t√™n m·ª•c."}],children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:983,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:978,columnNumber:11},this),e.jsxDEV(O.Item,{name:"value",label:"Gi√° tr·ªã",children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:986,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:985,columnNumber:11},this),e.jsxDEV(O.Item,{name:"sort_order",label:"Th·ª© t·ª±",children:e.jsxDEV(cs,{min:0,style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:989,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:988,columnNumber:11},this),e.jsxDEV(O.Item,{name:"badge_color",label:"M√†u badge",children:e.jsxDEV(re,{placeholder:"#22c55e"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:992,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:991,columnNumber:11},this),e.jsxDEV(O.Item,{name:"meta_text",label:"Metadata (JSON)",children:e.jsxDEV(re.TextArea,{rows:4,placeholder:'VD: {"badge_text":"∆Øu ti√™n","note":"..."}'},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:995,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:994,columnNumber:11},this),e.jsxDEV(O.Item,{name:"status",label:"Tr·∫°ng th√°i",children:e.jsxDEV(_e,{options:[{value:"ACTIVE",label:"Ho·∫°t ƒë·ªông"},{value:"INACTIVE",label:"Ng·ª´ng"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:998,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:997,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:970,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:954,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:481,columnNumber:5},this)}function Cg(){return e.jsxDEV(Ct,{group:"COMMON",title:"Danh m·ª•c d√πng chung",description:"Qu·∫£n l√Ω danh m·ª•c v√† m·ª•c d√πng chung trong h·ªá th·ªëng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogsPage.tsx",lineNumber:1013,columnNumber:5},this)}const Sg=Object.freeze(Object.defineProperty({__proto__:null,CatalogsManagerPage:Ct,default:Cg},Symbol.toStringTag,{value:"Module"}));function Mg(){return e.jsxDEV(Ct,{group:"DMS",title:"Danh m·ª•c nghi·ªáp v·ª• QLTT",description:"Qu·∫£n l√Ω danh m·ª•c nghi·ªáp v·ª• QLTT trong h·ªá th·ªëng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/DmsCatalogsPage.tsx",lineNumber:7,columnNumber:5},this)}const Ig=Object.freeze(Object.defineProperty({__proto__:null,default:Mg},Symbol.toStringTag,{value:"Module"}));function Ag(){return e.jsxDEV(Ct,{group:"SYSTEM",title:"Danh m·ª•c k·ªπ thu·∫≠t",description:"Qu·∫£n l√Ω danh m·ª•c k·ªπ thu·∫≠t trong h·ªá th·ªëng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/SystemCatalogsPage.tsx",lineNumber:7,columnNumber:5},this)}const wg=Object.freeze(Object.defineProperty({__proto__:null,default:Ag},Symbol.toStringTag,{value:"Module"})),Ka=s=>s?String(s).toLowerCase()==="active"?"Ho·∫°t ƒë·ªông":"Ng·ª´ng":"Kh√¥ng x√°c ƒë·ªãnh",kg=s=>{const a=String(s??"").toLowerCase();return a==="active"?"ACTIVE":a==="inactive"?"INACTIVE":s??"ACTIVE"},Ft=s=>String(s??"").toLowerCase()==="active"?"green":"red",Rg=s=>String(s??"").toLowerCase()==="active"?String(s)==="ACTIVE"?"INACTIVE":"inactive":String(s)==="INACTIVE"?"ACTIVE":"active",Og=(s,a)=>{const t=new Map,i=[],l=a.trim().toLowerCase();s.forEach(h=>{t.set(h.id,{key:h.id,title:h.name,children:[],data:h})}),t.forEach(h=>{var c;const m=h.data.parent_id;if(m&&t.has(m)){const N=t.get(m);(c=N==null?void 0:N.children)==null||c.push(h)}else i.push(h)});const n=h=>{h.sort((m,c)=>{const N=m.data.sort_order??Number.POSITIVE_INFINITY,g=c.data.sort_order??Number.POSITIVE_INFINITY;return N!==g?N-g:(m.data.name||m.data.code).localeCompare(c.data.name||c.data.code,"vi")}),h.forEach(m=>{m.children&&n(m.children)})};if(n(i),!l)return{treeData:i,expandedKeys:[]};const r=new Set,u=h=>{const m=h.toLowerCase().indexOf(l);return m===-1?e.jsxDEV("span",{children:h},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:112,columnNumber:30},void 0):e.jsxDEV("span",{children:[h.slice(0,m),e.jsxDEV("span",{style:{backgroundColor:"#ffe58f"},children:h.slice(m,m+l.length)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:116,columnNumber:9},void 0),h.slice(m+l.length)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:114,columnNumber:7},void 0)},o=h=>{var N;const m=h.data.name.toLowerCase().includes(l)||(h.data.code||"").toLowerCase().includes(l),c=(N=h.children)==null?void 0:N.map(o).filter(g=>!!g);return m||c&&c.length>0?(c&&c.length>0&&r.add(h.key),{...h,title:u(h.data.name),children:c}):null};return{treeData:i.map(o).filter(h=>!!h),expandedKeys:Array.from(r)}};function Ug(){const{catalogId:s}=Ys(),a=ys(),{hasPermission:t}=os(),[i,l]=d.useState(!1),[n,r]=d.useState(null),[u,o]=d.useState([]),[p,h]=d.useState(null),[m,c]=d.useState(""),[N,g]=d.useState([]),[v,b]=d.useState(!0),[V,D]=d.useState(!1),[f,P]=d.useState("create"),[x,y]=d.useState(null),[Q,U]=d.useState(!1),[j]=O.useForm(),A=t("sa.masterdata.catalog.create"),z=t("sa.masterdata.catalog.update"),W=t("sa.masterdata.catalog.delete"),X=d.useMemo(()=>u.find(ie=>ie.id===p)??null,[u,p]),fe=!!(n!=null&&n.is_hierarchical),{treeData:me,expandedKeys:ue}=d.useMemo(()=>Og(u,m),[u,m]);d.useEffect(()=>{m.trim()&&(g(ue),b(!0))},[ue,m]);const xe=d.useCallback(async()=>{if(s){l(!0);try{const ie=await na.getCatalogById(s);r(ie)}catch(ie){const Ne=ie instanceof Error?ie.message:"Kh√¥ng th·ªÉ t·∫£i danh m·ª•c.";C.error(Ne)}finally{l(!1)}}},[s]),Ee=d.useCallback(async()=>{if(s){l(!0);try{const ie=await Bs.listItemsByCatalog(s);o(ie)}catch(ie){const Ne=ie instanceof Error?ie.message:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch m·ª•c.";C.error(Ne)}finally{l(!1)}}},[s]);d.useEffect(()=>{xe(),Ee()},[xe,Ee]);const je=()=>{P("create"),y(null),j.resetFields(),j.setFieldsValue({status:"ACTIVE",sort_order:0}),D(!0)},Y=()=>{X&&(P("create"),y(X),j.resetFields(),j.setFieldsValue({status:"ACTIVE",sort_order:0}),D(!0))},de=()=>{X&&(P("edit"),y(null),j.resetFields(),j.setFieldsValue({code:X.code,name:X.name,description:X.description??"",sort_order:X.sort_order??0,status:kg(X.status),is_default:X.is_default??!1}),D(!0))},Te=()=>{Q||D(!1)},S=async()=>{var ie,Ne;if(s)try{U(!0);const w=await j.validateFields();f==="create"?(await Bs.createItem({catalog_id:s,parent_id:(x==null?void 0:x.id)??null,code:w.code.trim(),name:w.name.trim(),description:((ie=w.description)==null?void 0:ie.trim())||null,sort_order:w.sort_order??0,status:w.status??"ACTIVE",is_default:!!w.is_default}),C.success("ƒê√£ th√™m m·ª•c.")):X&&(await Bs.updateItem(X.id,{code:w.code.trim(),name:w.name.trim(),description:((Ne=w.description)==null?void 0:Ne.trim())||null,sort_order:w.sort_order??0,status:w.status??X.status??"ACTIVE",is_default:!!w.is_default}),C.success("ƒê√£ c·∫≠p nh·∫≠t m·ª•c.")),D(!1),await Ee()}catch(w){const _=w instanceof Error?w.message:"Kh√¥ng th·ªÉ l∆∞u m·ª•c.";C.error(_)}finally{U(!1)}},B=async()=>{if(X)try{const ie=Rg(X.status);await Bs.setItemStatus(X.id,ie),C.success("ƒê√£ c·∫≠p nh·∫≠t tr·∫°ng th√°i."),await Ee()}catch(ie){const Ne=ie instanceof Error?ie.message:"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i.";C.error(Ne)}},ge=async()=>{if(X)try{await Bs.softDeleteItem(X.id),C.success("ƒê√£ ng·ª´ng m·ª•c."),h(null),await Ee()}catch(ie){const Ne=ie instanceof Error?ie.message:"Kh√¥ng th·ªÉ ng·ª´ng m·ª•c.";C.error(Ne)}},be=()=>{if(!n)return e.jsxDEV(ra,{description:"Kh√¥ng t√¨m th·∫•y danh m·ª•c."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:326,columnNumber:14},this);if(!fe){const ie=u.filter(Ne=>{const w=m.trim().toLowerCase();return w?Ne.name.toLowerCase().includes(w)||(Ne.code||"").toLowerCase().includes(w):!0});return e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(re,{placeholder:"T√¨m m·ª•c...",value:m,onChange:Ne=>c(Ne.target.value),allowClear:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:341,columnNumber:11},this),e.jsxDEV($s,{rowKey:"id",dataSource:ie,pagination:!1,size:"small",columns:[{title:"M√£",dataIndex:"code",key:"code",width:140},{title:"T√™n m·ª•c",dataIndex:"name",key:"name"},{title:"Tr·∫°ng th√°i",dataIndex:"status",key:"status",width:120,render:Ne=>e.jsxDEV(Re,{color:Ft(Ne),children:Ka(Ne)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:370,columnNumber:19},this)}],onRow:Ne=>({onClick:()=>h(Ne.id)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:347,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:340,columnNumber:9},this)}return e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(re,{placeholder:"T√¨m m·ª•c...",value:m,onChange:ie=>c(ie.target.value),allowClear:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:384,columnNumber:9},this),e.jsxDEV(st,{treeData:me,selectedKeys:p?[p]:[],expandedKeys:N,autoExpandParent:v,onExpand:ie=>{g(ie),b(!1)},onSelect:ie=>h(ie.length>0?String(ie[0]):null)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:390,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:383,columnNumber:7},this)};return e.jsxDEV(es,{permission:"sa.masterdata.catalog.read",children:[e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"Danh m·ª•c d√πng chung",href:"/system-admin/master-data/common-catalogs"},{label:(n==null?void 0:n.name)||"Chi ti·∫øt danh m·ª•c"}],title:(n==null?void 0:n.name)||"Chi ti·∫øt danh m·ª•c",subtitle:(n==null?void 0:n.key)||"",actions:e.jsxDEV(J,{children:[e.jsxDEV(q,{onClick:()=>a("/system-admin/master-data/common-catalogs"),children:"Quay l·∫°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:419,columnNumber:15},this),e.jsxDEV(q,{type:"primary",icon:e.jsxDEV(qs,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:422,columnNumber:44},this),onClick:je,disabled:!A,children:"Th√™m m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:422,columnNumber:15},this),fe&&e.jsxDEV(q,{onClick:Y,disabled:!X||!A,children:"Th√™m m·ª•c con"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:426,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:418,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:408,columnNumber:9},this),e.jsxDEV("div",{className:"px-6 pb-8",children:e.jsxDEV(ps,{children:e.jsxDEV(J,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsxDEV(Ye,{bordered:!0,size:"small",column:2,children:[e.jsxDEV(Ye.Item,{label:"Kh√≥a",children:(n==null?void 0:n.key)||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:438,columnNumber:17},this),e.jsxDEV(Ye.Item,{label:"Tr·∫°ng th√°i",children:e.jsxDEV(Re,{color:Ft(n==null?void 0:n.status),children:Ka(n==null?void 0:n.status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:440,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:439,columnNumber:17},this),e.jsxDEV(Ye.Item,{label:"M√¥ t·∫£",span:2,children:(n==null?void 0:n.description)||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:442,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:437,columnNumber:15},this),e.jsxDEV("div",{style:{display:"flex",gap:16},children:[e.jsxDEV("div",{style:{width:360},children:e.jsxDEV(ps,{title:"Danh s√°ch m·ª•c",children:be()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:449,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:448,columnNumber:17},this),e.jsxDEV("div",{style:{flex:1},children:e.jsxDEV(ps,{title:"Chi ti·∫øt m·ª•c",children:X?e.jsxDEV(J,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsxDEV(Ye,{bordered:!0,size:"small",column:2,children:[e.jsxDEV(Ye.Item,{label:"M√£",children:X.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:458,columnNumber:27},this),e.jsxDEV(Ye.Item,{label:"T√™n",children:X.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:459,columnNumber:27},this),e.jsxDEV(Ye.Item,{label:"M√¥ t·∫£",span:2,children:X.description||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:460,columnNumber:27},this),e.jsxDEV(Ye.Item,{label:"Th·ª© t·ª±",children:X.sort_order??"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:463,columnNumber:27},this),e.jsxDEV(Ye.Item,{label:"M·∫∑c ƒë·ªãnh",children:X.is_default?"C√≥":"Kh√¥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:466,columnNumber:27},this),e.jsxDEV(Ye.Item,{label:"Tr·∫°ng th√°i",children:e.jsxDEV(Re,{color:Ft(X.status),children:Ka(X.status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:470,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:469,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:457,columnNumber:25},this),e.jsxDEV(J,{children:[e.jsxDEV(q,{onClick:de,disabled:!z,children:"S·ª≠a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:475,columnNumber:27},this),e.jsxDEV(ws,{title:Ka(X.status)==="Ho·∫°t ƒë·ªông"?"Ng·ª´ng m·ª•c n√†y?":"K√≠ch ho·∫°t m·ª•c n√†y?",okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",onConfirm:B,disabled:!z,children:e.jsxDEV(q,{danger:!0,disabled:!z,children:Ka(X.status)==="Ho·∫°t ƒë·ªông"?"Ng·ª´ng":"K√≠ch ho·∫°t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:489,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:478,columnNumber:27},this),e.jsxDEV(ws,{title:"X√≥a m·ª•c n√†y?",okText:"X√°c nh·∫≠n",cancelText:"H·ªßy",onConfirm:ge,disabled:!W,children:e.jsxDEV(q,{danger:!0,disabled:!W,children:"X√≥a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:500,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:493,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:474,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:456,columnNumber:23},this):e.jsxDEV(ra,{description:"Ch·ªçn m·ªôt m·ª•c b√™n tr√°i ƒë·ªÉ xem chi ti·∫øt."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:454,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:452,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:451,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:447,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:436,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:435,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:434,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:407,columnNumber:7},this),e.jsxDEV(_a,{title:f==="create"?"Th√™m m·ª•c":"Ch·ªânh s·ª≠a m·ª•c",placement:"right",width:420,open:V,onClose:Te,destroyOnClose:!0,extra:e.jsxDEV(J,{children:[e.jsxDEV(q,{onClick:Te,children:"H·ªßy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:524,columnNumber:13},this),e.jsxDEV(q,{type:"primary",onClick:S,loading:Q,children:"L∆∞u"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:525,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:523,columnNumber:11},this),children:e.jsxDEV(O,{layout:"vertical",form:j,children:[x&&e.jsxDEV(O.Item,{label:"M·ª•c cha",children:e.jsxDEV(re,{value:`${x.name} (${x.code})`,disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:534,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:533,columnNumber:13},this),e.jsxDEV(O.Item,{name:"code",label:"M√£ m·ª•c",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p m√£ m·ª•c."}],children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:542,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:537,columnNumber:11},this),e.jsxDEV(O.Item,{name:"name",label:"T√™n m·ª•c",rules:[{required:!0,message:"Vui l√≤ng nh·∫≠p t√™n m·ª•c."}],children:e.jsxDEV(re,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:549,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:544,columnNumber:11},this),e.jsxDEV(O.Item,{name:"description",label:"M√¥ t·∫£",children:e.jsxDEV(re.TextArea,{rows:3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:552,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:551,columnNumber:11},this),e.jsxDEV(O.Item,{name:"sort_order",label:"Th·ª© t·ª±",children:e.jsxDEV(cs,{min:0,style:{width:"100%"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:555,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:554,columnNumber:11},this),e.jsxDEV(O.Item,{name:"is_default",label:"M·∫∑c ƒë·ªãnh",valuePropName:"checked",children:e.jsxDEV(Da,{checkedChildren:"C√≥",unCheckedChildren:"Kh√¥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:558,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:557,columnNumber:11},this),e.jsxDEV(O.Item,{name:"status",label:"Tr·∫°ng th√°i",children:e.jsxDEV(_e,{options:[{value:"ACTIVE",label:"Ho·∫°t ƒë·ªông"},{value:"INACTIVE",label:"Ng·ª´ng"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:561,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:560,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:531,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:515,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CommonCatalogDetailPage.tsx",lineNumber:406,columnNumber:5},this)}const $g=Object.freeze(Object.defineProperty({__proto__:null,default:Ug},Symbol.toStringTag,{value:"Module"})),Kg=[{key:"risk-level",name:"M·ª©c ƒë·ªô r·ªßi ro",description:"Ph√¢n lo·∫°i m·ª©c ƒë·ªô r·ªßi ro trong ho·∫°t ƒë·ªông ki·ªÉm tra",group:"COMMON",itemCount:4,hasSchema:!1,isLocked:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z"},{key:"priority-level",name:"M·ª©c ƒë·ªô ∆∞u ti√™n",description:"Ph√¢n lo·∫°i m·ª©c ƒë·ªô ∆∞u ti√™n x·ª≠ l√Ω c√¥ng vi·ªác",group:"COMMON",itemCount:4,hasSchema:!1,isLocked:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z"},{key:"data-source",name:"Ngu·ªìn d·ªØ li·ªáu",description:"Ngu·ªìn g·ªëc th√¥ng tin v√† d·ªØ li·ªáu trong h·ªá th·ªëng",group:"COMMON",itemCount:8,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-10T00:00:00Z"},{key:"business-type",name:"Lo·∫°i h√¨nh kinh doanh",description:"Ph√¢n lo·∫°i h√¨nh th·ª©c kinh doanh c·ªßa c∆° s·ªü",group:"COMMON",itemCount:10,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-10T00:00:00Z"},{key:"document-types",name:"Lo·∫°i gi·∫•y t·ªù",description:"Danh m·ª•c c√°c lo·∫°i gi·∫•y t·ªù, ch·ª©ng t·ª´",group:"COMMON",itemCount:12,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"contact-channel",name:"K√™nh li√™n h·ªá",description:"C√°c k√™nh li√™n h·ªá v·ªõi c√¥ng d√¢n, doanh nghi·ªáp",group:"COMMON",itemCount:8,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"product-categories",name:"Nh√≥m h√†ng h√≥a",description:"Ph√¢n lo·∫°i nh√≥m h√†ng h√≥a, s·∫£n ph·∫©m (c√≥ c·∫•u tr√∫c cha-con)",group:"COMMON",itemCount:18,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-08T00:00:00Z"},{key:"measurement-unit",name:"ƒê∆°n v·ªã t√≠nh",description:"ƒê∆°n v·ªã ƒëo l∆∞·ªùng h√†ng h√≥a, s·∫£n ph·∫©m",group:"COMMON",itemCount:15,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"geo-level",name:"C·∫•p ƒë·ªãa l√Ω",description:"C·∫•p ƒë·ªãa l√Ω trong h·ªá th·ªëng h√†nh ch√≠nh (T·ªânh/Qu·∫≠n/Ph∆∞·ªùng)",group:"COMMON",itemCount:4,hasSchema:!1,isLocked:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"time-window",name:"Khung th·ªùi gian",description:"C√°c khung th·ªùi gian cho b√°o c√°o, l·ªçc d·ªØ li·ªáu",group:"COMMON",itemCount:10,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"task-status",name:"Tr·∫°ng th√°i nhi·ªám v·ª•",description:"Tr·∫°ng th√°i x·ª≠ l√Ω nhi·ªám v·ª• ki·ªÉm tra",group:"DMS",itemCount:7,hasSchema:!1,isLocked:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z"},{key:"task-type",name:"Lo·∫°i nhi·ªám v·ª•",description:"Ph√¢n lo·∫°i nhi·ªám v·ª• ki·ªÉm tra, thanh tra",group:"DMS",itemCount:9,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-12T00:00:00Z"},{key:"lead-status",name:"Tr·∫°ng th√°i ngu·ªìn tin",description:"Tr·∫°ng th√°i x·ª≠ l√Ω ngu·ªìn tin t·ªë gi√°c",group:"DMS",itemCount:6,hasSchema:!1,isLocked:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z"},{key:"lead-type",name:"Lo·∫°i ngu·ªìn tin",description:"Ph√¢n lo·∫°i ngu·ªìn tin theo t√≠nh ch·∫•t, m·ª©c ƒë·ªô",group:"DMS",itemCount:8,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-10T00:00:00Z"},{key:"inspection-theme",name:"Chuy√™n ƒë·ªÅ ki·ªÉm tra",description:"C√°c chuy√™n ƒë·ªÅ, chi·∫øn d·ªãch ki·ªÉm tra ƒë·∫∑c bi·ªát",group:"DMS",itemCount:12,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-10T00:00:00Z"},{key:"violation-types",name:"Lo·∫°i vi ph·∫°m",description:"Danh m·ª•c c√°c lo·∫°i vi ph·∫°m h√†nh ch√≠nh (c√≥ c·∫•u tr√∫c cha-con)",group:"DMS",itemCount:20,hasSchema:!0,isLocked:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z"},{key:"violation-groups",name:"Nh√≥m h√†nh vi vi ph·∫°m",description:"Ph√¢n nh√≥m h√†nh vi vi ph·∫°m theo lƒ©nh v·ª±c",group:"DMS",itemCount:10,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-08T00:00:00Z"},{key:"result-type",name:"K·∫øt qu·∫£ x·ª≠ l√Ω",description:"K·∫øt qu·∫£ x·ª≠ l√Ω sau ki·ªÉm tra",group:"DMS",itemCount:8,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-08T00:00:00Z"},{key:"evidence-type",name:"Lo·∫°i ch·ª©ng c·ª©/t√†i li·ªáu",description:"Ph√¢n lo·∫°i b·∫±ng ch·ª©ng, t√†i li·ªáu vi ph·∫°m",group:"DMS",itemCount:9,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"coordination-agency",name:"ƒê∆°n v·ªã ph·ªëi h·ª£p",description:"Danh s√°ch c√°c ƒë∆°n v·ªã li√™n quan ph·ªëi h·ª£p",group:"DMS",itemCount:15,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-08T00:00:00Z"},{key:"recurrence-level",name:"T√¨nh tr·∫°ng t√°i ph·∫°m",description:"Ph√¢n lo·∫°i m·ª©c ƒë·ªô t√°i ph·∫°m c·ªßa c∆° s·ªü",group:"DMS",itemCount:5,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"case-priority",name:"∆Øu ti√™n x·ª≠ l√Ω h·ªì s∆°",description:"M·ª©c ƒë·ªô ∆∞u ti√™n x·ª≠ l√Ω h·ªì s∆° vi ph·∫°m",group:"DMS",itemCount:4,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"map-marker-type",name:"Lo·∫°i marker b·∫£n ƒë·ªì",description:"C·∫•u h√¨nh marker tr√™n b·∫£n ƒë·ªì (k√®m iconKey, c√≥ c·∫•u tr√∫c cha-con)",group:"SYSTEM",itemCount:12,hasSchema:!1,isLocked:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-10T00:00:00Z"},{key:"map-layer",name:"Layer b·∫£n ƒë·ªì",description:"C·∫•u h√¨nh c√°c l·ªõp hi·ªÉn th·ªã tr√™n b·∫£n ƒë·ªì (toggle)",group:"SYSTEM",itemCount:6,hasSchema:!1,isLocked:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-08T00:00:00Z"},{key:"status-color-map",name:"Mapping status ‚Üí m√†u",description:"B·∫£ng √°nh x·∫° tr·∫°ng th√°i sang m√£ m√†u hi·ªÉn th·ªã",group:"SYSTEM",itemCount:15,hasSchema:!1,isLocked:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"dashboard-kpi-config",name:"C·∫•u h√¨nh KPI cards",description:"C·∫•u h√¨nh c√°c ch·ªâ s·ªë KPI (key/label/unit/format)",group:"SYSTEM",itemCount:12,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-10T00:00:00Z"},{key:"attachment-type",name:"Lo·∫°i file ƒë√≠nh k√®m + limit",description:"Ph√¢n lo·∫°i file ƒë√≠nh k√®m v√† gi·ªõi h·∫°n dung l∆∞·ª£ng",group:"SYSTEM",itemCount:10,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"pagination-default",name:"PageSize options",description:"C·∫•u h√¨nh s·ªë b·∫£n ghi m·ªói trang",group:"SYSTEM",itemCount:5,hasSchema:!1,isLocked:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"ui-badge-palette",name:"Palette m√†u badge chu·∫©n",description:"B·∫£ng m√†u chu·∫©n cho c√°c badge trong UI",group:"SYSTEM",itemCount:8,hasSchema:!1,isLocked:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"export-template",name:"Template export",description:"Template cho xu·∫•t file (kpi/report formats)",group:"SYSTEM",itemCount:6,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"}],Wn=[{id:"item-risk-1",catalogKey:"risk-level",code:"LOW",name:"Th·∫•p",value:"low",order:1,parentId:null,badgeColor:"#28C76F",isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-risk-2",catalogKey:"risk-level",code:"MEDIUM",name:"Trung b√¨nh",value:"medium",order:2,parentId:null,badgeColor:"#FF9F43",isDefault:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-risk-3",catalogKey:"risk-level",code:"HIGH",name:"Cao",value:"high",order:3,parentId:null,badgeColor:"#EA5455",isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-risk-4",catalogKey:"risk-level",code:"CRITICAL",name:"Nghi√™m tr·ªçng",value:"critical",order:4,parentId:null,badgeColor:"#D32F2F",isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-priority-1",catalogKey:"priority-level",code:"LOW",name:"Th·∫•p",value:"low",order:1,parentId:null,badgeColor:"#9E9E9E",isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-priority-2",catalogKey:"priority-level",code:"NORMAL",name:"Trung b√¨nh",value:"normal",order:2,parentId:null,badgeColor:"#00CFE8",isDefault:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-priority-3",catalogKey:"priority-level",code:"HIGH",name:"Cao",value:"high",order:3,parentId:null,badgeColor:"#FF9F43",isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-priority-4",catalogKey:"priority-level",code:"URGENT",name:"Kh·∫©n c·∫•p",value:"urgent",order:4,parentId:null,badgeColor:"#EA5455",isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-datasource-1",catalogKey:"data-source",code:"CITIZEN",name:"Ng∆∞·ªùi d√¢n",description:"Th√¥ng tin t·ª´ ng∆∞·ªùi d√¢n b√°o c√°o",order:1,parentId:null,isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-datasource-2",catalogKey:"data-source",code:"STAFF",name:"C√°n b·ªô",description:"D·ªØ li·ªáu do c√°n b·ªô nh·∫≠p",order:2,parentId:null,isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-datasource-3",catalogKey:"data-source",code:"INS",name:"H·ªá th·ªëng INS",description:"T√≠ch h·ª£p t·ª´ h·ªá th·ªëng INS",order:3,parentId:null,isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-datasource-4",catalogKey:"data-source",code:"POS",name:"H·ªá th·ªëng POS",description:"T√≠ch h·ª£p t·ª´ m√°y t√≠nh ti·ªÅn",order:4,parentId:null,isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-datasource-5",catalogKey:"data-source",code:"EXTERNAL_API",name:"API b√™n ngo√†i",description:"D·ªØ li·ªáu t·ª´ h·ªá th·ªëng b√™n th·ª© ba",order:5,parentId:null,isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-datasource-6",catalogKey:"data-source",code:"IMPORT",name:"Import t·ª´ file",description:"Nh·∫≠p t·ª´ Excel, CSV",order:6,parentId:null,isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-datasource-7",catalogKey:"data-source",code:"MOBILE_APP",name:"·ª®ng d·ª•ng di ƒë·ªông",description:"Thu th·∫≠p t·ª´ app mobile",order:7,parentId:null,isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-datasource-8",catalogKey:"data-source",code:"OTHER",name:"Ngu·ªìn kh√°c",description:"Ngu·ªìn d·ªØ li·ªáu kh√°c",order:8,parentId:null,isDefault:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-biz-1",catalogKey:"business-type",code:"SHOP",name:"C·ª≠a h√†ng",order:1,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-biz-2",catalogKey:"business-type",code:"MARKET",name:"Ch·ª£",order:2,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-biz-3",catalogKey:"business-type",code:"SUPERMARKET",name:"Si√™u th·ªã",order:3,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-biz-4",catalogKey:"business-type",code:"WAREHOUSE",name:"Kho h√†ng",order:4,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-biz-5",catalogKey:"business-type",code:"RESTAURANT",name:"Nh√† h√†ng",order:5,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-biz-6",catalogKey:"business-type",code:"CAFE",name:"Qu√°n c√† ph√™",order:6,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-biz-7",catalogKey:"business-type",code:"FACTORY",name:"Nh√† m√°y",order:7,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-biz-8",catalogKey:"business-type",code:"ECOMMERCE",name:"Th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠",order:8,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-biz-9",catalogKey:"business-type",code:"STREET_VENDOR",name:"B√°n h√†ng rong",order:9,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-biz-10",catalogKey:"business-type",code:"OTHER",name:"Kh√°c",order:10,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-1",catalogKey:"document-types",code:"CCCD",name:"CƒÉn c∆∞·ªõc c√¥ng d√¢n",order:1,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-2",catalogKey:"document-types",code:"MST",name:"M√£ s·ªë thu·∫ø",order:2,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-3",catalogKey:"document-types",code:"BUSINESS_LICENSE",name:"Gi·∫•y ph√©p kinh doanh",order:3,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-4",catalogKey:"document-types",code:"INVOICE",name:"H√≥a ƒë∆°n",order:4,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-5",catalogKey:"document-types",code:"COO",name:"Gi·∫•y ch·ª©ng nh·∫≠n xu·∫•t x·ª©",order:5,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-6",catalogKey:"document-types",code:"QUALITY_CERT",name:"Gi·∫•y ch·ª©ng nh·∫≠n ch·∫•t l∆∞·ª£ng",order:6,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-7",catalogKey:"document-types",code:"SAFETY_CERT",name:"Gi·∫•y ch·ª©ng nh·∫≠n an to√†n",order:7,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-8",catalogKey:"document-types",code:"IMPORT_PERMIT",name:"Gi·∫•y ph√©p nh·∫≠p kh·∫©u",order:8,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-9",catalogKey:"document-types",code:"TRANSPORT_PERMIT",name:"Gi·∫•y ph√©p v·∫≠n chuy·ªÉn",order:9,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-10",catalogKey:"document-types",code:"RECEIPT",name:"Bi√™n nh·∫≠n",order:10,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-11",catalogKey:"document-types",code:"CONTRACT",name:"H·ª£p ƒë·ªìng",order:11,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-doc-12",catalogKey:"document-types",code:"OTHER",name:"Gi·∫•y t·ªù kh√°c",order:12,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-contact-1",catalogKey:"contact-channel",code:"PHONE",name:"ƒêi·ªán tho·∫°i",order:1,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-contact-2",catalogKey:"contact-channel",code:"EMAIL",name:"Email",order:2,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-contact-3",catalogKey:"contact-channel",code:"ZALO",name:"Zalo",order:3,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-contact-4",catalogKey:"contact-channel",code:"FACEBOOK",name:"Facebook",order:4,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-contact-5",catalogKey:"contact-channel",code:"SMS",name:"SMS",order:5,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-contact-6",catalogKey:"contact-channel",code:"WEBSITE",name:"Website",order:6,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-contact-7",catalogKey:"contact-channel",code:"IN_PERSON",name:"Tr·ª±c ti·∫øp",order:7,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-contact-8",catalogKey:"contact-channel",code:"OTHER",name:"K√™nh kh√°c",order:8,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-1",catalogKey:"product-categories",code:"FOOD",name:"Th·ª±c ph·∫©m",parentId:null,order:1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-2",catalogKey:"product-categories",code:"FOOD_FRESH",name:"Th·ª±c ph·∫©m t∆∞∆°i s·ªëng",parentId:"item-product-1",order:2,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-3",catalogKey:"product-categories",code:"FOOD_PROCESSED",name:"Th·ª±c ph·∫©m ch·∫ø bi·∫øn",parentId:"item-product-1",order:3,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-4",catalogKey:"product-categories",code:"ELECTRONICS",name:"ƒêi·ªán t·ª≠ - ƒêi·ªán l·∫°nh",parentId:null,order:4,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-5",catalogKey:"product-categories",code:"ELEC_PHONE",name:"ƒêi·ªán tho·∫°i, m√°y t√≠nh b·∫£ng",parentId:"item-product-4",order:5,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-6",catalogKey:"product-categories",code:"ELEC_HOME",name:"ƒêi·ªán gia d·ª•ng",parentId:"item-product-4",order:6,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-7",catalogKey:"product-categories",code:"FASHION",name:"Th·ªùi trang",parentId:null,order:7,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-8",catalogKey:"product-categories",code:"FASHION_CLOTHES",name:"Qu·∫ßn √°o",parentId:"item-product-7",order:8,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-9",catalogKey:"product-categories",code:"FASHION_SHOES",name:"Gi√†y d√©p",parentId:"item-product-7",order:9,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-10",catalogKey:"product-categories",code:"COSMETICS",name:"M·ªπ ph·∫©m",parentId:null,order:10,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-11",catalogKey:"product-categories",code:"MEDICINE",name:"D∆∞·ª£c ph·∫©m",parentId:null,order:11,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-12",catalogKey:"product-categories",code:"HOUSEHOLD",name:"ƒê·ªì gia d·ª•ng",parentId:null,order:12,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-13",catalogKey:"product-categories",code:"FURNITURE",name:"N·ªôi th·∫•t",parentId:null,order:13,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-14",catalogKey:"product-categories",code:"TOYS",name:"ƒê·ªì ch∆°i tr·∫ª em",parentId:null,order:14,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-15",catalogKey:"product-categories",code:"BOOKS",name:"S√°ch, vƒÉn ph√≤ng ph·∫©m",parentId:null,order:15,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-16",catalogKey:"product-categories",code:"SPORTS",name:"Th·ªÉ thao",parentId:null,order:16,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-17",catalogKey:"product-categories",code:"AUTOMOTIVE",name:"Ph·ª• t√πng xe m√°y, √¥ t√¥",parentId:null,order:17,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-product-18",catalogKey:"product-categories",code:"OTHER",name:"H√†ng h√≥a kh√°c",parentId:null,order:18,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-1",catalogKey:"measurement-unit",code:"KG",name:"Kilogram",value:"kg",order:1,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-2",catalogKey:"measurement-unit",code:"G",name:"Gram",value:"g",order:2,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-3",catalogKey:"measurement-unit",code:"L",name:"L√≠t",value:"l",order:3,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-4",catalogKey:"measurement-unit",code:"ML",name:"Mililit",value:"ml",order:4,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-5",catalogKey:"measurement-unit",code:"M",name:"M√©t",value:"m",order:5,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-6",catalogKey:"measurement-unit",code:"CM",name:"Centimet",value:"cm",order:6,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-7",catalogKey:"measurement-unit",code:"M2",name:"M√©t vu√¥ng",value:"m2",order:7,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-8",catalogKey:"measurement-unit",code:"M3",name:"M√©t kh·ªëi",value:"m3",order:8,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-9",catalogKey:"measurement-unit",code:"PIECE",name:"C√°i",value:"piece",order:9,parentId:null,isDefault:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-10",catalogKey:"measurement-unit",code:"BOX",name:"H·ªôp",value:"box",order:10,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-11",catalogKey:"measurement-unit",code:"PACK",name:"G√≥i",value:"pack",order:11,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-12",catalogKey:"measurement-unit",code:"BOTTLE",name:"Chai",value:"bottle",order:12,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-13",catalogKey:"measurement-unit",code:"BAG",name:"Bao",value:"bag",order:13,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-14",catalogKey:"measurement-unit",code:"SET",name:"B·ªô",value:"set",order:14,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-unit-15",catalogKey:"measurement-unit",code:"OTHER",name:"Kh√°c",value:"other",order:15,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-geo-1",catalogKey:"geo-level",code:"COUNTRY",name:"Qu·ªëc gia",value:"country",order:1,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-geo-2",catalogKey:"geo-level",code:"PROVINCE",name:"T·ªânh/Th√†nh ph·ªë",value:"province",order:2,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-geo-3",catalogKey:"geo-level",code:"DISTRICT",name:"Qu·∫≠n/Huy·ªán",value:"district",order:3,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-geo-4",catalogKey:"geo-level",code:"WARD",name:"Ph∆∞·ªùng/X√£",value:"ward",order:4,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-time-1",catalogKey:"time-window",code:"TODAY",name:"H√¥m nay",value:"0",order:1,parentId:null,isDefault:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-time-2",catalogKey:"time-window",code:"YESTERDAY",name:"H√¥m qua",value:"-1",order:2,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-time-3",catalogKey:"time-window",code:"LAST_7_DAYS",name:"7 ng√†y qua",value:"-7",order:3,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-time-4",catalogKey:"time-window",code:"LAST_30_DAYS",name:"30 ng√†y qua",value:"-30",order:4,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-time-5",catalogKey:"time-window",code:"THIS_MONTH",name:"Th√°ng n√†y",value:"month",order:5,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-time-6",catalogKey:"time-window",code:"LAST_MONTH",name:"Th√°ng tr∆∞·ªõc",value:"last_month",order:6,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-time-7",catalogKey:"time-window",code:"THIS_QUARTER",name:"Qu√Ω n√†y",value:"quarter",order:7,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-time-8",catalogKey:"time-window",code:"THIS_YEAR",name:"NƒÉm nay",value:"year",order:8,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-time-9",catalogKey:"time-window",code:"LAST_YEAR",name:"NƒÉm tr∆∞·ªõc",value:"last_year",order:9,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-time-10",catalogKey:"time-window",code:"CUSTOM",name:"T√πy ch·ªçn",value:"custom",order:10,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-status-1",catalogKey:"task-status",code:"NEW",name:"M·ªõi t·∫°o",value:"new",order:1,parentId:null,badgeColor:"#9E9E9E",isDefault:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-status-2",catalogKey:"task-status",code:"ASSIGNED",name:"ƒê√£ giao",value:"assigned",order:2,parentId:null,badgeColor:"#00CFE8",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-status-3",catalogKey:"task-status",code:"IN_PROGRESS",name:"ƒêang th·ª±c hi·ªán",value:"in_progress",order:3,parentId:null,badgeColor:"#7367F0",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-status-4",catalogKey:"task-status",code:"OVERDUE",name:"Qu√° h·∫°n",value:"overdue",order:4,parentId:null,badgeColor:"#FF9F43",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-status-5",catalogKey:"task-status",code:"COMPLETED",name:"Ho√†n th√†nh",value:"completed",order:5,parentId:null,badgeColor:"#28C76F",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-status-6",catalogKey:"task-status",code:"CANCELLED",name:"ƒê√£ h·ªßy",value:"cancelled",order:6,parentId:null,badgeColor:"#EA5455",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-status-7",catalogKey:"task-status",code:"PENDING_REVIEW",name:"Ch·ªù duy·ªát",value:"pending_review",order:7,parentId:null,badgeColor:"#FF9F43",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-type-1",catalogKey:"task-type",code:"INSPECTION",name:"Ki·ªÉm tra th∆∞·ªùng xuy√™n",order:1,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-type-2",catalogKey:"task-type",code:"SPOT_CHECK",name:"Ki·ªÉm tra ƒë·ªôt xu·∫•t",order:2,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-type-3",catalogKey:"task-type",code:"THEME_INSPECTION",name:"Ki·ªÉm tra chuy√™n ƒë·ªÅ",order:3,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-type-4",catalogKey:"task-type",code:"COMPLAINT_FOLLOW",name:"X·ª≠ l√Ω khi·∫øu n·∫°i",order:4,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-type-5",catalogKey:"task-type",code:"LEAD_FOLLOW",name:"X·ª≠ l√Ω ngu·ªìn tin",order:5,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-type-6",catalogKey:"task-type",code:"POST_INSPECTION",name:"Ki·ªÉm tra sau x·ª≠ l√Ω",order:6,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-type-7",catalogKey:"task-type",code:"COORDINATION",name:"Ph·ªëi h·ª£p ki·ªÉm tra",order:7,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-type-8",catalogKey:"task-type",code:"SURVEILLANCE",name:"Gi√°m s√°t th·ªã tr∆∞·ªùng",order:8,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-task-type-9",catalogKey:"task-type",code:"OTHER",name:"Lo·∫°i nhi·ªám v·ª• kh√°c",order:9,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-status-1",catalogKey:"lead-status",code:"NEW",name:"M·ªõi ti·∫øp nh·∫≠n",value:"new",order:1,parentId:null,badgeColor:"#9E9E9E",isDefault:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-status-2",catalogKey:"lead-status",code:"PROCESSING",name:"ƒêang x·ª≠ l√Ω",value:"processing",order:2,parentId:null,badgeColor:"#7367F0",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-status-3",catalogKey:"lead-status",code:"VERIFIED",name:"ƒê√£ x√°c minh",value:"verified",order:3,parentId:null,badgeColor:"#00CFE8",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-status-4",catalogKey:"lead-status",code:"COMPLETED",name:"ƒê√£ x·ª≠ l√Ω xong",value:"completed",order:4,parentId:null,badgeColor:"#28C76F",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-status-5",catalogKey:"lead-status",code:"REJECTED",name:"Kh√¥ng ƒë·ªß c∆° s·ªü",value:"rejected",order:5,parentId:null,badgeColor:"#EA5455",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-status-6",catalogKey:"lead-status",code:"TRANSFERRED",name:"Chuy·ªÉn x·ª≠ l√Ω",value:"transferred",order:6,parentId:null,badgeColor:"#FF9F43",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-type-1",catalogKey:"lead-type",code:"DIRECT",name:"Tr·ª±c ti·∫øp",order:1,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-type-2",catalogKey:"lead-type",code:"HOTLINE",name:"ƒê∆∞·ªùng d√¢y n√≥ng",order:2,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-type-3",catalogKey:"lead-type",code:"EMAIL",name:"Email/Th∆∞ ƒëi·ªán t·ª≠",order:3,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-type-4",catalogKey:"lead-type",code:"SOCIAL",name:"M·∫°ng x√£ h·ªôi",order:4,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-type-5",catalogKey:"lead-type",code:"ANONYMOUS",name:"N·∫∑c danh",order:5,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-type-6",catalogKey:"lead-type",code:"PRESS",name:"B√°o ch√≠ ph·∫£n √°nh",order:6,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-type-7",catalogKey:"lead-type",code:"COORDINATION",name:"Chuy·ªÉn ƒë∆°n v·ªã kh√°c",order:7,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-lead-type-8",catalogKey:"lead-type",code:"OTHER",name:"Ngu·ªìn kh√°c",order:8,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-1",catalogKey:"inspection-theme",code:"FOOD_SAFETY",name:"An to√†n th·ª±c ph·∫©m",order:1,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-2",catalogKey:"inspection-theme",code:"COUNTERFEIT",name:"H√†ng gi·∫£, h√†ng nh√°i",order:2,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-3",catalogKey:"inspection-theme",code:"EXPIRED_GOODS",name:"H√†ng h·∫øt h·∫°n s·ª≠ d·ª•ng",order:3,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-4",catalogKey:"inspection-theme",code:"ORIGIN_FRAUD",name:"Gian l·∫≠n xu·∫•t x·ª©",order:4,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-5",catalogKey:"inspection-theme",code:"PRICE_VIOLATION",name:"Vi ph·∫°m gi√°",order:5,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-6",catalogKey:"inspection-theme",code:"QUALITY",name:"Ch·∫•t l∆∞·ª£ng h√†ng h√≥a",order:6,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-7",catalogKey:"inspection-theme",code:"SMUGGLING",name:"H√†ng l·∫≠u, nh·∫≠p l·∫≠u",order:7,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-8",catalogKey:"inspection-theme",code:"ECOMMERCE",name:"Th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠",order:8,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-9",catalogKey:"inspection-theme",code:"ALCOHOL_TOBACCO",name:"R∆∞·ª£u, bia, thu·ªëc l√°",order:9,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-10",catalogKey:"inspection-theme",code:"COSMETICS",name:"M·ªπ ph·∫©m, h√≥a ch·∫•t",order:10,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-11",catalogKey:"inspection-theme",code:"MEDICAL",name:"D∆∞·ª£c ph·∫©m, y t·∫ø",order:11,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-theme-12",catalogKey:"inspection-theme",code:"FESTIVAL",name:"Tr∆∞·ªõc T·∫øt, l·ªÖ h·ªôi",order:12,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-1",catalogKey:"violation-types",code:"QUALITY",name:"Vi ph·∫°m ch·∫•t l∆∞·ª£ng",parentId:null,order:1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-2",catalogKey:"violation-types",code:"QUALITY_SUBSTANDARD",name:"H√†ng k√©m ch·∫•t l∆∞·ª£ng",parentId:"item-violation-1",order:2,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-3",catalogKey:"violation-types",code:"QUALITY_EXPIRED",name:"H√†ng h·∫øt h·∫°n s·ª≠ d·ª•ng",parentId:"item-violation-1",order:3,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-4",catalogKey:"violation-types",code:"COUNTERFEIT",name:"Vi ph·∫°m v·ªÅ gi·∫£ m·∫°o",parentId:null,order:4,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-5",catalogKey:"violation-types",code:"COUNTERFEIT_GOODS",name:"H√†ng gi·∫£",parentId:"item-violation-4",order:5,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-6",catalogKey:"violation-types",code:"COUNTERFEIT_BRAND",name:"Gi·∫£ m·∫°o nh√£n hi·ªáu",parentId:"item-violation-4",order:6,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-7",catalogKey:"violation-types",code:"COUNTERFEIT_ORIGIN",name:"Gian l·∫≠n xu·∫•t x·ª©",parentId:"item-violation-4",order:7,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-8",catalogKey:"violation-types",code:"DOCUMENTATION",name:"Vi ph·∫°m v·ªÅ ch·ª©ng t·ª´",parentId:null,order:8,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-9",catalogKey:"violation-types",code:"DOC_MISSING",name:"Thi·∫øu ch·ª©ng t·ª´",parentId:"item-violation-8",order:9,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-10",catalogKey:"violation-types",code:"DOC_FAKE",name:"Ch·ª©ng t·ª´ gi·∫£ m·∫°o",parentId:"item-violation-8",order:10,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-11",catalogKey:"violation-types",code:"PRICING",name:"Vi ph·∫°m v·ªÅ gi√°",parentId:null,order:11,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-12",catalogKey:"violation-types",code:"PRICE_NO_DISPLAY",name:"Kh√¥ng ni√™m y·∫øt gi√°",parentId:"item-violation-11",order:12,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-13",catalogKey:"violation-types",code:"PRICE_WRONG",name:"B√°n sai gi√° ni√™m y·∫øt",parentId:"item-violation-11",order:13,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-14",catalogKey:"violation-types",code:"LABELING",name:"Vi ph·∫°m nh√£n m√°c",parentId:null,order:14,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-15",catalogKey:"violation-types",code:"LABEL_MISSING",name:"Thi·∫øu nh√£n h√†ng h√≥a",parentId:"item-violation-14",order:15,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-16",catalogKey:"violation-types",code:"LABEL_WRONG_INFO",name:"Nh√£n sai th√¥ng tin",parentId:"item-violation-14",order:16,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-17",catalogKey:"violation-types",code:"SMUGGLING",name:"H√†ng l·∫≠u, nh·∫≠p l·∫≠u",parentId:null,order:17,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-18",catalogKey:"violation-types",code:"PROHIBITED",name:"H√†ng c·∫•m l∆∞u th√¥ng",parentId:null,order:18,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-19",catalogKey:"violation-types",code:"OBSTRUCTION",name:"C·∫£n tr·ªü ki·ªÉm tra",parentId:null,order:19,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-violation-20",catalogKey:"violation-types",code:"OTHER",name:"Vi ph·∫°m kh√°c",parentId:null,order:20,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-viol-group-1",catalogKey:"violation-groups",code:"FOOD",name:"Nh√≥m vi ph·∫°m th·ª±c ph·∫©m",order:1,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-viol-group-2",catalogKey:"violation-groups",code:"PHARMACEUTICAL",name:"Nh√≥m vi ph·∫°m d∆∞·ª£c ph·∫©m",order:2,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-viol-group-3",catalogKey:"violation-groups",code:"COSMETIC",name:"Nh√≥m vi ph·∫°m m·ªπ ph·∫©m",order:3,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-viol-group-4",catalogKey:"violation-groups",code:"ELECTRONICS",name:"Nh√≥m vi ph·∫°m ƒëi·ªán t·ª≠",order:4,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-viol-group-5",catalogKey:"violation-groups",code:"TEXTILE",name:"Nh√≥m vi ph·∫°m d·ªát may",order:5,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-viol-group-6",catalogKey:"violation-groups",code:"ALCOHOL_TOBACCO",name:"Nh√≥m vi ph·∫°m r∆∞·ª£u, thu·ªëc l√°",order:6,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-viol-group-7",catalogKey:"violation-groups",code:"CHEMICALS",name:"Nh√≥m vi ph·∫°m h√≥a ch·∫•t",order:7,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-viol-group-8",catalogKey:"violation-groups",code:"MACHINERY",name:"Nh√≥m vi ph·∫°m m√°y m√≥c, thi·∫øt b·ªã",order:8,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-viol-group-9",catalogKey:"violation-groups",code:"ECOMMERCE",name:"Nh√≥m vi ph·∫°m TMƒêT",order:9,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-viol-group-10",catalogKey:"violation-groups",code:"OTHER",name:"Nh√≥m vi ph·∫°m kh√°c",order:10,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-result-1",catalogKey:"result-type",code:"NO_VIOLATION",name:"Kh√¥ng vi ph·∫°m",order:1,parentId:null,badgeColor:"#28C76F",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-result-2",catalogKey:"result-type",code:"WARNING",name:"Nh·∫Øc nh·ªü, c·∫£nh c√°o",order:2,parentId:null,badgeColor:"#FF9F43",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-result-3",catalogKey:"result-type",code:"CONFISCATE",name:"T·ªãch thu h√†ng h√≥a",order:3,parentId:null,badgeColor:"#EA5455",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-result-4",catalogKey:"result-type",code:"FINE",name:"X·ª≠ ph·∫°t vi ph·∫°m h√†nh ch√≠nh",order:4,parentId:null,badgeColor:"#EA5455",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-result-5",catalogKey:"result-type",code:"SUSPEND",name:"ƒê√¨nh ch·ªâ ho·∫°t ƒë·ªông",order:5,parentId:null,badgeColor:"#D32F2F",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-result-6",catalogKey:"result-type",code:"CRIMINAL_TRANSFER",name:"Chuy·ªÉn c∆° quan ƒëi·ªÅu tra",order:6,parentId:null,badgeColor:"#D32F2F",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-result-7",catalogKey:"result-type",code:"REMEDIATION",name:"Y√™u c·∫ßu kh·∫Øc ph·ª•c",order:7,parentId:null,badgeColor:"#00CFE8",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"item-result-8",catalogKey:"result-type",code:"OTHER",name:"X·ª≠ l√Ω kh√°c",order:8,parentId:null,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}];let St=[{id:"1",code:"HN",name:"H√† N·ªôi",type:"province",parentId:null,provinceName:"H√† N·ªôi",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",code:"HCM",name:"TP. H·ªì Ch√≠ Minh",type:"province",parentId:null,provinceName:"TP. H·ªì Ch√≠ Minh",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"3",code:"HN-HK",name:"Qu·∫≠n Ho√†n Ki·∫øm",type:"district",parentId:"1",provinceName:"H√† N·ªôi",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"4",code:"HN-BD",name:"Qu·∫≠n Ba ƒê√¨nh",type:"district",parentId:"1",provinceName:"H√† N·ªôi",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"5",code:"HCM-Q1",name:"Qu·∫≠n 1",type:"district",parentId:"2",provinceName:"TP. H·ªì Ch√≠ Minh",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"6",code:"HN-HK-HANG-DAO",name:"Ph∆∞·ªùng H√†ng ƒê√†o",type:"ward",parentId:"3",provinceName:"H√† N·ªôi",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}],Xn=[...Kg],Pi=[...Wn],Zg=St.length+1,zg=Wn.length+1;const tt=()=>[...St],Yn=s=>{St=[...s]},Bg=s=>{St.push(s)},qg=()=>String(Zg++),ca=()=>[...Xn],it=s=>{Xn=[...s]},Ma=()=>[...Pi],em=s=>{Pi=[...s]},Fg=s=>{Pi.push(s)},Gg=()=>String(zg++),js=(s=300)=>new Promise(a=>setTimeout(a,s));function sm(s,a=!1,t){const i=[];return(!a||s.code!==void 0)&&(!s.code||s.code.trim()===""?i.push({field:"code",message:"M√£ ƒë·ªãa b√†n l√† b·∫Øt bu·ªôc"}):tt().find(r=>r.code===s.code&&r.id!==t)&&i.push({field:"code",message:"M√£ ƒë·ªãa b√†n ƒë√£ t·ªìn t·∫°i"})),(!a||s.name!==void 0)&&(!s.name||s.name.trim()==="")&&i.push({field:"name",message:"T√™n ƒë·ªãa b√†n l√† b·∫Øt bu·ªôc"}),{valid:i.length===0,errors:i}}function am(s,a=!1,t){const i=[];return(!a||s.key!==void 0)&&(!s.key||s.key.trim()===""?i.push({field:"key",message:"Kh√≥a danh m·ª•c l√† b·∫Øt bu·ªôc"}):ca().find(r=>r.key===s.key&&r.key!==t)&&i.push({field:"key",message:"Kh√≥a danh m·ª•c ƒë√£ t·ªìn t·∫°i"})),(!a||s.name!==void 0)&&(!s.name||s.name.trim()==="")&&i.push({field:"name",message:"T√™n danh m·ª•c l√† b·∫Øt bu·ªôc"}),{valid:i.length===0,errors:i}}function tm(s,a=!1,t){var l;const i=[];if(!a||s.code!==void 0)if(!s.code||s.code.trim()==="")i.push({field:"code",message:"M√£ m·ª•c l√† b·∫Øt bu·ªôc"});else{const n=Ma(),r=a?(l=n.find(o=>o.id===t))==null?void 0:l.catalogKey:s.catalogKey;n.find(o=>o.code===s.code&&o.catalogKey===r&&o.id!==t)&&i.push({field:"code",message:"M√£ m·ª•c ƒë√£ t·ªìn t·∫°i trong danh m·ª•c n√†y"})}return(!a||s.name!==void 0)&&(!s.name||s.name.trim()==="")&&i.push({field:"name",message:"T√™n m·ª•c l√† b·∫Øt bu·ªôc"}),{valid:i.length===0,errors:i}}async function Jg(s={}){await js(250);try{let a=tt();if(s.search){const o=s.search.toLowerCase();a=a.filter(p=>p.code.toLowerCase().includes(o)||p.name.toLowerCase().includes(o)||p.provinceName&&p.provinceName.toLowerCase().includes(o))}if(s.filters&&(s.filters.status&&(a=a.filter(o=>o.status===s.filters.status)),s.filters.type&&(a=a.filter(o=>o.type===s.filters.type))),s.sort){const{field:o,order:p}=s.sort;a.sort((h,m)=>{const c=h[o],N=m[o],g=c>N?1:c<N?-1:0;return p==="asc"?g:-g})}const t=s.page||1,i=s.pageSize||10,l=a.length,n=Math.ceil(l/i),r=(t-1)*i;return{success:!0,data:{data:a.slice(r,r+i),total:l,page:t,pageSize:i,totalPages:n}}}catch{return{success:!1,error:"L·ªói khi t·∫£i danh s√°ch ƒë·ªãa b√†n"}}}async function Wg(s){await js(200);const t=tt().find(i=>i.id===s);return t?{success:!0,data:t}:{success:!1,error:"Kh√¥ng t√¨m th·∫•y ƒë·ªãa b√†n"}}async function Xg(s){await js(300);const a=sm(s);if(!a.valid)return{success:!1,error:a.errors.map(i=>i.message).join(", ")};const t={id:qg(),code:s.code,name:s.name,type:s.type,parentId:s.parentId||null,provinceName:s.provinceName,status:s.status||"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Bg(t),{success:!0,data:t}}async function Yg(s,a){await js(300);const t=tt(),i=t.findIndex(r=>r.id===s);if(i===-1)return{success:!1,error:"Kh√¥ng t√¨m th·∫•y ƒë·ªãa b√†n"};const l=sm(a,!0,s);if(!l.valid)return{success:!1,error:l.errors.map(r=>r.message).join(", ")};const n={...t[i],...a,updatedAt:new Date().toISOString()};return t[i]=n,Yn(t),{success:!0,data:n}}async function eh(s,a=!1){await js(250);const t=tt(),i=t.findIndex(l=>l.id===s);return i===-1?{success:!1,error:"Kh√¥ng t√¨m th·∫•y ƒë·ªãa b√†n"}:(a?t.splice(i,1):t[i]={...t[i],status:"inactive",updatedAt:new Date().toISOString()},Yn(t),{success:!0})}async function sh(s={}){await js(250);try{let a=ca();if(s.search){const o=s.search.toLowerCase();a=a.filter(p=>p.key.toLowerCase().includes(o)||p.name.toLowerCase().includes(o)||p.description.toLowerCase().includes(o))}if(s.filters&&s.filters.status&&(a=a.filter(o=>o.status===s.filters.status)),s.sort){const{field:o,order:p}=s.sort;a.sort((h,m)=>{const c=h[o],N=m[o],g=c>N?1:c<N?-1:0;return p==="asc"?g:-g})}const t=s.page||1,i=s.pageSize||10,l=a.length,n=Math.ceil(l/i),r=(t-1)*i;return{success:!0,data:{data:a.slice(r,r+i),total:l,page:t,pageSize:i,totalPages:n}}}catch{return{success:!1,error:"L·ªói khi t·∫£i danh s√°ch danh m·ª•c"}}}async function im(s){await js(200);const t=ca().find(i=>i.key===s);return t?{success:!0,data:t}:{success:!1,error:"Kh√¥ng t√¨m th·∫•y danh m·ª•c"}}async function ah(s){await js(300);const a=am(s);if(!a.valid)return{success:!1,error:a.errors.map(l=>l.message).join(", ")};const t={key:s.key,name:s.name,description:s.description,group:s.group,itemCount:0,hasSchema:!1,status:s.status||"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},i=ca();return i.push(t),it(i),{success:!0,data:t}}async function th(s,a){await js(300);const t=ca(),i=t.findIndex(r=>r.key===s);if(i===-1)return{success:!1,error:"Kh√¥ng t√¨m th·∫•y danh m·ª•c"};const l=am(a,!0,s);if(!l.valid)return{success:!1,error:l.errors.map(r=>r.message).join(", ")};const n={...t[i],...a,updatedAt:new Date().toISOString()};return t[i]=n,it(t),{success:!0,data:n}}async function ih(s,a=!1){await js(250);const t=ca(),i=t.findIndex(l=>l.key===s);return i===-1?{success:!1,error:"Kh√¥ng t√¨m th·∫•y danh m·ª•c"}:(a?t.splice(i,1):t[i]={...t[i],status:"inactive",updatedAt:new Date().toISOString()},it(t),{success:!0})}async function lh(s,a={}){await js(250);try{let t=Ma().filter(p=>p.catalogKey===s);if(a.search){const p=a.search.toLowerCase();t=t.filter(h=>h.code.toLowerCase().includes(p)||h.name.toLowerCase().includes(p)||h.description&&h.description.toLowerCase().includes(p))}if(a.filters&&a.filters.status&&(t=t.filter(p=>p.status===a.filters.status)),a.sort){const{field:p,order:h}=a.sort;t.sort((m,c)=>{const N=m[p],g=c[p],v=N>g?1:N<g?-1:0;return h==="asc"?v:-v})}else t.sort((p,h)=>p.order-h.order);const i=a.page||1,l=a.pageSize||10,n=t.length,r=Math.ceil(n/l),u=(i-1)*l;return{success:!0,data:{data:t.slice(u,u+l),total:n,page:i,pageSize:l,totalPages:r}}}catch{return{success:!1,error:"L·ªói khi t·∫£i danh s√°ch m·ª•c"}}}async function nh(s){await js(200);const t=Ma().find(i=>i.id===s);return t?{success:!0,data:t}:{success:!1,error:"Kh√¥ng t√¨m th·∫•y m·ª•c"}}async function mh(s){await js(300);const a=tm(s);if(!a.valid)return{success:!1,error:a.errors.map(u=>u.message).join(", ")};const t=Ma().filter(u=>u.catalogKey===s.catalogKey),i=t.length>0?Math.max(...t.map(u=>u.order)):0,l={id:Gg(),catalogKey:s.catalogKey,code:s.code,name:s.name,value:s.value,description:s.description,order:s.order!==void 0?s.order:i+1,badgeColor:s.badgeColor,isDefault:s.isDefault,metadata:s.metadata,status:s.status||"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};Fg(l);const n=ca(),r=n.findIndex(u=>u.key===s.catalogKey);return r!==-1&&(n[r].itemCount++,it(n)),{success:!0,data:l}}async function Tl(s,a){await js(300);const t=Ma(),i=t.findIndex(r=>r.id===s);if(i===-1)return{success:!1,error:"Kh√¥ng t√¨m th·∫•y m·ª•c"};const l=tm(a,!0,s);if(!l.valid)return{success:!1,error:l.errors.map(r=>r.message).join(", ")};const n={...t[i],...a,updatedAt:new Date().toISOString()};return t[i]=n,em(t),{success:!0,data:n}}async function rh(s,a=!1){await js(250);const t=Ma(),i=t.findIndex(n=>n.id===s);if(i===-1)return{success:!1,error:"Kh√¥ng t√¨m th·∫•y m·ª•c"};const l=t[i].catalogKey;if(a?t.splice(i,1):t[i]={...t[i],status:"inactive",updatedAt:new Date().toISOString()},em(t),a){const n=ca(),r=n.findIndex(u=>u.key===l);r!==-1&&(n[r].itemCount--,it(n))}return{success:!0}}const Gt={code:"",name:"",type:"province",parentId:"",provinceName:"",status:"active"};function oh(){const{hasPermission:s}=os(),[a,t]=E.useState(""),[i,l]=E.useState(1),[n]=E.useState(10),[r,u]=E.useState([]),[o,p]=E.useState(0),[h,m]=E.useState(1),[c,N]=E.useState(!0),[g,v]=E.useState(!1),[b,V]=E.useState(null),[D,f]=E.useState(Gt),[P,x]=E.useState({}),[y,Q]=E.useState(null),[U,j]=E.useState({open:!1,id:null,name:""}),A=s("sa.masterdata.jurisdiction.create"),z=s("sa.masterdata.jurisdiction.update"),W=s("sa.masterdata.jurisdiction.delete");E.useEffect(()=>{X()},[i,a]);const X=async()=>{N(!0);try{const S=await Jg({page:i,pageSize:n,search:a,sort:{field:"createdAt",order:"desc"}});S.success&&S.data?(u(S.data.data),p(S.data.total),m(S.data.totalPages)):ls.error(S.error||"L·ªói khi t·∫£i d·ªØ li·ªáu")}catch{ls.error("L·ªói khi t·∫£i d·ªØ li·ªáu")}finally{N(!1)}},fe=()=>{V("create"),f(Gt),x({}),Q(null)},me=async S=>{V("edit"),Q(S),x({});const B=await Wg(S);B.success&&B.data&&f({code:B.data.code,name:B.data.name,type:B.data.type,parentId:B.data.parentId||"",provinceName:B.data.provinceName||"",status:B.data.status})},ue=()=>{g||(V(null),f(Gt),x({}),Q(null))},xe=()=>{const S={};return D.code.trim()||(S.code="M√£ ƒë·ªãa b√†n l√† b·∫Øt bu·ªôc"),D.name.trim()||(S.name="T√™n ƒë·ªãa b√†n l√† b·∫Øt bu·ªôc"),x(S),Object.keys(S).length===0},Ee=async()=>{if(xe()){v(!0);try{const S={code:D.code,name:D.name,type:D.type,parentId:D.parentId||null,provinceName:D.provinceName,status:D.status};let B;b==="create"?B=await Xg(S):b==="edit"&&y&&(B=await Yg(y,S)),B&&B.success?(ls.success(b==="create"?"T·∫°o ƒë·ªãa b√†n th√†nh c√¥ng":"C·∫≠p nh·∫≠t ƒë·ªãa b√†n th√†nh c√¥ng"),ue(),X()):ls.error((B==null?void 0:B.error)||"C√≥ l·ªói x·∫£y ra")}catch{ls.error("C√≥ l·ªói x·∫£y ra")}finally{v(!1)}}},je=(S,B)=>{j({open:!0,id:S,name:B})},Y=async()=>{if(U.id){v(!0);try{const S=await eh(U.id,!1);S.success?(ls.success("Ng·ª´ng ho·∫°t ƒë·ªông ƒë·ªãa b√†n th√†nh c√¥ng"),j({open:!1,id:null,name:""}),X()):ls.error(S.error||"C√≥ l·ªói x·∫£y ra")}catch{ls.error("C√≥ l·ªói x·∫£y ra")}finally{v(!1)}}},de=S=>({province:"T·ªânh/Th√†nh ph·ªë",district:"Qu·∫≠n/Huy·ªán",ward:"Ph∆∞·ªùng/X√£"})[S],Te=[{header:"M√£ ƒë·ªãa b√†n",render:S=>e.jsxDEV("span",{className:fs.code,children:S.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:229,columnNumber:31},this),width:"140px"},{header:"T√™n ƒë·ªãa b√†n",render:S=>e.jsxDEV("span",{className:fs.name,children:S.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:234,columnNumber:31},this)},{header:"Lo·∫°i",render:S=>e.jsxDEV(bt,{variant:"pending",children:de(S.type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:239,columnNumber:9},this),width:"140px"},{header:"T·ªânh/Th√†nh",render:S=>e.jsxDEV("span",{className:fs.muted,children:S.provinceName||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:245,columnNumber:31},this)},{header:"Tr·∫°ng th√°i",render:S=>e.jsxDEV(bt,{variant:S.status==="active"?"active":"inactive",children:S.status==="active"?"Ho·∫°t ƒë·ªông":"Ng·ª´ng ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:250,columnNumber:9},this),width:"140px"},{header:"Thao t√°c",render:S=>e.jsxDEV("div",{className:fs.actions,children:[e.jsxDEV("button",{className:fs.actionButton,onClick:()=>me(S.id),disabled:!z,children:[e.jsxDEV(Ni,{size:14,style:{marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:261,columnNumber:13},this),"S·ª≠a"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:260,columnNumber:11},this),S.status==="active"&&e.jsxDEV("button",{className:fs.actionButtonDanger,onClick:()=>je(S.id,S.name),disabled:!W,children:[e.jsxDEV(fi,{size:14,style:{marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:270,columnNumber:15},this),"Ng·ª´ng"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:265,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:259,columnNumber:9},this),width:"180px"}];return e.jsxDEV(es,{permission:"sa.masterdata.jurisdiction.read",children:e.jsxDEV("div",{style:{padding:"24px"},children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"D·ªØ li·ªáu n·ªÅn"},{label:"Danh m·ª•c h√†nh ch√≠nh"}],title:"Danh m·ª•c h√†nh ch√≠nh",subtitle:"Qu·∫£n l√Ω ƒë·ªãa b√†n theo c·∫•p h√†nh ch√≠nh",actions:e.jsxDEV(we,{size:"sm",onClick:fe,disabled:!A,children:[e.jsxDEV(ua,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:294,columnNumber:15},this),"Th√™m ƒë·ªãa b√†n"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:293,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:283,columnNumber:9},this),e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{children:[e.jsxDEV(Ti,{searchQuery:a,onSearchChange:t,searchPlaceholder:"T√¨m theo m√£, t√™n ƒë·ªãa b√†n...",totalCount:o,entityLabel:"ƒë·ªãa b√†n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:302,columnNumber:13},this),c?e.jsxDEV(Vi,{message:"ƒêang t·∫£i d·ªØ li·ªáu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:311,columnNumber:15},this):r.length===0?e.jsxDEV(aa,{icon:e.jsxDEV(hi,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:314,columnNumber:23},this),title:"Ch∆∞a c√≥ ƒë·ªãa b√†n",message:"Ch∆∞a c√≥ ƒë·ªãa b√†n n√†o trong h·ªá th·ªëng. Nh·∫•n 'Th√™m ƒë·ªãa b√†n' ƒë·ªÉ b·∫Øt ƒë·∫ßu."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:313,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(xi,{columns:Te,data:r,keyExtractor:S=>S.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:320,columnNumber:17},this),e.jsxDEV(yi,{currentPage:i,totalPages:h,onPageChange:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:321,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:319,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:301,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:300,columnNumber:9},this),e.jsxDEV(Hi,{open:b!==null,onClose:ue,title:b==="create"?"Th√™m ƒë·ªãa b√†n":"Ch·ªânh s·ª≠a ƒë·ªãa b√†n",subtitle:b==="create"?"T·∫°o ƒë·ªãa b√†n m·ªõi":"C·∫≠p nh·∫≠t th√¥ng tin ƒë·ªãa b√†n",onSubmit:Ee,loading:g,children:[e.jsxDEV(Vs,{label:"M√£ ƒë·ªãa b√†n",required:!0,error:P.code,children:e.jsxDEV("input",{type:"text",className:`${is.input} ${P.code?is.inputError:""}`,value:D.code,onChange:S=>f({...D,code:S.target.value}),placeholder:"VD: HN",disabled:g},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:336,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:335,columnNumber:11},this),e.jsxDEV(Vs,{label:"T√™n ƒë·ªãa b√†n",required:!0,error:P.name,children:e.jsxDEV("input",{type:"text",className:`${is.input} ${P.name?is.inputError:""}`,value:D.name,onChange:S=>f({...D,name:S.target.value}),placeholder:"VD: H√† N·ªôi",disabled:g},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:347,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:346,columnNumber:11},this),e.jsxDEV(Vs,{label:"Lo·∫°i",required:!0,children:e.jsxDEV("select",{className:is.select,value:D.type,onChange:S=>f({...D,type:S.target.value}),disabled:g,children:[e.jsxDEV("option",{value:"province",children:"T·ªânh/Th√†nh ph·ªë"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:364,columnNumber:15},this),e.jsxDEV("option",{value:"district",children:"Qu·∫≠n/Huy·ªán"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:365,columnNumber:15},this),e.jsxDEV("option",{value:"ward",children:"Ph∆∞·ªùng/X√£"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:366,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:358,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:357,columnNumber:11},this),e.jsxDEV(Vs,{label:"T·ªânh/Th√†nh ph·ªë",children:e.jsxDEV("input",{type:"text",className:is.input,value:D.provinceName,onChange:S=>f({...D,provinceName:S.target.value}),placeholder:"VD: H√† N·ªôi",disabled:g},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:371,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:370,columnNumber:11},this),e.jsxDEV(Vs,{label:"Tr·∫°ng th√°i",required:!0,children:e.jsxDEV("select",{className:is.select,value:D.status,onChange:S=>f({...D,status:S.target.value}),disabled:g,children:[e.jsxDEV("option",{value:"active",children:"Ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:388,columnNumber:15},this),e.jsxDEV("option",{value:"inactive",children:"Ng·ª´ng ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:389,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:382,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:381,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:327,columnNumber:9},this),e.jsxDEV(Ei,{open:U.open,onClose:()=>j({open:!1,id:null,name:""}),onConfirm:Y,title:"Ng·ª´ng ho·∫°t ƒë·ªông ƒë·ªãa b√†n?",description:`B·∫°n c√≥ ch·∫Øc mu·ªën ng·ª´ng ho·∫°t ƒë·ªông ƒë·ªãa b√†n "${U.name}"?`,variant:"warning",confirmLabel:"Ng·ª´ng ho·∫°t ƒë·ªông",loading:g},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:394,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:282,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionsPage.tsx",lineNumber:281,columnNumber:5},this)}const dh=Object.freeze(Object.defineProperty({__proto__:null,default:oh},Symbol.toStringTag,{value:"Module"})),uh=[{id:"1",code:"HN",name:"H√† N·ªôi",type:"province",parentId:null,orgUnitId:"2",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",code:"HCM",name:"TP. H·ªì Ch√≠ Minh",type:"province",parentId:null,orgUnitId:"3",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"3",code:"HN-HBT",name:"Qu·∫≠n Ho√†n Ki·∫øm",type:"district",parentId:"1",orgUnitId:"2",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}],ch=[{key:"document-types",name:"Lo·∫°i vƒÉn b·∫£n",description:"Danh m·ª•c lo·∫°i vƒÉn b·∫£n ph√°p l√Ω",group:"COMMON",itemCount:28,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-05T00:00:00Z"},{key:"provinces",name:"T·ªânh/Th√†nh ph·ªë",description:"Danh s√°ch 63 t·ªânh th√†nh",group:"COMMON",itemCount:63,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{key:"document-statuses",name:"Tr·∫°ng th√°i vƒÉn b·∫£n",description:"Tr·∫°ng th√°i x·ª≠ l√Ω vƒÉn b·∫£n",group:"COMMON",itemCount:8,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{key:"violation-types",name:"Lo·∫°i vi ph·∫°m",description:"Danh m·ª•c c√°c lo·∫°i vi ph·∫°m h√†nh ch√≠nh",group:"DMS",itemCount:45,hasSchema:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z"},{key:"product-categories",name:"Nh√≥m s·∫£n ph·∫©m",description:"Ph√¢n lo·∫°i s·∫£n ph·∫©m h√†ng h√≥a",group:"DMS",itemCount:120,hasSchema:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-10T00:00:00Z"},{key:"inspection-types",name:"Lo·∫°i thanh tra",description:"Ph√¢n lo·∫°i h√¨nh th·ª©c thanh tra ki·ªÉm tra",group:"DMS",itemCount:15,hasSchema:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-08T00:00:00Z"},{key:"evidence-types",name:"Lo·∫°i ch·ª©ng c·ª©",description:"Ph√¢n lo·∫°i ch·ª©ng c·ª© vi ph·∫°m",group:"DMS",itemCount:22,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-12T00:00:00Z"},{key:"user-roles",name:"Vai tr√≤ ng∆∞·ªùi d√πng",description:"Ph√¢n lo·∫°i vai tr√≤ trong h·ªá th·ªëng",group:"SYSTEM",itemCount:12,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-03T00:00:00Z"},{key:"log-types",name:"Lo·∫°i nh·∫≠t k√Ω",description:"Ph√¢n lo·∫°i log h·ªá th·ªëng",group:"SYSTEM",itemCount:18,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{key:"notification-templates",name:"M·∫´u th√¥ng b√°o",description:"Templates cho h·ªá th·ªëng th√¥ng b√°o",group:"SYSTEM",itemCount:25,hasSchema:!0,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-20T00:00:00Z"},{key:"api-endpoints",name:"API Endpoints",description:"Danh s√°ch endpoints v√† permissions",group:"SYSTEM",itemCount:87,hasSchema:!1,status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-18T00:00:00Z"}],ph={"violation-types":{catalogKey:"violation-types",fields:[{key:"severity",label:"M·ª©c ƒë·ªô nghi√™m tr·ªçng",type:"select",required:!0,options:[{value:"low",label:"Th·∫•p"},{value:"medium",label:"Trung b√¨nh"},{value:"high",label:"Cao"}]},{key:"fineMin",label:"M·ª©c ph·∫°t t·ªëi thi·ªÉu (VNƒê)",type:"number",required:!0,validation:{min:0}},{key:"fineMax",label:"M·ª©c ph·∫°t t·ªëi ƒëa (VNƒê)",type:"number",required:!0,validation:{min:0}}],updatedAt:"2024-01-15T00:00:00Z"},"product-categories":{catalogKey:"product-categories",fields:[{key:"riskLevel",label:"M·ª©c ƒë·ªô r·ªßi ro",type:"select",required:!1,options:[{value:"low",label:"Th·∫•p"},{value:"medium",label:"Trung b√¨nh"},{value:"high",label:"Cao"}]},{key:"requiresCert",label:"Y√™u c·∫ßu ch·ª©ng nh·∫≠n",type:"boolean",required:!1,defaultValue:!1}],updatedAt:"2024-01-10T00:00:00Z"}},gh="_mapContainer_1j48z_15",hh="_buttonPrimary_1j48z_191",Nh="_buttonSecondary_1j48z_249",Ls={mapContainer:gh,buttonPrimary:hh,buttonSecondary:Nh};function fh(){const{id:s}=Ys(),a=ys(),{hasPermission:t}=os(),i=t("sa.masterdata.jurisdiction.update"),l=uh.find(n=>n.id===s);return l?e.jsxDEV(es,{permission:"sa.masterdata.jurisdiction.read",children:e.jsxDEV(bs,{title:`B·∫£n ƒë·ªì: ${l.name}`,subtitle:"Xem v√† ch·ªânh s·ª≠a ranh gi·ªõi ƒë·ªãa b√†n tr√™n b·∫£n ƒë·ªì",breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"D·ªØ li·ªáu n·ªÅn",path:"/system-admin/master-data"},{label:"Danh m·ª•c h√†nh ch√≠nh",path:"/system-admin/master-data/jurisdictions"},{label:l.name}],actions:e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{className:Ls.buttonSecondary,onClick:()=>a("/system-admin/master-data/jurisdictions"),children:[e.jsxDEV(sa,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:47,columnNumber:15},this),"Quay l·∫°i"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:43,columnNumber:13},this),e.jsxDEV("button",{className:Ls.buttonPrimary,disabled:!i,children:[e.jsxDEV(Ol,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:51,columnNumber:15},this),"L∆∞u ranh gi·ªõi"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:50,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:42,columnNumber:11},this),children:[e.jsxDEV("div",{className:Ls.mapContainer,children:e.jsxDEV("div",{className:Ls.mapPlaceholder,children:[e.jsxDEV(hi,{size:64},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:60,columnNumber:13},this),e.jsxDEV("h3",{children:"T√≠ch h·ª£p b·∫£n ƒë·ªì"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:61,columnNumber:13},this),e.jsxDEV("p",{children:"Khu v·ª±c n√†y s·∫Ω hi·ªÉn th·ªã b·∫£n ƒë·ªì t∆∞∆°ng t√°c ƒë·ªÉ v·∫Ω v√† ch·ªânh s·ª≠a ranh gi·ªõi ƒë·ªãa b√†n."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:62,columnNumber:13},this),e.jsxDEV("p",{className:Ls.mapInfo,children:[e.jsxDEV("strong",{children:"ƒê·ªãa b√†n:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:66,columnNumber:15},this)," ",l.name," (",l.code,")",e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:67,columnNumber:15},this),e.jsxDEV("strong",{children:"Lo·∫°i:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:68,columnNumber:15},this)," ",l.type,e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:69,columnNumber:15},this),e.jsxDEV("strong",{children:"C√≥ ranh gi·ªõi:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:70,columnNumber:15},this)," ",l.boundary?"C√≥":"Ch∆∞a c√≥"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:65,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:59,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:58,columnNumber:9},this),e.jsxDEV("div",{className:Ls.mapTools,children:[e.jsxDEV("div",{className:Ls.toolsSection,children:[e.jsxDEV("h4",{children:"C√¥ng c·ª• v·∫Ω"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV("div",{className:Ls.toolButtons,children:[e.jsxDEV("button",{className:Ls.toolButton,disabled:!0,children:"V·∫Ω ƒëa gi√°c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:80,columnNumber:15},this),e.jsxDEV("button",{className:Ls.toolButton,disabled:!0,children:"Ch·ªânh s·ª≠a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:81,columnNumber:15},this),e.jsxDEV("button",{className:Ls.toolButton,disabled:!0,children:"X√≥a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:82,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:79,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:77,columnNumber:11},this),e.jsxDEV("div",{className:Ls.toolsSection,children:[e.jsxDEV("h4",{children:"L·ªõp b·∫£n ƒë·ªì"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:86,columnNumber:13},this),e.jsxDEV("div",{className:Ls.layersList,children:[e.jsxDEV("label",{className:Ls.layerItem,children:[e.jsxDEV("input",{type:"checkbox",checked:!0,disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:89,columnNumber:17},this),e.jsxDEV("span",{children:"Ranh gi·ªõi h√†nh ch√≠nh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:90,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:88,columnNumber:15},this),e.jsxDEV("label",{className:Ls.layerItem,children:[e.jsxDEV("input",{type:"checkbox",checked:!0,disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:93,columnNumber:17},this),e.jsxDEV("span",{children:"Danh m·ª•c h√†nh ch√≠nh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:94,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:92,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:87,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:85,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:76,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:31,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:30,columnNumber:5},this):e.jsxDEV(bs,{title:"Kh√¥ng t√¨m th·∫•y ƒë·ªãa b√†n",children:e.jsxDEV("p",{children:"ƒê·ªãa b√†n kh√¥ng t·ªìn t·∫°i."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:24,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/JurisdictionMapPage.tsx",lineNumber:23,columnNumber:7},this)}const vh=Object.freeze(Object.defineProperty({__proto__:null,default:fh},Symbol.toStringTag,{value:"Module"})),Jt={key:"",name:"",description:"",group:"COMMON",status:"active"};function bh(){const s=ys(),{hasPermission:a}=os(),[t,i]=_l(),l=t.get("group"),n=l==="DOMAIN"?"DMS":l,[r,u]=E.useState(n&&["COMMON","DMS","SYSTEM"].includes(n)?n:"ALL"),[o,p]=E.useState(""),[h,m]=E.useState(1),[c]=E.useState(10),[N,g]=E.useState([]),[v,b]=E.useState(0),[V,D]=E.useState(1),[f,P]=E.useState(!0),[x,y]=E.useState(!1),[Q,U]=E.useState(null),[j,A]=E.useState(Jt),[z,W]=E.useState({}),[X,fe]=E.useState(null),[me,ue]=E.useState({open:!1,key:null,name:""}),xe=a("sa.masterdata.catalog.create"),Ee=a("sa.masterdata.catalog.update"),je=a("sa.masterdata.catalog.delete");E.useEffect(()=>{Y()},[h,o,r]);const Y=async()=>{P(!0);try{const H=await sh({page:h,pageSize:c,search:o,sort:{field:"createdAt",order:"desc"}});if(H.success&&H.data){let L=H.data.data;r!=="ALL"&&(L=L.filter(G=>G.group===r)),g(L),b(L.length),D(Math.ceil(L.length/c))}else ls.error(H.error||"L·ªói khi t·∫£i d·ªØ li·ªáu")}catch{ls.error("L·ªói khi t·∫£i d·ªØ li·ªáu")}finally{P(!1)}},de=H=>{u(H),m(1),H==="ALL"?t.delete("group"):t.set("group",H),i(t)},Te=()=>{U("create"),A(Jt),W({}),fe(null)},S=async H=>{U("edit"),fe(H),W({});const L=await im(H);L.success&&L.data&&A({key:L.data.key,name:L.data.name,description:L.data.description,group:L.data.group,status:L.data.status})},B=()=>{x||(U(null),A(Jt),W({}),fe(null))},ge=()=>{const H={};return j.key.trim()?/^[a-z0-9-]+$/.test(j.key)||(H.key="Kh√≥a ch·ªâ ch·ª©a ch·ªØ th∆∞·ªùng, s·ªë v√† d·∫•u g·∫°ch ngang"):H.key="Kh√≥a danh m·ª•c l√† b·∫Øt bu·ªôc",j.name.trim()||(H.name="T√™n danh m·ª•c l√† b·∫Øt bu·ªôc"),j.description.trim()||(H.description="M√¥ t·∫£ l√† b·∫Øt bu·ªôc"),W(H),Object.keys(H).length===0},be=async()=>{if(ge()){y(!0);try{const H={key:j.key,name:j.name,description:j.description,group:j.group,status:j.status};let L;Q==="create"?L=await ah(H):Q==="edit"&&X&&(L=await th(X,H)),L&&L.success?(ls.success(Q==="create"?"T·∫°o danh m·ª•c th√†nh c√¥ng":"C·∫≠p nh·∫≠t danh m·ª•c th√†nh c√¥ng"),B(),Y()):ls.error((L==null?void 0:L.error)||"C√≥ l·ªói x·∫£y ra")}catch{ls.error("C√≥ l·ªói x·∫£y ra")}finally{y(!1)}}},ie=(H,L)=>{ue({open:!0,key:H,name:L})},Ne=async()=>{if(me.key){y(!0);try{const H=await ih(me.key,!1);H.success?(ls.success("Ng·ª´ng ho·∫°t ƒë·ªông danh m·ª•c th√†nh c√¥ng"),ue({open:!1,key:null,name:""}),Y()):ls.error(H.error||"C√≥ l·ªói x·∫£y ra")}catch{ls.error("C√≥ l·ªói x·∫£y ra")}finally{y(!1)}}},w=H=>{s(`/system-admin/master-data/catalogs/${H}/items`)},_=[{header:"Kh√≥a",render:H=>e.jsxDEV("span",{className:fs.code,children:H.key},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:277,columnNumber:34},this),width:"180px"},{header:"T√™n danh m·ª•c",render:H=>e.jsxDEV("span",{className:fs.name,children:H.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:282,columnNumber:34},this)},{header:"M√¥ t·∫£",render:H=>e.jsxDEV("span",{className:fs.muted,children:H.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:286,columnNumber:34},this)},{header:"S·ªë m·ª•c",render:H=>e.jsxDEV("span",{children:H.itemCount},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:290,columnNumber:34},this),width:"100px"},{header:"Tr·∫°ng th√°i",render:H=>e.jsxDEV(bt,{variant:H.status==="active"?"active":"inactive",children:H.status==="active"?"Ho·∫°t ƒë·ªông":"Ng·ª´ng ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:296,columnNumber:9},this),width:"140px"},{header:"Thao t√°c",render:H=>e.jsxDEV("div",{className:fs.actions,children:[e.jsxDEV("button",{className:fs.actionButton,onClick:()=>w(H.key),children:[e.jsxDEV(gi,{size:14,style:{marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:307,columnNumber:13},this),"Xem"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:306,columnNumber:11},this),e.jsxDEV("button",{className:fs.actionButton,onClick:()=>S(H.key),disabled:!Ee,children:[e.jsxDEV(Ni,{size:14,style:{marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:311,columnNumber:13},this),"S·ª≠a"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:310,columnNumber:11},this),H.status==="active"&&e.jsxDEV("button",{className:fs.actionButtonDanger,onClick:()=>ie(H.key,H.name),disabled:!je,children:[e.jsxDEV(fi,{size:14,style:{marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:320,columnNumber:15},this),"Ng·ª´ng"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:315,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:305,columnNumber:9},this),width:"240px"}];return e.jsxDEV(es,{permission:"sa.masterdata.catalog.read",children:e.jsxDEV("div",{style:{padding:"24px"},children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"D·ªØ li·ªáu n·ªÅn"},{label:"Danh m·ª•c h·ªá th·ªëng"}],title:"Qu·∫£n l√Ω Danh m·ª•c",subtitle:"Qu·∫£n l√Ω c√°c danh m·ª•c d√πng chung trong h·ªá th·ªëng",actions:e.jsxDEV(we,{size:"sm",onClick:Te,disabled:!xe,children:[e.jsxDEV(ua,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:344,columnNumber:15},this),"Th√™m danh m·ª•c"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:343,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:333,columnNumber:9},this),e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{children:[e.jsxDEV("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",borderBottom:"1px solid var(--border)",paddingBottom:"0"},children:[{key:"ALL",label:"T·∫•t c·∫£",icon:si},{key:"COMMON",label:"D√πng chung",icon:dr},{key:"DMS",label:"Nghi·ªáp v·ª•",icon:kl},{key:"SYSTEM",label:"K·ªπ thu·∫≠t",icon:di}].map(H=>{const L=H.icon,G=r===H.key;return e.jsxDEV("button",{onClick:()=>de(H.key),style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"10px 16px",background:"transparent",border:"none",borderBottom:G?"2px solid var(--primary)":"2px solid transparent",color:G?"var(--primary)":"var(--muted-foreground)",fontWeight:G?"var(--font-weight-semibold)":"var(--font-weight-medium)",fontSize:"var(--text-sm)",cursor:"pointer",transition:"all 0.2s ease"},children:[e.jsxDEV(L,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:387,columnNumber:21},this),H.label]},H.key,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:369,columnNumber:19},this)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:353,columnNumber:13},this),e.jsxDEV(Ti,{searchQuery:o,onSearchChange:p,searchPlaceholder:"T√¨m theo kh√≥a, t√™n danh m·ª•c...",totalCount:v,entityLabel:"danh m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:394,columnNumber:13},this),f?e.jsxDEV(Vi,{message:"ƒêang t·∫£i d·ªØ li·ªáu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:403,columnNumber:15},this):N.length===0?e.jsxDEV(aa,{icon:e.jsxDEV(si,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:406,columnNumber:23},this),title:"Ch∆∞a c√≥ danh m·ª•c",message:"Ch∆∞a c√≥ danh m·ª•c n√†o trong h·ªá th·ªëng. Nh·∫•n 'Th√™m danh m·ª•c' ƒë·ªÉ b·∫Øt ƒë·∫ßu."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:405,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(xi,{columns:_,data:N,keyExtractor:H=>H.key},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:412,columnNumber:17},this),e.jsxDEV(yi,{currentPage:h,totalPages:V,onPageChange:m},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:413,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:411,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:351,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:350,columnNumber:9},this),e.jsxDEV(Hi,{open:Q!==null,onClose:B,title:Q==="create"?"Th√™m danh m·ª•c":"Ch·ªânh s·ª≠a danh m·ª•c",subtitle:Q==="create"?"T·∫°o danh m·ª•c m·ªõi":"C·∫≠p nh·∫≠t th√¥ng tin danh m·ª•c",onSubmit:be,loading:x,children:[e.jsxDEV(Vs,{label:"Kh√≥a danh m·ª•c",required:!0,error:z.key,children:[e.jsxDEV("input",{type:"text",className:`${is.input} ${z.key?is.inputError:""}`,value:j.key,onChange:H=>A({...j,key:H.target.value}),placeholder:"VD: violation-types",disabled:x||Q==="edit"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:428,columnNumber:13},this),Q==="create"&&e.jsxDEV("div",{style:{fontSize:"var(--text-xs)",color:"var(--muted-foreground)",marginTop:"4px"},children:"Ch·ªâ ch·ª©a ch·ªØ th∆∞·ªùng, s·ªë v√† d·∫•u g·∫°ch ngang (-)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:437,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:427,columnNumber:11},this),e.jsxDEV(Vs,{label:"T√™n danh m·ª•c",required:!0,error:z.name,children:e.jsxDEV("input",{type:"text",className:`${is.input} ${z.name?is.inputError:""}`,value:j.name,onChange:H=>A({...j,name:H.target.value}),placeholder:"VD: Lo·∫°i vi ph·∫°m",disabled:x},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:444,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:443,columnNumber:11},this),e.jsxDEV(Vs,{label:"M√¥ t·∫£",required:!0,error:z.description,children:e.jsxDEV("textarea",{className:`${is.textarea} ${z.description?is.inputError:""}`,value:j.description,onChange:H=>A({...j,description:H.target.value}),placeholder:"M√¥ t·∫£ v·ªÅ danh m·ª•c...",disabled:x,rows:3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:455,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:454,columnNumber:11},this),e.jsxDEV(Vs,{label:"Nh√≥m",required:!0,children:e.jsxDEV("select",{className:is.select,value:j.group,onChange:H=>A({...j,group:H.target.value}),disabled:x,children:[e.jsxDEV("option",{value:"COMMON",children:"D√πng chung"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:472,columnNumber:15},this),e.jsxDEV("option",{value:"DMS",children:"Nghi·ªáp v·ª•"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:473,columnNumber:15},this),e.jsxDEV("option",{value:"SYSTEM",children:"K·ªπ thu·∫≠t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:474,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:466,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:465,columnNumber:11},this),e.jsxDEV(Vs,{label:"Tr·∫°ng th√°i",required:!0,children:e.jsxDEV("select",{className:is.select,value:j.status,onChange:H=>A({...j,status:H.target.value}),disabled:x,children:[e.jsxDEV("option",{value:"active",children:"Ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:485,columnNumber:15},this),e.jsxDEV("option",{value:"inactive",children:"Ng·ª´ng ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:486,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:479,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:478,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:419,columnNumber:9},this),e.jsxDEV(Ei,{open:me.open,onClose:()=>ue({open:!1,key:null,name:""}),onConfirm:Ne,title:"Ng·ª´ng ho·∫°t ƒë·ªông danh m·ª•c?",description:`B·∫°n c√≥ ch·∫Øc mu·ªën ng·ª´ng ho·∫°t ƒë·ªông danh m·ª•c "${me.name}"?`,variant:"warning",confirmLabel:"Ng·ª´ng ho·∫°t ƒë·ªông",loading:x},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:491,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:332,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogsPage.tsx",lineNumber:331,columnNumber:5},this)}const Vh=Object.freeze(Object.defineProperty({__proto__:null,default:bh},Symbol.toStringTag,{value:"Module"})),Th="_container_1nzjl_5",xh="_toolbar_1nzjl_17",yh="_toolbarButton_1nzjl_29",Eh="_tableWrapper_1nzjl_61",Hh="_table_1nzjl_61",Dh="_thead_1nzjl_85",Ph="_th_1nzjl_85",Lh="_tbody_1nzjl_113",jh="_row_1nzjl_121",Qh="_cell_1nzjl_147",_h="_nameCell_1nzjl_161",Ch="_expandButton_1nzjl_173",Sh="_expandIcon_1nzjl_211",Mh="_expandPlaceholder_1nzjl_221",Ih="_itemName_1nzjl_233",Ah="_code_1nzjl_241",wh="_value_1nzjl_263",kh="_order_1nzjl_273",Rh="_statusBadge_1nzjl_299",Oh="_statusActive_1nzjl_329",Uh="_statusInactive_1nzjl_339",$h="_actions_1nzjl_349",Kh="_actionButton_1nzjl_359",Zh="_actionButtonDanger_1nzjl_405",zh="_empty_1nzjl_417",Ae={container:Th,toolbar:xh,toolbarButton:yh,tableWrapper:Eh,table:Hh,thead:Dh,th:Ph,tbody:Lh,row:jh,cell:Qh,nameCell:_h,expandButton:Ch,expandIcon:Sh,expandPlaceholder:Mh,itemName:Ih,code:Ah,value:wh,order:kh,statusBadge:Rh,statusActive:Oh,statusInactive:Uh,actions:$h,actionButton:Kh,actionButtonDanger:Zh,empty:zh},Bh=({items:s,onEdit:a,onDelete:t,onToggleStatus:i,isLocked:l=!1})=>{const[n,r]=E.useState(new Set),u=E.useMemo(()=>{const c=new Map,N=[];s.forEach(v=>{c.set(v.id,{...v,children:[],level:0})}),s.forEach(v=>{const b=c.get(v.id);if(v.parentId){const V=c.get(v.parentId);V?(V.children=V.children||[],V.children.push(b),b.level=(V.level||0)+1):N.push(b)}else N.push(b)});const g=v=>{v.children&&v.children.length>0&&(v.children.sort((b,V)=>b.order-V.order),v.children.forEach(g))};return N.sort((v,b)=>v.order-b.order),N.forEach(g),N},[s]),o=c=>{r(N=>{const g=new Set(N);return g.has(c)?g.delete(c):g.add(c),g})},p=()=>{const c=new Set,N=g=>{g.forEach(v=>{v.children&&v.children.length>0&&(c.add(v.id),N(v.children))})};N(u),r(c)},h=()=>{r(new Set)},m=c=>{const N=c.children&&c.children.length>0,g=n.has(c.id),v=(c.level||0)*24;return e.jsxDEV(d.Fragment,{children:[e.jsxDEV("tr",{className:Ae.row,children:[e.jsxDEV("td",{className:Ae.cell,style:{paddingLeft:`${12+v}px`},children:e.jsxDEV("div",{className:Ae.nameCell,children:[N?e.jsxDEV("button",{type:"button",onClick:()=>o(c.id),className:Ae.expandButton,"aria-label":g?"Thu g·ªçn":"M·ªü r·ªông",children:g?e.jsxDEV(ur,{className:Ae.expandIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:124,columnNumber:21},void 0):e.jsxDEV(Cl,{className:Ae.expandIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:126,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:117,columnNumber:17},void 0):e.jsxDEV("span",{className:Ae.expandPlaceholder},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:130,columnNumber:17},void 0),e.jsxDEV("span",{className:Ae.itemName,children:c.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:132,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:115,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:114,columnNumber:11},void 0),e.jsxDEV("td",{className:Ae.cell,children:e.jsxDEV("code",{className:Ae.code,children:c.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:136,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:135,columnNumber:11},void 0),e.jsxDEV("td",{className:Ae.cell,children:c.value&&e.jsxDEV("span",{className:Ae.value,children:c.value},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:139,columnNumber:28},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:138,columnNumber:11},void 0),e.jsxDEV("td",{className:Ae.cell,children:e.jsxDEV("span",{className:Ae.order,children:c.order},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:142,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:141,columnNumber:11},void 0),e.jsxDEV("td",{className:Ae.cell,children:e.jsxDEV("button",{type:"button",onClick:()=>i==null?void 0:i(c),className:`${Ae.statusBadge} ${c.status==="active"?Ae.statusActive:Ae.statusInactive}`,disabled:l,children:c.status==="active"?"Ho·∫°t ƒë·ªông":"Ng·ª´ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:145,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:144,columnNumber:11},void 0),e.jsxDEV("td",{className:Ae.cell,children:e.jsxDEV("div",{className:Ae.actions,children:[e.jsxDEV("button",{type:"button",onClick:()=>a==null?void 0:a(c),className:Ae.actionButton,disabled:l,children:"S·ª≠a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:158,columnNumber:15},void 0),e.jsxDEV("button",{type:"button",onClick:()=>t==null?void 0:t(c),className:`${Ae.actionButton} ${Ae.actionButtonDanger}`,disabled:l,children:"X√≥a"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:166,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:157,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:156,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:113,columnNumber:9},void 0),g&&N&&c.children.map(b=>m(b))]},c.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:112,columnNumber:7},void 0)};return u.length===0?e.jsxDEV("div",{className:Ae.empty,children:e.jsxDEV("p",{children:"Kh√¥ng c√≥ d·ªØ li·ªáu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:185,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:184,columnNumber:7},void 0):e.jsxDEV("div",{className:Ae.container,children:[e.jsxDEV("div",{className:Ae.toolbar,children:[e.jsxDEV("button",{type:"button",onClick:p,className:Ae.toolbarButton,children:"M·ªü r·ªông t·∫•t c·∫£"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:193,columnNumber:9},void 0),e.jsxDEV("button",{type:"button",onClick:h,className:Ae.toolbarButton,children:"Thu g·ªçn t·∫•t c·∫£"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:200,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:192,columnNumber:7},void 0),e.jsxDEV("div",{className:Ae.tableWrapper,children:e.jsxDEV("table",{className:Ae.table,children:[e.jsxDEV("thead",{className:Ae.thead,children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:Ae.th,children:"T√™n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:213,columnNumber:15},void 0),e.jsxDEV("th",{className:Ae.th,children:"M√£"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:214,columnNumber:15},void 0),e.jsxDEV("th",{className:Ae.th,children:"Gi√° tr·ªã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:215,columnNumber:15},void 0),e.jsxDEV("th",{className:Ae.th,children:"Th·ª© t·ª±"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:216,columnNumber:15},void 0),e.jsxDEV("th",{className:Ae.th,children:"Tr·∫°ng th√°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:217,columnNumber:15},void 0),e.jsxDEV("th",{className:Ae.th,children:"Thao t√°c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:218,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:212,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:211,columnNumber:11},void 0),e.jsxDEV("tbody",{className:Ae.tbody,children:u.map(c=>m(c))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:221,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:210,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:209,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/components/TreeTable.tsx",lineNumber:191,columnNumber:5},void 0)},Wt={code:"",name:"",value:"",description:"",order:1,badgeColor:"",isDefault:!1,status:"active"};function qh(){const{catalogKey:s}=Ys(),a=ys(),{hasPermission:t}=os(),[i,l]=E.useState(""),[n,r]=E.useState(1),[u]=E.useState(10),[o,p]=E.useState([]),[h,m]=E.useState(null),[c,N]=E.useState(0),[g,v]=E.useState(1),[b,V]=E.useState(!0),[D,f]=E.useState(!1),[P,x]=E.useState("list"),[y,Q]=E.useState(null),[U,j]=E.useState(Wt),[A,z]=E.useState({}),[W,X]=E.useState(null),[fe,me]=E.useState({open:!1,id:null,name:""}),ue=t("sa.masterdata.catalog.create"),xe=t("sa.masterdata.catalog.update"),Ee=t("sa.masterdata.catalog.delete");E.useEffect(()=>{s&&(je(),Y())},[s,n,i]);const je=async()=>{if(!s)return;const L=await im(s);L.success&&L.data&&m(L.data)},Y=async()=>{if(s){V(!0);try{const L=await lh(s,{page:n,pageSize:u,search:i,sort:{field:"order",order:"asc"}});L.success&&L.data?(p(L.data.data),N(L.data.total),v(L.data.totalPages)):ls.error(L.error||"L·ªói khi t·∫£i d·ªØ li·ªáu")}catch{ls.error("L·ªói khi t·∫£i d·ªØ li·ªáu")}finally{V(!1)}}},de=()=>{Q("create"),j({...Wt,order:o.length+1}),z({}),X(null)},Te=async L=>{Q("edit"),X(L),z({});const G=await nh(L);G.success&&G.data&&j({code:G.data.code,name:G.data.name,value:G.data.value||"",description:G.data.description||"",order:G.data.order,badgeColor:G.data.badgeColor||"",isDefault:G.data.isDefault||!1,status:G.data.status})},S=()=>{D||(Q(null),j(Wt),z({}),X(null))},B=()=>{const L={};return U.code.trim()||(L.code="M√£ m·ª•c l√† b·∫Øt bu·ªôc"),U.name.trim()||(L.name="T√™n m·ª•c l√† b·∫Øt bu·ªôc"),U.order<1&&(L.order="Th·ª© t·ª± ph·∫£i l·ªõn h∆°n 0"),z(L),Object.keys(L).length===0},ge=async()=>{if(!(!B()||!s)){f(!0);try{const L={catalogKey:s,code:U.code,name:U.name,value:U.value,description:U.description,order:U.order,badgeColor:U.badgeColor,isDefault:U.isDefault,status:U.status};let G;y==="create"?G=await mh(L):y==="edit"&&W&&(G=await Tl(W,L)),G&&G.success?(ls.success(y==="create"?"T·∫°o m·ª•c th√†nh c√¥ng":"C·∫≠p nh·∫≠t m·ª•c th√†nh c√¥ng"),S(),Y(),je()):ls.error((G==null?void 0:G.error)||"C√≥ l·ªói x·∫£y ra")}catch{ls.error("C√≥ l·ªói x·∫£y ra")}finally{f(!1)}}},be=(L,G)=>{me({open:!0,id:L,name:G})},ie=async()=>{if(fe.id){f(!0);try{const L=await rh(fe.id,!0);L.success?(ls.success("X√≥a m·ª•c th√†nh c√¥ng"),me({open:!1,id:null,name:""}),Y(),je()):ls.error(L.error||"C√≥ l·ªói x·∫£y ra")}catch{ls.error("C√≥ l·ªói x·∫£y ra")}finally{f(!1)}}},Ne=()=>{a("/system-admin/master-data/catalogs")},w=async L=>{if(!xe||h!=null&&h.isLocked)return;const G=L.status==="active"?"inactive":"active",ye=await Tl(L.id,{status:G});ye.success?(ls.success("C·∫≠p nh·∫≠t tr·∫°ng th√°i th√†nh c√¥ng"),Y()):ls.error(ye.error||"C√≥ l·ªói x·∫£y ra")},_=o.some(L=>L.parentId!==null&&L.parentId!==void 0),H=[{header:"#",render:L=>e.jsxDEV("span",{children:L.order},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:278,columnNumber:38},this),width:"60px"},{header:"M√£",render:L=>e.jsxDEV("span",{className:fs.code,children:L.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:283,columnNumber:38},this),width:"160px"},{header:"T√™n m·ª•c",render:L=>e.jsxDEV("span",{className:fs.name,children:L.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:288,columnNumber:38},this)},{header:"M√¥ t·∫£",render:L=>e.jsxDEV("span",{className:fs.muted,children:L.description||"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:292,columnNumber:38},this)},{header:"Tr·∫°ng th√°i",render:L=>e.jsxDEV(bt,{variant:L.status==="active"?"active":"inactive",children:L.status==="active"?"Ho·∫°t ƒë·ªông":"Ng·ª´ng ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:297,columnNumber:9},this),width:"140px"},{header:"Thao t√°c",render:L=>e.jsxDEV("div",{className:fs.actions,children:[e.jsxDEV("button",{className:fs.actionButton,onClick:()=>Te(L.id),disabled:!xe,children:[e.jsxDEV(Ni,{size:14,style:{marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:308,columnNumber:13},this),"S·ª≠a"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:307,columnNumber:11},this),e.jsxDEV("button",{className:fs.actionButtonDanger,onClick:()=>be(L.id,L.name),disabled:!Ee,children:[e.jsxDEV(Et,{size:14,style:{marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:316,columnNumber:13},this),"X√≥a"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:311,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:306,columnNumber:9},this),width:"180px"}];return e.jsxDEV(es,{permission:"sa.masterdata.catalog.read",children:e.jsxDEV("div",{style:{padding:"24px"},children:[e.jsxDEV(hs,{breadcrumbs:[{label:"Trang ch·ªß",href:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",href:"/system-admin"},{label:"D·ªØ li·ªáu n·ªÅn"},{label:"Danh m·ª•c h·ªá th·ªëng",href:"/system-admin/master-data/catalogs"},{label:(h==null?void 0:h.name)||s||""}],title:(h==null?void 0:h.name)||"C√°c m·ª•c trong danh m·ª•c",subtitle:(h==null?void 0:h.description)||"",actions:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(we,{variant:"outline",size:"sm",onClick:Ne,children:[e.jsxDEV(sa,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:341,columnNumber:17},this),"Quay l·∫°i"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:340,columnNumber:15},this),e.jsxDEV(we,{size:"sm",onClick:de,disabled:!ue,children:[e.jsxDEV(ua,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:345,columnNumber:17},this),"Th√™m m·ª•c"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:344,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:339,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:328,columnNumber:9},this),e.jsxDEV(Ke,{children:e.jsxDEV(Ze,{children:[e.jsxDEV(Ti,{searchQuery:i,onSearchChange:l,searchPlaceholder:"T√¨m theo m√£, t√™n m·ª•c...",totalCount:c,entityLabel:"m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:354,columnNumber:13},this),_&&o.length>0&&e.jsxDEV("div",{style:{display:"flex",gap:"var(--spacing-2)",marginBottom:"var(--spacing-4)",borderBottom:"1px solid var(--color-border)",paddingBottom:"var(--spacing-2)"},children:[e.jsxDEV("button",{onClick:()=>x("list"),style:{padding:"var(--spacing-2) var(--spacing-4)",background:P==="list"?"var(--color-primary)":"var(--color-surface)",color:P==="list"?"white":"var(--color-text-primary)",border:`1px solid ${P==="list"?"var(--color-primary)":"var(--color-border)"}`,borderRadius:"var(--radius-md)",cursor:"pointer",display:"flex",alignItems:"center",gap:"var(--spacing-2)",fontSize:"var(--font-size-sm)",fontWeight:500,transition:"all 0.2s"},children:[e.jsxDEV(si,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:388,columnNumber:19},this),"Danh s√°ch"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:371,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>x("tree"),style:{padding:"var(--spacing-2) var(--spacing-4)",background:P==="tree"?"var(--color-primary)":"var(--color-surface)",color:P==="tree"?"white":"var(--color-text-primary)",border:`1px solid ${P==="tree"?"var(--color-primary)":"var(--color-border)"}`,borderRadius:"var(--radius-md)",cursor:"pointer",display:"flex",alignItems:"center",gap:"var(--spacing-2)",fontSize:"var(--font-size-sm)",fontWeight:500,transition:"all 0.2s"},children:[e.jsxDEV(cr,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:408,columnNumber:19},this),"C√¢y ph√¢n c·∫•p"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:391,columnNumber:17},this),P==="tree"&&e.jsxDEV("div",{style:{marginLeft:"auto",fontSize:"var(--font-size-xs)",color:"var(--color-text-secondary)",display:"flex",alignItems:"center",fontStyle:"italic"},children:"* Ch·∫ø ƒë·ªô c√¢y hi·ªÉn th·ªã to√†n b·ªô d·ªØ li·ªáu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:412,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:364,columnNumber:15},this),b?e.jsxDEV(Vi,{message:"ƒêang t·∫£i d·ªØ li·ªáu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:427,columnNumber:15},this):o.length===0?e.jsxDEV(aa,{icon:e.jsxDEV(pr,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:430,columnNumber:23},this),title:"Ch∆∞a c√≥ m·ª•c n√†o",message:"Ch∆∞a c√≥ m·ª•c n√†o trong danh m·ª•c n√†y. Nh·∫•n 'Th√™m m·ª•c' ƒë·ªÉ b·∫Øt ƒë·∫ßu."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:429,columnNumber:15},this):P==="tree"&&_?e.jsxDEV(Bh,{items:o,onEdit:xe?L=>Te(L.id):void 0,onDelete:Ee?L=>be(L.id,L.name):void 0,onToggleStatus:xe?w:void 0,isLocked:h==null?void 0:h.isLocked},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:435,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(xi,{columns:H,data:o,keyExtractor:L=>L.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:444,columnNumber:17},this),e.jsxDEV(yi,{currentPage:n,totalPages:g,onPageChange:r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:445,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:443,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:353,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:352,columnNumber:9},this),e.jsxDEV(Hi,{open:y!==null,onClose:S,title:y==="create"?"Th√™m m·ª•c":"Ch·ªânh s·ª≠a m·ª•c",subtitle:y==="create"?"T·∫°o m·ª•c m·ªõi trong danh m·ª•c":"C·∫≠p nh·∫≠t th√¥ng tin m·ª•c",onSubmit:ge,loading:D,children:[e.jsxDEV(Vs,{label:"M√£ m·ª•c",required:!0,error:A.code,children:e.jsxDEV("input",{type:"text",className:`${is.input} ${A.code?is.inputError:""}`,value:U.code,onChange:L=>j({...U,code:L.target.value}),placeholder:"VD: VP-001",disabled:D},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:460,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:459,columnNumber:11},this),e.jsxDEV(Vs,{label:"T√™n m·ª•c",required:!0,error:A.name,children:e.jsxDEV("input",{type:"text",className:`${is.input} ${A.name?is.inputError:""}`,value:U.name,onChange:L=>j({...U,name:L.target.value}),placeholder:"VD: Vi ph·∫°m v·ªÅ gi√°",disabled:D},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:471,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:470,columnNumber:11},this),e.jsxDEV(Vs,{label:"Gi√° tr·ªã",children:e.jsxDEV("input",{type:"text",className:is.input,value:U.value,onChange:L=>j({...U,value:L.target.value}),placeholder:"Gi√° tr·ªã m·ª•c...",disabled:D},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:482,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:481,columnNumber:11},this),e.jsxDEV(Vs,{label:"M√¥ t·∫£",children:e.jsxDEV("textarea",{className:is.textarea,value:U.description,onChange:L=>j({...U,description:L.target.value}),placeholder:"M√¥ t·∫£ v·ªÅ m·ª•c...",disabled:D,rows:3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:493,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:492,columnNumber:11},this),e.jsxDEV(Vs,{label:"Th·ª© t·ª±",required:!0,error:A.order,children:e.jsxDEV("input",{type:"number",className:`${is.input} ${A.order?is.inputError:""}`,value:U.order,onChange:L=>j({...U,order:Number(L.target.value)}),min:1,disabled:D},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:504,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:503,columnNumber:11},this),e.jsxDEV(Vs,{label:"M√†u badge",children:e.jsxDEV("input",{type:"text",className:is.input,value:U.badgeColor,onChange:L=>j({...U,badgeColor:L.target.value}),placeholder:"M√†u badge...",disabled:D},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:515,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:514,columnNumber:11},this),e.jsxDEV(Vs,{label:"M·∫∑c ƒë·ªãnh",children:e.jsxDEV("input",{type:"checkbox",className:is.checkbox,checked:U.isDefault,onChange:L=>j({...U,isDefault:L.target.checked}),disabled:D},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:526,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:525,columnNumber:11},this),e.jsxDEV(Vs,{label:"Tr·∫°ng th√°i",required:!0,children:e.jsxDEV("select",{className:is.select,value:U.status,onChange:L=>j({...U,status:L.target.value}),disabled:D,children:[e.jsxDEV("option",{value:"active",children:"Ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:542,columnNumber:15},this),e.jsxDEV("option",{value:"inactive",children:"Ng·ª´ng ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:543,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:536,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:535,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:451,columnNumber:9},this),e.jsxDEV(Ei,{open:fe.open,onClose:()=>me({open:!1,id:null,name:""}),onConfirm:ie,title:"X√≥a m·ª•c?",description:`B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a m·ª•c "${fe.name}"? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.`,variant:"danger",confirmLabel:"X√≥a",loading:D},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:548,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:327,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogItemsPage.tsx",lineNumber:326,columnNumber:5},this)}const Fh=Object.freeze(Object.defineProperty({__proto__:null,default:qh},Symbol.toStringTag,{value:"Module"})),Gh="_fieldInfo_1sb85_119",Jh="_buttonPrimary_1sb85_245",Wh="_buttonSecondary_1sb85_303",Je={fieldInfo:Gh,buttonPrimary:Jh,buttonSecondary:Wh};function Xh(){const{catalogKey:s}=Ys(),a=ys(),{hasPermission:t}=os(),i=t("sa.masterdata.catalog.update"),l=ch.find(m=>m.key===s),n=ph[s||""],[r,u]=E.useState((n==null?void 0:n.fields)||[]);if(!l)return e.jsxDEV(bs,{title:"Kh√¥ng t√¨m th·∫•y danh m·ª•c",children:e.jsxDEV("p",{children:"Danh m·ª•c kh√¥ng t·ªìn t·∫°i."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:29,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:28,columnNumber:7},this);if(!l.hasSchema)return e.jsxDEV(bs,{title:l.name,children:e.jsxDEV("p",{children:"Danh m·ª•c n√†y kh√¥ng s·ª≠ d·ª•ng schema t√πy ch·ªânh."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:37,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:36,columnNumber:7},this);const o=()=>{const m={key:`field_${Date.now()}`,label:"Tr∆∞·ªùng m·ªõi",type:"text",required:!1};u([...r,m])},p=m=>{u(r.filter((c,N)=>N!==m))},h=m=>{switch(m){case"text":return"VƒÉn b·∫£n";case"number":return"S·ªë";case"boolean":return"ƒê√∫ng/Sai";case"date":return"Ng√†y th√°ng";case"select":return"Danh s√°ch"}};return e.jsxDEV(es,{permission:"sa.masterdata.catalog.read",children:e.jsxDEV(bs,{title:`Schema: ${l.name}`,subtitle:"C·∫•u h√¨nh c·∫•u tr√∫c d·ªØ li·ªáu metadata cho c√°c m·ª•c trong danh m·ª•c",breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"D·ªØ li·ªáu n·ªÅn",path:"/system-admin/master-data"},{label:"Danh m·ª•c",path:"/system-admin/master-data/catalogs"},{label:l.name,path:`/system-admin/master-data/catalogs/${l.key}/items`},{label:"Schema"}],actions:e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{className:Je.buttonSecondary,onClick:()=>a(`/system-admin/master-data/catalogs/${l.key}/items`),children:[e.jsxDEV(sa,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:85,columnNumber:15},this),"Quay l·∫°i"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:81,columnNumber:13},this),e.jsxDEV("button",{className:Je.buttonPrimary,disabled:!i,children:[e.jsxDEV(Ol,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:92,columnNumber:15},this),"L∆∞u schema"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:88,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:80,columnNumber:11},this),children:[e.jsxDEV("div",{className:Je.infoCard,children:[e.jsxDEV("h3",{children:"Th√¥ng tin Schema"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:100,columnNumber:11},this),e.jsxDEV("p",{children:["Schema ƒë·ªãnh nghƒ©a c·∫•u tr√∫c d·ªØ li·ªáu metadata cho c√°c m·ª•c trong danh m·ª•c"," ",e.jsxDEV("strong",{children:l.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:103,columnNumber:13},this),". M·ªói m·ª•c trong danh m·ª•c s·∫Ω c√≥ c√°c tr∆∞·ªùng metadata theo schema n√†y."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:101,columnNumber:11},this),e.jsxDEV("p",{className:Je.lastUpdated,children:["C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: ",n!=null&&n.updatedAt?new Date(n.updatedAt).toLocaleString("vi-VN"):"Ch∆∞a c√≥"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:106,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:99,columnNumber:9},this),e.jsxDEV("div",{className:Je.fieldsSection,children:[e.jsxDEV("div",{className:Je.fieldsHeader,children:[e.jsxDEV("h3",{children:["Danh s√°ch tr∆∞·ªùng (",r.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:114,columnNumber:13},this),e.jsxDEV("button",{className:Je.buttonSecondary,onClick:o,disabled:!i,children:[e.jsxDEV(ua,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:120,columnNumber:15},this),"Th√™m tr∆∞·ªùng"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:115,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:113,columnNumber:11},this),r.length===0?e.jsxDEV("div",{className:Je.emptyFields,children:e.jsxDEV("p",{children:'Ch∆∞a c√≥ tr∆∞·ªùng n√†o. Click "Th√™m tr∆∞·ªùng" ƒë·ªÉ b·∫Øt ƒë·∫ßu.'},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:127,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:126,columnNumber:13},this):e.jsxDEV("div",{className:Je.fieldsList,children:r.map((m,c)=>e.jsxDEV("div",{className:Je.fieldCard,children:[e.jsxDEV("div",{className:Je.fieldHeader,children:[e.jsxDEV("div",{className:Je.fieldBadge,children:c+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:134,columnNumber:21},this),e.jsxDEV("div",{className:Je.fieldInfo,children:[e.jsxDEV("div",{className:Je.fieldKey,children:m.key},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:136,columnNumber:23},this),e.jsxDEV("div",{className:Je.fieldLabel,children:m.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:137,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:135,columnNumber:21},this),e.jsxDEV("button",{className:Je.deleteButton,onClick:()=>p(c),disabled:!i,children:e.jsxDEV(Et,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:144,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:139,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:133,columnNumber:19},this),e.jsxDEV("div",{className:Je.fieldDetails,children:[e.jsxDEV("div",{className:Je.fieldDetail,children:[e.jsxDEV("span",{className:Je.detailLabel,children:"Lo·∫°i:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:149,columnNumber:23},this),e.jsxDEV("span",{className:Je.typeBadge,children:h(m.type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:150,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:148,columnNumber:21},this),e.jsxDEV("div",{className:Je.fieldDetail,children:[e.jsxDEV("span",{className:Je.detailLabel,children:"B·∫Øt bu·ªôc:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:153,columnNumber:23},this),e.jsxDEV("span",{className:m.required?Je.requiredYes:Je.requiredNo,children:m.required?"C√≥":"Kh√¥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:154,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:152,columnNumber:21},this),m.defaultValue!==void 0&&e.jsxDEV("div",{className:Je.fieldDetail,children:[e.jsxDEV("span",{className:Je.detailLabel,children:"Gi√° tr·ªã m·∫∑c ƒë·ªãnh:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:160,columnNumber:25},this),e.jsxDEV("span",{children:String(m.defaultValue)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:161,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:159,columnNumber:23},this),m.options&&m.options.length>0&&e.jsxDEV("div",{className:Je.fieldDetail,children:[e.jsxDEV("span",{className:Je.detailLabel,children:"T√πy ch·ªçn:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:166,columnNumber:25},this),e.jsxDEV("span",{children:m.options.map(N=>N.label).join(", ")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:167,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:165,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:147,columnNumber:19},this)]},m.key,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:132,columnNumber:17},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:130,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:112,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:68,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-master-data/pages/CatalogSchemaPage.tsx",lineNumber:67,columnNumber:5},this)}const Yh=Object.freeze(Object.defineProperty({__proto__:null,default:Xh},Symbol.toStringTag,{value:"Module"})),xl=[{id:"1",category:"General",code:"SYSTEM_NAME",name:"T√™n h·ªá th·ªëng",value:"MAPPA Portal - C·ª•c Qu·∫£n l√Ω Th·ªã tr∆∞·ªùng",dataType:"string",description:"T√™n ƒë·∫ßy ƒë·ªß c·ªßa h·ªá th·ªëng",isEditable:!1,updatedBy:"system",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",category:"General",code:"SYSTEM_VERSION",name:"Phi√™n b·∫£n h·ªá th·ªëng",value:"1.0.0",dataType:"string",description:"Version hi·ªán t·∫°i c·ªßa h·ªá th·ªëng",isEditable:!1,updatedBy:"system",updatedAt:"2024-01-01T00:00:00Z"},{id:"3",category:"Performance",code:"MAX_UPLOAD_SIZE",name:"K√≠ch th∆∞·ªõc upload t·ªëi ƒëa",value:"10485760",dataType:"number",description:"K√≠ch th∆∞·ªõc file upload t·ªëi ƒëa (bytes) - 10MB",isEditable:!0,updatedBy:"qt_admin",updatedAt:"2025-01-15T00:00:00Z"},{id:"4",category:"Performance",code:"SESSION_TIMEOUT",name:"Th·ªùi gian timeout session",value:"3600",dataType:"number",description:"Timeout session (gi√¢y) - 1 gi·ªù",isEditable:!0,updatedBy:"qt_admin",updatedAt:"2025-01-10T00:00:00Z"},{id:"5",category:"Integration",code:"API_RATE_LIMIT",name:"Gi·ªõi h·∫°n API request",value:"1000",dataType:"number",description:"S·ªë l∆∞·ª£ng API calls t·ªëi ƒëa m·ªói gi·ªù",isEditable:!0,updatedBy:"qt_admin",updatedAt:"2025-01-20T00:00:00Z"},{id:"6",category:"Feature",code:"ENABLE_NOTIFICATIONS",name:"B·∫≠t th√¥ng b√°o",value:"true",dataType:"boolean",description:"B·∫≠t/t·∫Øt h·ªá th·ªëng th√¥ng b√°o",isEditable:!0,updatedBy:"qt_admin",updatedAt:"2025-01-05T00:00:00Z"},{id:"7",category:"Feature",code:"ENABLE_TWO_FACTOR_AUTH",name:"B·∫≠t x√°c th·ª±c 2 b∆∞·ªõc",value:"false",dataType:"boolean",description:"B·∫≠t/t·∫Øt x√°c th·ª±c 2 b∆∞·ªõc",isEditable:!0,updatedBy:"qt_admin",updatedAt:"2025-01-12T00:00:00Z"}],eN={fullName:"C·ª•c Qu·∫£n l√Ω Th·ªã tr∆∞·ªùng",shortName:"QLTT",englishName:"Market Management Department",taxCode:"0123456789",address:"54 Hai B√† Tr∆∞ng",district:"Qu·∫≠n Ho√†n Ki·∫øm",city:"H√† N·ªôi",phone:"024.39366666",fax:"024.39366667",email:"contact@qltt.gov.vn",website:"https://qltt.gov.vn",establishedDate:"2005-06-15",legalRepresentative:"Nguy·ªÖn VƒÉn C·ª•c Tr∆∞·ªüng",legalRepresentativePosition:"C·ª•c tr∆∞·ªüng",updatedBy:"qt_admin",updatedAt:"2025-01-15T00:00:00Z"},Xt=[{id:"1",category:"system",code:"AUTO_BACKUP",name:"T·ª± ƒë·ªông sao l∆∞u",description:"T·ª± ƒë·ªông sao l∆∞u database theo l·ªãch",enabled:!0,config:{schedule:"daily",time:"02:00",retention:30},updatedBy:"qt_admin",updatedAt:"2025-01-10T00:00:00Z"},{id:"2",category:"workflow",code:"AUTO_ASSIGN_INSPECTOR",name:"T·ª± ƒë·ªông ph√¢n c√¥ng thanh tra vi√™n",description:"T·ª± ƒë·ªông ph√¢n c√¥ng thanh tra vi√™n khi t·∫°o h·ªì s∆°",enabled:!1,config:{algorithm:"round-robin",considerWorkload:!0},updatedBy:"qt_admin",updatedAt:"2025-01-15T00:00:00Z"},{id:"3",category:"notification",code:"EMAIL_NOTIFICATION",name:"Th√¥ng b√°o qua email",description:"G·ª≠i th√¥ng b√°o qua email cho ng∆∞·ªùi d√πng",enabled:!0,config:{smtpHost:"smtp.gmail.com",smtpPort:587,fromEmail:"noreply@qltt.gov.vn",fromName:"MAPPA Portal"},updatedBy:"qt_admin",updatedAt:"2025-01-05T00:00:00Z"},{id:"4",category:"report",code:"AUTO_GENERATE_REPORT",name:"T·ª± ƒë·ªông t·∫°o b√°o c√°o",description:"T·ª± ƒë·ªông t·∫°o b√°o c√°o ƒë·ªãnh k·ª≥",enabled:!0,config:{frequency:"monthly",recipients:["qt_lanhdao@qltt.gov.vn"],format:"pdf"},updatedBy:"qt_admin",updatedAt:"2025-01-18T00:00:00Z"}],sN=[{id:"1",code:"USER_WELCOME",name:"Ch√†o m·ª´ng ng∆∞·ªùi d√πng m·ªõi",type:"email",category:"User",subject:"Ch√†o m·ª´ng ƒë·∫øn v·ªõi MAPPA Portal",content:`Xin ch√†o {{user.name}},

Ch√∫c m·ª´ng b·∫°n ƒë√£ t·∫°o t√†i kho·∫£n th√†nh c√¥ng tr√™n h·ªá th·ªëng MAPPA Portal.

Username: {{user.username}}
ƒê∆°n v·ªã: {{user.orgUnit}}

Vui l√≤ng ƒëƒÉng nh·∫≠p v√† ƒë·ªïi m·∫≠t kh·∫©u ngay sau l·∫ßn ƒëƒÉng nh·∫≠p ƒë·∫ßu ti√™n.

Tr√¢n tr·ªçng,
Ban qu·∫£n tr·ªã`,variables:["user.name","user.username","user.orgUnit"],status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-01-10T00:00:00Z"},{id:"2",code:"PASSWORD_RESET",name:"ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u",type:"email",category:"User",subject:"Y√™u c·∫ßu ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u",content:`Xin ch√†o {{user.name}},

Ch√∫ng t√¥i nh·∫≠n ƒë∆∞·ª£c y√™u c·∫ßu ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u cho t√†i kho·∫£n {{user.username}}.

Vui l√≤ng click v√†o link sau ƒë·ªÉ ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u:
{{reset.link}}

Link n√†y c√≥ hi·ªáu l·ª±c trong {{reset.expiry}} ph√∫t.

N·∫øu b·∫°n kh√¥ng y√™u c·∫ßu ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u, vui l√≤ng b·ªè qua email n√†y.

Tr√¢n tr·ªçng,
Ban qu·∫£n tr·ªã`,variables:["user.name","user.username","reset.link","reset.expiry"],status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-01-12T00:00:00Z"},{id:"3",code:"INSPECTION_ASSIGNED",name:"Ph√¢n c√¥ng thanh tra",type:"in-app",category:"Workflow",subject:"B·∫°n ƒë∆∞·ª£c ph√¢n c√¥ng thanh tra m·ªõi",content:`Thanh tra vi√™n {{inspector.name}},

B·∫°n v·ª´a ƒë∆∞·ª£c ph√¢n c√¥ng thanh tra:

M√£ h·ªì s∆°: {{case.code}}
ƒê·ªëi t∆∞·ª£ng: {{case.subject}}
ƒê·ªãa ƒëi·ªÉm: {{case.location}}
Th·ªùi gian: {{case.date}}

Vui l√≤ng ki·ªÉm tra chi ti·∫øt v√† chu·∫©n b·ªã.`,variables:["inspector.name","case.code","case.subject","case.location","case.date"],status:"active",createdAt:"2024-01-15T00:00:00Z",updatedAt:"2025-01-15T00:00:00Z"},{id:"4",code:"SYSTEM_MAINTENANCE",name:"B·∫£o tr√¨ h·ªá th·ªëng",type:"in-app",category:"System",subject:"Th√¥ng b√°o b·∫£o tr√¨ h·ªá th·ªëng",content:`H·ªá th·ªëng s·∫Ω b·∫£o tr√¨ v√†o {{maintenance.date}} t·ª´ {{maintenance.startTime}} ƒë·∫øn {{maintenance.endTime}}.

Trong th·ªùi gian n√†y, b·∫°n s·∫Ω kh√¥ng th·ªÉ truy c·∫≠p h·ªá th·ªëng.

Vui l√≤ng l∆∞u c√¥ng vi·ªác v√† ƒëƒÉng xu·∫•t tr∆∞·ªõc th·ªùi gian b·∫£o tr√¨.

Tr√¢n tr·ªçng,
Ban qu·∫£n tr·ªã`,variables:["maintenance.date","maintenance.startTime","maintenance.endTime"],status:"active",createdAt:"2024-02-01T00:00:00Z",updatedAt:"2025-01-20T00:00:00Z"}],Yt=[{id:"1",category:"password",code:"PASSWORD_MIN_LENGTH",name:"ƒê·ªô d√†i m·∫≠t kh·∫©u t·ªëi thi·ªÉu",description:"S·ªë k√Ω t·ª± t·ªëi thi·ªÉu c·ªßa m·∫≠t kh·∫©u",value:8,dataType:"number",updatedBy:"qt_admin",updatedAt:"2025-01-10T00:00:00Z"},{id:"2",category:"password",code:"PASSWORD_REQUIRE_UPPERCASE",name:"Y√™u c·∫ßu ch·ªØ hoa",description:"M·∫≠t kh·∫©u ph·∫£i ch·ª©a √≠t nh·∫•t 1 ch·ªØ hoa",value:!0,dataType:"boolean",updatedBy:"qt_admin",updatedAt:"2025-01-10T00:00:00Z"},{id:"3",category:"password",code:"PASSWORD_REQUIRE_NUMBER",name:"Y√™u c·∫ßu s·ªë",description:"M·∫≠t kh·∫©u ph·∫£i ch·ª©a √≠t nh·∫•t 1 s·ªë",value:!0,dataType:"boolean",updatedBy:"qt_admin",updatedAt:"2025-01-10T00:00:00Z"},{id:"4",category:"password",code:"PASSWORD_EXPIRE_DAYS",name:"M·∫≠t kh·∫©u h·∫øt h·∫°n sau (ng√†y)",description:"S·ªë ng√†y tr∆∞·ªõc khi m·∫≠t kh·∫©u h·∫øt hi·ªáu l·ª±c",value:90,dataType:"number",updatedBy:"qt_admin",updatedAt:"2025-01-10T00:00:00Z"},{id:"5",category:"session",code:"MAX_LOGIN_ATTEMPTS",name:"S·ªë l·∫ßn ƒëƒÉng nh·∫≠p sai t·ªëi ƒëa",description:"S·ªë l·∫ßn ƒëƒÉng nh·∫≠p sai tr∆∞·ªõc khi kh√≥a t√†i kho·∫£n",value:5,dataType:"number",updatedBy:"qt_admin",updatedAt:"2025-01-15T00:00:00Z"},{id:"6",category:"session",code:"LOCKOUT_DURATION",name:"Th·ªùi gian kh√≥a (ph√∫t)",description:"Th·ªùi gian kh√≥a t√†i kho·∫£n sau khi ƒëƒÉng nh·∫≠p sai qu√° nhi·ªÅu",value:30,dataType:"number",updatedBy:"qt_admin",updatedAt:"2025-01-15T00:00:00Z"},{id:"7",category:"access",code:"IP_WHITELIST_ENABLED",name:"B·∫≠t danh s√°ch IP cho ph√©p",description:"Ch·ªâ cho ph√©p truy c·∫≠p t·ª´ c√°c IP trong whitelist",value:!1,dataType:"boolean",updatedBy:"qt_admin",updatedAt:"2025-01-18T00:00:00Z"},{id:"8",category:"audit",code:"AUDIT_LOG_RETENTION",name:"Th·ªùi gian l∆∞u audit log (ng√†y)",description:"S·ªë ng√†y l∆∞u tr·ªØ audit logs",value:365,dataType:"number",updatedBy:"qt_admin",updatedAt:"2025-01-20T00:00:00Z"}],aN=[{id:"1",level:"info",category:"backup",message:"Backup completed successfully",details:"Full backup: mappa_portal_20250122_020000.sql",userId:"system",ipAddress:null,timestamp:"2025-01-22T02:00:15Z"},{id:"2",level:"warning",category:"query",message:"Slow query detected",details:"SELECT * FROM users JOIN roles ON... (executed in 3.5s)",userId:"qt_admin",ipAddress:"192.168.1.100",timestamp:"2025-01-22T08:15:30Z"},{id:"3",level:"error",category:"connection",message:"Connection pool exhausted",details:"Max connections (100) reached. Request queued.",userId:null,ipAddress:null,timestamp:"2025-01-21T14:30:00Z"},{id:"4",level:"info",category:"migration",message:"Migration completed",details:"Applied migration: 20250120_add_audit_fields",userId:"system",ipAddress:null,timestamp:"2025-01-20T03:00:00Z"},{id:"5",level:"critical",category:"system",message:"Database disk space low",details:"Available: 5GB (5% remaining)",userId:null,ipAddress:null,timestamp:"2025-01-19T10:00:00Z"}],xa=[{id:"1",fileName:"mappa_portal_20250122_020000.sql",filePath:"/backups/2025/01/mappa_portal_20250122_020000.sql",fileSize:524288e3,backupType:"full",status:"completed",startedAt:"2025-01-22T02:00:00Z",completedAt:"2025-01-22T02:15:23Z",duration:923,errorMessage:null,createdBy:"system",canRestore:!0},{id:"2",fileName:"mappa_portal_20250121_020000.sql",filePath:"/backups/2025/01/mappa_portal_20250121_020000.sql",fileSize:518144e3,backupType:"full",status:"completed",startedAt:"2025-01-21T02:00:00Z",completedAt:"2025-01-21T02:14:55Z",duration:895,errorMessage:null,createdBy:"system",canRestore:!0},{id:"3",fileName:"mappa_portal_20250120_020000.sql",filePath:"/backups/2025/01/mappa_portal_20250120_020000.sql",fileSize:512e6,backupType:"full",status:"completed",startedAt:"2025-01-20T02:00:00Z",completedAt:"2025-01-20T02:14:12Z",duration:852,errorMessage:null,createdBy:"system",canRestore:!0},{id:"4",fileName:"mappa_portal_20250119_020000.sql",filePath:"/backups/2025/01/mappa_portal_20250119_020000.sql",fileSize:0,backupType:"full",status:"failed",startedAt:"2025-01-19T02:00:00Z",completedAt:"2025-01-19T02:05:30Z",duration:330,errorMessage:"Disk space insufficient",createdBy:"system",canRestore:!1},{id:"5",fileName:"mappa_portal_manual_20250118.sql",filePath:"/backups/2025/01/mappa_portal_manual_20250118.sql",fileSize:505856e3,backupType:"full",status:"completed",startedAt:"2025-01-18T15:30:00Z",completedAt:"2025-01-18T15:44:18Z",duration:858,errorMessage:null,createdBy:"qt_admin",canRestore:!0}],tN={totalBackups:xa.length,successfulBackups:xa.filter(s=>s.status==="completed").length,failedBackups:xa.filter(s=>s.status==="failed").length,totalSize:xa.reduce((s,a)=>s+a.fileSize,0)},iN="_buttonPrimary_1lfe7_327",lN="_buttonSecondary_1lfe7_385",nN="_tableContainer_1lfe7_447",mN="_table_1lfe7_447",rN="_toolbar_1lfe7_555",oN="_searchBox_1lfe7_571",dN="_searchIcon_1lfe7_583",uN="_searchInput_1lfe7_601",K={buttonPrimary:iN,buttonSecondary:lN,tableContainer:nN,table:mN,toolbar:rN,searchBox:oN,searchIcon:dN,searchInput:uN};function cN(){const{hasPermission:s}=os(),[a,t]=E.useState(""),[i,l]=E.useState("all"),[n,r]=E.useState(1),u=10,o=s("sa.sysconfig.param.update"),p=Array.from(new Set(xl.map(g=>g.category))),h=E.useMemo(()=>xl.filter(g=>{if(i!=="all"&&g.category!==i)return!1;if(!a)return!0;const v=a.toLowerCase();return g.code.toLowerCase().includes(v)||g.name.toLowerCase().includes(v)||g.description.toLowerCase().includes(v)}),[a,i]),m=Math.ceil(h.length/u),c=h.slice((n-1)*u,n*u),N=(g,v)=>v==="boolean"?g==="true"?"B·∫≠t":"T·∫Øt":v==="number"?parseInt(g).toLocaleString("vi-VN"):g;return e.jsxDEV(es,{permission:"sa.sysconfig.param.read",children:e.jsxDEV(bs,{title:"Th√¥ng s·ªë H·ªá th·ªëng",subtitle:"C·∫•u h√¨nh v√† qu·∫£n l√Ω c√°c th√¥ng s·ªë h·ªá th·ªëng",breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"C·∫•u h√¨nh",path:"/system-admin/system-config"},{label:"Th√¥ng s·ªë h·ªá th·ªëng"}],children:[e.jsxDEV("div",{className:K.toolbar,children:[e.jsxDEV("div",{className:K.searchBox,children:[e.jsxDEV(Dt,{size:18,className:K.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:68,columnNumber:13},this),e.jsxDEV("input",{type:"text",placeholder:"T√¨m theo m√£, t√™n, m√¥ t·∫£...",value:a,onChange:g=>t(g.target.value),className:K.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:69,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:67,columnNumber:11},this),e.jsxDEV("div",{className:K.filters,children:e.jsxDEV("select",{value:i,onChange:g=>l(g.target.value),className:K.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"T·∫•t c·∫£ danh m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:84,columnNumber:15},this),p.map(g=>e.jsxDEV("option",{value:g,children:g},g,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:86,columnNumber:17},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:79,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:78,columnNumber:11},this),e.jsxDEV("div",{className:K.stats,children:e.jsxDEV("span",{className:K.statsText,children:["T·ªïng: ",e.jsxDEV("strong",{children:h.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:93,columnNumber:21},this)," th√¥ng s·ªë"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:92,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:91,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:66,columnNumber:9},this),c.length===0?e.jsxDEV(aa,{icon:e.jsxDEV(Rl,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:100,columnNumber:19},this),title:"Kh√¥ng t√¨m th·∫•y th√¥ng s·ªë",message:"Kh√¥ng c√≥ th√¥ng s·ªë n√†o ph√π h·ª£p v·ªõi ti√™u ch√≠ t√¨m ki·∫øm."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:99,columnNumber:11},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:K.tableContainer,children:e.jsxDEV("table",{className:K.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Danh m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:110,columnNumber:21},this),e.jsxDEV("th",{children:"M√£ th√¥ng s·ªë"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:111,columnNumber:21},this),e.jsxDEV("th",{children:"T√™n th√¥ng s·ªë"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:112,columnNumber:21},this),e.jsxDEV("th",{children:"Gi√° tr·ªã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:113,columnNumber:21},this),e.jsxDEV("th",{children:"Ki·ªÉu d·ªØ li·ªáu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:114,columnNumber:21},this),e.jsxDEV("th",{children:"C·∫≠p nh·∫≠t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:115,columnNumber:21},this),e.jsxDEV("th",{children:"Thao t√°c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:116,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:109,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:108,columnNumber:17},this),e.jsxDEV("tbody",{children:c.map(g=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.category,children:g.category},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:123,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:122,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.code,children:g.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:126,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:125,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:K.nameCell,children:[e.jsxDEV("span",{className:K.name,children:g.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:130,columnNumber:27},this),e.jsxDEV("span",{className:K.description,children:g.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:131,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:129,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:128,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.value,children:N(g.value,g.dataType)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:135,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:134,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.dataType,children:g.dataType},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:140,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:139,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:K.updateInfo,children:[e.jsxDEV("span",{className:K.updatedBy,children:g.updatedBy},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:144,columnNumber:27},this),e.jsxDEV("span",{className:K.updatedAt,children:new Date(g.updatedAt).toLocaleDateString("vi-VN")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:145,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:143,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:142,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("button",{className:K.buttonSecondary,disabled:!o||!g.isEditable,title:g.isEditable?"Ch·ªânh s·ª≠a":"System parameter kh√¥ng th·ªÉ s·ª≠a",children:e.jsxDEV(Ca,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:156,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:151,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:150,columnNumber:23},this)]},g.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:121,columnNumber:21},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:119,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:107,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:106,columnNumber:13},this),e.jsxDEV("div",{className:K.pagination,children:[e.jsxDEV("button",{className:K.paginationButton,onClick:()=>r(g=>Math.max(1,g-1)),disabled:n===1,children:"Tr∆∞·ªõc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:166,columnNumber:15},this),e.jsxDEV("span",{className:K.paginationInfo,children:["Trang ",n," / ",m]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:173,columnNumber:15},this),e.jsxDEV("button",{className:K.paginationButton,onClick:()=>r(g=>Math.min(m,g+1)),disabled:n===m,children:"Sau"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:176,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:165,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:105,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:56,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/ParametersPage.tsx",lineNumber:55,columnNumber:5},this)}const pN=Object.freeze(Object.defineProperty({__proto__:null,default:cN},Symbol.toStringTag,{value:"Module"})),gN="_infoGrid_bj9np_67",hN="_infoRow_bj9np_117",NN="_logoSection_bj9np_177",fN="_buttonPrimary_bj9np_237",vN="_buttonSecondary_bj9np_295",ce={infoGrid:gN,infoRow:hN,logoSection:NN,buttonPrimary:fN,buttonSecondary:vN};function bN(){const{hasPermission:s}=os(),a=s("sa.sysconfig.orginfo.update"),t=eN;return e.jsxDEV(es,{permission:"sa.sysconfig.orginfo.read",children:e.jsxDEV(bs,{title:"Th√¥ng tin T·ªï ch·ª©c",subtitle:"Qu·∫£n l√Ω th√¥ng tin t·ªï ch·ª©c v√† c∆° quan",breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"C·∫•u h√¨nh",path:"/system-admin/system-config"},{label:"Th√¥ng tin t·ªï ch·ª©c"}],actions:e.jsxDEV("button",{className:ce.buttonPrimary,disabled:!a,children:[e.jsxDEV(Ca,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:30,columnNumber:13},this),"Ch·ªânh s·ª≠a"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:29,columnNumber:11},this),children:e.jsxDEV("div",{className:ce.orgContainer,children:[e.jsxDEV("div",{className:ce.logoSection,children:[e.jsxDEV("div",{className:ce.logoPlaceholder,children:e.jsxDEV(wl,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:39,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:38,columnNumber:13},this),e.jsxDEV("button",{className:ce.buttonSecondary,disabled:!a,children:"T·∫£i l√™n logo"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:41,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:37,columnNumber:11},this),e.jsxDEV("div",{className:ce.infoGrid,children:[e.jsxDEV("div",{className:ce.infoSection,children:[e.jsxDEV("h3",{className:ce.sectionTitle,children:"Th√¥ng tin c∆° b·∫£n"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:50,columnNumber:15},this),e.jsxDEV("div",{className:ce.infoRows,children:[e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"T√™n ƒë·∫ßy ƒë·ªß:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:53,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.fullName},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:54,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:52,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"T√™n vi·∫øt t·∫Øt:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:57,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.shortName},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:58,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:56,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"T√™n ti·∫øng Anh:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:61,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.englishName},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:62,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:60,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"M√£ s·ªë thu·∫ø:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:65,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.taxCode},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:66,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:64,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"Ng√†y th√†nh l·∫≠p:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:69,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:new Date(t.establishedDate).toLocaleDateString("vi-VN")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:70,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:68,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:51,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:49,columnNumber:13},this),e.jsxDEV("div",{className:ce.infoSection,children:[e.jsxDEV("h3",{className:ce.sectionTitle,children:"Th√¥ng tin li√™n h·ªá"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:79,columnNumber:15},this),e.jsxDEV("div",{className:ce.infoRows,children:[e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"ƒê·ªãa ch·ªâ:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:82,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.address},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:83,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:81,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"Qu·∫≠n/Huy·ªán:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:86,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.district},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:87,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:85,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"T·ªânh/Th√†nh ph·ªë:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:90,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.city},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:91,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:89,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"ƒêi·ªán tho·∫°i:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:94,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.phone},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:95,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:93,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"Fax:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:98,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.fax},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:99,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:97,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"Email:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:102,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.email},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:103,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:101,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"Website:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:106,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:e.jsxDEV("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",children:t.website},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:108,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:107,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:105,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:80,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV("div",{className:ce.infoSection,children:[e.jsxDEV("h3",{className:ce.sectionTitle,children:"Ng∆∞·ªùi ƒë·∫°i di·ªán ph√°p lu·∫≠t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:118,columnNumber:15},this),e.jsxDEV("div",{className:ce.infoRows,children:[e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"H·ªç v√† t√™n:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:121,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.legalRepresentative},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:122,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:120,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"Ch·ª©c v·ª•:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:125,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.legalRepresentativePosition},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:126,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:124,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:119,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:117,columnNumber:13},this),e.jsxDEV("div",{className:ce.infoSection,children:[e.jsxDEV("h3",{className:ce.sectionTitle,children:"Th√¥ng tin c·∫≠p nh·∫≠t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:133,columnNumber:15},this),e.jsxDEV("div",{className:ce.infoRows,children:[e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"C·∫≠p nh·∫≠t b·ªüi:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:136,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:t.updatedBy},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:137,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:135,columnNumber:17},this),e.jsxDEV("div",{className:ce.infoRow,children:[e.jsxDEV("span",{className:ce.label,children:"C·∫≠p nh·∫≠t l√∫c:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:140,columnNumber:19},this),e.jsxDEV("span",{className:ce.value,children:new Date(t.updatedAt).toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:141,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:139,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:134,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:132,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:47,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:35,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:19,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OrganizationInfoPage.tsx",lineNumber:18,columnNumber:5},this)}const VN=Object.freeze(Object.defineProperty({__proto__:null,default:bN},Symbol.toStringTag,{value:"Module"}));function TN(){const{hasPermission:s}=os(),[a,t]=E.useState("all"),i=s("sa.sysconfig.ops.update"),l=Array.from(new Set(Xt.map(u=>u.category))),n=a==="all"?Xt:Xt.filter(u=>u.category===a),r=u=>({system:"H·ªá th·ªëng",workflow:"Quy tr√¨nh",notification:"Th√¥ng b√°o",report:"B√°o c√°o"})[u]||u;return e.jsxDEV(es,{permission:"sa.sysconfig.ops.read",children:e.jsxDEV(bs,{title:"C√†i ƒë·∫∑t V·∫≠n h√†nh",subtitle:"C·∫•u h√¨nh c√°c c√†i ƒë·∫∑t v·∫≠n h√†nh h·ªá th·ªëng",breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"C·∫•u h√¨nh",path:"/system-admin/system-config"},{label:"V·∫≠n h√†nh"}],children:[e.jsxDEV("div",{className:K.toolbar,children:[e.jsxDEV("div",{className:K.filters,children:e.jsxDEV("select",{value:a,onChange:u=>t(u.target.value),className:K.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"T·∫•t c·∫£ danh m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:52,columnNumber:15},this),l.map(u=>e.jsxDEV("option",{value:u,children:r(u)},u,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:54,columnNumber:17},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:47,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:46,columnNumber:11},this),e.jsxDEV("div",{className:K.stats,children:e.jsxDEV("span",{className:K.statsText,children:["T·ªïng: ",e.jsxDEV("strong",{children:n.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:61,columnNumber:21},this)," c√†i ƒë·∫∑t"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:60,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:59,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:45,columnNumber:9},this),e.jsxDEV("div",{className:K.tableContainer,children:e.jsxDEV("table",{className:K.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Danh m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:70,columnNumber:17},this),e.jsxDEV("th",{children:"M√£ c√†i ƒë·∫∑t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:71,columnNumber:17},this),e.jsxDEV("th",{children:"T√™n c√†i ƒë·∫∑t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:72,columnNumber:17},this),e.jsxDEV("th",{children:"Tr·∫°ng th√°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:73,columnNumber:17},this),e.jsxDEV("th",{children:"C·∫≠p nh·∫≠t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:74,columnNumber:17},this),e.jsxDEV("th",{children:"Thao t√°c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:75,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:69,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:68,columnNumber:13},this),e.jsxDEV("tbody",{children:n.map(u=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.category,children:r(u.category)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:82,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:81,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.code,children:u.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:85,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:84,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:K.nameCell,children:[e.jsxDEV("span",{className:K.name,children:u.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:89,columnNumber:23},this),e.jsxDEV("span",{className:K.description,children:u.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:90,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:88,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:87,columnNumber:19},this),e.jsxDEV("td",{children:u.enabled?e.jsxDEV("span",{className:K.statusActive,children:[e.jsxDEV(fi,{size:12,style:{display:"inline",marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:96,columnNumber:25},this),"B·∫≠t"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:95,columnNumber:23},this):e.jsxDEV("span",{className:K.statusInactive,children:"T·∫Øt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:100,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:93,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:K.updateInfo,children:[e.jsxDEV("span",{className:K.updatedBy,children:u.updatedBy},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:105,columnNumber:23},this),e.jsxDEV("span",{className:K.updatedAt,children:new Date(u.updatedAt).toLocaleDateString("vi-VN")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:106,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:104,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:103,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("button",{className:K.buttonSecondary,disabled:!i,title:"C·∫•u h√¨nh",children:e.jsxDEV(Ca,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:117,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:112,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:111,columnNumber:19},this)]},u.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:80,columnNumber:17},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:78,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:67,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:66,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:35,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/OperationsPage.tsx",lineNumber:34,columnNumber:5},this)}const xN=Object.freeze(Object.defineProperty({__proto__:null,default:TN},Symbol.toStringTag,{value:"Module"}));function yN(){const{hasPermission:s}=os(),[a,t]=E.useState(""),[i,l]=E.useState("all"),[n,r]=E.useState(1),u=10,o=s("sa.sysconfig.notify.update"),p=s("sa.sysconfig.notify.create"),h=["email","sms","in-app","push"],m=E.useMemo(()=>sN.filter(v=>{if(i!=="all"&&v.type!==i)return!1;if(!a)return!0;const b=a.toLowerCase();return v.code.toLowerCase().includes(b)||v.name.toLowerCase().includes(b)||v.subject.toLowerCase().includes(b)}),[a,i]),c=Math.ceil(m.length/u),N=m.slice((n-1)*u,n*u),g=v=>({email:"Email",sms:"SMS","in-app":"In-App",push:"Push"})[v];return e.jsxDEV(es,{permission:"sa.sysconfig.notify.read",children:e.jsxDEV(bs,{title:"M·∫´u Th√¥ng b√°o",subtitle:"Qu·∫£n l√Ω m·∫´u th√¥ng b√°o v√† email template",breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"C·∫•u h√¨nh",path:"/system-admin/system-config"},{label:"Th√¥ng b√°o"}],actions:e.jsxDEV("button",{className:K.buttonPrimary,disabled:!p,children:[e.jsxDEV(Ci,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:69,columnNumber:13},this),"Th√™m m·∫´u"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:68,columnNumber:11},this),children:[e.jsxDEV("div",{className:K.toolbar,children:[e.jsxDEV("div",{className:K.searchBox,children:[e.jsxDEV(Dt,{size:18,className:K.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:76,columnNumber:13},this),e.jsxDEV("input",{type:"text",placeholder:"T√¨m theo m√£, t√™n, ti√™u ƒë·ªÅ...",value:a,onChange:v=>t(v.target.value),className:K.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:77,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:75,columnNumber:11},this),e.jsxDEV("div",{className:K.filters,children:e.jsxDEV("select",{value:i,onChange:v=>l(v.target.value),className:K.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"T·∫•t c·∫£ lo·∫°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:92,columnNumber:15},this),h.map(v=>e.jsxDEV("option",{value:v,children:g(v)},v,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:94,columnNumber:17},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:87,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:86,columnNumber:11},this),e.jsxDEV("div",{className:K.stats,children:e.jsxDEV("span",{className:K.statsText,children:["T·ªïng: ",e.jsxDEV("strong",{children:m.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:101,columnNumber:21},this)," m·∫´u"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:100,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:99,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:74,columnNumber:9},this),N.length===0?e.jsxDEV(aa,{icon:e.jsxDEV(Ci,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:108,columnNumber:19},this),title:"Kh√¥ng t√¨m th·∫•y m·∫´u th√¥ng b√°o",message:"Kh√¥ng c√≥ m·∫´u th√¥ng b√°o n√†o ph√π h·ª£p v·ªõi ti√™u ch√≠ t√¨m ki·∫øm."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:107,columnNumber:11},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:K.tableContainer,children:e.jsxDEV("table",{className:K.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"M√£ m·∫´u"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:118,columnNumber:21},this),e.jsxDEV("th",{children:"T√™n m·∫´u"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:119,columnNumber:21},this),e.jsxDEV("th",{children:"Lo·∫°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:120,columnNumber:21},this),e.jsxDEV("th",{children:"Danh m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:121,columnNumber:21},this),e.jsxDEV("th",{children:"Ti√™u ƒë·ªÅ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:122,columnNumber:21},this),e.jsxDEV("th",{children:"Tr·∫°ng th√°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:123,columnNumber:21},this),e.jsxDEV("th",{children:"Thao t√°c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:124,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:117,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:116,columnNumber:17},this),e.jsxDEV("tbody",{children:N.map(v=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.code,children:v.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:131,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:130,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.name,children:v.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:134,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:133,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.dataType,children:g(v.type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:137,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:136,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.category,children:v.category},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:140,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:139,columnNumber:23},this),e.jsxDEV("td",{style:{maxWidth:"300px"},children:e.jsxDEV("span",{className:K.description,children:v.subject},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:143,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:142,columnNumber:23},this),e.jsxDEV("td",{children:v.status==="active"?e.jsxDEV("span",{className:K.statusActive,children:"Ho·∫°t ƒë·ªông"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:147,columnNumber:27},this):e.jsxDEV("span",{className:K.statusInactive,children:"T·∫°m d·ª´ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:149,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:145,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("div",{style:{display:"flex",gap:"var(--spacing-xs)"},children:[e.jsxDEV("button",{className:K.buttonSecondary,title:"Xem chi ti·∫øt",children:e.jsxDEV(gi,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:158,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:154,columnNumber:27},this),e.jsxDEV("button",{className:K.buttonSecondary,disabled:!o,title:"Ch·ªânh s·ª≠a",children:e.jsxDEV(Ca,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:165,columnNumber:29},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:160,columnNumber:27},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:153,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:152,columnNumber:23},this)]},v.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:129,columnNumber:21},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:127,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:115,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:114,columnNumber:13},this),e.jsxDEV("div",{className:K.pagination,children:[e.jsxDEV("button",{className:K.paginationButton,onClick:()=>r(v=>Math.max(1,v-1)),disabled:n===1,children:"Tr∆∞·ªõc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:176,columnNumber:15},this),e.jsxDEV("span",{className:K.paginationInfo,children:["Trang ",n," / ",c]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:183,columnNumber:15},this),e.jsxDEV("button",{className:K.paginationButton,onClick:()=>r(v=>Math.min(c,v+1)),disabled:n===c,children:"Sau"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:186,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:175,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:113,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:58,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/NotificationsPage.tsx",lineNumber:57,columnNumber:5},this)}const EN=Object.freeze(Object.defineProperty({__proto__:null,default:yN},Symbol.toStringTag,{value:"Module"}));function HN(){const{hasPermission:s}=os(),[a,t]=E.useState("all"),i=s("sa.sysconfig.security.update"),l=Array.from(new Set(Yt.map(o=>o.category))),n=a==="all"?Yt:Yt.filter(o=>o.category===a),r=o=>({password:"M·∫≠t kh·∫©u",session:"Phi√™n ƒëƒÉng nh·∫≠p",access:"Ki·ªÉm so√°t truy c·∫≠p",audit:"Audit & Logs"})[o]||o,u=(o,p)=>p==="boolean"?o===!0?"B·∫≠t":"T·∫Øt":p==="number"?o.toLocaleString("vi-VN"):String(o);return e.jsxDEV(es,{permission:"sa.sysconfig.security.read",children:e.jsxDEV(bs,{title:"C√†i ƒë·∫∑t B·∫£o m·∫≠t",subtitle:"C·∫•u h√¨nh c√°c ch√≠nh s√°ch b·∫£o m·∫≠t h·ªá th·ªëng",breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"C·∫•u h√¨nh",path:"/system-admin/system-config"},{label:"B·∫£o m·∫≠t"}],children:[e.jsxDEV("div",{className:K.toolbar,children:[e.jsxDEV("div",{className:K.filters,children:e.jsxDEV("select",{value:a,onChange:o=>t(o.target.value),className:K.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"T·∫•t c·∫£ danh m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:62,columnNumber:15},this),l.map(o=>e.jsxDEV("option",{value:o,children:r(o)},o,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:64,columnNumber:17},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:57,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:56,columnNumber:11},this),e.jsxDEV("div",{className:K.stats,children:e.jsxDEV("span",{className:K.statsText,children:["T·ªïng: ",e.jsxDEV("strong",{children:n.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:71,columnNumber:21},this)," c√†i ƒë·∫∑t"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:70,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:69,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:55,columnNumber:9},this),e.jsxDEV("div",{className:K.tableContainer,children:e.jsxDEV("table",{className:K.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Danh m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:80,columnNumber:17},this),e.jsxDEV("th",{children:"M√£ c√†i ƒë·∫∑t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:81,columnNumber:17},this),e.jsxDEV("th",{children:"T√™n c√†i ƒë·∫∑t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:82,columnNumber:17},this),e.jsxDEV("th",{children:"Gi√° tr·ªã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:83,columnNumber:17},this),e.jsxDEV("th",{children:"C·∫≠p nh·∫≠t"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:84,columnNumber:17},this),e.jsxDEV("th",{children:"Thao t√°c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:85,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:79,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV("tbody",{children:n.map(o=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.category,children:r(o.category)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:92,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:91,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.code,children:o.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:95,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:94,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:K.nameCell,children:[e.jsxDEV("span",{className:K.name,children:o.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:99,columnNumber:23},this),e.jsxDEV("span",{className:K.description,children:o.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:100,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:98,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:97,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.value,children:u(o.value,o.dataType)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:104,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:103,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:K.updateInfo,children:[e.jsxDEV("span",{className:K.updatedBy,children:o.updatedBy},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:110,columnNumber:23},this),e.jsxDEV("span",{className:K.updatedAt,children:new Date(o.updatedAt).toLocaleDateString("vi-VN")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:111,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:109,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:108,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("button",{className:K.buttonSecondary,disabled:!i,title:"Ch·ªânh s·ª≠a",children:e.jsxDEV(Ca,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:122,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:117,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:116,columnNumber:19},this)]},o.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:90,columnNumber:17},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:88,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:77,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:76,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:45,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/SecurityPage.tsx",lineNumber:44,columnNumber:5},this)}const DN=Object.freeze(Object.defineProperty({__proto__:null,default:HN},Symbol.toStringTag,{value:"Module"}));function PN(){const{hasPermission:s}=os(),[a,t]=E.useState(""),[i,l]=E.useState("all"),[n,r]=E.useState("all"),[u,o]=E.useState(1),p=15,h=s("sa.sysconfig.db.log.export"),m=["info","warning","error","critical"],c=["query","connection","migration","backup","system"],N=E.useMemo(()=>aN.filter(V=>{if(i!=="all"&&V.level!==i||n!=="all"&&V.category!==n)return!1;if(!a)return!0;const D=a.toLowerCase();return V.message.toLowerCase().includes(D)||V.details&&V.details.toLowerCase().includes(D)}),[a,i,n]),g=Math.ceil(N.length/p),v=N.slice((u-1)*p,u*p),b=V=>{switch(V){case"info":return e.jsxDEV("span",{className:K.statusInfo,children:"Info"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:48,columnNumber:16},this);case"warning":return e.jsxDEV("span",{className:K.statusWarning,children:"Warning"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:50,columnNumber:16},this);case"error":return e.jsxDEV("span",{className:K.statusError,children:"Error"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:52,columnNumber:16},this);case"critical":return e.jsxDEV("span",{className:K.statusError,children:"Critical"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:54,columnNumber:16},this)}};return e.jsxDEV(es,{permission:"sa.sysconfig.db.log.read",children:e.jsxDEV(bs,{title:"Database Logs",subtitle:"Qu·∫£n l√Ω v√† gi√°m s√°t logs database",breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"C·∫•u h√¨nh",path:"/system-admin/system-config"},{label:"Database Logs"}],actions:e.jsxDEV("button",{className:K.buttonPrimary,disabled:!h,children:[e.jsxDEV(ai,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:71,columnNumber:13},this),"Export Logs"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:70,columnNumber:11},this),children:[e.jsxDEV("div",{className:K.toolbar,children:[e.jsxDEV("div",{className:K.searchBox,children:[e.jsxDEV(Dt,{size:18,className:K.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:78,columnNumber:13},this),e.jsxDEV("input",{type:"text",placeholder:"T√¨m trong message, details...",value:a,onChange:V=>t(V.target.value),className:K.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:79,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:77,columnNumber:11},this),e.jsxDEV("div",{className:K.filters,children:[e.jsxDEV("select",{value:i,onChange:V=>l(V.target.value),className:K.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"T·∫•t c·∫£ level"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:94,columnNumber:15},this),m.map(V=>e.jsxDEV("option",{value:V,children:V},V,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:96,columnNumber:17},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:89,columnNumber:13},this),e.jsxDEV("select",{value:n,onChange:V=>r(V.target.value),className:K.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"T·∫•t c·∫£ danh m·ª•c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:104,columnNumber:15},this),c.map(V=>e.jsxDEV("option",{value:V,children:V},V,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:106,columnNumber:17},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:99,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:88,columnNumber:11},this),e.jsxDEV("div",{className:K.stats,children:e.jsxDEV("span",{className:K.statsText,children:["T·ªïng: ",e.jsxDEV("strong",{children:N.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:113,columnNumber:21},this)," logs"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:112,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:111,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:76,columnNumber:9},this),v.length===0?e.jsxDEV(aa,{icon:e.jsxDEV(Ga,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:120,columnNumber:19},this),title:"Kh√¥ng t√¨m th·∫•y logs",message:"Kh√¥ng c√≥ log n√†o ph√π h·ª£p v·ªõi ti√™u ch√≠ t√¨m ki·∫øm."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:119,columnNumber:11},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:K.tableContainer,children:e.jsxDEV("table",{className:K.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Timestamp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:130,columnNumber:21},this),e.jsxDEV("th",{children:"Level"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:131,columnNumber:21},this),e.jsxDEV("th",{children:"Category"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:132,columnNumber:21},this),e.jsxDEV("th",{children:"Message"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:133,columnNumber:21},this),e.jsxDEV("th",{children:"User/IP"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:134,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:129,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:128,columnNumber:17},this),e.jsxDEV("tbody",{children:v.map(V=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{style:{whiteSpace:"nowrap"},children:e.jsxDEV("span",{className:K.updatedAt,children:new Date(V.timestamp).toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:141,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:140,columnNumber:23},this),e.jsxDEV("td",{children:b(V.level)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:152,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:K.category,children:V.category},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:154,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:153,columnNumber:23},this),e.jsxDEV("td",{style:{maxWidth:"400px"},children:e.jsxDEV("div",{className:K.nameCell,children:[e.jsxDEV("span",{className:K.name,children:V.message},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:158,columnNumber:27},this),V.details&&e.jsxDEV("span",{className:K.description,children:V.details},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:160,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:157,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:156,columnNumber:23},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:K.updateInfo,children:[V.userId&&e.jsxDEV("span",{className:K.updatedBy,children:V.userId},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:167,columnNumber:29},this),V.ipAddress&&e.jsxDEV("span",{className:K.updatedAt,children:V.ipAddress},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:170,columnNumber:29},this),!V.userId&&!V.ipAddress&&e.jsxDEV("span",{className:K.updatedAt,children:"‚Äî"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:173,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:165,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:164,columnNumber:23},this)]},V.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:139,columnNumber:21},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:137,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:127,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:126,columnNumber:13},this),e.jsxDEV("div",{className:K.pagination,children:[e.jsxDEV("button",{className:K.paginationButton,onClick:()=>o(V=>Math.max(1,V-1)),disabled:u===1,children:"Tr∆∞·ªõc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:184,columnNumber:15},this),e.jsxDEV("span",{className:K.paginationInfo,children:["Trang ",u," / ",g]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:191,columnNumber:15},this),e.jsxDEV("button",{className:K.paginationButton,onClick:()=>o(V=>Math.min(g,V+1)),disabled:u===g,children:"Sau"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:194,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:125,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:60,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseLogsPage.tsx",lineNumber:59,columnNumber:5},this)}const LN=Object.freeze(Object.defineProperty({__proto__:null,default:PN},Symbol.toStringTag,{value:"Module"})),jN="_statCard_s4tsq_45",QN="_statLabel_s4tsq_61",_N="_statValue_s4tsq_81",CN="_statusSuccess_s4tsq_221",SN="_statusPending_s4tsq_223",MN="_statusFailed_s4tsq_225",IN="_buttonPrimary_s4tsq_283",AN="_tableContainer_s4tsq_403",wN="_table_s4tsq_403",Qe={statCard:jN,statLabel:QN,statValue:_N,statusSuccess:CN,statusPending:SN,statusFailed:MN,buttonPrimary:IN,tableContainer:AN,table:wN};function kN(){const{hasPermission:s}=os(),[a,t]=E.useState(1),i=10,l=s("sa.sysconfig.db.backup.create"),n=s("sa.sysconfig.db.backup.restore"),r=tN,u=Math.ceil(xa.length/i),o=xa.slice((a-1)*i,a*i),p=c=>{if(c===0)return"0 B";const N=1024,g=["B","KB","MB","GB"],v=Math.floor(Math.log(c)/Math.log(N));return Math.round(c/Math.pow(N,v)*100)/100+" "+g[v]},h=c=>{if(!c)return"‚Äî";const N=Math.floor(c/60),g=c%60;return`${N}m ${g}s`},m=c=>{switch(c){case"completed":return e.jsxDEV("span",{className:Qe.statusSuccess,children:"Ho√†n th√†nh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:46,columnNumber:16},this);case"in-progress":return e.jsxDEV("span",{className:Qe.statusProgress,children:"ƒêang x·ª≠ l√Ω"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:48,columnNumber:16},this);case"pending":return e.jsxDEV("span",{className:Qe.statusPending,children:"ƒêang ch·ªù"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:50,columnNumber:16},this);case"failed":return e.jsxDEV("span",{className:Qe.statusFailed,children:"Th·∫•t b·∫°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:52,columnNumber:16},this)}};return e.jsxDEV(es,{permission:"sa.sysconfig.db.backup.read",children:e.jsxDEV(bs,{title:"Database Backups",subtitle:"Qu·∫£n l√Ω sao l∆∞u v√† ph·ª•c h·ªìi database",breadcrumbs:[{label:"Trang ch·ªß",path:"/"},{label:"Qu·∫£n tr·ªã h·ªá th·ªëng",path:"/system-admin"},{label:"C·∫•u h√¨nh",path:"/system-admin/system-config"},{label:"Database Backups"}],actions:e.jsxDEV("button",{className:Qe.buttonPrimary,disabled:!l,children:[e.jsxDEV(ua,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:69,columnNumber:13},this),"T·∫°o backup m·ªõi"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:68,columnNumber:11},this),children:[e.jsxDEV("div",{className:Qe.statsGrid,children:[e.jsxDEV("div",{className:Qe.statCard,children:[e.jsxDEV("div",{className:Qe.statIcon,style:{background:"#eff6ff",color:"#2563eb"},children:e.jsxDEV(Ga,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:78,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:77,columnNumber:13},this),e.jsxDEV("div",{className:Qe.statContent,children:[e.jsxDEV("div",{className:Qe.statValue,children:r.totalBackups},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:81,columnNumber:15},this),e.jsxDEV("div",{className:Qe.statLabel,children:"T·ªïng backups"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:82,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:76,columnNumber:11},this),e.jsxDEV("div",{className:Qe.statCard,children:[e.jsxDEV("div",{className:Qe.statIcon,style:{background:"#f0fdf4",color:"#16a34a"},children:e.jsxDEV(Ga,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:88,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:87,columnNumber:13},this),e.jsxDEV("div",{className:Qe.statContent,children:[e.jsxDEV("div",{className:Qe.statValue,children:r.successfulBackups},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:91,columnNumber:15},this),e.jsxDEV("div",{className:Qe.statLabel,children:"Th√†nh c√¥ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:92,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:86,columnNumber:11},this),e.jsxDEV("div",{className:Qe.statCard,children:[e.jsxDEV("div",{className:Qe.statIcon,style:{background:"#fef2f2",color:"#dc2626"},children:e.jsxDEV(Ga,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:98,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:97,columnNumber:13},this),e.jsxDEV("div",{className:Qe.statContent,children:[e.jsxDEV("div",{className:Qe.statValue,children:r.failedBackups},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:101,columnNumber:15},this),e.jsxDEV("div",{className:Qe.statLabel,children:"Th·∫•t b·∫°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:102,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:100,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:96,columnNumber:11},this),e.jsxDEV("div",{className:Qe.statCard,children:[e.jsxDEV("div",{className:Qe.statIcon,style:{background:"#f5f3ff",color:"#7c3aed"},children:e.jsxDEV(ai,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:108,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:107,columnNumber:13},this),e.jsxDEV("div",{className:Qe.statContent,children:[e.jsxDEV("div",{className:Qe.statValue,children:p(r.totalSize)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:111,columnNumber:15},this),e.jsxDEV("div",{className:Qe.statLabel,children:"T·ªïng dung l∆∞·ª£ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:112,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:110,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:106,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV("div",{className:Qe.tableContainer,children:e.jsxDEV("table",{className:Qe.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"T√™n file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:122,columnNumber:17},this),e.jsxDEV("th",{children:"Lo·∫°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:123,columnNumber:17},this),e.jsxDEV("th",{children:"K√≠ch th∆∞·ªõc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:124,columnNumber:17},this),e.jsxDEV("th",{children:"Th·ªùi gian"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:125,columnNumber:17},this),e.jsxDEV("th",{children:"Th·ªùi l∆∞·ª£ng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:126,columnNumber:17},this),e.jsxDEV("th",{children:"Tr·∫°ng th√°i"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:127,columnNumber:17},this),e.jsxDEV("th",{children:"Thao t√°c"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:128,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:121,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:120,columnNumber:13},this),e.jsxDEV("tbody",{children:o.map(c=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("div",{className:Qe.fileNameCell,children:[e.jsxDEV("span",{className:Qe.fileName,children:c.fileName},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:136,columnNumber:23},this),e.jsxDEV("span",{className:Qe.createdBy,children:["B·ªüi: ",c.createdBy]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:137,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:135,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:134,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:Qe.backupType,children:c.backupType},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:143,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:142,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("span",{className:Qe.fileSize,children:p(c.fileSize)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:146,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:145,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:Qe.timeCell,children:e.jsxDEV("span",{className:Qe.startTime,children:new Date(c.startedAt).toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:152,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:151,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:150,columnNumber:19},this),e.jsxDEV("td",{children:h(c.duration)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:163,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("div",{children:[m(c.status),c.errorMessage&&e.jsxDEV("div",{className:Qe.errorMessage,children:c.errorMessage},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:168,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:165,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:164,columnNumber:19},this),e.jsxDEV("td",{children:e.jsxDEV("div",{className:Qe.actionButtons,children:[e.jsxDEV("button",{className:Qe.buttonDownload,disabled:c.status!=="completed",title:"T·∫£i xu·ªëng",children:e.jsxDEV(ai,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:179,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:174,columnNumber:23},this),e.jsxDEV("button",{className:Qe.buttonRestore,disabled:!n||!c.canRestore,title:"Ph·ª•c h·ªìi",children:e.jsxDEV(oi,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:186,columnNumber:25},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:181,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:173,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:172,columnNumber:19},this)]},c.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:133,columnNumber:17},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:131,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:119,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:118,columnNumber:9},this),e.jsxDEV("div",{className:Qe.pagination,children:[e.jsxDEV("button",{className:Qe.paginationButton,onClick:()=>t(c=>Math.max(1,c-1)),disabled:a===1,children:"Tr∆∞·ªõc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:198,columnNumber:11},this),e.jsxDEV("span",{className:Qe.paginationInfo,children:["Trang ",a," / ",u]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:205,columnNumber:11},this),e.jsxDEV("button",{className:Qe.paginationButton,onClick:()=>t(c=>Math.min(u,c+1)),disabled:a===u,children:"Sau"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:208,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:197,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:58,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/system-admin/sa-system-config/pages/DatabaseBackupsPage.tsx",lineNumber:57,columnNumber:5},this)}const RN=Object.freeze(Object.defineProperty({__proto__:null,default:kN},Symbol.toStringTag,{value:"Module"}));export{Go as $,$N as A,we as B,Zi as C,bi as D,KN as E,Sa as F,zl as G,zN as H,zs as I,BN as J,qN as K,ea as L,FN as M,GN as N,JN as O,hs as P,ZN as Q,WN as R,Bl as S,Nt as T,Be as U,qe as V,XN as W,jt as X,Jl as Y,Wl as Z,ke as _,ft as a,ga as a0,Ms as b,Fe as c,xs as d,vt as e,ts as f,Rt as g,Ot as h,Ut as i,yr as j,Ke as k,Ze as l,Pt as m,Lt as n,Qt as o,_t as p,$e as q,Ha as r,M as s,Ul as t,Fl as u,Gl as v,Wa as w,Xa as x,xr as y,vi as z};
