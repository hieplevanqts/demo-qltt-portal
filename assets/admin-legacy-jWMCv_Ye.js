const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/docs-B0haN8rX.js","assets/system-admin-ex6_k_qZ.js","assets/vendor-Cja35lIC.js","assets/leaflet-fbicKXUd.js","assets/leaflet-CIGW-MKW.css","assets/vendor-BDNOyzxu.css","assets/icons-BAlVBlw-.js","assets/system-admin-B4Aj2jdp.css"])))=>i.map(i=>d[i]);
import{r as d,j as e,k as Qi,aB as m,a_ as sn,a$ as $n,b0 as Un,b1 as qn,e as Gn}from"./vendor-Cja35lIC.js";import{s as ie,r as Ci,t as Ni,_ as rn,B as di,P as On,k as Wn,l as Jn}from"./system-admin-ex6_k_qZ.js";import{X as De,a2 as oi,e as Ie,w as ci,l as Xn,E as ke,Z as Ae,x as Le,N as _e,aa as Oi,C as Ce,al as Re,aM as Mi,aN as jn,Y as Ti,S as Ze,Q as ve,D as ni,i as Kn,f as be,aO as Ii,n as Be,a5 as Me,J as he,ad as xi,at as ge,aP as Pe,W as Zn,R as yn,O as we,k as gi,g as Ve,a1 as Qn,aQ as Yn,_ as es,U as mi,a9 as ye,o as ze,aB as Wi,ak as We,aL as is,a8 as Cn,aR as ns,j as Qe,s as Sn,ac as ki,d as Ai,aS as ii,aT as ln,H as ss,$ as bi,aq as an,aU as tn,aV as Vi,aW as rs,T as ti,aX as Ji,aY as ls,aZ as Xi,a_ as on,a$ as as,aj as ts,b0 as os,b1 as ds,b2 as cs,ai as Ki,a6 as dn,b3 as ms,aI as us,G as ps,L as fs,b4 as wn}from"./icons-BAlVBlw-.js";import{u as ce,w as Fe,r as Zi}from"./docs-B0haN8rX.js";import{S as Ei,a as Hi,b as _i,c as Li,d as Ee,e as Ns}from"./evidence-DaHuJ-yO.js";function si(n,s){const[r,u]=d.useState(()=>{if(typeof window>"u")return s;try{const T=window.localStorage.getItem(n);return T?JSON.parse(T):s}catch{return s}});return[r,T=>{try{const t=T instanceof Function?T(r):T;u(t),typeof window<"u"&&window.localStorage.setItem(n,JSON.stringify(t))}catch{}}]}const bs="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Ts(n){const[s,r]=d.useState(!1),u=()=>{r(!0)},{src:c,alt:T,style:t,className:p,...V}=n;return s?e.jsxDEV("div",{className:`inline-block bg-gray-100 text-center align-middle ${p??""}`,style:t,children:e.jsxDEV("div",{className:"flex items-center justify-center w-full h-full",children:e.jsxDEV("img",{src:bs,alt:"Error loading image",...V,"data-original-url":c},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/figma/ImageWithFallback.tsx",lineNumber:21,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/figma/ImageWithFallback.tsx",lineNumber:20,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/figma/ImageWithFallback.tsx",lineNumber:16,columnNumber:5},this):e.jsxDEV("img",{src:c,alt:T,className:p,style:t,...V,onError:u},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/figma/ImageWithFallback.tsx",lineNumber:25,columnNumber:5},this)}const Vs="_pageContainer_1xc2v_3",vs="_breadcrumb_1xc2v_23",xs="_active_1xc2v_41",gs="_pageHeader_1xc2v_53",hs="_pageTitle_1xc2v_65",Es="_pageSubtitle_1xc2v_81",Hs="_mainTabs_1xc2v_97",_s="_mainTab_1xc2v_97",Ls="_mainTabActive_1xc2v_161",Ds="_contentContainer_1xc2v_175",js="_subTabs_1xc2v_199",ys="_subTab_1xc2v_199",Qs="_subTabActive_1xc2v_287",Cs="_tabContent_1xc2v_301",Ss="_tabContentInner_1xc2v_313",ws="_primaryBtn_1xc2v_385",Ms="_secondaryBtn_1xc2v_507",Is="_dangerBtn_1xc2v_549",ks="_iconBtn_1xc2v_589",As="_actionButtons_1xc2v_627",Rs="_filterBar_1xc2v_641",Ps="_filterGroup_1xc2v_665",Bs="_searchBox_1xc2v_693",zs="_searchIcon_1xc2v_707",Fs="_searchInput_1xc2v_725",$s="_select_1xc2v_781",Us="_input_1xc2v_869",qs="_textarea_1xc2v_903",Gs="_tableContainer_1xc2v_1081",Os="_table_1xc2v_1081",Ws="_actionCol_1xc2v_1135",Js="_code_1xc2v_1173",Xs="_userCell_1xc2v_1203",Ks="_avatar_1xc2v_1215",Zs="_badge_1xc2v_1247",Ys="_statusActive_1xc2v_1283",er="_statusLocked_1xc2v_1285",ir="_statusInactive_1xc2v_1289",nr="_permissionTreeItem_1xc2v_2089",sr="_permissionTreeHeader_1xc2v_2125",rr="_permissionTreeChildren_1xc2v_2181",lr="_permissionTreeChild_1xc2v_2181",ar="_spinner_1xc2v_2679",tr="_placeholder_1xc2v_2707",or="_modalOverlay_1xc2v_2743",dr="_modal_1xc2v_2743",cr="_modalHeader_1xc2v_2785",mr="_closeBtn_1xc2v_2821",ur="_modalBody_1xc2v_2865",pr="_deletePreview_1xc2v_2895",fr="_formGroup_1xc2v_2909",Nr="_formGrid_1xc2v_2935",br="_required_1xc2v_2947",Tr="_areaSelectContainer_1xc2v_2957",Vr="_areaSearchInput_1xc2v_2965",vr="_areaDropdown_1xc2v_3009",xr="_areaOption_1xc2v_3039",gr="_selectedAreaTags_1xc2v_3095",hr="_areaTag_1xc2v_3109",Er="_modalFooter_1xc2v_3175",Hr="_riskHigh_1xc2v_3261",_r="_riskMedium_1xc2v_3263",Lr="_riskLow_1xc2v_3265",Dr="_headerRow_1xc2v_3915",jr="_actionGroup_1xc2v_3953",yr="_btnPrimary_1xc2v_3965",Qr="_btnSecondary_1xc2v_4019",Cr="_filterPanel_1xc2v_4189",Sr="_filterRow_1xc2v_4205",wr="_filterItem_1xc2v_4221",Mr="_tableWrapper_1xc2v_4241",Ir="_tableFooter_1xc2v_4251",kr="_footerInfo_1xc2v_4273",Ar="_emptyState_1xc2v_4285",Rr="_cellWithIcon_1xc2v_4323",Pr="_cellModuleName_1xc2v_4335",Br="_codeText_1xc2v_4349",zr="_cellMain_1xc2v_4369",Fr="_cellTitle_1xc2v_4381",$r="_cellSubtitle_1xc2v_4395",Ur="_badgeInfo_1xc2v_4409",qr="_badgeWarning_1xc2v_4433",Gr="_badgeDanger_1xc2v_4457",Or="_badgePrimary_1xc2v_4481",Wr="_badgeDefault_1xc2v_4505",Jr="_iconSuccess_1xc2v_4529",Xr="_iconMuted_1xc2v_4537",Kr="_btnIcon_1xc2v_4547",Zr="_btnIconDanger_1xc2v_4585",Yr="_modalTitle_1xc2v_4633",el="_modalClose_1xc2v_4657",il="_formRow_1xc2v_4705",nl="_label_1xc2v_4717",sl="_labelText_1xc2v_4739",rl="_checkboxLabel_1xc2v_4747",ll="_checkbox_1xc2v_4747",al="_checkboxText_1xc2v_4777",tl="_alertWarning_1xc2v_4789",ol="_alertInfo_1xc2v_4851",dl="_infoBox_1xc2v_4897",cl="_infoIcon_1xc2v_4917",ml="_infoContent_1xc2v_4929",ul="_infoRow_1xc2v_4943",pl="_loadingContainer_1xc2v_4969",fl="_confirmDialog_1xc2v_5033",Nl="_confirmContent_1xc2v_5077",bl="_confirmIcon_1xc2v_5119",Tl="_confirmText_1xc2v_5131",Vl="_confirmButtons_1xc2v_5151",i={pageContainer:Vs,breadcrumb:vs,active:xs,pageHeader:gs,pageTitle:hs,pageSubtitle:Es,mainTabs:Hs,mainTab:_s,mainTabActive:Ls,contentContainer:Ds,subTabs:js,subTab:ys,subTabActive:Qs,tabContent:Cs,tabContentInner:Ss,primaryBtn:ws,secondaryBtn:Ms,dangerBtn:Is,iconBtn:ks,actionButtons:As,filterBar:Rs,filterGroup:Ps,searchBox:Bs,searchIcon:zs,searchInput:Fs,select:$s,input:Us,textarea:qs,tableContainer:Gs,table:Os,actionCol:Ws,code:Js,userCell:Xs,avatar:Ks,badge:Zs,statusActive:Ys,statusLocked:er,statusInactive:ir,permissionTreeItem:nr,permissionTreeHeader:sr,permissionTreeChildren:rr,permissionTreeChild:lr,spinner:ar,placeholder:tr,modalOverlay:or,modal:dr,modalHeader:cr,closeBtn:mr,modalBody:ur,deletePreview:pr,formGroup:fr,formGrid:Nr,required:br,areaSelectContainer:Tr,areaSearchInput:Vr,areaDropdown:vr,areaOption:xr,selectedAreaTags:gr,areaTag:hr,modalFooter:Er,riskHigh:Hr,riskMedium:_r,riskLow:Lr,headerRow:Dr,actionGroup:jr,btnPrimary:yr,btnSecondary:Qr,filterPanel:Cr,filterRow:Sr,filterItem:wr,tableWrapper:Mr,tableFooter:Ir,footerInfo:kr,emptyState:Ar,cellWithIcon:Rr,cellModuleName:Pr,codeText:Br,cellMain:zr,cellTitle:Fr,cellSubtitle:$r,badgeInfo:Ur,badgeWarning:qr,badgeDanger:Gr,badgePrimary:Or,badgeDefault:Wr,iconSuccess:Jr,iconMuted:Xr,btnIcon:Kr,btnIconDanger:Zr,modalTitle:Yr,modalClose:el,formRow:il,label:nl,labelText:sl,checkboxLabel:rl,checkbox:ll,checkboxText:al,alertWarning:tl,alertInfo:ol,infoBox:dl,infoIcon:cl,infoContent:ml,infoRow:ul,loadingContainer:pl,confirmDialog:fl,confirmContent:Nl,confirmIcon:bl,confirmText:Tl,confirmButtons:Vl},vl={id:"TEMP_001",code:"KT_HANG_GIA",name:"Kiểm tra Cơ sở Kinh doanh Hàng giả",description:"Biểu mẫu kiểm tra nghiệp vụ cho chuyên đề kiểm tra cơ sở kinh doanh hàng giả, hàng nhái, hàng vi phạm quyền sở hữu trí tuệ",status:"active",createdAt:"2024-01-15 08:30:00",createdBy:"Admin",criteria:[{id:"CRIT_001",code:"STEP_01",name:"Xác nhận địa điểm kiểm tra",description:"Xác nhận cán bộ đã đến đúng địa chỉ cơ sở cần kiểm tra theo kế hoạch. Đối chiếu với GPS và thông tin hồ sơ.",inputType:"CHECKBOX",required:"BẮT BUỘC",completionRule:"Phải tích chọn để xác nhận đến đúng địa điểm",order:1},{id:"CRIT_002",code:"STEP_02",name:"Chụp ảnh biển hiệu cơ sở",description:"Chụp ảnh biển hiệu, bảng tên của cơ sở kinh doanh từ ít nhất 2 góc độ khác nhau. Đảm bảo ảnh rõ nét, đầy đủ ánh sáng.",inputType:"PHOTO_CAPTURE",required:"BẮT BUỘC",completionRule:"Tối thiểu 2 ảnh, dung lượng mỗi ảnh không quá 5MB",order:2},{id:"CRIT_003",code:"STEP_03",name:"Chụp ảnh tổng quan cơ sở",description:"Chụp ảnh tổng quan bên ngoài và bên trong cơ sở, bao gồm mặt tiền, khu vực bày bán hàng hóa, kho chứa (nếu có).",inputType:"PHOTO_CAPTURE",required:"BẮT BUỘC",completionRule:"Tối thiểu 3 ảnh (mặt tiền, khu bày bán, khu kho)",order:3},{id:"CRIT_004",code:"STEP_04",name:"Gặp gỡ chủ cơ sở / người đại diện",description:"Xác nhận đã gặp chủ cơ sở hoặc người được ủy quyền đại diện hợp pháp. Ghi nhận thông tin liên hệ.",inputType:"CHECKBOX",required:"BẮT BUỘC",completionRule:"Phải xác nhận đã gặp đại diện hợp pháp",order:4},{id:"CRIT_005",code:"STEP_05",name:"Thông tin người đại diện",description:"Nhập họ tên, số CMND/CCCD, số điện thoại của người đại diện cơ sở. Chụp ảnh giấy tờ tùy thân.",inputType:"TEXT_INPUT",required:"BẮT BUỘC",completionRule:"Nhập đầy đủ: Họ tên, CMND/CCCD (9-12 số), SĐT (10 số)",order:5},{id:"CRIT_006",code:"STEP_06",name:"Kiểm tra Giấy phép kinh doanh",description:"Kiểm tra Giấy chứng nhận đăng ký kinh doanh hoặc Giấy phép kinh doanh có điều kiện (nếu áp dụng). Chụp ảnh giấy phép.",inputType:"DROPDOWN",required:"BẮT BUỘC",completionRule:"Chọn 1 trong các tùy chọn",order:6,options:["Có giấy phép hợp lệ","Có giấy phép nhưng hết hạn","Không có giấy phép","Không kiểm tra được"]},{id:"CRIT_007",code:"STEP_07",name:"Upload ảnh Giấy phép kinh doanh",description:"Upload ảnh hoặc file scan Giấy phép kinh doanh (nếu có). File định dạng JPG, PNG hoặc PDF.",inputType:"FILE_UPLOAD",required:"TÙY CHỌN",completionRule:"File không quá 10MB, định dạng JPG/PNG/PDF",order:7},{id:"CRIT_008",code:"STEP_08",name:"Danh sách hàng hóa kinh doanh",description:"Liệt kê các nhóm hàng hóa chính mà cơ sở đang kinh doanh (ví dụ: quần áo, giày dép, mỹ phẩm, điện tử...).",inputType:"TEXTAREA",required:"BẮT BUỘC",completionRule:"Nhập tối thiểu 20 ký tự, mô tả rõ ràng",order:8},{id:"CRIT_009",code:"STEP_09",name:"Phát hiện hàng nghi ngờ giả",description:"Cán bộ có phát hiện hàng hóa nghi ngờ giả, hàng nhái, hàng xâm phạm quyền sở hữu trí tuệ hay không?",inputType:"RADIO",required:"BẮT BUỘC",completionRule:"Chọn 1 tùy chọn",order:9,options:["Có phát hiện","Không phát hiện","Chưa rõ ràng, cần xác minh thêm"]},{id:"CRIT_010",code:"STEP_10",name:"Chụp ảnh hàng nghi ngờ giả",description:"Nếu phát hiện hàng nghi ngờ, chụp ảnh chi tiết sản phẩm, tem nhãn, logo, bao bì. Chụp cả góc độ tổng thể và cận cảnh.",inputType:"PHOTO_CAPTURE",required:"TÙY CHỌN",completionRule:"Tối thiểu 3 ảnh nếu có phát hiện",order:10},{id:"CRIT_011",code:"STEP_11",name:"Mô tả chi tiết hàng nghi ngờ",description:"Mô tả chi tiết về hàng hóa nghi ngờ: tên sản phẩm, nhãn hiệu, xuất xứ ghi trên bao bì, số lượng ước tính, giá bán.",inputType:"TEXTAREA",required:"TÙY CHỌN",completionRule:"Nhập tối thiểu 50 ký tự nếu có phát hiện",order:11},{id:"CRIT_012",code:"STEP_12",name:"Lập biên bản tạm giữ",description:"Cán bộ có lập biên bản tạm giữ hàng hóa vi phạm hay không?",inputType:"RADIO",required:"BẮT BUỘC",completionRule:"Chọn 1 tùy chọn",order:12,options:["Có lập biên bản","Không lập biên bản","Chờ xác minh thêm"]},{id:"CRIT_013",code:"STEP_13",name:"Upload biên bản tạm giữ",description:"Upload file scan hoặc ảnh biên bản tạm giữ (nếu có). Đảm bảo chữ ký và đóng dấu rõ ràng.",inputType:"FILE_UPLOAD",required:"TÙY CHỌN",completionRule:"File không quá 10MB, định dạng PDF hoặc ảnh JPG/PNG",order:13},{id:"CRIT_014",code:"STEP_14",name:"Kết luận kiểm tra",description:"Nhận xét tổng quan về tình trạng cơ sở, mức độ tuân thủ pháp luật, đề xuất biện pháp xử lý (nếu có).",inputType:"TEXTAREA",required:"BẮT BUỘC",completionRule:"Nhập tối thiểu 100 ký tự, mô tả chi tiết",order:14},{id:"CRIT_015",code:"STEP_15",name:"Chữ ký xác nhận",description:"Chữ ký điện tử của cán bộ thực hiện kiểm tra để xác nhận tính xác thực của thông tin đã nhập.",inputType:"SIGNATURE",required:"BẮT BUỘC",completionRule:"Phải có chữ ký điện tử",order:15}]},xl={id:"TEMP_002",code:"KT_ATVSTP",name:"Kiểm tra An toàn Vệ sinh Thực phẩm",description:"Biểu mẫu kiểm tra cơ sở sản xuất, kinh doanh thực phẩm theo quy định về ATVS thực phẩm",status:"active",createdAt:"2024-01-15 09:00:00",createdBy:"Admin",criteria:[{id:"CRIT_101",code:"FS_01",name:"Giấy chứng nhận ATVS thực phẩm",description:"Kiểm tra Giấy chứng nhận cơ sở đủ điều kiện ATVS thực phẩm",inputType:"DROPDOWN",required:"BẮT BUỘC",completionRule:"Chọn trạng thái giấy phép",order:1,options:["Có giấy hợp lệ","Giấy hết hạn","Không có giấy","Đang chờ cấp"]},{id:"CRIT_102",code:"FS_02",name:"Điều kiện cơ sở vật chất",description:"Đánh giá điều kiện cơ sở: sạch sẽ, thoáng mát, có hệ thống xử lý chất thải",inputType:"RADIO",required:"BẮT BUỘC",completionRule:"Chọn mức độ đánh giá",order:2,options:["Đạt yêu cầu","Đạt một phần","Không đạt"]},{id:"CRIT_103",code:"FS_03",name:"Nguồn gốc nguyên liệu",description:"Kiểm tra hóa đơn, chứng từ nguồn gốc nguyên liệu thực phẩm",inputType:"PHOTO_CAPTURE",required:"BẮT BUỘC",completionRule:"Tối thiểu 2 ảnh hóa đơn/chứng từ",order:3},{id:"CRIT_104",code:"FS_04",name:"Nhật ký kiểm thực 3 bước",description:"Kiểm tra sổ nhật ký kiểm thực 3 bước (kiểm tra nguồn gốc, cảm quan, lưu mẫu)",inputType:"CHECKBOX",required:"BẮT BUỘC",completionRule:"Xác nhận có sổ nhật ký đầy đủ",order:4},{id:"CRIT_105",code:"FS_05",name:"Nhân viên có chứng chỉ ATVS",description:"Số lượng nhân viên đã qua đào tạo và có chứng chỉ ATVS thực phẩm",inputType:"NUMBER_INPUT",required:"BẮT BUỘC",completionRule:"Nhập số nguyên >= 0",order:5},{id:"CRIT_106",code:"FS_06",name:"Kết luận chung",description:"Kết luận tổng quan và đề xuất xử lý",inputType:"TEXTAREA",required:"BẮT BUỘC",completionRule:"Nhập tối thiểu 50 ký tự",order:6}]},gl={id:"TEMP_003",code:"KT_XANG_DAU",name:"Kiểm tra Kinh doanh Xăng dầu",description:"Biểu mẫu kiểm tra cửa hàng xăng dầu, đảm bảo chất lượng nhiên liệu và an toàn PCCC",status:"active",createdAt:"2024-01-15 09:30:00",createdBy:"Admin",criteria:[{id:"CRIT_201",code:"FUEL_01",name:"Giấy phép kinh doanh xăng dầu",description:"Kiểm tra Giấy phép kinh doanh xăng dầu do cơ quan có thẩm quyền cấp",inputType:"DROPDOWN",required:"BẮT BUỘC",completionRule:"Chọn trạng thái giấy phép",order:1,options:["Có giấy phép hợp lệ","Giấy phép hết hạn","Không có giấy phép"]},{id:"CRIT_202",code:"FUEL_02",name:"Chứng chỉ đo lường",description:"Kiểm tra tem kiểm định đo lường trên các trụ bơm, cột đo",inputType:"PHOTO_CAPTURE",required:"BẮT BUỘC",completionRule:"Chụp ảnh tem kiểm định tất cả trụ bơm",order:2}]},Si=[vl,xl,gl],hl=({type:n,item:s,subTab:r,onClose:u,onSave:c,onDelete:T})=>{const[t,p]=d.useState({}),[V,L]=d.useState([{module:"Tổng quan",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Bản đồ",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Cơ sở & Địa bàn",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Nhiệm vụ",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Kiểm tra",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Báo cáo",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Quản trị hệ thống",permissions:{view:!1,create:!1,edit:!1,delete:!1}}]),[Q,E]=d.useState([]),[x,f]=d.useState([]),[D,k]=d.useState(!1),[I,z]=d.useState([]),[F,U]=d.useState("");d.useEffect(()=>{r==="territory"&&O(),r==="teams"&&w()},[r]);const O=async()=>{try{k(!0);const{data:v,error:N}=await ie.from("provinces").select("id:_id, code, name").order("name");N?console.error("Error fetching provinces:",N):E(v||[]);const{data:g,error:o}=await ie.from("wards").select("id:_id, code, name").order("name");o?console.error("Error fetching wards:",o):f(g||[])}catch(v){console.error("Error in fetchProvincesAndWards:",v)}finally{k(!1)}},w=async()=>{try{k(!0);const{data:v,error:N}=await ie.from("users").select("*, id:_id").order("full_name");N?console.error("Error fetching users:",N):z(v||[])}catch(v){console.error("Error in fetchUsers:",v)}finally{k(!1)}};d.useEffect(()=>{if(s&&(n==="edit"||n==="view")){if(p(s),r==="roles")if(s.permissions&&Array.isArray(s.permissions)){const v=s.permissions.map(N=>({module:N.module,permissions:{...N.permissions}}));L(v)}else s.code&&Z(s.code)}else p({}),r==="roles"&&L([{module:"Tổng quan",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Bản đồ",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Cơ sở & Địa bàn",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Nhiệm vụ",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Kiểm tra",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Báo cáo",permissions:{view:!1,create:!1,edit:!1,delete:!1}},{module:"Quản trị hệ thống",permissions:{view:!1,create:!1,edit:!1,delete:!1}}])},[s,n,r]);const Z=v=>{let N=[...V];switch(v){case"ADMIN":N=N.map(g=>({...g,permissions:{view:!0,create:!0,edit:!0,delete:!0}}));break;case"MANAGER":N=N.map((g,o)=>({...g,permissions:o<=5?{view:!0,create:o>=2,edit:o>=2,delete:!1}:{view:!1,create:!1,edit:!1,delete:!1}}));break;case"OFFICER":N=N.map((g,o)=>({...g,permissions:o<=4?{view:!0,create:o>=2&&o<=3,edit:o>=2&&o<=3,delete:!1}:{view:!1,create:!1,edit:!1,delete:!1}}));break;case"CITIZEN":N=N.map((g,o)=>({...g,permissions:o<=1?{view:!0,create:!1,edit:!1,delete:!1}:{view:!1,create:!1,edit:!1,delete:!1}}));break}L(N)},B=(v,N)=>{p({...t,[v]:N})},R=(v,N)=>{const g=[...V];g[v].permissions[N]=!g[v].permissions[N],L(g)},S=v=>{const N=[...V],g=N[v].permissions,a=!(g.view||g.create||g.edit||g.delete);N[v].permissions={view:a,create:a,edit:a,delete:a},L(N)},ee=v=>{const g=[v.view,v.create,v.edit,v.delete].filter(o=>o).length;return g>0&&g<4},ne=v=>v.view&&v.create&&v.edit&&v.delete,A=v=>{if(v.preventDefault(),n==="delete")T();else{const N=r==="roles"?{...t,permissions:V}:t;c(N)}},y=()=>n==="delete"?"Xác nhận xóa":n==="assign"?"Gán quyền / phạm vi":n==="view"?"Xem chi tiết":n==="edit"?"Chỉnh sửa":"Thêm mới",$=()=>n==="delete"?e.jsxDEV(Ie,{size:24,style:{color:"#ef4444"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:262,columnNumber:35},void 0):n==="assign"?e.jsxDEV(Xn,{size:24,style:{color:"#4F46E5"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:263,columnNumber:35},void 0):n==="view"?e.jsxDEV(ke,{size:24,style:{color:"#4F46E5"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:264,columnNumber:33},void 0):n==="edit"?e.jsxDEV(Ae,{size:24,style:{color:"#4F46E5"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:265,columnNumber:33},void 0):e.jsxDEV(Le,{size:24,style:{color:"#4F46E5"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:266,columnNumber:12},void 0),M=()=>{var N,g;if(n==="delete")return e.jsxDEV("div",{children:[e.jsxDEV("p",{children:"Bạn có chắc chắn muốn xóa mục này?"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:273,columnNumber:11},void 0),s&&e.jsxDEV("div",{className:i.deletePreview,children:e.jsxDEV("strong",{children:s.name||s.fullName||s.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:276,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:275,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Lý do xóa ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:280,columnNumber:30},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:280,columnNumber:13},void 0),e.jsxDEV("textarea",{className:i.textarea,rows:3,placeholder:"Nhập lý do xóa..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:281,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:279,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:272,columnNumber:9},void 0);if(n==="assign")return e.jsxDEV("div",{children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Vai trò / Quyền ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:291,columnNumber:36},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:291,columnNumber:13},void 0),e.jsxDEV("select",{className:i.select,children:[e.jsxDEV("option",{children:"-- Chọn vai trò --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:293,columnNumber:15},void 0),e.jsxDEV("option",{children:"Công dân"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:294,columnNumber:15},void 0),e.jsxDEV("option",{children:"Cán bộ thực thi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:295,columnNumber:15},void 0),e.jsxDEV("option",{children:"Quản lý cấp huyện"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:296,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:292,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:290,columnNumber:11},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Phạm vi / Địa bàn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:300,columnNumber:13},void 0),e.jsxDEV("select",{className:i.select,children:[e.jsxDEV("option",{children:"-- Chọn địa bàn --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:302,columnNumber:15},void 0),e.jsxDEV("option",{children:"Hà Nội"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:303,columnNumber:15},void 0),e.jsxDEV("option",{children:"Quận Ba Đình"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:304,columnNumber:15},void 0),e.jsxDEV("option",{children:"Phường Ngọc Hà"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:305,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:301,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:299,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:289,columnNumber:9},void 0);const v=n==="view";return e.jsxDEV("div",{className:i.formGrid,children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Mã ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:319,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:319,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.code||t.username||"",onChange:o=>B(t.username!==void 0?"username":"code",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:320,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:318,columnNumber:9},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Tên ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:330,columnNumber:22},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:330,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.name||t.fullName||"",onChange:o=>B(t.fullName!==void 0?"fullName":"name",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:331,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:329,columnNumber:9},void 0),(r==="user-list"||r==="user-detail")&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Email ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:344,columnNumber:28},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:344,columnNumber:15},void 0),e.jsxDEV("input",{type:"email",className:i.input,value:t.email||"",onChange:o=>B("email",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:345,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:343,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Điện thoại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:354,columnNumber:15},void 0),e.jsxDEV("input",{type:"tel",className:i.input,value:t.phone||"",onChange:o=>B("phone",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:355,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:353,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Vai trò"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:364,columnNumber:15},void 0),e.jsxDEV("select",{className:i.select,value:t.role||"",onChange:o=>B("role",o.target.value),disabled:v,children:[e.jsxDEV("option",{children:"Công dân"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:371,columnNumber:17},void 0),e.jsxDEV("option",{children:"Cán bộ thực thi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:372,columnNumber:17},void 0),e.jsxDEV("option",{children:"Quản lý cấp huyện"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:373,columnNumber:17},void 0),e.jsxDEV("option",{children:"Quản trị hệ thống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:374,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:365,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:363,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Đơn vị"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:378,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.unit||"",onChange:o=>B("unit",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:379,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:377,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:342,columnNumber:11},void 0),r==="territory"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Cấp ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:394,columnNumber:26},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:394,columnNumber:15},void 0),e.jsxDEV("select",{className:i.select,value:t.level||"",onChange:o=>{B("level",o.target.value),B("territory_id","")},disabled:v,children:[e.jsxDEV("option",{value:"",children:"-- Chọn cấp --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:405,columnNumber:17},void 0),e.jsxDEV("option",{value:"province",children:"Tỉnh/TP"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:406,columnNumber:17},void 0),e.jsxDEV("option",{value:"ward",children:"Xã/Phường"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:407,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:395,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:393,columnNumber:13},void 0),t.level==="province"&&e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Tỉnh/Thành phố ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:414,columnNumber:39},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:414,columnNumber:17},void 0),e.jsxDEV("select",{className:i.select,value:t.territory_id||"",onChange:o=>B("territory_id",o.target.value),disabled:v||D,children:[e.jsxDEV("option",{value:"",children:"-- Chọn Tỉnh/TP --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:421,columnNumber:19},void 0),D?e.jsxDEV("option",{disabled:!0,children:"Đang tải..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:423,columnNumber:21},void 0):Q.map(o=>e.jsxDEV("option",{value:o.id,children:o.name},o.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:426,columnNumber:23},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:415,columnNumber:17},void 0),Q.length===0&&!D&&e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px"},children:"Không có dữ liệu Tỉnh/TP"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:433,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:413,columnNumber:15},void 0),t.level==="ward"&&e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Xã/Phường ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:443,columnNumber:34},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:443,columnNumber:17},void 0),e.jsxDEV("select",{className:i.select,value:t.territory_id||"",onChange:o=>B("territory_id",o.target.value),disabled:v||D,children:[e.jsxDEV("option",{value:"",children:"-- Chọn Xã/Phường --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:450,columnNumber:19},void 0),D?e.jsxDEV("option",{disabled:!0,children:"Đang tải..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:452,columnNumber:21},void 0):x.map(o=>e.jsxDEV("option",{value:o.id,children:o.name},o.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:455,columnNumber:23},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:444,columnNumber:17},void 0),x.length===0&&!D&&e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px"},children:"Không có dữ liệu Xã/Phường"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:462,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:442,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:392,columnNumber:11},void 0),r==="teams"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Loại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:475,columnNumber:15},void 0),e.jsxDEV("select",{className:i.select,value:t.type||"team",onChange:o=>B("type",o.target.value),disabled:v,children:[e.jsxDEV("option",{value:"department",children:"Phòng ban"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:482,columnNumber:17},void 0),e.jsxDEV("option",{value:"team",children:"Đội"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:483,columnNumber:17},void 0),e.jsxDEV("option",{value:"group",children:"Tổ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:484,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:476,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:474,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Trưởng đơn vị ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:488,columnNumber:36},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:488,columnNumber:15},void 0),e.jsxDEV("select",{className:i.select,value:t.leader_id||"",onChange:o=>B("leader_id",o.target.value),disabled:v||D,children:[e.jsxDEV("option",{value:"",children:"-- Chọn trưởng đơn vị --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:495,columnNumber:17},void 0),D?e.jsxDEV("option",{disabled:!0,children:"Đang tải..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:497,columnNumber:19},void 0):I.map(o=>e.jsxDEV("option",{value:o.id,children:[o.full_name," (",o.email,")"]},o.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:500,columnNumber:21},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:489,columnNumber:15},void 0),I.length===0&&!D&&e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px"},children:"Không có dữ liệu người dùng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:507,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:487,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,style:{gridColumn:"1 / -1"},children:[e.jsxDEV("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"var(--spacing-3)"},children:[e.jsxDEV("span",{children:["Thành viên ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:520,columnNumber:30},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:519,columnNumber:17},void 0),!v&&Array.isArray(t.member_ids)&&t.member_ids.length>0&&e.jsxDEV("button",{type:"button",onClick:()=>B("member_ids",[]),style:{fontSize:"var(--text-sm)",color:"var(--primary)",textDecoration:"none",background:"none",border:"none",cursor:"pointer",padding:0,fontWeight:"500"},children:"Bỏ chọn tất cả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:523,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:513,columnNumber:15},void 0),Array.isArray(t.member_ids)&&t.member_ids.length>0&&e.jsxDEV("div",{style:{display:"flex",flexWrap:"wrap",gap:"var(--spacing-2)",marginBottom:"var(--spacing-3)"},children:t.member_ids.map(o=>{const a=I.find(h=>h.id===o);return a?e.jsxDEV("div",{style:{display:"inline-flex",alignItems:"center",gap:"var(--spacing-2)",padding:"6px 12px",backgroundColor:"#005cb6",color:"white",borderRadius:"6px",fontSize:"var(--text-sm)",fontWeight:"500"},children:[e.jsxDEV("span",{children:a.full_name||a.email},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:569,columnNumber:25},void 0),!v&&e.jsxDEV("button",{type:"button",onClick:()=>{const h=[...t.member_ids],b=h.indexOf(o);b>-1&&(h.splice(b,1),B("member_ids",h))},style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:0,display:"flex",alignItems:"center",fontSize:"18px",lineHeight:"1",opacity:.9},onMouseEnter:h=>h.currentTarget.style.opacity="1",onMouseLeave:h=>h.currentTarget.style.opacity="0.9",children:"×"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:571,columnNumber:27},void 0)]},o,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:555,columnNumber:23},void 0):null})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:544,columnNumber:17},void 0),e.jsxDEV("div",{style:{border:"1px solid var(--border)",borderRadius:"var(--radius)",overflow:"hidden",backgroundColor:"white"},children:[!v&&I.length>0&&e.jsxDEV("div",{style:{padding:"12px",borderBottom:"1px solid var(--border)",backgroundColor:"#fafafa"},children:e.jsxDEV("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsxDEV(_e,{size:16,style:{position:"absolute",left:"12px",color:"#6b7280",pointerEvents:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:624,columnNumber:23},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm theo tên hoặc email...",value:F,onChange:o=>U(o.target.value),style:{width:"100%",padding:"8px 12px 8px 36px",border:"1px solid var(--border)",borderRadius:"var(--radius)",fontSize:"var(--text-sm)",outline:"none",backgroundColor:"white"},onFocus:o=>o.target.style.borderColor="#005cb6",onBlur:o=>o.target.style.borderColor="var(--border)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:633,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:619,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:614,columnNumber:19},void 0),D?e.jsxDEV("div",{style:{padding:"var(--spacing-4)",color:"var(--muted-foreground)",textAlign:"center",fontSize:"var(--text-sm)"},children:"Đang tải danh sách người dùng..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:655,columnNumber:19},void 0):I.length===0?e.jsxDEV("div",{style:{padding:"var(--spacing-4)",color:"var(--muted-foreground)",textAlign:"center",fontSize:"var(--text-sm)"},children:"Không có dữ liệu người dùng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:664,columnNumber:19},void 0):e.jsxDEV("div",{style:{maxHeight:"300px",overflowY:"auto"},children:I.filter(o=>{if(!F.trim())return!0;const a=F.toLowerCase(),h=(o.full_name||"").toLowerCase(),b=(o.email||"").toLowerCase();return h.includes(a)||b.includes(a)}).map((o,a,h)=>{const l=(Array.isArray(t.member_ids)?t.member_ids:[]).includes(o.id),j=_=>{if(!_||typeof _!="string")return"??";const X=_.trim();if(!X)return"??";const H=X.split(" ");return H.length===1?H[0].substring(0,2).toUpperCase():(H[0][0]+H[H.length-1][0]).toUpperCase()};return e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 12px",borderBottom:a<h.length-1?"1px solid var(--border)":"none",cursor:v?"default":"pointer",backgroundColor:"white",transition:"background-color 0.15s ease"},onMouseEnter:_=>{v||(_.currentTarget.style.backgroundColor="#f8f9fa")},onMouseLeave:_=>{v||(_.currentTarget.style.backgroundColor="white")},onClick:()=>{if(v)return;const _=Array.isArray(t.member_ids)?[...t.member_ids]:[],X=_.indexOf(o.id);X>-1?_.splice(X,1):_.push(o.id),B("member_ids",_)},children:[e.jsxDEV("div",{style:{width:"18px",height:"18px",borderRadius:"4px",border:`2px solid ${l?"#005cb6":"#d1d5db"}`,backgroundColor:l?"#005cb6":"white",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transition:"all 0.15s ease"},children:l&&e.jsxDEV("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:e.jsxDEV("path",{d:"M10 3L4.5 8.5L2 6",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:758,columnNumber:33},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:752,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:739,columnNumber:27},void 0),e.jsxDEV("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#005cb6",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",flexShrink:0},children:j(o.full_name)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:770,columnNumber:27},void 0),e.jsxDEV("div",{style:{flex:1,minWidth:0},children:[e.jsxDEV("div",{style:{fontSize:"var(--text-base)",fontWeight:"500",color:"#1f2937",marginBottom:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.full_name||"Không có tên"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:791,columnNumber:29},void 0),e.jsxDEV("div",{style:{fontSize:"var(--text-sm)",color:"#6b7280",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.email||"Không có email"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:802,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:787,columnNumber:27},void 0),l&&e.jsxDEV("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#005cb6",color:"white",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsxDEV("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:e.jsxDEV("path",{d:"M11.5 3.5L5.25 10.5L2.5 7.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:827,columnNumber:33},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:826,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:815,columnNumber:29},void 0)]},o.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:701,columnNumber:25},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:673,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:606,columnNumber:15},void 0),!v&&I.length>0&&e.jsxDEV("div",{style:{marginTop:"var(--spacing-3)",padding:"8px 12px",textAlign:"center",fontSize:"var(--text-sm)",color:"#6b7280"},children:Array.isArray(t.member_ids)&&t.member_ids.length>0?e.jsxDEV("span",{children:["Đã chọn ",e.jsxDEV("strong",{style:{color:"#005cb6",fontWeight:"600"},children:t.member_ids.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:855,columnNumber:31},void 0)," thành viên"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:854,columnNumber:21},void 0):e.jsxDEV("span",{children:"Chưa chọn thành viên nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:858,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:846,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:512,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:473,columnNumber:11},void 0),r==="category-management"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Loại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:870,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.type||"Loại hình cơ sở",onChange:o=>B("type",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:871,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:869,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Hiệu lực từ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:880,columnNumber:15},void 0),e.jsxDEV("input",{type:"date",className:i.input,value:t.effectiveFrom||"",onChange:o=>B("effectiveFrom",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:881,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:879,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:868,columnNumber:11},void 0),r==="risk-config"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Loại rủi ro"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:896,columnNumber:15},void 0),e.jsxDEV("select",{className:i.select,value:t.type||"low",onChange:o=>B("type",o.target.value),disabled:v,children:[e.jsxDEV("option",{value:"high",children:"Cao"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:903,columnNumber:17},void 0),e.jsxDEV("option",{value:"medium",children:"Trung bình"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:904,columnNumber:17},void 0),e.jsxDEV("option",{value:"low",children:"Thấp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:905,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:897,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:895,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Ngưỡng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:909,columnNumber:15},void 0),e.jsxDEV("input",{type:"number",className:i.input,value:t.threshold||"",onChange:o=>B("threshold",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:910,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:908,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:894,columnNumber:11},void 0),r==="checklist"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Chuyên đề"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:925,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.topic||"",onChange:o=>B("topic",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:926,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:924,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Biểu mẫu kiểm tra"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:935,columnNumber:15},void 0),e.jsxDEV("select",{className:i.select,value:t.formTemplateId||"",onChange:o=>B("formTemplateId",o.target.value),disabled:v,children:[e.jsxDEV("option",{value:"",children:"-- Chọn biểu mẫu --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:942,columnNumber:17},void 0),Si.filter(o=>o.status==="active").map(o=>e.jsxDEV("option",{value:o.id,children:[o.code," - ",o.name]},o.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:944,columnNumber:19},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:936,columnNumber:15},void 0),e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px",marginTop:"4px",display:"block"},children:"Chọn biểu mẫu để liên kết với checklist này"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:949,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:934,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Số tiêu chí"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:954,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.formTemplateId?((g=(N=Si.find(o=>o.id===t.formTemplateId))==null?void 0:N.criteria)==null?void 0:g.length)||0:"—",disabled:!0,readOnly:!0,style:{background:"var(--muted, #f2f4f7)",cursor:"not-allowed",color:"var(--muted-foreground, #667085)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:955,columnNumber:15},void 0),e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px",marginTop:"4px",display:"block"},children:"Tự động tính từ biểu mẫu đã chọn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:971,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:953,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:923,columnNumber:11},void 0),r==="notification-rules"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Sự kiện"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:982,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.event||"",onChange:o=>B("event",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:983,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:981,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Điều kiện"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:992,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.condition||"",onChange:o=>B("condition",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:993,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:991,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Người nhận"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1002,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.recipients||"",onChange:o=>B("recipients",o.target.value),disabled:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1003,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1001,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:980,columnNumber:11},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1016,columnNumber:11},void 0),e.jsxDEV("select",{className:i.select,value:t.status||"active",onChange:o=>B("status",o.target.value),disabled:v,children:[e.jsxDEV("option",{value:"active",children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1023,columnNumber:13},void 0),e.jsxDEV("option",{value:"inactive",children:"Không hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1024,columnNumber:13},void 0),(r==="user-list"||r==="user-detail")&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("option",{value:"locked",children:"Đã khóa"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1027,columnNumber:17},void 0),e.jsxDEV("option",{value:"pending",children:"Chờ duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1028,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1026,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1017,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1015,columnNumber:9},void 0),!v&&e.jsxDEV("div",{className:i.formGroup,style:{gridColumn:"1 / -1"},children:[e.jsxDEV("label",{children:"Mô tả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1037,columnNumber:13},void 0),e.jsxDEV("textarea",{className:i.textarea,rows:3,value:t.description||"",onChange:o=>B("description",o.target.value),placeholder:"Mô tả chi tiết..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1038,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1036,columnNumber:11},void 0),r==="roles"&&!v&&e.jsxDEV("div",{className:i.formGroup,style:{gridColumn:"1 / -1"},children:[e.jsxDEV("label",{children:"Quyền truy cập"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1051,columnNumber:13},void 0),e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"var(--spacing-3, 12px)"},children:V.map((o,a)=>{const h=`module-${a}`,b=ne(o.permissions),l=ee(o.permissions);return e.jsxDEV("div",{className:i.permissionTreeItem,children:[e.jsxDEV("div",{className:i.permissionTreeHeader,children:[e.jsxDEV("input",{ref:j=>{j&&(j.indeterminate=l)},id:h,type:"checkbox",checked:b,onChange:()=>S(a)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1061,columnNumber:23},void 0),e.jsxDEV("label",{htmlFor:h,children:o.module},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1070,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1060,columnNumber:21},void 0),e.jsxDEV("div",{className:i.permissionTreeChildren,children:[e.jsxDEV("div",{className:i.permissionTreeChild,children:[e.jsxDEV("input",{type:"checkbox",id:`${h}-view`,checked:o.permissions.view,onChange:()=>R(a,"view")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1074,columnNumber:25},void 0),e.jsxDEV("label",{htmlFor:`${h}-view`,children:"Xem"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1080,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1073,columnNumber:23},void 0),e.jsxDEV("div",{className:i.permissionTreeChild,children:[e.jsxDEV("input",{type:"checkbox",id:`${h}-create`,checked:o.permissions.create,onChange:()=>R(a,"create")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1083,columnNumber:25},void 0),e.jsxDEV("label",{htmlFor:`${h}-create`,children:"Tạo mới"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1089,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1082,columnNumber:23},void 0),e.jsxDEV("div",{className:i.permissionTreeChild,children:[e.jsxDEV("input",{type:"checkbox",id:`${h}-edit`,checked:o.permissions.edit,onChange:()=>R(a,"edit")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1092,columnNumber:25},void 0),e.jsxDEV("label",{htmlFor:`${h}-edit`,children:"Chỉnh sửa"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1098,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1091,columnNumber:23},void 0),e.jsxDEV("div",{className:i.permissionTreeChild,children:[e.jsxDEV("input",{type:"checkbox",id:`${h}-delete`,checked:o.permissions.delete,onChange:()=>R(a,"delete")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1101,columnNumber:25},void 0),e.jsxDEV("label",{htmlFor:`${h}-delete`,children:"Xóa"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1107,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1100,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1072,columnNumber:21},void 0)]},a,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1059,columnNumber:19},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1052,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1050,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:316,columnNumber:7},void 0)};return e.jsxDEV("div",{className:i.modalOverlay,onClick:u,children:e.jsxDEV("div",{className:i.modal,onClick:v=>v.stopPropagation(),children:e.jsxDEV("form",{onSubmit:A,children:[e.jsxDEV("div",{className:i.modalHeader,children:[$(),e.jsxDEV("h3",{children:y()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1126,columnNumber:13},void 0),e.jsxDEV("button",{type:"button",className:i.closeBtn,onClick:u,children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1128,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1127,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1124,columnNumber:11},void 0),e.jsxDEV("div",{className:i.modalBody,children:M()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1132,columnNumber:11},void 0),e.jsxDEV("div",{className:i.modalFooter,children:[e.jsxDEV("button",{type:"button",className:i.secondaryBtn,onClick:u,children:n==="view"?"Đóng":"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1137,columnNumber:13},void 0),n!=="view"&&e.jsxDEV("button",{type:"submit",className:n==="delete"?i.dangerBtn:i.primaryBtn,children:[n==="add"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(oi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1142,columnNumber:38},void 0)," Tạo mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1142,columnNumber:36},void 0),n==="edit"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(oi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1143,columnNumber:39},void 0)," Lưu thay đổi"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1143,columnNumber:37},void 0),n==="delete"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ie,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1144,columnNumber:41},void 0)," Xc nhận xóa"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1144,columnNumber:39},void 0),n==="assign"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ci,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1145,columnNumber:41},void 0)," Xác nhận gán"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1145,columnNumber:39},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1141,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1136,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1123,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1122,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminModal.tsx",lineNumber:1121,columnNumber:5},void 0)},El="_paginationContainer_gblz7_1",Hl="_paginationInfo_gblz7_13",_l="_paginationControls_gblz7_24",Ll="_paginationButton_gblz7_30",Dl="_pageNumbers_gblz7_56",jl="_pageNumber_gblz7_56",yl="_pageNumberActive_gblz7_85",Ql="_pageEllipsis_gblz7_96",ei={paginationContainer:El,paginationInfo:Hl,paginationControls:_l,paginationButton:Ll,pageNumbers:Dl,pageNumber:jl,pageNumberActive:yl,pageEllipsis:Ql},$e=({currentPage:n,totalPages:s,totalItems:r,itemsPerPage:u,onPageChange:c,onItemsPerPageChange:T})=>{const t=(n-1)*u+1,p=Math.min(n*u,r),V=()=>{n>1&&c(n-1)},L=()=>{n<s&&c(n+1)},Q=()=>{const E=[];if(s<=7)for(let x=1;x<=s;x++)E.push(x);else{E.push(1),n>3&&E.push("...");for(let x=Math.max(2,n-1);x<=Math.min(s-1,n+1);x++)E.push(x);n<s-2&&E.push("..."),E.push(s)}return E};return s<=1?null:e.jsxDEV("div",{className:ei.paginationContainer,children:[e.jsxDEV("div",{className:ei.paginationInfo,children:["Hiển thị ",e.jsxDEV("strong",{children:t},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:76,columnNumber:18},void 0)," - ",e.jsxDEV("strong",{children:p},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:76,columnNumber:49},void 0)," trong tổng số ",e.jsxDEV("strong",{children:r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:76,columnNumber:90},void 0)," bản ghi"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:75,columnNumber:7},void 0),e.jsxDEV("div",{className:ei.paginationControls,children:[e.jsxDEV("button",{className:ei.paginationButton,onClick:V,disabled:n===1,"aria-label":"Trang trước",children:[e.jsxDEV(Oi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:86,columnNumber:11},void 0),"Trước"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:80,columnNumber:9},void 0),e.jsxDEV("div",{className:ei.pageNumbers,children:Q().map((E,x)=>typeof E=="number"?e.jsxDEV("button",{className:`${ei.pageNumber} ${n===E?ei.pageNumberActive:""}`,onClick:()=>c(E),children:E},x,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:93,columnNumber:15},void 0):e.jsxDEV("span",{className:ei.pageEllipsis,children:E},x,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:101,columnNumber:15},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:90,columnNumber:9},void 0),e.jsxDEV("button",{className:ei.paginationButton,onClick:L,disabled:n===s,"aria-label":"Trang sau",children:["Sau",e.jsxDEV(Ce,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:115,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:108,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:79,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/Pagination.tsx",lineNumber:74,columnNumber:5},void 0)},Je=(n=[],s=10)=>{const[r,u]=Qi.useState(1),c=n||[],T=Math.ceil(c.length/s),t=(r-1)*s,p=t+s,V=c.slice(t,p);Qi.useEffect(()=>{u(1)},[c.length]);const L=E=>{u(E)},Q=E=>{u(1)};return{currentPage:r,setCurrentPage:u,totalPages:T,currentItems:V,paginatedData:V,totalItems:c.length,itemsPerPage:s,handlePageChange:L,handleItemsPerPageChange:Q}},cn="Couppa@123",Cl=n=>{const s=new Map;n.forEach(u=>s.set(u.id,u));const r=(u,c=0)=>{const T=n.filter(p=>p.parent_id===u),t=[];return T.forEach(p=>{const V="  ".repeat(c),L=c>0?"├─ ":"";t.push({id:p.id,label:`${V}${L}${p.name} (${p.code})`,depth:c}),t.push(...r(p.id,c+1))}),t};return r(null)},Mn=(n,s)=>{const r=new Map;s.forEach(T=>r.set(T.id,T));const u=[];let c=n;for(;c;){const T=r.get(c);if(T)u.unshift(T.code),c=T.parent_id;else break}return u.join("")},Sl=(n,s)=>{const r=new Map;s.forEach(T=>r.set(T.id,T));const u=[];let c=n;for(;c;){const T=r.get(c);if(T)u.unshift(T.code),c=T.parent_id;else break}return u.join(" > ")},wl=n=>{if(!n||!n.trim())return"";const r=n.trim().replace(/\s+/g," ").split(" ");if(r.length===0)return"";const u=r[r.length-1].toUpperCase(),c=r.slice(0,-1).map(T=>T.charAt(0).toUpperCase()).join("");return u+c},Ml=n=>n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D"),Il=(n,s,r)=>{if(!n.trim())return"";const u=Ml(wl(n));return s?`${Mn(s,r)}_${u}`:u},kl=async(n,s)=>{try{const r=ie.from("users").select("id:_id, username").eq("username",n);s&&r.neq("id",s);const{data:u,error:c}=await r;return c?(console.error("❌ Error checking username:",c),!1):u&&u.length>0}catch(r){return console.error("❌ Error in checkUsernameExists:",r),!1}},Al=async(n,s)=>{try{if(!await kl(n,s))return n;const u=`${n}%`,c=ie.from("users").select("username").like("username",u);s&&c.neq("id",s);const{data:T,error:t}=await c;if(t)return console.error("❌ Error querying usernames:",t),`${n}02`;const p=(T==null?void 0:T.map(E=>E.username))||[],V=[];p.forEach(E=>{if(E===n)V.push(1);else if(E.startsWith(n)){const x=E.slice(n.length),f=parseInt(x,10);isNaN(f)||V.push(f)}});let L=2;for(;V.includes(L);)L++;return`${n}${L.toString().padStart(2,"0")}`}catch(r){return console.error("❌ Error in generateUniqueUsername:",r),`${n}02`}},Rl=({mode:n,user:s,roles:r,departments:u,onClose:c,onSave:T})=>{var O;const[t,p]=d.useState({email:"",full_name:"",phone:"",status:1,password:cn}),[V,L]=d.useState([]),[Q,E]=d.useState(null),[x,f]=d.useState(!1),[D,k]=d.useState("");d.useEffect(()=>{var w,Z,B;if(s){p({email:s.email||"",full_name:s.full_name||"",phone:s.phone||"",status:s.status||1,password:cn});const R=((w=s.user_roles)==null?void 0:w.map(ee=>ee.roles._id))||[];L(R);const S=((B=(Z=s.department_users)==null?void 0:Z[0])==null?void 0:B.departments.id)||null;E(S)}},[s]);const I=w=>{V.includes(w)?L(V.filter(Z=>Z!==w)):L([...V,w])},z=w=>{E(w),w?(Mn(w,u),Sl(w,u),u.find(Z=>Z.id===w)):k("")};d.useEffect(()=>{(async()=>{if(t.full_name.trim()&&Q){const Z=Il(t.full_name,Q,u),B=await Al(Z,s==null?void 0:s.id);k(B)}else k("")})()},[t.full_name,Q,u,s]);const F=async w=>{var Z;if(w.preventDefault(),!t.email.trim()||!t.full_name.trim()){m.error("Vui lòng điền đầy đủ thông tin bắt buộc");return}if(!t.full_name.trim()){m.error("Vui lòng nhập họ tên");return}if(!Q){m.error("Vui lòng chọn phòng ban");return}if(!D){m.error("Không thể tạo tên đăng nhập. Vui lòng kiểm tra Họ tên và Phòng ban");return}if(n==="add"&&!t.password){m.error("Vui lòng nhập mật khẩu");return}if(!((Z=t.phone)!=null&&Z.trim())){m.error("Vui lòng nhập số điện thoại");return}if(V.length===0){m.error("Vui lòng chọn ít nhất 1 vai trò");return}try{f(!0);const B={email:t.email.trim(),full_name:t.full_name.trim(),phone:t.phone.trim()||null,status:t.status,username:D,updated_at:new Date().toISOString()};let R;if(n==="add"){const y=t.password||"Couppa@123",{data:$,error:M}=await ie.auth.signUp({email:t.email.trim(),password:y,options:{data:{full_name:t.full_name.trim(),phone:t.phone.trim()||null},emailRedirectTo:void 0}});if(M){console.error("❌ Error creating user in auth.users:",M),m.error(`Lỗi tạo tài khoản: ${M.message}`);return}if(!$.user){m.error("Không thể tạo tài khoản. Vui lòng thử lại.");return}R=$.user._id;const{error:v}=await ie.from("users").insert([{_id:R,email:t.email.trim(),full_name:t.full_name.trim(),phone:t.phone.trim()||null,username:D,status:t.status,avatar_url:null,updated_at:new Date().toISOString()}]).select().single();if(v)if(console.error("❌ Error inserting user into public.users:",v),v.code==="23505"){const{error:N}=await ie.from("users").update(B).eq("_id",R);if(N){console.error("❌ Error updating user:",N),m.error(`Lỗi cập nhật thông tin người dùng: ${N.message}`);return}}else{m.error(`Lỗi tạo người dùng: ${v.message}`);return}}else if(n==="edit"&&s){const{data:y,error:$}=await ie.rpc("update_user_profile",{p_user_id:s._id,p_email:t.email.trim(),p_phone:t.phone.trim()||null,p_full_name:t.full_name.trim(),p_username:D,p_status:t.status});if($){console.error("❌ Error calling update_user_profile RPC:",$);const{error:M}=await ie.from("users").update(B).eq("_id",s.id);if(M){console.error("❌ Error updating user:",M),m.error(`Lỗi cập nhật người dùng: ${M.message}`);return}}else if(y&&!y.success){console.error("❌ RPC returned error:",y.error),m.error(`Lỗi cập nhật: ${y.error}`);return}R=s._id}else return;const{error:S}=await ie.from("user_roles").delete().eq("user_id",R);if(S){console.error("❌ Error deleting old roles:",S),m.error(`Lỗi xóa vai trò cũ: ${S.message}`);return}const ee=V.map(y=>({user_id:R,role_id:y})),{error:ne}=await ie.from("user_roles").insert(ee);if(ne){console.error("❌ Error inserting new roles:",ne),m.error(`Lỗi gán vai trò: ${ne.message}`);return}const{error:A}=await ie.from("department_users").delete().eq("user_id",R);if(A){console.error("❌ Error deleting old department_users:",A),m.error(`Lỗi xóa phòng ban cũ: ${A.message}`);return}if(Q){const{error:y}=await ie.from("department_users").insert({user_id:R,department_id:Q});if(y){console.error("❌ Error inserting new department_users:",y),m.error(`Lỗi gán phòng ban: ${y.message}`);return}}m.success(n==="add"?"Đã tạo người dùng thành công":"Đã cập nhật người dùng thành công"),T(),c()}catch(B){console.error("❌ Error in handleSubmit:",B),m.error("Lỗi lưu dữ liệu")}finally{f(!1)}},U=n==="view";return e.jsxDEV("div",{className:i.modalOverlay,onClick:c,children:e.jsxDEV("div",{className:i.modal,onClick:w=>w.stopPropagation(),children:[e.jsxDEV("div",{className:i.modalHeader,children:[e.jsxDEV(Re,{size:20,style:{color:"var(--primary, #005cb6)",flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:617,columnNumber:11},void 0),e.jsxDEV("h3",{children:[n==="add"&&"Thêm người dùng mới",n==="edit"&&"Chỉnh sửa người dùng",n==="view"&&"Chi tiết người dùng"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:618,columnNumber:11},void 0),e.jsxDEV("button",{className:i.closeBtn,onClick:c,type:"button",children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:624,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:623,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:616,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:F,children:[e.jsxDEV("div",{className:i.modalBody,children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Email ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:634,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:633,columnNumber:15},void 0),e.jsxDEV("div",{style:{position:"relative"},children:[e.jsxDEV(Mi,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground)",pointerEvents:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:637,columnNumber:17},void 0),e.jsxDEV("input",{type:"email",className:i.input,style:{paddingLeft:"40px"},value:t.email,onChange:w=>p({...t,email:w.target.value}),placeholder:"user@example.com",disabled:U||n==="edit",required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:648,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:636,columnNumber:15},void 0),n==="edit"&&e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px"},children:"Email không thể thay đổi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:660,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:632,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Họ tên ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:669,columnNumber:24},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:668,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.full_name,onChange:w=>p({...t,full_name:w.target.value}),placeholder:"Nguyễn Văn A",disabled:U,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:671,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:667,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Số điện thoại ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:684,columnNumber:36},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:684,columnNumber:15},void 0),e.jsxDEV("div",{style:{position:"relative"},children:[e.jsxDEV(jn,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground)",pointerEvents:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:686,columnNumber:17},void 0),e.jsxDEV("input",{type:"tel",className:i.input,style:{paddingLeft:"40px"},value:t.phone,onChange:w=>p({...t,phone:w.target.value}),placeholder:"0912345678",disabled:U,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:697,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:685,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:683,columnNumber:13},void 0),n==="add"&&e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Mật khẩu ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:714,columnNumber:28},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:713,columnNumber:17},void 0),e.jsxDEV("div",{style:{position:"relative"},children:[e.jsxDEV(Ti,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground)",pointerEvents:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:717,columnNumber:19},void 0),e.jsxDEV("input",{type:"password",className:i.input,style:{paddingLeft:"40px"},value:t.password,onChange:w=>p({...t,password:w.target.value}),placeholder:"Nhập mật khẩu",required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:728,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:716,columnNumber:17},void 0),e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px"},children:"Tối thiểu 8 ký tự"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:738,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:712,columnNumber:15},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Trạng thái ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:747,columnNumber:28},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:746,columnNumber:15},void 0),U?e.jsxDEV("input",{type:"text",className:i.input,value:t.status===1?"Hoạt động":"Đã khóa",disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:750,columnNumber:17},void 0):e.jsxDEV("select",{className:i.select,value:t.status,onChange:w=>p({...t,status:parseInt(w.target.value)}),required:!0,children:[e.jsxDEV("option",{value:"1",children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:768,columnNumber:19},void 0),e.jsxDEV("option",{value:"0",children:"Đã khóa"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:769,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:757,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:745,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Vai trò ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:777,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:776,columnNumber:15},void 0),U?e.jsxDEV("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:V.length>0?V.map(w=>{const Z=r.find(B=>B.id===w);return e.jsxDEV("span",{className:i.badge,children:[e.jsxDEV(Ze,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:786,columnNumber:27},void 0),(Z==null?void 0:Z.name)||w]},w,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:785,columnNumber:25},void 0)}):e.jsxDEV("span",{style:{color:"var(--muted-foreground)"},children:"Chưa gán vai trò"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:792,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:780,columnNumber:17},void 0):e.jsxDEV("div",{style:{border:"1px solid var(--border)",borderRadius:"var(--radius-md, 8px)",padding:"12px",maxHeight:"200px",overflowY:"auto",background:"var(--card)"},children:r.length===0?e.jsxDEV("p",{style:{margin:0,color:"var(--muted-foreground)",fontSize:"14px"},children:"Không có vai trò nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:809,columnNumber:21},void 0):r.map(w=>e.jsxDEV("label",{style:{display:"flex",alignItems:"flex-start",padding:"10px 8px",cursor:"pointer",borderRadius:"var(--radius-sm, 4px)",transition:"background-color 0.2s",gap:"12px"},onMouseEnter:Z=>Z.currentTarget.style.backgroundColor="var(--muted)",onMouseLeave:Z=>Z.currentTarget.style.backgroundColor="transparent",children:[e.jsxDEV("input",{type:"checkbox",checked:V.includes(w.id),onChange:()=>I(w.id),style:{width:"18px",height:"18px",cursor:"pointer",marginTop:"2px",flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:832,columnNumber:25},void 0),e.jsxDEV("div",{style:{flex:1},children:[e.jsxDEV("div",{style:{fontFamily:"Inter, sans-serif",fontWeight:500,fontSize:"14px",color:"var(--foreground)",marginBottom:"2px"},children:[e.jsxDEV(Ze,{size:14,style:{display:"inline",marginRight:"6px",color:"var(--primary)",verticalAlign:"middle"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:854,columnNumber:29},void 0),w.name]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:845,columnNumber:27},void 0),w.description&&e.jsxDEV("div",{style:{fontSize:"12px",color:"var(--muted-foreground)",lineHeight:1.4},children:w.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:866,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:844,columnNumber:25},void 0)]},w._id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:814,columnNumber:23},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:798,columnNumber:17},void 0),e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px"},children:"Chọn 1 hoặc nhiều vai trò cho người dùng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:882,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:775,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Phòng ban ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:890,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:889,columnNumber:15},void 0),U?e.jsxDEV("input",{type:"text",className:i.input,value:((O=s==null?void 0:s.department)==null?void 0:O.name)||"Chưa gán phòng ban",disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:893,columnNumber:17},void 0):e.jsxDEV("select",{className:i.select,value:Q||"",onChange:w=>z(w.target.value||null),required:!0,children:[e.jsxDEV("option",{value:"",children:"-- Chọn phòng ban --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:906,columnNumber:19},void 0),Cl(u).map(w=>e.jsxDEV("option",{value:w._id,children:w.label},w._id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:908,columnNumber:21},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:900,columnNumber:17},void 0),e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px"},children:"Chọn 1 phòng ban cho người dùng (bắt buộc để tạo tên đăng nhập)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:914,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:888,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Tên đăng nhập ",n!=="view"&&e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:922,columnNumber:51},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:921,columnNumber:15},void 0),e.jsxDEV("div",{style:{position:"relative"},children:[e.jsxDEV(Re,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground)",pointerEvents:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:925,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",className:i.input,style:{paddingLeft:"40px",backgroundColor:U?"var(--muted)":"var(--card)",color:D?"var(--foreground)":"var(--muted-foreground)",fontFamily:"Inter, monospace",fontWeight:D?600:400},value:D,placeholder:t.full_name.trim()?Q?"QT01_PHUONGDD":"Chọn phòng ban trước...":"Nhập họ tên trước...",disabled:!0,readOnly:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:936,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:924,columnNumber:15},void 0),e.jsxDEV("small",{style:{color:D?"var(--primary)":"var(--muted-foreground)",fontSize:"12px",fontFamily:"Inter, sans-serif"},children:D?"✅ Tên đăng nhập được tạo tự động từ Phòng ban + Họ tên":"⚠️ Vui lòng nhập Họ tên và chọn Phòng ban để tạo tên đăng nhập"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:958,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:920,columnNumber:13},void 0),U&&s&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Ngày tạo"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:975,columnNumber:19},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:new Date(s.created_at).toLocaleString("vi-VN"),disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:976,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:974,columnNumber:17},void 0),s.last_login&&e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:"Đăng nhập cuối"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:985,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:new Date(s.last_login).toLocaleString("vi-VN"),disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:986,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:984,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:973,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:630,columnNumber:11},void 0),e.jsxDEV("div",{className:i.modalFooter,children:[e.jsxDEV("button",{type:"button",className:i.btnSecondary,onClick:c,children:U?"Đóng":"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:1e3,columnNumber:13},void 0),!U&&e.jsxDEV("button",{type:"submit",className:i.btnPrimary,disabled:x,children:[e.jsxDEV(oi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:1005,columnNumber:17},void 0),x?"Đang lưu...":"Lưu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:1004,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:999,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:629,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:614,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/UserModal.tsx",lineNumber:613,columnNumber:5},void 0)},Pl="_container_auskq_1",Bl="_alert_auskq_15",zl="_header_auskq_31",Fl="_icon_auskq_45",$l="_title_auskq_59",Ul="_content_auskq_75",ql="_description_auskq_87",Gl="_steps_auskq_123",Ol="_stepsTitle_auskq_137",Wl="_stepsList_auskq_159",Jl="_link_auskq_199",Xl="_copyButton_auskq_229",Kl="_retryButton_auskq_281",Zl="_details_auskq_321",Yl="_detailsSummary_auskq_335",ea="_code_auskq_361",ia="_moreHelp_auskq_395",je={container:Pl,alert:Bl,header:zl,icon:Fl,title:$l,content:Ul,description:ql,steps:Gl,stepsTitle:Ol,stepsList:Wl,link:Jl,copyButton:Xl,retryButton:Kl,details:Zl,detailsSummary:Yl,code:ea,moreHelp:ia},In=({error:n,onRetry:s,onClose:r})=>{var V;const[u,c]=Qi.useState(!1),T=(n==null?void 0:n.code)==="PGRST200"||((V=n==null?void 0:n.message)==null?void 0:V.toLowerCase().includes("user_roles"));if(!n||!T)return null;const t=`-- Quick Fix: Create user_roles table
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

CREATE TABLE IF NOT EXISTS public.user_roles (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES public.users(id) ON DELETE CASCADE,
  role_id UUID NOT NULL REFERENCES public.roles(id) ON DELETE CASCADE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(user_id, role_id)
);

CREATE INDEX IF NOT EXISTS idx_user_roles_user_id ON public.user_roles(user_id);
CREATE INDEX IF NOT EXISTS idx_user_roles_role_id ON public.user_roles(role_id);

ALTER TABLE public.user_roles ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Allow authenticated users to manage user_roles" 
  ON public.user_roles FOR ALL USING (auth.role() = 'authenticated');`,p=()=>{navigator.clipboard.writeText(t),c(!0),setTimeout(()=>c(!1),2e3)};return e.jsxDEV("div",{className:je.container,children:e.jsxDEV("div",{className:je.alert,children:[e.jsxDEV("div",{className:je.header,children:[e.jsxDEV(ve,{className:je.icon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:57,columnNumber:11},void 0),e.jsxDEV("h3",{className:je.title,children:"Thiếu Bảng Database: user_roles"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:58,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:56,columnNumber:9},void 0),e.jsxDEV("div",{className:je.content,children:[e.jsxDEV("p",{className:je.description,children:["Bảng ",e.jsxDEV("code",{children:"user_roles"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:63,columnNumber:18},void 0)," chưa được tạo trong database. Bảng này cần thiết để ánh xạ người dùng với vai trò."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:62,columnNumber:11},void 0),e.jsxDEV("div",{className:je.steps,children:[e.jsxDEV("h4",{className:je.stepsTitle,children:[e.jsxDEV(ni,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:69,columnNumber:15},void 0),"Cách fix (2 phút):"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:68,columnNumber:13},void 0),e.jsxDEV("ol",{className:je.stepsList,children:[e.jsxDEV("li",{children:["Mở"," ",e.jsxDEV("a",{href:"https://app.supabase.com",target:"_blank",rel:"noopener noreferrer",className:je.link,children:["Supabase Dashboard",e.jsxDEV(Kn,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:83,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:76,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:74,columnNumber:15},void 0),e.jsxDEV("li",{children:["Chọn project của bạn → ",e.jsxDEV("strong",{children:"SQL Editor"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:86,columnNumber:42},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:86,columnNumber:15},void 0),e.jsxDEV("li",{children:["Click nút dưới đây để copy SQL script:",e.jsxDEV("button",{onClick:p,className:je.copyButton,type:"button",children:u?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(be,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:96,columnNumber:23},void 0),"Đã copy!"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:95,columnNumber:21},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ii,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:101,columnNumber:23},void 0),"Copy SQL Script"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:100,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:89,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:87,columnNumber:15},void 0),e.jsxDEV("li",{children:["Paste vào SQL Editor và click ",e.jsxDEV("strong",{children:"RUN"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:107,columnNumber:49},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:107,columnNumber:15},void 0),e.jsxDEV("li",{children:["Quay lại đây và click"," ",s&&e.jsxDEV("button",{onClick:s,className:je.retryButton,type:"button",children:"Thử lại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:111,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:108,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:73,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:67,columnNumber:11},void 0),e.jsxDEV("details",{className:je.details,children:[e.jsxDEV("summary",{className:je.detailsSummary,children:"Xem SQL Script (tùy chọn)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:124,columnNumber:13},void 0),e.jsxDEV("pre",{className:je.code,children:e.jsxDEV("code",{children:t},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:128,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:127,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:123,columnNumber:11},void 0),e.jsxDEV("div",{className:je.moreHelp,children:e.jsxDEV("p",{children:["Cần hướng dẫn chi tiết hơn? Xem file ",e.jsxDEV("code",{children:"/FIX_DATABASE_ERROR.md"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:135,columnNumber:24},void 0)," hoặc"," ",e.jsxDEV("code",{children:"/database/quick-fix-user-roles.sql"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:136,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:133,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:132,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:61,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:55,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DatabaseErrorAlert.tsx",lineNumber:54,columnNumber:5},void 0)},na="_container_1jt2h_11",sa="_trigger_1jt2h_27",ra="_open_1jt2h_95",la="_triggerIcon_1jt2h_105",aa="_triggerText_1jt2h_115",ta="_triggerArrow_1jt2h_129",oa="_dropdown_1jt2h_155",da="_treeNode_1jt2h_247",ca="_selected_1jt2h_273",ma="_nodeName_1jt2h_283",ua="_expandButton_1jt2h_295",pa="_expandPlaceholder_1jt2h_335",fa="_nodeContent_1jt2h_349",Na="_nodeDot_1jt2h_367",ba="_nodeCount_1jt2h_403",Ta="_nodeChildren_1jt2h_417",He={container:na,trigger:sa,open:ra,triggerIcon:la,triggerText:aa,triggerArrow:ta,dropdown:oa,treeNode:da,selected:ca,nodeName:ma,expandButton:ua,expandPlaceholder:pa,nodeContent:fa,nodeDot:Na,nodeCount:ba,nodeChildren:Ta},Va=({departments:n,value:s,onChange:r,userCounts:u=new Map,totalUsers:c=0,disabled:T=!1})=>{const[t,p]=d.useState(!1),[V,L]=d.useState(new Set),Q=d.useRef(null),x=(()=>{const z=new Map,F=[];n.forEach(O=>{z.set(O.id,{...O,children:[]})}),n.forEach(O=>{const w=z.get(O.id);if(O.parent_id){const Z=z.get(O.parent_id);Z?Z.children.push(w):F.push(w)}else F.push(w)});const U=O=>{O.children.sort((w,Z)=>w.name.localeCompare(Z.name)),O.children.forEach(U)};return F.forEach(U),F})();d.useEffect(()=>{const z=F=>{Q.current&&!Q.current.contains(F.target)&&p(!1)};return t&&document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[t]);const f=(z,F)=>{F.stopPropagation(),L(U=>{const O=new Set(U);return O.has(z)?O.delete(z):O.add(z),O})},D=z=>{r(z),p(!1)},k=()=>{if(s==="all")return`Tất cả phòng ban (${c})`;const z=n.find(F=>F.id===s);if(z){const F=u.get(z.id)||0;return`${z.name} (${F})`}return"Chọn phòng ban"},I=(z,F=0)=>{const U=z.children.length>0,O=V.has(z.id),w=s===z.id,Z=u.get(z.id)||0;return e.jsxDEV("div",{children:[e.jsxDEV("div",{className:`${He.treeNode} ${w?He.selected:""}`,style:{paddingLeft:`${F*24+12}px`},children:[U?e.jsxDEV("button",{type:"button",className:He.expandButton,onClick:B=>f(z.id,B),"aria-label":O?"Thu gọn":"Mở rộng",children:O?e.jsxDEV(Me,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:154,columnNumber:17},void 0):e.jsxDEV(Ce,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:156,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:147,columnNumber:13},void 0):e.jsxDEV("span",{className:He.expandPlaceholder},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:160,columnNumber:13},void 0),e.jsxDEV("div",{className:He.nodeContent,onClick:()=>D(z.id),children:[e.jsxDEV("span",{className:He.nodeDot,children:"●"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:165,columnNumber:13},void 0),e.jsxDEV("span",{className:He.nodeName,children:z.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:166,columnNumber:13},void 0),e.jsxDEV("span",{className:He.nodeCount,children:["(",Z,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:167,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:164,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:141,columnNumber:9},void 0),U&&O&&e.jsxDEV("div",{className:He.nodeChildren,children:z.children.map(B=>I(B,F+1))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:173,columnNumber:11},void 0)]},z.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:140,columnNumber:7},void 0)};return e.jsxDEV("div",{className:He.container,ref:Q,children:[e.jsxDEV("button",{type:"button",className:`${He.trigger} ${t?He.open:""}`,onClick:()=>!T&&p(!t),disabled:T,children:[e.jsxDEV(Be,{size:16,className:He.triggerIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:190,columnNumber:9},void 0),e.jsxDEV("span",{className:He.triggerText,children:k()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:191,columnNumber:9},void 0),e.jsxDEV(Me,{size:16,className:He.triggerArrow},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:192,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:184,columnNumber:7},void 0),t&&e.jsxDEV("div",{className:He.dropdown,children:[e.jsxDEV("div",{className:`${He.treeNode} ${s==="all"?He.selected:""}`,style:{paddingLeft:"12px"},onClick:()=>D("all"),children:[e.jsxDEV("span",{className:He.expandPlaceholder},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:204,columnNumber:13},void 0),e.jsxDEV("div",{className:He.nodeContent,children:[e.jsxDEV("span",{className:He.nodeDot,children:"●"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:206,columnNumber:15},void 0),e.jsxDEV("span",{className:He.nodeName,children:"Tất cả phòng ban"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:207,columnNumber:15},void 0),e.jsxDEV("span",{className:He.nodeCount,children:["(",c,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:208,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:205,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:199,columnNumber:11},void 0),x.map(z=>I(z,0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:197,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/DepartmentTreeSelect.tsx",lineNumber:182,columnNumber:5},void 0)},Ri="Couppa@123",va=()=>{const[n,s]=d.useState(!0),[r,u]=d.useState([]),[c,T]=d.useState([]),[t,p]=d.useState([]),[V,L]=d.useState(""),[Q,E]=d.useState("all"),[x,f]=d.useState("all"),[D,k]=d.useState("all"),[I,z]=d.useState(!1),[F,U]=d.useState(!1),[O,w]=d.useState("add"),[Z,B]=d.useState(null),[R,S]=d.useState(!1),[ee,ne]=d.useState(null),[A,y]=d.useState(null),$=20;d.useEffect(()=>{M()},[]);const M=async()=>{try{s(!0),y(null);const{data:q,error:ue}=await ie.from("roles").select("*, id:_id").order("name",{ascending:!0});ue?(console.error("❌ Error fetching roles:",ue),m.error(`Lỗi tải vai trò: ${ue.message}`)):T(q.map(fe=>({...fe,_id:fe.id}))||[]);const{data:W,error:te}=await ie.from("departments").select("*, id:_id").is("deleted_at",null).order("path",{ascending:!0});te?(console.error("❌ Error fetching departments:",te),m.error(`Lỗi tải phòng ban: ${te.message}`)):p(W.map(fe=>({...fe,_id:fe.id}))||[]);const{data:pe,error:Te}=await ie.from("users").select(`
          *,
          user_roles (
            roles (
              id:_id,
              code,
              name
            )
          ),
          department_users (
            departments (
              id:_id,
              name,
              code,
              level
            )
          )
        `).order("created_at",{ascending:!1});if(Te)console.error("❌ Error fetching users:",Te),y(Te);else{const fe=pe==null?void 0:pe.map(Ne=>{if(Ne.department_users&&Ne.department_users.length>0){const xe=Ne.department_users[0].departments;return{...Ne,_id:Ne.id,department:{_id:xe.id,name:xe.name,code:xe.code,level:xe.level}}}return{...Ne,_id:Ne.id}});u(fe||[])}}catch(q){console.error("❌ Error in fetchData:",q),m.error("Lỗi kết nối Supabase")}},v=r.filter(q=>{var ue,W,te,pe,Te;if(D!=="all"&&q.status!==parseInt(D)||Q!=="all"&&!((ue=q.user_roles)==null?void 0:ue.some(Ne=>Ne.roles._id===Q))||x!=="all"&&((W=q.department)==null?void 0:W.id)!==x)return!1;if(V){const fe=V.toLowerCase();if(!(((te=q.full_name)==null?void 0:te.toLowerCase().includes(fe))||((pe=q.email)==null?void 0:pe.toLowerCase().includes(fe))||((Te=q.phone)==null?void 0:Te.toLowerCase().includes(fe))))return!1}return!0}),{currentPage:N,totalPages:g,currentItems:o,setCurrentPage:a}=Je(v||[],$),h=async q=>{const ue=q.status===1?0:1;try{const{error:W}=await ie.from("users").update({status:ue}).eq("_id",q.id);W?(console.error("❌ Error updating status:",W),m.error(`Lỗi cập nhật trạng thái: ${W.message}`)):(m.success(ue===1?"Đã mở khóa tài khoản":"Đã khóa tài khoản"),M())}catch(W){console.error("❌ Error in handleToggleStatus:",W),m.error("Lỗi cập nhật trạng thái")}},b=async q=>{ne(q),S(!0)},l=async()=>{if(ee)try{const q=sn.genSaltSync(10),ue=sn.hashSync(Ri,q),{data:W,error:te}=await ie.from("users").select("*, id:_id").eq("_id",ee.id).single();te&&console.error("❌ Error fetching user for debug:",te);const{error:pe}=await ie.from("users").update({password:ue,updated_at:new Date().toISOString()}).eq("_id",ee.id).select();pe?(console.error("❌ Error resetting password:",pe),console.error("❌ Error details:",JSON.stringify(pe,null,2)),m.error(`Lỗi reset mật khẩu: ${pe.message}`)):m.success(`Đã reset mật khẩu về "${Ri}" cho ${ee.full_name}`)}catch(q){console.error("❌ Error in confirmResetPassword:",q),m.error("Lỗi reset mật khẩu")}finally{S(!1),ne(null)}},j=()=>{w("add"),B(null),U(!0)},_=q=>{w("edit"),B(q),U(!0)},X=q=>{w("view"),B(q),U(!0)},H=()=>{try{const q=v.map((fe,Ne)=>{var xe,Ue;return{STT:Ne+1,Email:fe.email,"Họ tên":fe.full_name,"Điện thoại":fe.phone||"","Vai trò":((xe=fe.user_roles)==null?void 0:xe.map(Ye=>Ye.roles.name).join(", "))||"","Trạng thái":fe.status===1?"Hoạt động":"Đã khóa","Ngày tạo":new Date(fe.created_at).toLocaleString("vi-VN"),"Đăng nhập cuối":fe.last_login?new Date(fe.last_login).toLocaleString("vi-VN"):"","Bộ phận":((Ue=fe.department)==null?void 0:Ue.name)||""}}),ue=ce.book_new(),W=ce.json_to_sheet(q),te=[{wch:5},{wch:30},{wch:25},{wch:15},{wch:20},{wch:12},{wch:20},{wch:20},{wch:20}];W["!cols"]=te,ce.book_append_sheet(ue,W,"Người dùng");const Te=`MAPPA_Nguoi_Dung_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`;Fe(ue,Te),m.success(`Đã xuất ${v.length} người dùng ra Excel`)}catch(q){console.error("❌ Error exporting to Excel:",q),m.error("Lỗi xuất Excel")}},K=q=>{switch(q){case 1:return e.jsxDEV("span",{className:i.statusActive,children:[e.jsxDEV(ci,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:405,columnNumber:13},void 0)," Hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:404,columnNumber:11},void 0);case 0:return e.jsxDEV("span",{className:i.statusLocked,children:[e.jsxDEV(Ti,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:411,columnNumber:13},void 0)," Đã khóa"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:410,columnNumber:11},void 0);default:return e.jsxDEV("span",{children:q},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:415,columnNumber:16},void 0)}};return n?e.jsxDEV("div",{className:i.loadingContainer,children:[e.jsxDEV(he,{className:i.spinner,size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:422,columnNumber:9},void 0),e.jsxDEV("p",{children:"Đang tải dữ liệu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:423,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:421,columnNumber:7},void 0):e.jsxDEV("div",{className:i.tabContent,children:[e.jsxDEV("div",{className:i.headerRow,children:[e.jsxDEV("div",{className:i.filterGroup,children:[e.jsxDEV("div",{className:i.searchBox,children:[e.jsxDEV(_e,{size:18,className:i.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:434,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm theo tên, email, SĐT...",value:V,onChange:q=>L(q.target.value),className:i.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:435,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:433,columnNumber:11},void 0),e.jsxDEV("button",{className:I?i.btnPrimary:i.btnSecondary,onClick:()=>z(!I),title:I?"Ẩn bộ lọc":"Hiện bộ lọc",children:[e.jsxDEV(xi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:449,columnNumber:13},void 0),"Bộ lọc"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:444,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:432,columnNumber:9},void 0),e.jsxDEV("div",{className:i.actionGroup,children:[e.jsxDEV("button",{className:i.btnSecondary,onClick:M,children:[e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:456,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:455,columnNumber:11},void 0),e.jsxDEV("button",{className:i.btnPrimary,onClick:j,children:[e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:460,columnNumber:13},void 0),"Thêm người dùng"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:459,columnNumber:11},void 0),e.jsxDEV("button",{className:i.btnPrimary,onClick:H,children:[e.jsxDEV(Pe,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:464,columnNumber:13},void 0),"Xuất Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:463,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:454,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:431,columnNumber:7},void 0),I&&e.jsxDEV("div",{className:i.filterPanel,children:[e.jsxDEV("div",{className:i.filterRow,children:[e.jsxDEV("div",{className:i.filterItem,children:[e.jsxDEV("label",{children:"Vai trò"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:476,columnNumber:15},void 0),e.jsxDEV("select",{value:Q,onChange:q=>E(q.target.value),className:i.select,children:[e.jsxDEV("option",{value:"all",children:["Tất cả vai trò (",r.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:482,columnNumber:17},void 0),c.map(q=>{const ue=r.filter(W=>{var te;return(te=W.user_roles)==null?void 0:te.some(pe=>pe.roles._id===q._id)}).length;return e.jsxDEV("option",{value:q.id,children:[q.name," (",ue,")"]},q.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:488,columnNumber:21},void 0)})]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:477,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:475,columnNumber:13},void 0),e.jsxDEV("div",{className:i.filterItem,children:[e.jsxDEV("label",{children:"Bộ phận"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:498,columnNumber:15},void 0),e.jsxDEV(Va,{departments:t,value:x,onChange:q=>f(q),userCounts:(()=>{const q=new Map;return t.forEach(ue=>{const W=r.filter(te=>{var pe;return((pe=te.department)==null?void 0:pe.id)===ue.id}).length;q.set(ue.id,W)}),q})(),totalUsers:r.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:499,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:497,columnNumber:13},void 0),e.jsxDEV("div",{className:i.filterItem,children:[e.jsxDEV("label",{children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:517,columnNumber:15},void 0),e.jsxDEV("select",{value:D,onChange:q=>k(q.target.value),className:i.select,children:[e.jsxDEV("option",{value:"all",children:["Tất cả trạng thái (",r.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:523,columnNumber:17},void 0),e.jsxDEV("option",{value:"1",children:["Hoạt động (",r.filter(q=>q.status===1).length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:524,columnNumber:17},void 0),e.jsxDEV("option",{value:"0",children:["Đã khóa (",r.filter(q=>q.status===0).length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:527,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:518,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:516,columnNumber:13},void 0),(Q!=="all"||x!=="all"||D!=="all"||V)&&e.jsxDEV("div",{className:i.filterItem,children:[e.jsxDEV("label",{children:" "},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:536,columnNumber:17},void 0),e.jsxDEV("button",{className:i.btnSecondary,onClick:()=>{E("all"),f("all"),k("all"),L("")},children:"Xóa bộ lọc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:537,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:535,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:473,columnNumber:11},void 0),e.jsxDEV("div",{style:{marginTop:"8px",fontSize:"14px",color:"var(--text-secondary, #6c757d)"},children:Q!=="all"||x!=="all"||D!=="all"?e.jsxDEV("div",{children:["🔍 Kết quả lọc: ",e.jsxDEV("strong",{children:v.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:556,columnNumber:33},void 0)," người dùng"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:555,columnNumber:15},void 0):e.jsxDEV("div",{children:["📊 Tổng: ",e.jsxDEV("strong",{children:r.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:560,columnNumber:26},void 0)," người dùng"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:559,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:553,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:472,columnNumber:9},void 0),e.jsxDEV("div",{className:i.tableWrapper,children:e.jsxDEV("table",{className:i.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"50px"},children:"STT"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:572,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"auto",minWidth:"250px"},children:"Thông tin người dùng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:573,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"200px"},children:"Vai trò"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:574,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"180px"},children:"Bộ phận"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:575,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"150px"},children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:576,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"180px"},children:"Đăng nhập cuối"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:577,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"180px",textAlign:"center"},children:"Thao tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:578,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:571,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:570,columnNumber:11},void 0),e.jsxDEV("tbody",{children:o.length===0?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:7,className:i.emptyState,children:[e.jsxDEV(ve,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:585,columnNumber:19},void 0),e.jsxDEV("p",{children:"Không tìm thấy người dùng nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:586,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:584,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:583,columnNumber:15},void 0):o.map((q,ue)=>{var W;return e.jsxDEV("tr",{children:[e.jsxDEV("td",{style:{textAlign:"center"},children:(N-1)*$+ue+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:592,columnNumber:19},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:i.cellMain,children:e.jsxDEV("div",{className:i.userCell,children:[e.jsxDEV("div",{className:i.avatar,children:((W=q.full_name)==null?void 0:W.charAt(0).toUpperCase())||"U"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:598,columnNumber:25},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:i.cellTitle,children:q.full_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:602,columnNumber:27},void 0),e.jsxDEV("div",{className:i.cellSubtext,children:[e.jsxDEV(Mi,{size:12,style:{marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:604,columnNumber:29},void 0),q.email]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:603,columnNumber:27},void 0),q.phone&&e.jsxDEV("div",{className:i.cellSubtext,children:[e.jsxDEV(jn,{size:12,style:{marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:609,columnNumber:31},void 0),q.phone]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:608,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:601,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:597,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:596,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:595,columnNumber:19},void 0),e.jsxDEV("td",{children:q.user_roles&&q.user_roles.length>0?e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:q.user_roles.map(te=>e.jsxDEV("span",{className:i.badge,children:[e.jsxDEV(Ze,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:622,columnNumber:29},void 0),te.roles.name]},te.roles._id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:621,columnNumber:27},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:619,columnNumber:23},void 0):e.jsxDEV("span",{style:{color:"var(--text-secondary)"},children:"-"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:628,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:617,columnNumber:19},void 0),e.jsxDEV("td",{children:q.department?e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsxDEV("div",{children:e.jsxDEV("span",{style:{fontWeight:500,fontSize:"13px"},children:q.department.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:635,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:634,columnNumber:25},void 0),e.jsxDEV("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:[q.department.code," • Cấp ",q.department.level]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:639,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:633,columnNumber:23},void 0):e.jsxDEV("span",{style:{color:"var(--text-secondary)"},children:"Chưa phân bộ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:644,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:631,columnNumber:19},void 0),e.jsxDEV("td",{children:K(q.status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:647,columnNumber:19},void 0),e.jsxDEV("td",{children:q.last_login?e.jsxDEV("span",{style:{fontSize:"13px"},children:new Date(q.last_login).toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:650,columnNumber:23},void 0):e.jsxDEV("span",{style:{color:"var(--text-secondary)"},children:"Chưa đăng nhập"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:660,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:648,columnNumber:19},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:i.actionButtons,children:[e.jsxDEV("button",{className:i.btnIcon,onClick:()=>X(q),title:"Xem chi tiết",children:e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:670,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:665,columnNumber:23},void 0),e.jsxDEV("button",{className:i.btnIcon,onClick:()=>_(q),title:"Chỉnh sửa",children:e.jsxDEV(Ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:677,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:672,columnNumber:23},void 0),e.jsxDEV("button",{className:i.btnIcon,onClick:()=>h(q),title:q.status===1?"Khóa tài khoản":"Mở khóa",children:q.status===1?e.jsxDEV(Ti,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:685,columnNumber:27},void 0):e.jsxDEV(Zn,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:687,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:679,columnNumber:23},void 0),e.jsxDEV("button",{className:i.btnIcon,onClick:()=>b(q),title:"Reset mật khẩu",children:e.jsxDEV(yn,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:695,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:690,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:664,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:663,columnNumber:19},void 0)]},q.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:591,columnNumber:17},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:581,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:569,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:568,columnNumber:7},void 0),v.length>0&&g>1&&e.jsxDEV("div",{className:i.tableFooter,children:[e.jsxDEV("div",{className:i.footerInfo,children:["Hiển thị ",e.jsxDEV("strong",{children:(N-1)*$+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:710,columnNumber:22},void 0)," đến"," ",e.jsxDEV("strong",{children:Math.min(N*$,v.length)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:711,columnNumber:13},void 0)," trong tổng số"," ",e.jsxDEV("strong",{children:v.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:712,columnNumber:13},void 0)," người dùng"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:709,columnNumber:11},void 0),e.jsxDEV($e,{currentPage:N,totalPages:g,totalItems:v.length,itemsPerPage:$,onPageChange:a},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:714,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:708,columnNumber:9},void 0),F&&e.jsxDEV(Rl,{mode:O,user:Z,roles:c,departments:t,onClose:()=>U(!1),onSave:M},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:726,columnNumber:9},void 0),R&&ee&&e.jsxDEV("div",{className:i.confirmDialog,children:e.jsxDEV("div",{className:i.confirmContent,children:[e.jsxDEV(ve,{size:48,className:i.confirmIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:740,columnNumber:13},void 0),e.jsxDEV("p",{className:i.confirmText,children:['Bạn có chắc chắn muốn reset mật khẩu về "',Ri,'" cho người dùng "',ee.full_name,'"?']},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:741,columnNumber:13},void 0),e.jsxDEV("div",{className:i.confirmButtons,children:[e.jsxDEV("button",{className:i.btnSecondary,onClick:()=>S(!1),children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:745,columnNumber:15},void 0),e.jsxDEV("button",{className:i.btnPrimary,onClick:l,children:"Xác nhận"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:751,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:744,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:739,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:738,columnNumber:9},void 0),A&&e.jsxDEV(In,{error:A,onRetry:M,onClose:()=>y(null)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:764,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/UserListTabNew.tsx",lineNumber:429,columnNumber:5},void 0)},xa=({mode:n,role:s,onClose:r,onSave:u})=>{const[c,T]=d.useState({code:(s==null?void 0:s.code)||"",name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",status:(s==null?void 0:s.status)??1}),[t,p]=d.useState(!1),[V,L]=d.useState(!0),[Q,E]=d.useState([]),[x,f]=d.useState([]),[D,k]=d.useState(new Set),[I,z]=d.useState(new Set),F=n==="view";d.useEffect(()=>{U()},[]),d.useEffect(()=>{s&&n!=="add"&&O()},[s,n]);const U=async()=>{try{L(!0);const{data:A,error:y}=await ie.from("modules").select("*, id:_id").eq("status",1).order("order_index",{ascending:!0});y?(console.error("❌ Error fetching modules:",y),m.error(`Lỗi tải modules: ${y.message}`),E([])):E(A||[]);const{data:$,error:M}=await ie.from("permissions").select("*, id:_id").eq("status",1).order("module_id",{ascending:!0}).order("code",{ascending:!0});M?(console.error("❌ Error fetching permissions:",M),m.error(`Lỗi tải permissions: ${M.message}`),f([])):f($||[])}catch(A){console.error("❌ Error in fetchData:",A),m.error("Lỗi kết nối Supabase"),E([]),f([])}finally{L(!1)}},O=async()=>{if(s)try{const{data:A,error:y}=await ie.from("role_permissions").select("permission_id").eq("role_id",s.id);if(y)console.error("❌ Error loading role permissions:",y),m.error(`Lỗi tải quyền của vai trò: ${y.message}`);else{const $=new Set((A==null?void 0:A.map(M=>M.permission_id))||[]);k($)}}catch(A){console.error("❌ Error in loadRolePermissions:",A)}},w=async A=>{if(A.preventDefault(),!c.code||!c.name){m.error("Vui lòng điền đầy đủ thông tin bắt buộc");return}try{if(p(!0),n==="add"){const{data:y,error:$}=await ie.from("roles").insert([{code:c.code,name:c.name,description:c.description,status:c.status,is_system:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if($){console.error("❌ Error creating role:",$),m.error(`Lỗi tạo vai trò: ${$.message}`),p(!1);return}if(D.size>0){const M=Array.from(D).map(N=>({role_id:y.id,permission_id:N,created_at:new Date().toISOString()})),{error:v}=await ie.from("role_permissions").insert(M);if(v){console.error("❌ Error assigning permissions:",v),m.error(`Lỗi gán quyền: ${v.message}`),p(!1);return}}m.success(`Đã tạo vai trò "${c.name}" với ${D.size} quyền`),u(),r()}else if(n==="edit"&&s){const{error:y}=await ie.from("roles").update({code:c.code,name:c.name,description:c.description,status:c.status,updated_at:new Date().toISOString()}).eq("_id",s.id);if(y){console.error("❌ Error updating role:",y),m.error(`Lỗi cập nhật vai trò: ${y.message}`),p(!1);return}const{error:$}=await ie.from("role_permissions").delete().eq("role_id",s.id);if($){console.error("❌ Error deleting old permissions:",$),m.error(`Lỗi xóa quyền cũ: ${$.message}`),p(!1);return}if(D.size>0){const M=Array.from(D).map(N=>({role_id:s.id,permission_id:N,created_at:new Date().toISOString()})),{error:v}=await ie.from("role_permissions").insert(M);if(v){console.error("❌ Error inserting new permissions:",v),m.error(`Lỗi gán quyền mới: ${v.message}`),p(!1);return}}m.success(`Đã cập nhật vai trò "${c.name}" với ${D.size} quyền`),u(),r()}}catch(y){console.error("❌ Error in handleSubmit:",y),m.error("Lỗi khi lưu vai trò"),p(!1)}finally{(n==="add"||n==="edit")&&p(!1)}},Z=A=>{const y=new Set(I);y.has(A)?y.delete(A):y.add(A),z(y)},B=A=>{if(F)return;const y=new Set(D);y.has(A)?y.delete(A):y.add(A),k(y)},R=A=>{if(F)return;const $=x.filter(N=>String(N.module_id)===String(A)).map(N=>N.id),M=$.every(N=>D.has(N)),v=new Set(D);M?$.forEach(N=>v.delete(N)):$.forEach(N=>v.add(N)),k(v)},S=A=>{const y=x.filter($=>String($.module_id)===String(A));return y.length===0?!1:y.every($=>D.has($.id))},ee=A=>{const y=x.filter(M=>String(M.module_id)===String(A));if(y.length===0)return!1;const $=y.filter(M=>D.has(M.id)).length;return $>0&&$<y.length},ne=Q.map(A=>({module:A,permissions:x.filter(y=>String(y.module_id)===String(A.id))}));return e.jsxDEV("div",{className:i.modalOverlay,onClick:r,children:e.jsxDEV("div",{className:i.modal,onClick:A=>A.stopPropagation(),style:{maxWidth:"700px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxDEV("div",{className:i.modalHeader,children:[e.jsxDEV("h2",{className:i.modalTitle,children:[e.jsxDEV(Ze,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:385,columnNumber:13},void 0),n==="add"?"Thêm vai trò mới":n==="edit"?"Chỉnh sửa vai trò":"Chi tiết vai trò"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:384,columnNumber:11},void 0),e.jsxDEV("button",{className:i.modalClose,onClick:r,children:"×"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:388,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:383,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:w,style:{display:"flex",flexDirection:"column",overflow:"hidden",flex:1},children:[e.jsxDEV("div",{className:i.modalBody,style:{overflowY:"auto",flex:1},children:[e.jsxDEV("div",{style:{marginBottom:"var(--spacing-6, 24px)"},children:[e.jsxDEV("div",{className:i.formRow,children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:[e.jsxDEV("span",{className:i.labelText,children:"Mã vai trò"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:399,columnNumber:21},void 0),e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:400,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:398,columnNumber:19},void 0),e.jsxDEV("input",{type:"text",value:c.code,onChange:A=>T({...c,code:A.target.value.toUpperCase()}),className:i.input,placeholder:"VD: MANAGER",disabled:F,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:402,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:397,columnNumber:17},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:[e.jsxDEV("span",{className:i.labelText,children:"Tên vai trò"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:415,columnNumber:21},void 0),e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:416,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:414,columnNumber:19},void 0),e.jsxDEV("input",{type:"text",value:c.name,onChange:A=>T({...c,name:A.target.value}),className:i.input,placeholder:"VD: Quản lý",disabled:F,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:418,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:413,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:396,columnNumber:15},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:e.jsxDEV("span",{className:i.labelText,children:"Mô tả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:433,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:432,columnNumber:17},void 0),e.jsxDEV("textarea",{value:c.description,onChange:A=>T({...c,description:A.target.value}),className:i.textarea,placeholder:"Mô tả vai trò...",rows:2,disabled:F},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:435,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:431,columnNumber:15},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:e.jsxDEV("span",{className:i.labelText,children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:448,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:447,columnNumber:17},void 0),e.jsxDEV("select",{value:c.status,onChange:A=>T({...c,status:Number(A.target.value)}),className:i.input,disabled:F,children:[e.jsxDEV("option",{value:1,children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:456,columnNumber:19},void 0),e.jsxDEV("option",{value:0,children:"Vô hiệu hóa"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:457,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:450,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:446,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:394,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"var(--spacing-3, 12px)",paddingBottom:"var(--spacing-3, 12px)",borderBottom:"1px solid var(--border, #e5e7eb)"},children:[e.jsxDEV("label",{className:i.label,style:{marginBottom:0},children:e.jsxDEV("span",{className:i.labelText,children:"Chức năng/quyền"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:473,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:472,columnNumber:17},void 0),D.size>0&&e.jsxDEV("span",{style:{fontSize:"13px",fontFamily:"Inter, sans-serif",color:"var(--muted-foreground, #6b7280)"},children:["Đã chọn: ",e.jsxDEV("strong",{children:D.size},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:481,columnNumber:30},void 0)," quyền"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:476,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:464,columnNumber:15},void 0),V?e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--spacing-8, 32px)",gap:"var(--spacing-2, 8px)"},children:[e.jsxDEV(he,{className:i.spinner,size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:494,columnNumber:19},void 0),e.jsxDEV("span",{style:{fontSize:"13px",fontFamily:"Inter, sans-serif",color:"var(--muted-foreground, #6b7280)"},children:"Đang tải..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:495,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:487,columnNumber:17},void 0):Q.length===0?e.jsxDEV("div",{className:i.alertWarning,children:[e.jsxDEV(ve,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:501,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Chưa có modules trong hệ thống!"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:503,columnNumber:21},void 0),e.jsxDEV("p",{children:"Vui lòng tạo ít nhất một module trước."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:504,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:502,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:500,columnNumber:17},void 0):e.jsxDEV("div",{style:{border:"1px solid var(--border, #e5e7eb)",borderRadius:"var(--radius, 6px)",maxHeight:"400px",overflowY:"auto"},children:ne.map(({module:A,permissions:y})=>{const $=I.has(A.id),M=S(A.id),v=ee(A.id);return e.jsxDEV("div",{style:{borderBottom:"1px solid var(--border, #e5e7eb)"},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",padding:"var(--spacing-3, 12px)",gap:"var(--spacing-2, 8px)",background:$?"var(--muted, #f9fafb)":"transparent",cursor:"pointer",userSelect:"none"},onClick:()=>Z(A.id),children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",width:"20px"},children:$?e.jsxDEV(Me,{size:16,style:{color:"var(--muted-foreground, #6b7280)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:539,columnNumber:31},void 0):e.jsxDEV(Ce,{size:16,style:{color:"var(--muted-foreground, #6b7280)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:541,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:537,columnNumber:27},void 0),e.jsxDEV("input",{type:"checkbox",checked:M,ref:N=>{N&&(N.indeterminate=v)},onChange:N=>{N.stopPropagation(),R(A.id)},disabled:F||y.length===0,className:i.checkbox,style:{width:"16px",height:"16px",margin:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:546,columnNumber:27},void 0),e.jsxDEV("span",{style:{flex:1,fontSize:"14px",fontFamily:"Inter, sans-serif",fontWeight:600,color:"var(--foreground, #111827)"},children:A.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:564,columnNumber:27},void 0),e.jsxDEV("span",{style:{fontSize:"12px",fontFamily:"Inter, sans-serif",color:"var(--muted-foreground, #6b7280)",background:"var(--muted, #f3f4f6)",padding:"2px 8px",borderRadius:"calc(var(--radius, 6px) * 0.5)"},children:y.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:575,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:524,columnNumber:25},void 0),$&&y.length>0&&e.jsxDEV("div",{style:{background:"var(--background, #ffffff)",padding:"var(--spacing-2, 8px) var(--spacing-3, 12px)"},children:y.map(N=>e.jsxDEV("label",{style:{display:"flex",alignItems:"center",padding:"var(--spacing-2, 8px)",paddingLeft:"var(--spacing-9, 36px)",gap:"var(--spacing-2, 8px)",cursor:F?"default":"pointer",borderRadius:"calc(var(--radius, 6px) * 0.5)",transition:"background 0.15s ease"},onMouseEnter:g=>{F||(g.currentTarget.style.background="var(--muted, #f9fafb)")},onMouseLeave:g=>{g.currentTarget.style.background="transparent"},children:[e.jsxDEV("input",{type:"checkbox",checked:D.has(N.id),onChange:()=>B(N.id),disabled:F,className:i.checkbox,style:{width:"14px",height:"14px",margin:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:615,columnNumber:33},void 0),e.jsxDEV("span",{style:{flex:1,fontSize:"13px",fontFamily:"Inter, sans-serif",color:"var(--foreground, #111827)"},children:N.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:623,columnNumber:33},void 0),e.jsxDEV("span",{style:{fontSize:"11px",fontFamily:"Inter, sans-serif",color:"var(--muted-foreground, #6b7280)",background:"var(--muted, #f3f4f6)",padding:"2px 6px",borderRadius:"calc(var(--radius, 6px) * 0.5)"},children:N.permission_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:631,columnNumber:33},void 0)]},N.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:594,columnNumber:31},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:589,columnNumber:27},void 0),$&&y.length===0&&e.jsxDEV("div",{style:{padding:"var(--spacing-4, 16px)",paddingLeft:"var(--spacing-9, 36px)",fontSize:"13px",fontFamily:"Inter, sans-serif",color:"var(--muted-foreground, #6b7280)",fontStyle:"italic"},children:"Không có quyền nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:647,columnNumber:27},void 0)]},A.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:520,columnNumber:23},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:508,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:463,columnNumber:13},void 0),n==="view"&&s&&e.jsxDEV("div",{className:i.infoBox,style:{marginTop:"var(--spacing-4, 16px)"},children:[e.jsxDEV(we,{size:16,className:i.infoIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:668,columnNumber:17},void 0),e.jsxDEV("div",{className:i.infoContent,children:[e.jsxDEV("div",{className:i.infoRow,children:[e.jsxDEV("strong",{children:"Tạo lúc:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:671,columnNumber:21},void 0)," ",new Date(s.created_at).toLocaleString("vi-VN")]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:670,columnNumber:19},void 0),e.jsxDEV("div",{className:i.infoRow,children:[e.jsxDEV("strong",{children:"Cập nhật:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:674,columnNumber:21},void 0)," ",new Date(s.updated_at).toLocaleString("vi-VN")]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:673,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:669,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:667,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:392,columnNumber:11},void 0),e.jsxDEV("div",{className:i.modalFooter,children:[e.jsxDEV("button",{type:"button",className:i.btnSecondary,onClick:r,children:F?"Đóng":"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:682,columnNumber:13},void 0),!F&&e.jsxDEV("button",{type:"submit",className:i.btnPrimary,disabled:t||Q.length===0,children:t?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(he,{className:i.spinner,size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:689,columnNumber:21},void 0),"Đang lưu..."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:688,columnNumber:19},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(be,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:694,columnNumber:21},void 0),n==="add"?"Tạo vai trò":"Cập nhật"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:693,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:686,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:681,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:391,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:378,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/RoleModal.tsx",lineNumber:377,columnNumber:5},void 0)},ga=()=>{const[n,s]=d.useState(!0),[r,u]=d.useState([]),[c,T]=d.useState(""),[t,p]=d.useState("all"),[V,L]=d.useState("all"),[Q,E]=d.useState(!1),[x,f]=d.useState(!1),[D,k]=d.useState("add"),[I,z]=d.useState(null),F=20;d.useEffect(()=>{U()},[]);const U=async()=>{try{s(!0);const{data:v,error:N}=await ie.from("roles").select("*, id:_id").order("created_at",{ascending:!1});if(N)console.error("❌ Error fetching roles:",N),m.error(`Lỗi tải vai trò: ${N.message}`),u([]);else{const g=await Promise.all((v||[]).map(async o=>{const{count:a,error:h}=await ie.from("user_roles").select("*, id:_id",{count:"exact",head:!0}).eq("role_id",o.id);return{...o,user_count:h?0:a||0}}));u(g)}}catch(v){console.error("❌ Error in fetchData:",v),m.error("Lỗi kết nối Supabase"),u([])}finally{s(!1)}},O=r.filter(v=>{var N,g,o;if(c){const a=c.toLowerCase();if(!(((N=v.name)==null?void 0:N.toLowerCase().includes(a))||((g=v.code)==null?void 0:g.toLowerCase().includes(a))||((o=v.description)==null?void 0:o.toLowerCase().includes(a))))return!1}return!(t!=="all"&&v.status!==t||V!=="all"&&(V==="system"&&!v.is_system||V==="custom"&&v.is_system))}),{currentPage:w,totalPages:Z,currentItems:B,setCurrentPage:R}=Je(O||[],F),S=()=>{k("add"),z(null),f(!0)},ee=v=>{k("edit"),z(v),f(!0)},ne=v=>{k("view"),z(v),f(!0)},A=async v=>{if(v.is_system){m.error("Không thể xóa vai trò hệ thống");return}if(confirm(`Bạn có chắc chắn muốn xóa vai trò "${v.name}"?`))try{const{count:N,error:g}=await ie.from("user_roles").select("*, id:_id",{count:"exact",head:!0}).eq("role_id",v.id);if(g){console.error("❌ Error checking user count:",g),m.error(`Lỗi kiểm tra người dùng: ${g.message}`);return}if(N&&N>0){m.error(`Không thể xóa vai trò đang có ${N} người dùng. Vui lòng gỡ người dùng trước.`);return}const{error:o}=await ie.from("role_permissions").delete().eq("role_id",v.id);if(o){console.error("❌ Error deleting role permissions:",o),m.error(`Lỗi xóa quyền của vai trò: ${o.message}`);return}const{error:a}=await ie.from("roles").delete().eq("_id",v.id);a?(console.error("❌ Error deleting role:",a),m.error(`Lỗi xóa vai trò: ${a.message}`)):(m.success("Đã xóa vai trò thành công"),U())}catch(N){console.error("❌ Error in handleDelete:",N),m.error("Lỗi xóa vai trò")}},y=async v=>{try{const N=v.status===1?0:1,{error:g}=await ie.from("roles").update({status:N,updated_at:new Date().toISOString()}).eq("_id",v.id);g?(console.error("❌ Error updating role status:",g),m.error(`Lỗi cập nhật trạng thái: ${g.message}`)):(m.success(N===1?"Đã kích hoạt vai trò":"Đã vô hiệu hóa vai trò"),U())}catch(N){console.error("❌ Error in handleToggleStatus:",N),m.error("Lỗi cập nhật trạng thái")}},$=v=>v===1?e.jsxDEV("span",{className:i.statusActive,children:[e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:254,columnNumber:9},void 0),"Hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:253,columnNumber:7},void 0):e.jsxDEV("span",{className:i.statusInactive,children:[e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:259,columnNumber:9},void 0),"Vô hiệu hóa"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:258,columnNumber:7},void 0),M=()=>{try{const v=O.map((b,l)=>({STT:l+1,"Mã vai trò":b.code,"Tên vai trò":b.name,"Mô tả":b.description||"","Số người dùng":b.user_count||0,"Trạng thái":b.status===1?"Hoạt động":"Vô hiệu hóa","Vai trò hệ thống":b.is_system?"Có":"Không","Ngày tạo":new Date(b.created_at).toLocaleString("vi-VN"),"Ngày cập nhật":new Date(b.updated_at).toLocaleString("vi-VN")})),N=ce.book_new(),g=ce.json_to_sheet(v),o=[{wch:5},{wch:20},{wch:30},{wch:40},{wch:12},{wch:15},{wch:18},{wch:20},{wch:20}];g["!cols"]=o,ce.book_append_sheet(N,g,"Danh sách vai trò");const h=`MAPPA_Vai_Tro_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`;Fe(N,h),m.success(`Đã xuất ${O.length} vai trò ra Excel`)}catch(v){console.error("❌ Error exporting to Excel:",v),m.error("Lỗi xuất Excel")}};return n?e.jsxDEV("div",{className:i.loadingContainer,children:[e.jsxDEV(he,{className:i.spinner,size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:321,columnNumber:9},void 0),e.jsxDEV("p",{children:"Đang tải dữ liệu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:322,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:320,columnNumber:7},void 0):e.jsxDEV("div",{className:i.tabContent,children:[e.jsxDEV("div",{className:i.headerRow,children:[e.jsxDEV("div",{className:i.filterGroup,children:[e.jsxDEV("div",{className:i.searchBox,children:[e.jsxDEV(_e,{size:18,className:i.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:335,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm theo tên, mã, mô tả...",value:c,onChange:v=>T(v.target.value),className:i.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:336,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:334,columnNumber:11},void 0),e.jsxDEV("button",{className:Q?i.btnPrimary:i.btnSecondary,onClick:()=>E(!Q),title:Q?"Ẩn bộ lọc":"Hiện bộ lọc",children:[e.jsxDEV(xi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:351,columnNumber:13},void 0),"Bộ lọc"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:346,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:332,columnNumber:9},void 0),e.jsxDEV("div",{className:i.actionGroup,children:[e.jsxDEV("button",{className:i.btnSecondary,onClick:U,children:[e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:359,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:358,columnNumber:11},void 0),e.jsxDEV("button",{className:i.btnPrimary,onClick:S,children:[e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:363,columnNumber:13},void 0),"Thêm vai trò"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:362,columnNumber:11},void 0),e.jsxDEV("button",{className:i.btnPrimary,onClick:M,children:[e.jsxDEV(Pe,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:367,columnNumber:13},void 0),"Xuất Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:366,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:357,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:330,columnNumber:7},void 0),Q&&e.jsxDEV("div",{className:i.filterPanel,children:e.jsxDEV("div",{className:i.filterRow,children:[e.jsxDEV("div",{className:i.filterItem,children:[e.jsxDEV("label",{children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:379,columnNumber:15},void 0),e.jsxDEV("select",{value:t,onChange:v=>p(v.target.value==="all"?"all":Number(v.target.value)),className:i.select,children:[e.jsxDEV("option",{value:"all",children:"Tất cả trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:385,columnNumber:17},void 0),e.jsxDEV("option",{value:1,children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:386,columnNumber:17},void 0),e.jsxDEV("option",{value:0,children:"Vô hiệu hóa"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:387,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:380,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:378,columnNumber:13},void 0),e.jsxDEV("div",{className:i.filterItem,children:[e.jsxDEV("label",{children:"Loại vai trò"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:393,columnNumber:15},void 0),e.jsxDEV("select",{value:V,onChange:v=>L(v.target.value),className:i.select,children:[e.jsxDEV("option",{value:"all",children:"Tất cả loại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:399,columnNumber:17},void 0),e.jsxDEV("option",{value:"system",children:"Vai trò hệ thống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:400,columnNumber:17},void 0),e.jsxDEV("option",{value:"custom",children:"Vai trò tùy chỉnh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:401,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:394,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:392,columnNumber:13},void 0),(t!=="all"||V!=="all"||c)&&e.jsxDEV("div",{className:i.filterItem,children:[e.jsxDEV("label",{children:" "},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:408,columnNumber:17},void 0),e.jsxDEV("button",{className:i.btnSecondary,onClick:()=>{p("all"),L("all"),T("")},children:"Xóa bộ lọc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:409,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:407,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:376,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:375,columnNumber:9},void 0),e.jsxDEV("div",{className:i.tableWrapper,children:e.jsxDEV("table",{className:i.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"50px"},children:"STT"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:430,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"160px"},children:"Mã vai trò"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:431,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"auto",minWidth:"200px"},children:"Tên & Mô tả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:432,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"100px",textAlign:"center"},children:"Người dùng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:433,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"120px"},children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:434,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"90px",textAlign:"center"},children:"Hệ thống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:435,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"150px",textAlign:"center"},children:"Thao tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:436,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:429,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:428,columnNumber:11},void 0),e.jsxDEV("tbody",{children:B.length===0?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:7,className:i.emptyState,children:[e.jsxDEV(ve,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:443,columnNumber:19},void 0),e.jsxDEV("p",{children:"Không tìm thấy vai trò nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:444,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:442,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:441,columnNumber:15},void 0):B.map((v,N)=>{var g;return e.jsxDEV("tr",{children:[e.jsxDEV("td",{style:{textAlign:"center"},children:(w-1)*F+N+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:450,columnNumber:19},void 0),e.jsxDEV("td",{children:e.jsxDEV("code",{className:i.codeText,children:v.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:454,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:453,columnNumber:19},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:i.cellMain,children:[e.jsxDEV("div",{className:i.cellWithIcon,children:[e.jsxDEV(Ze,{size:16,style:{color:"var(--primary, #005cb6)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:459,columnNumber:25},void 0),e.jsxDEV("span",{className:i.cellTitle,children:v.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:460,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:458,columnNumber:23},void 0),v.description&&e.jsxDEV("div",{className:i.cellSubtitle,children:v.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:463,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:457,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:456,columnNumber:19},void 0),e.jsxDEV("td",{style:{textAlign:"center"},children:e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--spacing-1, 4px)"},children:[e.jsxDEV(gi,{size:14,style:{color:"var(--muted-foreground, #6b7280)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:469,columnNumber:23},void 0),e.jsxDEV("span",{style:{fontFamily:"Inter, sans-serif",fontSize:"13px",fontWeight:600,color:"var(--foreground, #111827)"},children:((g=v.user_count)==null?void 0:g.toLocaleString())||0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:470,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:468,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:467,columnNumber:19},void 0),e.jsxDEV("td",{children:$(v.status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:480,columnNumber:19},void 0),e.jsxDEV("td",{style:{textAlign:"center"},children:v.is_system?e.jsxDEV(be,{size:18,className:i.iconSuccess},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:483,columnNumber:23},void 0):e.jsxDEV(Ve,{size:18,className:i.iconMuted},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:485,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:481,columnNumber:19},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:i.actionButtons,children:[e.jsxDEV("button",{className:i.btnIcon,onClick:()=>ne(v),title:"Xem chi tiết",children:e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:495,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:490,columnNumber:23},void 0),e.jsxDEV("button",{className:i.btnIcon,onClick:()=>ee(v),title:"Chỉnh sửa",children:e.jsxDEV(Ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:502,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:497,columnNumber:23},void 0),e.jsxDEV("button",{className:v.status===1?i.btnIconWarning:i.btnIconSuccess,onClick:()=>y(v),title:v.status===1?"Vô hiệu hóa":"Kích hoạt",children:e.jsxDEV(Qn,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:509,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:504,columnNumber:23},void 0),e.jsxDEV("button",{className:i.btnIconDanger,onClick:()=>A(v),title:"Xóa",disabled:v.is_system,children:e.jsxDEV(Ie,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:517,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:511,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:489,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:488,columnNumber:19},void 0)]},v.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:449,columnNumber:17},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:439,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:427,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:426,columnNumber:7},void 0),O.length>0&&Z>1&&e.jsxDEV("div",{className:i.tableFooter,children:[e.jsxDEV("div",{className:i.footerInfo,children:["Hiển thị ",e.jsxDEV("strong",{children:(w-1)*F+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:532,columnNumber:22},void 0)," đến"," ",e.jsxDEV("strong",{children:Math.min(w*F,O.length)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:533,columnNumber:13},void 0)," trong tổng số"," ",e.jsxDEV("strong",{children:O.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:534,columnNumber:13},void 0)," vai trò"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:531,columnNumber:11},void 0),e.jsxDEV($e,{currentPage:w,totalPages:Z,totalItems:O.length,itemsPerPage:F,onPageChange:R},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:536,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:530,columnNumber:9},void 0),x&&e.jsxDEV(xa,{mode:D,role:I,onClose:()=>f(!1),onSave:U},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:548,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/RolesManagementTab.tsx",lineNumber:328,columnNumber:5},void 0)},ha=()=>{const[n,s]=d.useState(!0),[r,u]=d.useState([]),[c,T]=d.useState([]),[t,p]=d.useState(""),[V,L]=d.useState("all"),[Q,E]=d.useState("all"),[x,f]=d.useState("all"),[D,k]=d.useState(!1),[I,z]=d.useState(!1),[F,U]=d.useState("add"),[O,w]=d.useState(null),Z=20;d.useEffect(()=>{B()},[]),d.useEffect(()=>{typeof window<"u"&&(window.testSupabaseConnection=async()=>{const{data:l,error:j}=await ie.from("modules").select("*, id:_id").order("order_index",{ascending:!0}),{data:_,error:X}=await ie.from("permissions").select("*, id:_id").limit(5);return{modulesData:l,modulesError:j,permissionsData:_,permissionsError:X}})},[]);const B=async()=>{try{s(!0);const{data:l,error:j}=await ie.from("modules").select("*, id:_id").order("order_index",{ascending:!0});j?(console.error("❌ Error fetching modules:",j),console.error("   Error details:",{code:j.code,message:j.message,details:j.details,hint:j.hint}),j.code==="42P01"?m.error("Bảng modules chưa được tạo. Vui lòng chạy migration scripts."):j.code==="42501"?m.error("Lỗi phân quyn: Vui lòng chạy QUICK_FIX_RLS.sql trong Supabase."):m.error(`Lỗi tải modules: ${j.message}`),u([])):(u(l||[]),(!l||l.length===0)&&m.warning("Không tìm thấy modules. Vui lòng kiểm tra RLS policies hoặc chạy QUICK_FIX_RLS.sql",{duration:6e3}));const{data:_,error:X}=await ie.from("permissions").select("*, id:_id").order("module_id",{ascending:!0}).order("code",{ascending:!0});X?(console.error("❌ Error fetching permissions:",X),console.error("   Error details:",{code:X.code,message:X.message,details:X.details,hint:X.hint}),X.code==="42P01"?m.error("Bảng permissions chưa được tạo. Vui lòng chạy migration scripts."):X.code==="42501"?m.error("Lỗi phân quyền permissions: Vui lòng chạy QUICK_FIX_RLS.sql trong Supabase."):m.error(`Lỗi tải permissions: ${X.message}`),T([])):T(_||[])}catch(l){console.error("❌ Error in fetchData:",l),m.error("Lỗi kết nối Supabase. Vui lòng kiểm tra kết nối."),u([]),T([])}finally{s(!1)}},R=c.filter(l=>{var j,_,X;if(t){const H=t.toLowerCase();if(!(((j=l.name)==null?void 0:j.toLowerCase().includes(H))||((_=l.code)==null?void 0:_.toLowerCase().includes(H))||((X=l.description)==null?void 0:X.toLowerCase().includes(H))))return!1}return!(V!=="all"&&String(l.module_id)!==String(V)||Q!=="all"&&l.status!==Q||x!=="all"&&l.permission_type!==x)}),S=Array.from(new Set(c.map(l=>l.permission_type).filter(Boolean))),{currentPage:ee,totalPages:ne,currentItems:A,setCurrentPage:y}=Je(R||[],Z),$=l=>y(l);r.map(l=>({module:l,permissions:R.filter(j=>j.module_id===l.id)}));const M=()=>{if(!r||r.length===0){m.error("Vui lòng đợi hệ thống tải danh sách modules");return}U("add"),w(null),z(!0)},v=l=>{if(!r||r.length===0){m.error("Vui lòng đợi hệ thống tải danh sách modules");return}U("edit"),w(l),z(!0)},N=l=>{if(!r||r.length===0){m.error("Vui lòng đợi hệ thống tải danh sách modules");return}U("view"),w(l),z(!0)},g=async l=>{if(confirm(`Bạn có chắc chắn muốn xóa quyền "${l.name}"?`))try{const{error:j}=await ie.from("permissions").delete().eq("_id",l.id);j?(console.error("❌ Error deleting permission:",j),m.error(`Lỗi xóa quyền: ${j.message}`)):(m.success("Đã xóa quyền thành công"),B())}catch(j){console.error("❌ Error in handleDelete:",j),m.error("Lỗi xóa quyền")}},o=async l=>{try{const j=l.status===1?0:1,{error:_}=await ie.from("permissions").update({status:j,updated_at:new Date().toISOString()}).eq("_id",l.id);_?(console.error("❌ Error updating permission status:",_),m.error(`Lỗi cập nhật trạng thái: ${_.message}`)):(m.success(j===1?"Đã kích hoạt quyền":"Đã vô hiệu hóa quyền"),B())}catch(j){console.error("❌ Error in handleToggleStatus:",j),m.error("Lỗi cập nhật trạng thái")}},a=l=>{const j=r.find(_=>String(_.id)===String(l));return(j==null?void 0:j.name)||"N/A"},h=l=>l===1?e.jsxDEV("span",{className:i.statusActive,children:[e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:343,columnNumber:9},void 0),"Hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:342,columnNumber:7},void 0):e.jsxDEV("span",{className:i.statusInactive,children:[e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:348,columnNumber:9},void 0),"Vô hiệu hóa"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:347,columnNumber:7},void 0),b=l=>{const j={read:i.badgeInfo,write:i.badgeWarning,delete:i.badgeDanger,admin:i.badgePrimary};return e.jsxDEV("span",{className:j[l]||i.badgeDefault,children:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:362,columnNumber:7},void 0)};return n?e.jsxDEV("div",{className:i.loadingContainer,children:[e.jsxDEV(he,{className:i.spinner,size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:372,columnNumber:9},void 0),e.jsxDEV("p",{children:"Đang tải dữ liệu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:373,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:371,columnNumber:7},void 0):e.jsxDEV("div",{className:i.tabContent,children:[e.jsxDEV("div",{className:i.headerRow,children:[e.jsxDEV("div",{className:i.filterGroup,children:[e.jsxDEV("div",{className:i.searchBox,children:[e.jsxDEV(_e,{size:18,className:i.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:386,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm theo tên, mã, mô tả...",value:t,onChange:l=>p(l.target.value),className:i.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:387,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:385,columnNumber:11},void 0),e.jsxDEV("button",{className:D?i.btnPrimary:i.btnSecondary,onClick:()=>k(!D),title:D?"Ẩn bộ lọc":"Hiện bộ lọc",children:[e.jsxDEV(xi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:402,columnNumber:13},void 0),"Bộ lọc"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:397,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:383,columnNumber:9},void 0),e.jsxDEV("div",{className:i.actionGroup,children:[e.jsxDEV("button",{className:i.btnSecondary,onClick:B,children:[e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:410,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:409,columnNumber:11},void 0),e.jsxDEV("button",{className:i.btnPrimary,onClick:M,children:[e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:414,columnNumber:13},void 0),"Thêm quyền"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:413,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:408,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:381,columnNumber:7},void 0),D&&e.jsxDEV("div",{className:i.filterPanel,children:e.jsxDEV("div",{className:i.filterRow,children:[e.jsxDEV("div",{className:i.filterItem,children:[e.jsxDEV("label",{children:"Module"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:426,columnNumber:15},void 0),e.jsxDEV("select",{value:V,onChange:l=>{const j=l.target.value==="all"?"all":l.target.value;L(j)},className:i.select,children:[e.jsxDEV("option",{value:"all",children:"Tất cả module"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:435,columnNumber:17},void 0),r.map(l=>e.jsxDEV("option",{value:l.id,children:l.name},l.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:437,columnNumber:19},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:427,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:425,columnNumber:13},void 0),e.jsxDEV("div",{className:i.filterItem,children:[e.jsxDEV("label",{children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:446,columnNumber:15},void 0),e.jsxDEV("select",{value:Q,onChange:l=>E(l.target.value==="all"?"all":Number(l.target.value)),className:i.select,children:[e.jsxDEV("option",{value:"all",children:"Tất cả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:452,columnNumber:17},void 0),e.jsxDEV("option",{value:1,children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:453,columnNumber:17},void 0),e.jsxDEV("option",{value:0,children:"Vô hiệu hóa"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:454,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:447,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:445,columnNumber:13},void 0),e.jsxDEV("div",{className:i.filterItem,children:[e.jsxDEV("label",{children:"Loại quyền"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:460,columnNumber:15},void 0),e.jsxDEV("select",{value:x,onChange:l=>f(l.target.value),className:i.select,children:[e.jsxDEV("option",{value:"all",children:"Tất cả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:466,columnNumber:17},void 0),S.map(l=>e.jsxDEV("option",{value:l,children:l},l,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:468,columnNumber:19},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:461,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:459,columnNumber:13},void 0),(V!=="all"||Q!=="all"||x!=="all"||t)&&e.jsxDEV("div",{className:i.filterItem,children:[e.jsxDEV("label",{children:" "},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:478,columnNumber:17},void 0),e.jsxDEV("button",{className:i.btnSecondary,onClick:()=>{L("all"),E("all"),f("all"),p("")},children:"Xóa bộ lọc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:479,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:477,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:423,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:422,columnNumber:9},void 0),e.jsxDEV("div",{className:i.tableWrapper,children:e.jsxDEV("table",{className:i.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"50px"},children:"STT"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:501,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"240px"},children:"Module"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:502,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"160px"},children:"Mã quyền"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:503,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"auto",minWidth:"200px"},children:"Tên & Mô tả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:504,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"110px"},children:"Loại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:505,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"120px"},children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:506,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"90px",textAlign:"center"},children:"Mặc định"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:507,columnNumber:15},void 0),e.jsxDEV("th",{style:{width:"150px",textAlign:"center"},children:"Thao tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:508,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:500,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:499,columnNumber:11},void 0),e.jsxDEV("tbody",{children:A.length===0?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:8,className:i.emptyState,children:[e.jsxDEV(ve,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:515,columnNumber:19},void 0),e.jsxDEV("p",{children:"Không tìm thấy quyền nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:516,columnNumber:19},void 0),e.jsxDEV("button",{className:i.btnPrimary,onClick:M,children:[e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:518,columnNumber:21},void 0),"Thêm quyền mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:517,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:514,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:513,columnNumber:15},void 0):A.map((l,j)=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{style:{textAlign:"center"},children:(ee-1)*Z+j+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:526,columnNumber:19},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:i.cellWithIcon,children:[e.jsxDEV(Yn,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:531,columnNumber:23},void 0),e.jsxDEV("span",{className:i.cellModuleName,children:a(l.module_id)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:532,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:530,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:529,columnNumber:19},void 0),e.jsxDEV("td",{children:e.jsxDEV("code",{className:i.codeText,children:l.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:536,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:535,columnNumber:19},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:i.cellMain,children:[e.jsxDEV("div",{className:i.cellTitle,children:l.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:540,columnNumber:23},void 0),l.description&&e.jsxDEV("div",{className:i.cellSubtitle,children:l.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:542,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:539,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:538,columnNumber:19},void 0),e.jsxDEV("td",{children:b(l.permission_type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:546,columnNumber:19},void 0),e.jsxDEV("td",{children:h(l.status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:547,columnNumber:19},void 0),e.jsxDEV("td",{style:{textAlign:"center"},children:l.is_default?e.jsxDEV(be,{size:18,className:i.iconSuccess},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:550,columnNumber:23},void 0):e.jsxDEV(Ve,{size:18,className:i.iconMuted},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:552,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:548,columnNumber:19},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:i.actionButtons,children:[e.jsxDEV("button",{className:i.btnIcon,onClick:()=>N(l),title:"Xem chi tiết",children:e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:562,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:557,columnNumber:23},void 0),e.jsxDEV("button",{className:i.btnIcon,onClick:()=>v(l),title:"Chỉnh sửa",children:e.jsxDEV(Ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:569,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:564,columnNumber:23},void 0),e.jsxDEV("button",{className:l.status===1?i.btnIconWarning:i.btnIconSuccess,onClick:()=>o(l),title:l.status===1?"Vô hiệu hóa":"Kích hoạt",children:e.jsxDEV(Qn,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:576,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:571,columnNumber:23},void 0),e.jsxDEV("button",{className:i.btnIconDanger,onClick:()=>g(l),title:"Xóa",disabled:l.is_default,children:e.jsxDEV(Ie,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:584,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:578,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:556,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:555,columnNumber:19},void 0)]},l.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:525,columnNumber:17},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:511,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:498,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:497,columnNumber:7},void 0),R.length>0&&ne>1&&e.jsxDEV("div",{className:i.tableFooter,children:[e.jsxDEV("div",{className:i.footerInfo,children:["Hiển thị ",e.jsxDEV("strong",{children:(ee-1)*Z+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:599,columnNumber:22},void 0)," đến"," ",e.jsxDEV("strong",{children:Math.min(ee*Z,R.length)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:600,columnNumber:13},void 0)," trong tổng số"," ",e.jsxDEV("strong",{children:R.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:601,columnNumber:13},void 0)," quyền"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:598,columnNumber:11},void 0),e.jsxDEV($e,{currentPage:ee,totalPages:ne,totalItems:R.length,itemsPerPage:Z,onPageChange:$},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:603,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:597,columnNumber:9},void 0),I&&e.jsxDEV(Ea,{mode:F,permission:O,modules:r,onClose:()=>z(!1),onSave:B},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:615,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:379,columnNumber:5},void 0)},Ea=({mode:n,permission:s,modules:r,onClose:u,onSave:c})=>{var E;const[T,t]=d.useState({module_id:(s==null?void 0:s.module_id)||((E=r[0])==null?void 0:E.id)||"",code:(s==null?void 0:s.code)||"",name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",permission_type:(s==null?void 0:s.permission_type)||"read",status:(s==null?void 0:s.status)??1,is_default:(s==null?void 0:s.is_default)||!1}),[p,V]=d.useState(!1),L=async x=>{if(x.preventDefault(),!T.code||!T.name){m.error("Vui lòng điền đầy đủ thông tin");return}try{if(V(!0),n==="add"){const{error:f}=await ie.from("permissions").insert([{...T,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);f?(console.error("❌ Error creating permission:",f),m.error(`Lỗi tạo quyền: ${f.message}`)):(m.success("Đã tạo quyền thành công"),c(),u())}else if(n==="edit"&&s){const{error:f}=await ie.from("permissions").update({...T,updated_at:new Date().toISOString()}).eq("_id",s.id);f?(console.error("❌ Error updating permission:",f),m.error(`Lỗi cập nhật quyền: ${f.message}`)):(m.success("Đã cập nhật quyền thành công"),c(),u())}}catch(f){console.error("❌ Error in handleSubmit:",f),m.error("Lỗi khi lưu quyền")}finally{V(!1)}},Q=n==="view";return e.jsxDEV("div",{className:i.modalOverlay,onClick:u,children:e.jsxDEV("div",{className:i.modal,onClick:x=>x.stopPropagation(),children:[e.jsxDEV("div",{className:i.modalHeader,children:[e.jsxDEV("h2",{className:i.modalTitle,children:[e.jsxDEV(es,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:718,columnNumber:13},void 0),n==="add"?"Thêm quyền mới":n==="edit"?"Chỉnh sửa quyền":"Chi tiết quyền"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:717,columnNumber:11},void 0),e.jsxDEV("button",{className:i.modalClose,onClick:u,children:"×"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:721,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:716,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:L,children:[e.jsxDEV("div",{className:i.modalBody,children:[(!r||r.length===0)&&e.jsxDEV("div",{className:i.alertWarning,children:[e.jsxDEV(ve,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:729,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Chưa có modules trong hệ thống!"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:731,columnNumber:19},void 0),e.jsxDEV("p",{children:"Vui lòng tạo ít nhất một module trước khi thêm quyền."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:732,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:730,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:728,columnNumber:15},void 0),e.jsxDEV("div",{className:i.formRow,children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:[e.jsxDEV("span",{className:i.labelText,children:"Module"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:741,columnNumber:19},void 0),e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:742,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:740,columnNumber:17},void 0),r.length>0?e.jsxDEV("select",{value:T.module_id,onChange:x=>{const f=x.target.value;t({...T,module_id:f})},className:i.input,disabled:Q,required:!0,children:r.map(x=>e.jsxDEV("option",{value:x.id,children:x.name},x.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:756,columnNumber:23},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:745,columnNumber:19},void 0):e.jsxDEV("select",{className:i.input,disabled:!0,children:e.jsxDEV("option",{children:"Không có module nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:763,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:762,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:739,columnNumber:15},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:[e.jsxDEV("span",{className:i.labelText,children:"Mã quyền"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:770,columnNumber:19},void 0),e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:771,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:769,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",value:T.code,onChange:x=>t({...T,code:x.target.value.toUpperCase()}),className:i.input,placeholder:"VD: FACILITY_VIEW",disabled:Q||r.length===0,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:773,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:768,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:738,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:[e.jsxDEV("span",{className:i.labelText,children:"Tên quyền"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:788,columnNumber:17},void 0),e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:789,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:787,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:T.name,onChange:x=>t({...T,name:x.target.value}),className:i.input,placeholder:"VD: Xem danh sách cơ sở",disabled:Q||r.length===0,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:791,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:786,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:e.jsxDEV("span",{className:i.labelText,children:"Mô tả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:805,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:804,columnNumber:15},void 0),e.jsxDEV("textarea",{value:T.description,onChange:x=>t({...T,description:x.target.value}),className:i.textarea,placeholder:"Mô tả chi tiết về quyền này...",rows:3,disabled:Q||r.length===0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:807,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:803,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formRow,children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:[e.jsxDEV("span",{className:i.labelText,children:"Loại quyền"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:821,columnNumber:19},void 0),e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:822,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:820,columnNumber:17},void 0),e.jsxDEV("select",{value:T.permission_type,onChange:x=>t({...T,permission_type:x.target.value}),className:i.input,disabled:Q||r.length===0,required:!0,children:[e.jsxDEV("option",{value:"read",children:"Read (Xem)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:831,columnNumber:19},void 0),e.jsxDEV("option",{value:"write",children:"Write (Ghi)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:832,columnNumber:19},void 0),e.jsxDEV("option",{value:"delete",children:"Delete (Xóa)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:833,columnNumber:19},void 0),e.jsxDEV("option",{value:"admin",children:"Admin (Quản trị)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:834,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:824,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:819,columnNumber:15},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:e.jsxDEV("span",{className:i.labelText,children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:840,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:839,columnNumber:17},void 0),e.jsxDEV("select",{value:T.status,onChange:x=>t({...T,status:Number(x.target.value)}),className:i.input,disabled:Q||r.length===0,children:[e.jsxDEV("option",{value:1,children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:848,columnNumber:19},void 0),e.jsxDEV("option",{value:0,children:"Vô hiệu hóa"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:849,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:842,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:838,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:818,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:e.jsxDEV("label",{className:i.checkboxLabel,children:[e.jsxDEV("input",{type:"checkbox",checked:T.is_default,onChange:x=>t({...T,is_default:x.target.checked}),disabled:Q||r.length===0,className:i.checkbox},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:857,columnNumber:17},void 0),e.jsxDEV("span",{className:i.checkboxText,children:"Quyền mặc định (tự động gán cho vai trò mới)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:864,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:856,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:855,columnNumber:13},void 0),n==="view"&&s&&e.jsxDEV("div",{className:i.infoBox,children:[e.jsxDEV(we,{size:16,className:i.infoIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:871,columnNumber:17},void 0),e.jsxDEV("div",{className:i.infoContent,children:[e.jsxDEV("div",{className:i.infoRow,children:[e.jsxDEV("strong",{children:"Tạo lúc:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:874,columnNumber:21},void 0)," ",new Date(s.created_at).toLocaleString("vi-VN")]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:873,columnNumber:19},void 0),e.jsxDEV("div",{className:i.infoRow,children:[e.jsxDEV("strong",{children:"Cập nhật:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:877,columnNumber:21},void 0)," ",new Date(s.updated_at).toLocaleString("vi-VN")]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:876,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:872,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:870,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:725,columnNumber:11},void 0),e.jsxDEV("div",{className:i.modalFooter,children:[e.jsxDEV("button",{type:"button",className:i.btnSecondary,onClick:u,children:Q?"Đóng":"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:885,columnNumber:13},void 0),!Q&&e.jsxDEV("button",{type:"submit",className:i.btnPrimary,disabled:p||r.length===0,children:p?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(he,{className:i.spinner,size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:892,columnNumber:21},void 0),"Đang lưu..."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:891,columnNumber:19},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(be,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:897,columnNumber:21},void 0),n==="add"?"Tạo quyền":"Cập nhật"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:896,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:889,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:884,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:724,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:715,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PermissionsMatrixTabNew.tsx",lineNumber:714,columnNumber:5},void 0)},Ha="_territoryContainer_1m87o_5",_a="_sectionHeader_1m87o_23",La="_headerInfo_1m87o_39",Da="_sectionTitle_1m87o_51",ja="_sectionDesc_1m87o_69",ya="_headerActions_1m87o_85",Qa="_statsGrid_1m87o_99",Ca="_statCard_1m87o_111",Sa="_statIcon_1m87o_145",wa="_statContent_1m87o_169",Ma="_statValue_1m87o_185",Ia="_statLabel_1m87o_201",ka="_filterActionBar_1m87o_223",Aa="_filterGroup_1m87o_245",Ra="_searchBox_1m87o_263",Pa="_searchIcon_1m87o_277",Ba="_searchInput_1m87o_295",za="_select_1m87o_341",Fa="_actionGroup_1m87o_389",$a="_primaryBtn_1m87o_403",Ua="_secondaryBtn_1m87o_471",qa="_iconBtn_1m87o_529",Ga="_tableWrapper_1m87o_579",Oa="_tableContainer_1m87o_593",Wa="_table_1m87o_579",Ja="_alignCenter_1m87o_653",Xa="_alignRight_1m87o_661",Ka="_codeCell_1m87o_731",Za="_nameCell_1m87o_753",Ya="_provinceCell_1m87o_763",et="_managerCell_1m87o_777",it="_managerIcon_1m87o_797",nt="_emptyCell_1m87o_807",st="_levelBadge_1m87o_821",rt="_levelProvince_1m87o_845",lt="_levelWard_1m87o_869",at="_statusBadge_1m87o_881",tt="_statusActive_1m87o_905",ot="_statusInactive_1m87o_917",dt="_actionButtons_1m87o_929",ct="_emptyState_1m87o_945",mt="_emptyIcon_1m87o_967",ut="_emptyTitle_1m87o_977",pt="_emptyDesc_1m87o_993",ft="_spinning_1m87o_1187",Nt="_hiddenInput_1m87o_1197",bt="_importDropdown_1m87o_1217",Tt="_dropdownMenu_1m87o_1227",Vt="_dropdownItem_1m87o_1277",se={territoryContainer:Ha,sectionHeader:_a,headerInfo:La,sectionTitle:Da,sectionDesc:ja,headerActions:ya,statsGrid:Qa,statCard:Ca,statIcon:Sa,statContent:wa,statValue:Ma,statLabel:Ia,filterActionBar:ka,filterGroup:Aa,searchBox:Ra,searchIcon:Pa,searchInput:Ba,select:za,actionGroup:Fa,primaryBtn:$a,secondaryBtn:Ua,iconBtn:qa,tableWrapper:Ga,tableContainer:Oa,table:Wa,alignCenter:Ja,alignRight:Xa,codeCell:Ka,nameCell:Za,provinceCell:Ya,managerCell:et,managerIcon:it,emptyCell:nt,levelBadge:st,levelProvince:rt,levelWard:lt,statusBadge:at,statusActive:tt,statusInactive:ot,actionButtons:dt,emptyState:ct,emptyIcon:mt,emptyTitle:ut,emptyDesc:pt,spinning:ft,hiddenInput:Nt,importDropdown:bt,dropdownMenu:Tt,dropdownItem:Vt},vt=({onOpenModal:n})=>{const[s,r]=d.useState([]),[u,c]=d.useState(!1),[T,t]=d.useState(""),[p,V]=d.useState("all"),[L,Q]=d.useState("all"),[E,x]=d.useState(1),f=15,[D,k]=d.useState(""),[I,z]=d.useState(""),[F,U]=d.useState([]),[O,w]=d.useState([]),[Z,B]=d.useState(!1),R=O.filter(l=>l.provinceId===D),S=async()=>{try{c(!0);const l=`https://${Ci}.supabase.co/functions/v1/make-server-e994bb5d`,j=await fetch(`${l}/areas`,{method:"GET",headers:{Authorization:`Bearer ${Ni}`,"Content-Type":"application/json"}});if(!j.ok){const X=await j.json();throw new Error(X.error||"Failed to fetch areas")}const _=await j.json();r(_.data||[])}catch(l){console.error("Error fetching areas:",l),m.error(`Lỗi tải dữ liệu: ${l.message}`)}finally{c(!1)}},ee=async()=>{try{const{data:l,error:j}=await ie.from("provinces").select("*, id:_id").order("name",{ascending:!0});if(j)throw console.error("❌ Error fetching provinces:",j),j;U(l||[])}catch(l){console.error("❌ Error in fetchProvinces:",l),m.error("Lỗi tải danh sách Tỉnh/TP")}},ne=async()=>{try{const{data:l,error:j}=await ie.from("wards").select("*, id:_id").order("name",{ascending:!0});if(j)throw console.error("❌ Error fetching wards:",j),j;w(l||[])}catch(l){console.error("❌ Error in fetchWards:",l),m.error("Lỗi tải danh sách Phường/Xã")}};d.useEffect(()=>{S(),ee(),ne()},[]),d.useEffect(()=>{const l=j=>{j.target.closest(`.${se.importDropdown}`)||B(!1)};return Z&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[Z]);const A=d.useMemo(()=>{const l=s.length,j=s.filter(H=>H.provinceId).length,_=s.filter(H=>H.wardId).length,X=s.filter(H=>H.status===1).length;return{total:l,withProvince:j,withWard:_,active:X,inactive:l-X}},[s]),y=d.useMemo(()=>s.filter(l=>{var H,K,q;const j=l.name.toLowerCase().includes(T.toLowerCase())||l.code.toLowerCase().includes(T.toLowerCase())||((H=l.provinceName)==null?void 0:H.toLowerCase().includes(T.toLowerCase()))||!1||((K=l.wardName)==null?void 0:K.toLowerCase().includes(T.toLowerCase()))||!1||((q=l.managerName)==null?void 0:q.toLowerCase().includes(T.toLowerCase()))||!1,_=p==="all"||p==="PROVINCE"&&l.provinceId&&!l.wardId||p==="WARD"&&l.wardId,X=L==="all"||L==="active"&&l.status===1||L==="inactive"&&l.status===0;return j&&_&&X}),[s,T,p,L]),$=d.useMemo(()=>{const l=(E-1)*f;return y.slice(l,l+f)},[y,E,f]),M=Math.ceil(y.length/f),v=l=>{x(l)},N=l=>l.wardId?"Xã/Phường":l.provinceId?"Tỉnh/TP":"Chưa xác định",g=l=>l.wardId?se.levelWard:l.provinceId?se.levelProvince:"",o=()=>{S(),m.success("Đã làm mới dữ liệu")},a=()=>{const l=ce.json_to_sheet(y),j=ce.book_new();ce.book_append_sheet(j,l,"Territories"),Fe(j,"territories.xlsx"),m.success("Đã xuất dữ liệu thành công")},h=()=>{B(!1);try{const l=[{Mã:"DB001","Tên địa bàn":"Địa bàn mẫu 1",Cấp:"PROVINCE","Mô tả":"Mô tả về địa bàn","Trạng thái":"Hoạt động"},{Mã:"DB002","Tên địa bàn":"Địa bàn mẫu 2",Cấp:"WARD","Mô tả":"Mô tả về địa bàn","Trạng thái":"Không hoạt động"}],j=ce.json_to_sheet(l),_=[{wch:15},{wch:30},{wch:15},{wch:40},{wch:20}];j["!cols"]=_;const X=ce.book_new();ce.book_append_sheet(X,j,"Mẫu Địa bàn");const H=[{CỘT:"Mã","BẮT BUỘC":"Có","ĐỊNH DẠNG":"Text","GHI CHÚ":"Mã địa bàn duy nhất, ví dụ: DB001"},{CỘT:"Tên địa bàn","BẮT BUỘC":"Có","ĐỊNH DẠNG":"Text","GHI CHÚ":"Tên đầy đủ của địa bàn"},{CỘT:"Cấp","BẮT BUỘC":"Có","ĐỊNH DẠNG":"Text","GHI CHÚ":'Ghi "PROVINCE" (Tỉnh/TP) hoặc "WARD" (Xã/Phường) hoặc "DISTRICT" (Quận/Huyện)'},{CỘT:"Mô tả","BẮT BUỘC":"Không","ĐỊNH DẠNG":"Text","GHI CHÚ":"Mô tả chi tiết về địa bàn"},{CỘT:"Trạng thái","BẮT BUỘC":"Không","ĐỊNH DẠNG":"Text","GHI CHÚ":'Ghi "Hoạt động" hoặc để trống/khác = Không hoạt động'}],K=ce.json_to_sheet(H),q=[{wch:20},{wch:15},{wch:15},{wch:70}];K["!cols"]=q,ce.book_append_sheet(X,K,"Hướng dẫn");const ue=`Mau_Dia_ban_${new Date().toISOString().split("T")[0]}.xlsx`;Fe(X,ue),m.success("Đã tải file mẫu thành công")}catch(l){console.error("❌ Error generating template:",l),m.error("Lỗi tải file mẫu")}},b=async l=>{var _;B(!1);const j=(_=l.target.files)==null?void 0:_[0];if(j){try{const X=new FileReader;X.onload=async H=>{var K;try{const q=new Uint8Array((K=H.target)==null?void 0:K.result),ue=Zi(q,{type:"array"}),W=ue.SheetNames[0],te=ue.Sheets[W],pe=ce.sheet_to_json(te);if(pe.length===0){m.error("File Excel không có dữ liệu");return}const Te=`https://${Ci}.supabase.co/functions/v1/make-server-e994bb5d`;let fe=0,Ne=0;for(const xe of pe)try{const Ue={code:xe.Mã||xe.code||"",name:xe["Tên địa bàn"]||xe.name||"",level:xe.Cấp||xe.level||"PROVINCE",description:xe["Mô tả"]||xe.description||"",status:xe["Trạng thái"]==="Hoạt động"?1:0};if(!Ue.code||!Ue.name||!Ue.level){Ne++;continue}const Ye=await fetch(`${Te}/areas`,{method:"POST",headers:{Authorization:`Bearer ${Ni}`,"Content-Type":"application/json"},body:JSON.stringify(Ue)});if(Ye.ok)fe++;else{Ne++;const hi=await Ye.json();console.error("❌ Error importing row:",hi)}}catch(Ue){console.error("❌ Error processing row:",Ue),Ne++}fe>0&&(m.success(`Đã import thành công ${fe} địa bàn`),await S()),Ne>0&&m.warning(`${Ne} bản ghi không import được`)}catch(q){console.error("❌ Error parsing Excel:",q),m.error("Lỗi đọc file Excel. Vui lòng kiểm tra định dạng file.")}},X.readAsArrayBuffer(j)}catch(X){console.error("❌ Error importing Excel:",X),m.error("Lỗi import file Excel")}l.target.value=""}};return e.jsxDEV("div",{className:se.territoryContainer,children:[e.jsxDEV("div",{className:se.sectionHeader,children:[e.jsxDEV("div",{className:se.headerInfo,children:[e.jsxDEV("h2",{className:se.sectionTitle,children:"Địa bàn & phạm vi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:425,columnNumber:11},void 0),e.jsxDEV("p",{className:se.sectionDesc,children:"Quản lý danh sách địa bàn hành chính và phạm vi quản lý toàn hệ thống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:426,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:424,columnNumber:9},void 0),e.jsxDEV("div",{className:se.headerActions,children:[e.jsxDEV("button",{className:se.secondaryBtn,onClick:o,disabled:u,children:[e.jsxDEV(ge,{size:16,className:u?se.spinning:""},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:432,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:431,columnNumber:11},void 0),e.jsxDEV("button",{className:se.secondaryBtn,onClick:a,children:[e.jsxDEV(Pe,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:436,columnNumber:13},void 0),"Xuất dữ liệu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:435,columnNumber:11},void 0),e.jsxDEV("button",{className:se.primaryBtn,onClick:()=>n("add"),children:[e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:440,columnNumber:13},void 0),"Thêm địa bàn"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:439,columnNumber:11},void 0),e.jsxDEV("div",{className:se.importDropdown,children:[e.jsxDEV("button",{className:se.secondaryBtn,onClick:()=>B(!Z),children:[e.jsxDEV(mi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:448,columnNumber:15},void 0),"Nhập dữ liệu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:444,columnNumber:13},void 0),Z&&e.jsxDEV("div",{className:se.dropdownMenu,children:[e.jsxDEV("label",{className:se.dropdownItem,htmlFor:"importExcel",children:[e.jsxDEV(mi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:454,columnNumber:19},void 0),"Từ file Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:453,columnNumber:17},void 0),e.jsxDEV("input",{type:"file",id:"importExcel",className:se.hiddenInput,accept:".xlsx, .xls",onChange:b},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:457,columnNumber:17},void 0),e.jsxDEV("button",{className:se.dropdownItem,onClick:h,children:[e.jsxDEV(ye,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:465,columnNumber:19},void 0),"Tải mẫu nhập liệu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:464,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:452,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:443,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:430,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:423,columnNumber:7},void 0),e.jsxDEV("div",{className:se.statsGrid,children:[e.jsxDEV("div",{className:se.statCard,children:[e.jsxDEV("div",{className:se.statIcon,children:e.jsxDEV(ze,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:478,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:477,columnNumber:11},void 0),e.jsxDEV("div",{className:se.statContent,children:[e.jsxDEV("div",{className:se.statValue,children:A.total},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:481,columnNumber:13},void 0),e.jsxDEV("div",{className:se.statLabel,children:"Tổng địa bàn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:482,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:480,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:476,columnNumber:9},void 0),e.jsxDEV("div",{className:se.statCard,children:[e.jsxDEV("div",{className:se.statIcon,children:e.jsxDEV(Be,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:488,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:487,columnNumber:11},void 0),e.jsxDEV("div",{className:se.statContent,children:[e.jsxDEV("div",{className:se.statValue,children:A.withProvince},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:491,columnNumber:13},void 0),e.jsxDEV("div",{className:se.statLabel,children:"Cấp Tỉnh/TP"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:492,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:490,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:486,columnNumber:9},void 0),e.jsxDEV("div",{className:se.statCard,children:[e.jsxDEV("div",{className:se.statIcon,children:e.jsxDEV(Be,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:498,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:497,columnNumber:11},void 0),e.jsxDEV("div",{className:se.statContent,children:[e.jsxDEV("div",{className:se.statValue,children:A.withWard},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:501,columnNumber:13},void 0),e.jsxDEV("div",{className:se.statLabel,children:"Cấp Xã/Phường"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:502,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:500,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:496,columnNumber:9},void 0),e.jsxDEV("div",{className:se.statCard,children:[e.jsxDEV("div",{className:se.statIcon,children:e.jsxDEV(ci,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:508,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:507,columnNumber:11},void 0),e.jsxDEV("div",{className:se.statContent,children:[e.jsxDEV("div",{className:se.statValue,children:A.active},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:511,columnNumber:13},void 0),e.jsxDEV("div",{className:se.statLabel,children:"Đang hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:512,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:510,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:506,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:475,columnNumber:7},void 0),e.jsxDEV("div",{className:se.filterActionBar,children:[e.jsxDEV("div",{className:se.filterGroup,children:[e.jsxDEV("div",{className:se.searchBox,children:[e.jsxDEV(_e,{size:18,className:se.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:521,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm theo tên, mã hoặc người phụ trách...",className:se.searchInput,value:T,onChange:l=>{t(l.target.value),x(1)}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:522,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:520,columnNumber:11},void 0),e.jsxDEV("select",{className:se.select,value:p,onChange:l=>{const j=l.target.value;V(j),x(1),k(""),z("")},children:[e.jsxDEV("option",{value:"all",children:"Tất cả cấp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:546,columnNumber:13},void 0),e.jsxDEV("option",{value:"PROVINCE",children:"Cấp Tỉnh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:547,columnNumber:13},void 0),e.jsxDEV("option",{value:"WARD",children:"Cấp Xã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:548,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:534,columnNumber:11},void 0),(p==="PROVINCE"||p==="WARD")&&e.jsxDEV("select",{className:se.select,value:D,onChange:l=>{k(l.target.value),z(""),x(1)},children:[e.jsxDEV("option",{value:"",children:"Chọn Tỉnh/TP"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:562,columnNumber:15},void 0),F.map(l=>e.jsxDEV("option",{value:l.id,children:l.name},l.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:564,columnNumber:17},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:553,columnNumber:13},void 0),p==="WARD"&&D&&e.jsxDEV("select",{className:se.select,value:I,onChange:l=>{z(l.target.value),x(1)},children:[e.jsxDEV("option",{value:"",children:"Chọn Phường/Xã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:579,columnNumber:15},void 0),R.map(l=>e.jsxDEV("option",{value:l.id,children:l.name},l.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:581,columnNumber:17},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:571,columnNumber:13},void 0),e.jsxDEV("select",{className:se.select,value:L,onChange:l=>{Q(l.target.value),x(1)},children:[e.jsxDEV("option",{value:"all",children:"Tất cả trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:594,columnNumber:13},void 0),e.jsxDEV("option",{value:"active",children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:595,columnNumber:13},void 0),e.jsxDEV("option",{value:"inactive",children:"Không hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:596,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:586,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:519,columnNumber:9},void 0),e.jsxDEV("div",{className:se.actionGroup,children:e.jsxDEV("button",{className:se.secondaryBtn,title:"Bộ lọc nâng cao",children:e.jsxDEV(xi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:602,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:601,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:600,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:518,columnNumber:7},void 0),e.jsxDEV("div",{className:se.tableWrapper,children:[u?e.jsxDEV("div",{className:se.emptyState,children:[e.jsxDEV(ge,{size:64,className:`${se.emptyIcon} ${se.spinning}`},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:611,columnNumber:13},void 0),e.jsxDEV("h3",{className:se.emptyTitle,children:"Đang tải dữ liệu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:612,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:610,columnNumber:11},void 0):$.length>0?e.jsxDEV("div",{className:se.tableContainer,children:e.jsxDEV("table",{className:se.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Mã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:619,columnNumber:19},void 0),e.jsxDEV("th",{children:"Tên địa bàn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:620,columnNumber:19},void 0),e.jsxDEV("th",{children:"Cấp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:621,columnNumber:19},void 0),e.jsxDEV("th",{children:"Tỉnh/TP"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:622,columnNumber:19},void 0),e.jsxDEV("th",{children:"Xã/Phường"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:623,columnNumber:19},void 0),e.jsxDEV("th",{children:"Người phụ trách"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:624,columnNumber:19},void 0),e.jsxDEV("th",{className:se.alignCenter,children:"Số người dùng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:625,columnNumber:19},void 0),e.jsxDEV("th",{className:se.alignCenter,children:"Trng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:626,columnNumber:19},void 0),e.jsxDEV("th",{className:se.alignRight,children:"Thao tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:627,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:618,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:617,columnNumber:15},void 0),e.jsxDEV("tbody",{children:$.map(l=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("span",{className:se.codeCell,children:l.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:634,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:633,columnNumber:21},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{className:se.nameCell,children:l.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:637,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:636,columnNumber:21},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{className:`${se.levelBadge} ${g(l)}`,children:N(l)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:640,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:639,columnNumber:21},void 0),e.jsxDEV("td",{children:l.provinceName?e.jsxDEV("span",{className:se.provinceCell,children:l.provinceName},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:646,columnNumber:25},void 0):e.jsxDEV("span",{className:se.emptyCell,children:"—"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:648,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:644,columnNumber:21},void 0),e.jsxDEV("td",{children:l.wardName?e.jsxDEV("span",{className:se.provinceCell,children:l.wardName},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:653,columnNumber:25},void 0):e.jsxDEV("span",{className:se.emptyCell,children:"—"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:655,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:651,columnNumber:21},void 0),e.jsxDEV("td",{children:l.managerName?e.jsxDEV("div",{className:se.managerCell,children:[e.jsxDEV(Re,{size:14,className:se.managerIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:661,columnNumber:27},void 0),e.jsxDEV("span",{children:l.managerName},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:662,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:660,columnNumber:25},void 0):e.jsxDEV("span",{className:se.emptyCell,children:"Chưa phân công"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:665,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:658,columnNumber:21},void 0),e.jsxDEV("td",{className:se.alignCenter,children:e.jsxDEV("span",{style:{fontWeight:500},children:l.userCount||0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:669,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:668,columnNumber:21},void 0),e.jsxDEV("td",{className:se.alignCenter,children:l.status===1?e.jsxDEV("span",{className:`${se.statusBadge} ${se.statusActive}`,children:[e.jsxDEV(ci,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:674,columnNumber:27},void 0),"Hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:673,columnNumber:25},void 0):e.jsxDEV("span",{className:`${se.statusBadge} ${se.statusInactive}`,children:[e.jsxDEV(Ve,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:679,columnNumber:27},void 0),"Không hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:678,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:671,columnNumber:21},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:se.actionButtons,children:[e.jsxDEV("button",{className:se.iconBtn,title:"Xem chi tiết",onClick:()=>n("view",l),children:e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:691,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:686,columnNumber:25},void 0),e.jsxDEV("button",{className:se.iconBtn,title:"Chỉnh sửa",onClick:()=>n("edit",l),children:e.jsxDEV(Ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:698,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:693,columnNumber:25},void 0),e.jsxDEV("button",{className:se.iconBtn,title:"Xóa",onClick:()=>n("delete",l),children:e.jsxDEV(Ie,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:705,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:700,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:685,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:684,columnNumber:21},void 0)]},l.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:632,columnNumber:19},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:630,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:616,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:615,columnNumber:11},void 0):e.jsxDEV("div",{className:se.emptyState,children:[e.jsxDEV(ze,{size:64,className:se.emptyIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:716,columnNumber:13},void 0),e.jsxDEV("h3",{className:se.emptyTitle,children:"Không tìm thấy địa bàn nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:717,columnNumber:13},void 0),e.jsxDEV("p",{className:se.emptyDesc,children:T||p!=="all"||L!=="all"?"Thử điều chỉnh bộ lọc hoặc tìm kiếm với từ khóa khác":"Bắt đầu bằng cách thêm địa bàn đầu tiên"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:718,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:715,columnNumber:11},void 0),y.length>0&&!u&&e.jsxDEV($e,{currentPage:E,totalPages:M,totalItems:y.length,itemsPerPage:f,onPageChange:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:728,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:608,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/TerritoryTabNew.tsx",lineNumber:421,columnNumber:5},void 0)},xt=({checklists:n,onOpenModal:s})=>e.jsxDEV("div",{className:i.tabContentInner,children:e.jsxDEV(gt,{checklists:n,onOpenModal:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:38,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:37,columnNumber:5},void 0),gt=({checklists:n=[],onOpenModal:s})=>{const[r,u]=d.useState(""),[c,T]=d.useState("all"),[t,p]=d.useState("all"),V=(n||[]).filter(I=>{const z=I.code.toLowerCase().includes(r.toLowerCase())||I.name.toLowerCase().includes(r.toLowerCase())||I.topic.toLowerCase().includes(r.toLowerCase()),F=c==="all"||I.topic===c,U=t==="all"||I.status===t;return z&&F&&U}),{currentPage:L,itemsPerPage:Q,paginatedData:E,totalPages:x,handlePageChange:f,handleItemsPerPageChange:D}=Je(V,15),k=Array.from(new Set((n||[]).map(I=>I.topic)));return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"var(--spacing-4, 16px)",padding:"var(--spacing-4, 16px)",background:"var(--card, #ffffff)",borderRadius:"var(--radius-md, 8px)",border:"1px solid var(--border, #d0d5dd)",marginBottom:"var(--spacing-4, 16px)"},children:[e.jsxDEV("div",{style:{position:"relative",flex:"1",maxWidth:"400px"},children:[e.jsxDEV(_e,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground, #667085)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:92,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm theo mã, tên, chuyên đề...",value:r,onChange:I=>u(I.target.value),style:{width:"100%",height:"43px",paddingLeft:"40px",paddingRight:"var(--spacing-3, 12px)",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:"var(--background, #f9fafb)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius-md, 8px)",outline:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:99,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:87,columnNumber:9},void 0),e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-3, 12px)"},children:[e.jsxDEV("select",{value:c,onChange:I=>T(I.target.value),style:{height:"43px",padding:"0 var(--spacing-3, 12px)",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:"var(--background, #f9fafb)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius-md, 8px)",cursor:"pointer",outline:"none"},children:[e.jsxDEV("option",{value:"all",children:"Tất cả chuyên đề"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:142,columnNumber:13},void 0),k.map(I=>e.jsxDEV("option",{value:I,children:I},I,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:144,columnNumber:15},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:126,columnNumber:11},void 0),e.jsxDEV("select",{value:t,onChange:I=>p(I.target.value),style:{height:"43px",padding:"0 var(--spacing-3, 12px)",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:"var(--background, #f9fafb)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius-md, 8px)",cursor:"pointer",outline:"none"},children:[e.jsxDEV("option",{value:"all",children:"Tất cả trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:166,columnNumber:13},void 0),e.jsxDEV("option",{value:"active",children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:167,columnNumber:13},void 0),e.jsxDEV("option",{value:"inactive",children:"Không hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:168,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:150,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:121,columnNumber:9},void 0),e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-2, 8px)"},children:[e.jsxDEV("button",{onClick:()=>window.location.reload(),style:{display:"flex",alignItems:"center",gap:"var(--spacing-2, 8px)",height:"43px",padding:"0 var(--spacing-4, 16px)",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--foreground, #101828)",background:"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius-md, 8px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:I=>{I.currentTarget.style.background="var(--muted, #f2f4f7)"},onMouseLeave:I=>{I.currentTarget.style.background="var(--card, #ffffff)"},children:[e.jsxDEV(ge,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:203,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:178,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>m.info("Chức năng xuất Excel đang phát triển"),style:{display:"flex",alignItems:"center",gap:"var(--spacing-2, 8px)",height:"43px",padding:"0 var(--spacing-4, 16px)",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--foreground, #101828)",background:"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius-md, 8px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:I=>{I.currentTarget.style.background="var(--muted, #f2f4f7)"},onMouseLeave:I=>{I.currentTarget.style.background="var(--card, #ffffff)"},children:[e.jsxDEV(Pe,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:232,columnNumber:13},void 0),"Xuất Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:207,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>s("add",null,"checklist"),style:{display:"flex",alignItems:"center",gap:"var(--spacing-2, 8px)",height:"43px",padding:"0 var(--spacing-4, 16px)",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--primary-foreground, #ffffff)",background:"var(--primary, #005cb6)",border:"none",borderRadius:"var(--radius-md, 8px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:I=>{I.currentTarget.style.opacity="0.9"},onMouseLeave:I=>{I.currentTarget.style.opacity="1"},children:[e.jsxDEV(Le,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:261,columnNumber:13},void 0),"Thêm Checklist"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:236,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:173,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:75,columnNumber:7},void 0),e.jsxDEV("div",{className:i.tableContainer,children:e.jsxDEV("table",{className:i.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Mã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:272,columnNumber:15},void 0),e.jsxDEV("th",{children:"Tên checklist"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:273,columnNumber:15},void 0),e.jsxDEV("th",{children:"Chuyên đề"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:274,columnNumber:15},void 0),e.jsxDEV("th",{children:"Số tiêu chí"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:275,columnNumber:15},void 0),e.jsxDEV("th",{children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:276,columnNumber:15},void 0),e.jsxDEV("th",{className:i.actionCol,children:"Thao tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:277,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:271,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:270,columnNumber:11},void 0),e.jsxDEV("tbody",{children:E.length===0?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:6,className:i.emptyState,children:[e.jsxDEV(Wi,{size:48,strokeWidth:1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:284,columnNumber:19},void 0),e.jsxDEV("p",{children:"Không tìm thấy checklist nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:285,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:283,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:282,columnNumber:15},void 0):E.map(I=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("code",{className:i.code,children:I.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:292,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:291,columnNumber:19},void 0),e.jsxDEV("td",{children:e.jsxDEV("strong",{children:I.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:295,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:294,columnNumber:19},void 0),e.jsxDEV("td",{children:I.topic},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:297,columnNumber:19},void 0),e.jsxDEV("td",{children:I.itemCount},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:298,columnNumber:19},void 0),e.jsxDEV("td",{children:I.status==="active"?e.jsxDEV("span",{className:i.statusActive,children:[e.jsxDEV(ci,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:302,columnNumber:25},void 0)," Hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:301,columnNumber:23},void 0):e.jsxDEV("span",{className:i.statusInactive,children:[e.jsxDEV(Ve,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:306,columnNumber:25},void 0)," Không hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:305,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:299,columnNumber:19},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:i.actionButtons,children:[e.jsxDEV("button",{className:i.iconBtn,title:"Xem",onClick:()=>s("view",I,"checklist"),children:e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:317,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:312,columnNumber:23},void 0),e.jsxDEV("button",{className:i.iconBtn,title:"Sửa",onClick:()=>s("edit",I,"checklist"),children:e.jsxDEV(Ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:324,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:319,columnNumber:23},void 0),e.jsxDEV("button",{className:i.iconBtn,title:"Xóa",onClick:()=>s("delete",I,"checklist"),children:e.jsxDEV(Ie,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:331,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:326,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:311,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:310,columnNumber:19},void 0)]},I.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:290,columnNumber:17},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:280,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:269,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:268,columnNumber:7},void 0),V.length>0&&e.jsxDEV($e,{currentPage:L,totalPages:x,totalItems:V.length,itemsPerPage:Q,onPageChange:f,onItemsPerPageChange:D},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:344,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ChecklistTabNew.tsx",lineNumber:73,columnNumber:5},void 0)},ht="_container_1wx74_17",Et="_filtersCard_1wx74_161",Ht="_filtersRow_1wx74_179",_t="_searchWrapper_1wx74_193",Lt="_searchIcon_1wx74_205",Dt="_searchInput_1wx74_223",jt="_actionsGroup_1wx74_269",yt="_btnPrimary_1wx74_283",Qt="_btnSecondary_1wx74_337",Ct="_btnIcon_1wx74_381",St="_tableCard_1wx74_421",wt="_tableWrapper_1wx74_439",Mt="_table_1wx74_421",It="_actionButtons_1wx74_545",kt="_iconBadge_1wx74_557",At="_emptyState_1wx74_579",Rt="_loading_1wx74_619",Pt="_spinner_1wx74_633",Bt="_nameCell_1wx74_663",zt="_nameText_1wx74_675",P={container:ht,filtersCard:Et,filtersRow:Ht,searchWrapper:_t,searchIcon:Lt,searchInput:Dt,actionsGroup:jt,btnPrimary:yt,btnSecondary:Qt,btnIcon:Ct,tableCard:St,tableWrapper:wt,table:Mt,actionButtons:It,iconBadge:kt,emptyState:At,loading:Rt,spinner:Pt,nameCell:Bt,nameText:zt},Ft=({template:n,onClose:s})=>{const[r,u]=d.useState("");if(!n)return null;const c=n.criteria||[],T=c.filter(p=>p.code.toLowerCase().includes(r.toLowerCase())||p.name.toLowerCase().includes(r.toLowerCase())||p.description.toLowerCase().includes(r.toLowerCase())),t=()=>{try{if(c.length===0){m.error("Không có tiêu chí nào để xuất");return}const p=c.map(x=>({STT:x.order,"Mã Tiêu Chí":x.code,"Tên Tiêu Chí":x.name,"Mô Tả":x.description,"Loại Input":x.inputType,"Bắt Buộc":x.required,"Quy Tắc Hoàn Thành":x.completionRule,"Giá Trị Mặc Định":x.defaultValue||"—",Options:x.options?x.options.join("; "):"—"})),V=ce.json_to_sheet(p),L=ce.book_new();ce.book_append_sheet(L,V,"Tiêu chí");const Q=50,E=Object.keys(p[0]||{}).map(()=>({wch:Q}));V["!cols"]=E,Fe(L,`${n.code}_Tieu_Chi_${new Date().toISOString().split("T")[0]}.xlsx`),m.success("Xuất Excel thành công")}catch(p){console.error("Error exporting Excel:",p),m.error("Lỗi khi xuất Excel")}};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.4)",zIndex:9998},onClick:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:73,columnNumber:7},void 0),e.jsxDEV("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"900px",maxWidth:"calc(100vw - 32px)",maxHeight:"calc(100vh - 32px)",background:"var(--card, #ffffff)",borderRadius:"var(--radius, 8px)",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},onClick:p=>p.stopPropagation(),children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",padding:"24px 24px 16px 24px"},children:[e.jsxDEV("div",{style:{flex:1},children:[e.jsxDEV("h3",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-lg, 20px)",fontWeight:600,color:"var(--foreground, #101828)",margin:0,marginBottom:"8px",lineHeight:"30px"},children:n.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:114,columnNumber:13},void 0),e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--muted-foreground, #667085)"},children:[e.jsxDEV("code",{style:{background:"var(--muted, #f2f4f7)",padding:"2px 8px",borderRadius:"var(--radius, 8px)",fontFamily:"JetBrains Mono, Courier New, monospace",fontSize:"var(--text-xs, 12px)",color:"var(--muted-foreground, #667085)",fontWeight:400},children:n.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:139,columnNumber:15},void 0),e.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:152,columnNumber:15},void 0),e.jsxDEV("span",{children:[c.length," tiêu chí"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:153,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:129,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:112,columnNumber:11},void 0),e.jsxDEV("button",{onClick:s,style:{width:"32px",height:"32px",minWidth:"32px",display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",borderRadius:"var(--radius, 8px)",cursor:"pointer",color:"var(--muted-foreground, #667085)",transition:"all 0.2s",marginLeft:"16px"},onMouseEnter:p=>{p.currentTarget.style.background="var(--muted, #f2f4f7)",p.currentTarget.style.color="var(--foreground, #101828)"},onMouseLeave:p=>{p.currentTarget.style.background="transparent",p.currentTarget.style.color="var(--muted-foreground, #667085)"},children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:184,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:158,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:104,columnNumber:9},void 0),n.description&&e.jsxDEV("div",{style:{background:"var(--muted, #f2f4f7)",padding:"16px 20px",borderLeft:"4px solid var(--primary, #005cb6)",margin:"0 24px 24px 24px",borderRadius:"var(--radius, 8px)"},children:e.jsxDEV("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",lineHeight:"22.4px",margin:0},children:n.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:199,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:190,columnNumber:11},void 0),e.jsxDEV("div",{style:{display:"flex",gap:"12px",alignItems:"center",padding:"0 24px 16px 24px",flexWrap:"wrap"},children:[e.jsxDEV("div",{style:{position:"relative",flex:1,minWidth:"280px"},children:[e.jsxDEV(_e,{size:18,style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground, #667085)",pointerEvents:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:225,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm tiêu chí...",value:r,onChange:p=>u(p.target.value),style:{width:"100%",height:"43px",padding:"10px 14px 10px 42px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:"var(--background, #f9fafb)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",outline:"none",transition:"all 0.2s"},onFocus:p=>{p.currentTarget.style.borderColor="var(--primary, #005cb6)",p.currentTarget.style.background="var(--card, #ffffff)"},onBlur:p=>{p.currentTarget.style.borderColor="var(--border, #d0d5dd)",p.currentTarget.style.background="var(--background, #f9fafb)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:236,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:224,columnNumber:11},void 0),e.jsxDEV("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsxDEV("button",{style:{display:"flex",alignItems:"center",gap:"6px",height:"43px",padding:"10px 16px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--foreground, #101828)",background:"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:p=>{p.currentTarget.style.background="var(--muted, #f2f4f7)"},onMouseLeave:p=>{p.currentTarget.style.background="var(--card, #ffffff)"},children:[e.jsxDEV(Me,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:291,columnNumber:15},void 0),"Mở rộng tất cả"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:267,columnNumber:13},void 0),e.jsxDEV("button",{style:{display:"flex",alignItems:"center",gap:"6px",height:"43px",padding:"10px 16px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--foreground, #101828)",background:"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:p=>{p.currentTarget.style.background="var(--muted, #f2f4f7)"},onMouseLeave:p=>{p.currentTarget.style.background="var(--card, #ffffff)"},children:[e.jsxDEV(Me,{size:16,style:{transform:"rotate(180deg)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:318,columnNumber:15},void 0),"Thu gọn tất cả"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:294,columnNumber:13},void 0),e.jsxDEV("button",{onClick:t,style:{display:"flex",alignItems:"center",gap:"6px",height:"43px",padding:"10px 16px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--foreground, #101828)",background:"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:p=>{p.currentTarget.style.background="var(--muted, #f2f4f7)"},onMouseLeave:p=>{p.currentTarget.style.background="var(--card, #ffffff)"},children:[e.jsxDEV(Pe,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:346,columnNumber:15},void 0),"Xuất Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:321,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:266,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:214,columnNumber:9},void 0),e.jsxDEV("div",{style:{flex:1,overflowY:"auto",padding:"0 24px 24px 24px",display:"flex",flexDirection:"column",gap:"0"},children:T.length===0?e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"64px 16px",color:"var(--muted-foreground, #667085)",textAlign:"center"},children:[e.jsxDEV(We,{size:48,style:{opacity:.3,marginBottom:"16px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:375,columnNumber:15},void 0),e.jsxDEV("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-base, 16px)",margin:0},children:"Không tìm thấy tiêu chí nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:376,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:364,columnNumber:13},void 0):T.map((p,V)=>e.jsxDEV("div",{style:{display:"flex",gap:"16px",alignItems:"flex-start",padding:"16px",borderBottom:V<T.length-1?"1px solid var(--border, #d0d5dd)":"none"},children:[e.jsxDEV("div",{style:{width:"32px",height:"32px",minWidth:"32px",borderRadius:"16px",background:"var(--primary, #005cb6)",color:"var(--primary-foreground, #ffffff)",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:600},children:p.order},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:393,columnNumber:17},void 0),e.jsxDEV("div",{style:{flex:1,minWidth:0},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px",flexWrap:"wrap"},children:[e.jsxDEV("h4",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-base, 16px)",fontWeight:600,color:"var(--foreground, #101828)",margin:0,lineHeight:"24px"},children:p.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:416,columnNumber:21},void 0),e.jsxDEV("code",{style:{background:"var(--muted, #f2f4f7)",padding:"2px 8px",borderRadius:"var(--radius, 8px)",fontFamily:"JetBrains Mono, Courier New, monospace",fontSize:"var(--text-xs, 12px)",color:"var(--muted-foreground, #667085)",fontWeight:400,lineHeight:"18px"},children:p.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:428,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:415,columnNumber:19},void 0),e.jsxDEV("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--muted-foreground, #667085)",lineHeight:"21px",margin:0},children:p.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:445,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:413,columnNumber:17},void 0),e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsxDEV("span",{style:{padding:"4px 12px",height:"26px",display:"inline-flex",alignItems:"center",borderRadius:"999px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-xs, 12px)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px",lineHeight:"18px",background:p.required==="BẮT BUỘC"?"rgba(217, 45, 32, 0.1)":"rgba(0, 92, 182, 0.1)",color:p.required==="BẮT BUỘC"?"var(--destructive, #d92d20)":"var(--primary, #005cb6)"},children:p.required},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:460,columnNumber:19},void 0),e.jsxDEV(Me,{size:20,style:{color:"var(--muted-foreground, #667085)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:485,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:459,columnNumber:17},void 0)]},p.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:382,columnNumber:15},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:353,columnNumber:9},void 0),e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 24px",borderTop:"1px solid var(--border, #d0d5dd)"},children:[e.jsxDEV("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--muted-foreground, #667085)",margin:0,lineHeight:"21px"},children:["Hiển thị ",T.length," / ",c.length," tiêu chí"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:502,columnNumber:11},void 0),e.jsxDEV("button",{onClick:s,style:{height:"41px",padding:"10px 18px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--primary-foreground, #ffffff)",background:"var(--primary, #005cb6)",border:"none",borderRadius:"var(--radius, 8px)",cursor:"pointer",transition:"all 0.2s",lineHeight:"21px"},onMouseEnter:p=>{p.currentTarget.style.opacity="0.9"},onMouseLeave:p=>{p.currentTarget.style.opacity="1"},children:"Đóng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:513,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:493,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:84,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormCriteriaModal.tsx",lineNumber:71,columnNumber:5},void 0)},$t=({mode:n,template:s,onClose:r,onSave:u})=>{const c=n==="view",[T,t]=d.useState({code:(s==null?void 0:s.code)||"",name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",status:(s==null?void 0:s.status)||"active"}),[p,V]=d.useState((s==null?void 0:s.criteria)||[]),L=()=>{const f={id:`CRIT_${Date.now()}`,order:p.length+1,code:"",name:"",description:"",inputType:"text",required:"TÙY CHỌN",completionRule:"optional",defaultValue:"",options:[]};V([...p,f])},Q=(f,D,k)=>{V(p.map(I=>I.id===f?{...I,[D]:k}:I))},E=f=>{const D=p.filter(k=>k.id!==f).map((k,I)=>({...k,order:I+1}));V(D),m.success("Đã xóa tiêu chí")},x=()=>{if(!T.code.trim()){m.error("Vui lòng nhập mã biểu mẫu");return}if(!T.name.trim()){m.error("Vui lòng nhập tên biểu mẫu");return}if(p.filter(k=>!k.code.trim()||!k.name.trim()).length>0){m.error("Vui lòng hoàn thiện thông tin tất cả tiêu chí");return}const D={...T,criteria:p};u(D)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.4)",zIndex:9998},onClick:r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:118,columnNumber:7},void 0),e.jsxDEV("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"1000px",maxWidth:"calc(100vw - 32px)",maxHeight:"calc(100vh - 32px)",background:"var(--card, #ffffff)",borderRadius:"var(--radius, 8px)",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",zIndex:9999,display:"flex",flexDirection:"column",overflow:"hidden"},onClick:f=>f.stopPropagation(),children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",borderBottom:"1px solid var(--border, #d0d5dd)"},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxDEV("div",{style:{width:"40px",height:"40px",borderRadius:"var(--radius, 8px)",background:"var(--primary-light, #e6f0fa)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary, #005cb6)"},children:e.jsxDEV(We,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:172,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:160,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-lg, 20px)",fontWeight:600,color:"var(--foreground, #101828)",margin:0,lineHeight:"30px"},children:n==="add"?"Thêm biểu mẫu mới":n==="edit"?"Chỉnh sửa biểu mẫu":"Xem chi tiết biểu mẫu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:175,columnNumber:15},void 0),e.jsxDEV("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--muted-foreground, #667085)",margin:0,marginTop:"2px"},children:n==="add"?"Tạo biểu mẫu mới và thêm tiêu chí kiểm tra":n==="edit"?"Cập nhật thông tin và quản lý tiêu chí":"Thông tin chi tiết của biểu mẫu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:191,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:174,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:159,columnNumber:11},void 0),e.jsxDEV("button",{onClick:r,style:{width:"36px",height:"36px",minWidth:"36px",display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",borderRadius:"var(--radius, 8px)",cursor:"pointer",color:"var(--muted-foreground, #667085)",transition:"all 0.2s"},onMouseEnter:f=>{f.currentTarget.style.background="var(--muted, #f2f4f7)",f.currentTarget.style.color="var(--foreground, #101828)"},onMouseLeave:f=>{f.currentTarget.style.background="transparent",f.currentTarget.style.color="var(--muted-foreground, #667085)"},children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:233,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:150,columnNumber:9},void 0),e.jsxDEV("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[e.jsxDEV("div",{style:{marginBottom:"32px"},children:[e.jsxDEV("h3",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-base, 16px)",fontWeight:600,color:"var(--foreground, #101828)",margin:"0 0 16px 0"},children:"Thông tin cơ bản"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:251,columnNumber:13},void 0),e.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--foreground, #101828)",marginBottom:"6px"},children:["Mã biểu mẫu ",e.jsxDEV("span",{style:{color:"var(--destructive, #d92d20)"},children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:282,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:272,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",value:T.code,onChange:f=>t({...T,code:f.target.value.toUpperCase()}),disabled:c,placeholder:"VD: KT-HANG-001",style:{width:"100%",height:"43px",padding:"10px 14px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:c?"var(--muted, #f2f4f7)":"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",outline:"none",transition:"all 0.2s"},onFocus:f=>{c||(f.currentTarget.style.borderColor="var(--primary, #005cb6)")},onBlur:f=>{f.currentTarget.style.borderColor="var(--border, #d0d5dd)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:284,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:271,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--foreground, #101828)",marginBottom:"6px"},children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:318,columnNumber:17},void 0),e.jsxDEV("select",{value:T.status,onChange:f=>t({...T,status:f.target.value}),disabled:c,style:{width:"100%",height:"43px",padding:"10px 14px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:c?"var(--muted, #f2f4f7)":"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",outline:"none",cursor:c?"not-allowed":"pointer"},children:[e.jsxDEV("option",{value:"active",children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:350,columnNumber:19},void 0),e.jsxDEV("option",{value:"inactive",children:"Không hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:351,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:330,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:317,columnNumber:15},void 0),e.jsxDEV("div",{style:{gridColumn:"1 / -1"},children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--foreground, #101828)",marginBottom:"6px"},children:["Tên biểu mẫu ",e.jsxDEV("span",{style:{color:"var(--destructive, #d92d20)"},children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:367,columnNumber:32},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:357,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",value:T.name,onChange:f=>t({...T,name:f.target.value}),disabled:c,placeholder:"VD: Kiểm tra Cơ sở Kinh doanh Hàng giả",style:{width:"100%",height:"43px",padding:"10px 14px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:c?"var(--muted, #f2f4f7)":"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",outline:"none",transition:"all 0.2s"},onFocus:f=>{c||(f.currentTarget.style.borderColor="var(--primary, #005cb6)")},onBlur:f=>{f.currentTarget.style.borderColor="var(--border, #d0d5dd)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:369,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:356,columnNumber:15},void 0),e.jsxDEV("div",{style:{gridColumn:"1 / -1"},children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--foreground, #101828)",marginBottom:"6px"},children:"Mô tả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:403,columnNumber:17},void 0),e.jsxDEV("textarea",{value:T.description,onChange:f=>t({...T,description:f.target.value}),disabled:c,placeholder:"Nhập mô tả chi tiết về biểu mẫu...",rows:3,style:{width:"100%",padding:"10px 14px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:c?"var(--muted, #f2f4f7)":"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",outline:"none",resize:"vertical",transition:"all 0.2s"},onFocus:f=>{c||(f.currentTarget.style.borderColor="var(--primary, #005cb6)")},onBlur:f=>{f.currentTarget.style.borderColor="var(--border, #d0d5dd)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:415,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:402,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:263,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:246,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxDEV("h3",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-base, 16px)",fontWeight:600,color:"var(--foreground, #101828)",margin:0},children:["Danh sách tiêu chí (",p.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:459,columnNumber:15},void 0),!c&&e.jsxDEV("button",{onClick:L,style:{display:"flex",alignItems:"center",gap:"6px",height:"36px",padding:"8px 14px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--primary, #005cb6)",background:"var(--primary-light, #e6f0fa)",border:"none",borderRadius:"var(--radius, 8px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:f=>{f.currentTarget.style.background="var(--primary, #005cb6)",f.currentTarget.style.color="var(--primary-foreground, #ffffff)"},onMouseLeave:f=>{f.currentTarget.style.background="var(--primary-light, #e6f0fa)",f.currentTarget.style.color="var(--primary, #005cb6)"},children:[e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:498,columnNumber:19},void 0),"Thêm tiêu chí"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:471,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:451,columnNumber:13},void 0),p.length===0?e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"48px 16px",background:"var(--muted, #f2f4f7)",borderRadius:"var(--radius, 8px)",border:"2px dashed var(--border, #d0d5dd)",textAlign:"center"},children:[e.jsxDEV(ve,{size:48,style:{color:"var(--muted-foreground, #667085)",marginBottom:"12px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:518,columnNumber:17},void 0),e.jsxDEV("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-base, 16px)",fontWeight:500,color:"var(--foreground, #101828)",margin:"0 0 4px 0"},children:"Chưa có tiêu chí nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:522,columnNumber:17},void 0),e.jsxDEV("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--muted-foreground, #667085)",margin:0},children:'Nhấn "Thêm tiêu chí" để bắt đầu thêm tiêu chí kiểm tra'},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:533,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:505,columnNumber:15},void 0):e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:p.map((f,D)=>e.jsxDEV("div",{style:{padding:"16px",background:"var(--muted, #f2f4f7)",borderRadius:"var(--radius, 8px)",border:"1px solid var(--border, #d0d5dd)"},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxDEV(is,{size:16,style:{color:"var(--muted-foreground, #667085)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:566,columnNumber:25},void 0),e.jsxDEV("span",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:600,color:"var(--foreground, #101828)"},children:["Tiêu chí #",f.order]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:567,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:565,columnNumber:23},void 0),!c&&e.jsxDEV("button",{onClick:()=>E(f.id),style:{display:"flex",alignItems:"center",gap:"4px",height:"32px",padding:"6px 10px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-xs, 12px)",fontWeight:500,color:"var(--destructive, #d92d20)",background:"transparent",border:"none",borderRadius:"var(--radius, 8px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:k=>{k.currentTarget.style.background="var(--destructive-light, #fee)"},onMouseLeave:k=>{k.currentTarget.style.background="transparent"},children:[e.jsxDEV(Ie,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:604,columnNumber:27},void 0),"Xóa"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:579,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:557,columnNumber:21},void 0),e.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"var(--text-xs, 12px)",fontWeight:500,color:"var(--muted-foreground, #667085)",marginBottom:"4px"},children:"Mã tiêu chí"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:613,columnNumber:25},void 0),e.jsxDEV("input",{type:"text",value:f.code,onChange:k=>Q(f.id,"code",k.target.value.toUpperCase()),disabled:c,placeholder:"VD: STEP_01",style:{width:"100%",height:"36px",padding:"8px 10px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:c?"var(--background, #f9fafb)":"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",outline:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:625,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:612,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"var(--text-xs, 12px)",fontWeight:500,color:"var(--muted-foreground, #667085)",marginBottom:"4px"},children:"Loại input"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:649,columnNumber:25},void 0),e.jsxDEV("select",{value:f.inputType,onChange:k=>Q(f.id,"inputType",k.target.value),disabled:c,style:{width:"100%",height:"36px",padding:"8px 10px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:c?"var(--background, #f9fafb)":"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",outline:"none",cursor:c?"not-allowed":"pointer"},children:[e.jsxDEV("option",{value:"text",children:"Text"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:681,columnNumber:27},void 0),e.jsxDEV("option",{value:"number",children:"Number"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:682,columnNumber:27},void 0),e.jsxDEV("option",{value:"select",children:"Select"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:683,columnNumber:27},void 0),e.jsxDEV("option",{value:"multiselect",children:"Multi-select"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:684,columnNumber:27},void 0),e.jsxDEV("option",{value:"checkbox",children:"Checkbox"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:685,columnNumber:27},void 0),e.jsxDEV("option",{value:"radio",children:"Radio"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:686,columnNumber:27},void 0),e.jsxDEV("option",{value:"textarea",children:"Textarea"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:687,columnNumber:27},void 0),e.jsxDEV("option",{value:"date",children:"Date"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:688,columnNumber:27},void 0),e.jsxDEV("option",{value:"photo",children:"Photo"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:689,columnNumber:27},void 0),e.jsxDEV("option",{value:"gps",children:"GPS"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:690,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:661,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:648,columnNumber:23},void 0),e.jsxDEV("div",{style:{gridColumn:"1 / -1"},children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"var(--text-xs, 12px)",fontWeight:500,color:"var(--muted-foreground, #667085)",marginBottom:"4px"},children:"Tên tiêu chí"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:695,columnNumber:25},void 0),e.jsxDEV("input",{type:"text",value:f.name,onChange:k=>Q(f.id,"name",k.target.value),disabled:c,placeholder:"VD: Xác nhận địa điểm kiểm tra",style:{width:"100%",height:"36px",padding:"8px 10px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:c?"var(--background, #f9fafb)":"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",outline:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:707,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:694,columnNumber:23},void 0),e.jsxDEV("div",{style:{gridColumn:"1 / -1"},children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"var(--text-xs, 12px)",fontWeight:500,color:"var(--muted-foreground, #667085)",marginBottom:"4px"},children:"Mô tả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:731,columnNumber:25},void 0),e.jsxDEV("textarea",{value:f.description,onChange:k=>Q(f.id,"description",k.target.value),disabled:c,placeholder:"Mô tả chi tiết về tiêu chí...",rows:2,style:{width:"100%",padding:"8px 10px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:c?"var(--background, #f9fafb)":"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",outline:"none",resize:"vertical"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:743,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:730,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"var(--text-xs, 12px)",fontWeight:500,color:"var(--muted-foreground, #667085)",marginBottom:"4px"},children:"Bắt buộc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:767,columnNumber:25},void 0),e.jsxDEV("select",{value:f.required,onChange:k=>Q(f.id,"required",k.target.value),disabled:c,style:{width:"100%",height:"36px",padding:"8px 10px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground, #101828)",background:c?"var(--background, #f9fafb)":"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",outline:"none",cursor:c?"not-allowed":"pointer"},children:[e.jsxDEV("option",{value:"BẮT BUỘC",children:"BẮT BUỘC"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:799,columnNumber:27},void 0),e.jsxDEV("option",{value:"TÙY CHỌN",children:"TÙY CHỌN"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:800,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:779,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:766,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:611,columnNumber:21},void 0)]},f.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:547,columnNumber:19},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:545,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:450,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:238,columnNumber:9},void 0),e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 24px",borderTop:"1px solid var(--border, #d0d5dd)",background:"var(--muted, #f2f4f7)"},children:[e.jsxDEV("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--muted-foreground, #667085)",margin:0},children:[p.length," tiêu chí"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:822,columnNumber:11},void 0),e.jsxDEV("div",{style:{display:"flex",gap:"12px"},children:[e.jsxDEV("button",{onClick:r,style:{height:"41px",padding:"10px 18px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--foreground, #101828)",background:"var(--card, #ffffff)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 8px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:f=>{f.currentTarget.style.background="var(--muted, #f2f4f7)"},onMouseLeave:f=>{f.currentTarget.style.background="var(--card, #ffffff)"},children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:833,columnNumber:13},void 0),!c&&e.jsxDEV("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:"8px",height:"41px",padding:"10px 18px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",fontWeight:500,color:"var(--primary-foreground, #ffffff)",background:"var(--primary, #005cb6)",border:"none",borderRadius:"var(--radius, 8px)",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:f=>{f.currentTarget.style.opacity="0.9"},onMouseLeave:f=>{f.currentTarget.style.opacity="1"},children:[e.jsxDEV(oi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:883,columnNumber:17},void 0),n==="add"?"Tạo biểu mẫu":"Lưu thay đổi"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:858,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:832,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:812,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:129,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/FormTemplateModal.tsx",lineNumber:116,columnNumber:5},void 0)},Ut=({onOpenModal:n})=>{const[s,r]=d.useState([]),[u,c]=d.useState([]),[T,t]=d.useState(!0),[p,V]=d.useState(""),[L,Q]=d.useState("all"),[E,x]=d.useState(!1),[f,D]=d.useState(!1),[k,I]=d.useState("add"),[z,F]=d.useState(null),[U,O]=d.useState(!1),w=d.useRef(null),Z=10,B=Je(u,Z),{currentPage:R,setCurrentPage:S,totalPages:ee,currentItems:ne}=B,A=l=>{S(l)},y=async()=>{try{t(!0),await new Promise(l=>setTimeout(l,300)),r(Si),c(Si)}catch(l){console.error("❌ Error loading forms:",l),m.error("Lỗi tải dữ liệu biểu mẫu")}finally{t(!1)}};d.useEffect(()=>{y()},[]),d.useEffect(()=>{const l=j=>{j.target.closest(".importDropdown")||O(!1)};return U&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[U]),d.useEffect(()=>{let l=[...s];if(p.trim()){const j=p.toLowerCase();l=l.filter(_=>_.name.toLowerCase().includes(j)||_.code.toLowerCase().includes(j)||_.description&&_.description.toLowerCase().includes(j))}L!=="all"&&(l=l.filter(j=>L==="active"?j.status==="active":j.status!=="active")),c(l)},[p,L,s]);const $=l=>{F(l),x(!0)},M=()=>{F(null),I("add"),D(!0)},v=l=>{F(l),I("edit"),D(!0)},N=l=>{F(l),I("view"),D(!0)},g=l=>{if(k==="add"){const j={id:`FORM_${Date.now()}`,code:l.code||"",name:l.name||"",description:l.description||"",status:l.status||"active",criteria:l.criteria||[],createdAt:new Date().toISOString().split("T")[0],createdBy:"Admin",version:"1.0"};r([...s,j]),m.success("Thêm biểu mẫu thành công")}else k==="edit"&&z&&(r(s.map(j=>j.id===z.id?{...j,...l}:j)),m.success("Cập nhật biểu mẫu thành công"));D(!1)},o=l=>{window.confirm(`Bạn có chắc chắn muốn xóa biểu mẫu "${l.name}"?`)&&(r(s.filter(j=>j.id!==l.id)),m.success("Xóa biểu mẫu thành công"))},a=()=>{try{const l=u.map((H,K)=>({STT:K+1,"Mã biểu mẫu":H.code,"Tên biểu mẫu":H.name,"Mô tả":H.description||"","Số tiêu chí":H.criteria.length,"Trạng thái":H.status==="active"?"Hoạt động":"Không hoạt động","Ngày tạo":H.createdAt,"Người tạo":H.createdBy})),j=ce.json_to_sheet(l),_=ce.book_new();ce.book_append_sheet(_,j,"Biểu mẫu");const X=[{wch:5},{wch:15},{wch:40},{wch:50},{wch:12},{wch:15},{wch:12},{wch:20}];j["!cols"]=X,Fe(_,`Bieu_mau_${new Date().toISOString().split("T")[0]}.xlsx`),m.success("Đã xuất file Excel thành công")}catch(l){console.error("❌ Error exporting Excel:",l),m.error("Lỗi xuất file Excel")}},h=()=>{O(!1);try{const l=[{"Mã biểu mẫu":"KT-XXX-001","Tên biểu mẫu":"Tên biểu mẫu mẫu","Mô tả":"Mô tả chi tiết về biểu mẫu","Trạng thái":"Hoạt động"},{"Mã biểu mẫu":"KT-XXX-002","Tên biểu mẫu":"Biểu mẫu kiểm tra mẫu","Mô tả":"Mô tả chi tiết","Trạng thái":"Hoạt động"}],j=ce.json_to_sheet(l),_=[{wch:15},{wch:50},{wch:50},{wch:15}];j["!cols"]=_;const X=ce.book_new();ce.book_append_sheet(X,j,"Mẫu Biểu mẫu");const H=[{CỘT:"Mã biểu mẫu","BẮT BUỘC":"Có","ĐỊNH DẠNG":"Text","GHI CHÚ":"Mã biểu mẫu (VD: KT-HANG-001)"},{CỘT:"Tên biểu mẫu","BẮT BUỘC":"Có","ĐỊNH DẠNG":"Text","GHI CHÚ":"Tên đầy đủ của biểu mẫu"},{CỘT:"Mô tả","BẮT BUỘC":"Không","ĐỊNH DẠNG":"Text","GHI CHÚ":"Mô tả chi tiết về biểu mẫu"},{CỘT:"Trạng thái","BẮT BUỘC":"Không","ĐỊNH DẠNG":"Text","GHI CHÚ":'Ghi "Hoạt động" hoặc để trống'}],K=ce.json_to_sheet(H),q=[{wch:20},{wch:15},{wch:15},{wch:50}];K["!cols"]=q,ce.book_append_sheet(X,K,"Hướng dẫn"),Fe(X,`Mau_Bieu_mau_${new Date().toISOString().split("T")[0]}.xlsx`),m.success("Đã tải file mẫu thành công")}catch(l){console.error("❌ Error generating template:",l),m.error("Lỗi tải file mẫu")}},b=async l=>{var _;O(!1);const j=(_=l.target.files)==null?void 0:_[0];if(j)try{m.info("Đang xử lý file Excel...");const X=new FileReader;X.onload=async H=>{var K;try{const q=(K=H.target)==null?void 0:K.result,ue=Zi(q,{type:"binary"}),W=ue.SheetNames[0],te=ue.Sheets[W],pe=ce.sheet_to_json(te);let Te=0,fe=0;for(const Ne of pe)try{if(!Ne["Mã biểu mẫu"]||!Ne["Tên biểu mẫu"]){fe++;continue}Te++}catch(xe){console.error("❌ Error importing row:",{error:xe,row:Ne}),fe++}Te>0&&(m.success(`Đã nhập thành công ${Te} biểu mẫu`),await y()),fe>0&&m.warning(`${fe} dòng bị lỗi hoặc bỏ qua`)}catch(q){console.error("❌ Parse error:",q),m.error("Lỗi đọc file Excel")}},X.readAsBinaryString(j)}catch(X){console.error("❌ Import error:",X),m.error("Lỗi nhập file Excel")}finally{w.current&&(w.current.value="")}};return T?e.jsxDEV("div",{className:P.loading,children:e.jsxDEV(he,{size:32,className:P.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:355,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:354,columnNumber:7},void 0):e.jsxDEV("div",{className:P.container,children:[e.jsxDEV("div",{className:P.filtersCard,children:e.jsxDEV("div",{className:P.filtersRow,children:[e.jsxDEV("div",{className:P.searchWrapper,children:[e.jsxDEV(_e,{size:18,className:P.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:367,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm theo mã, tên, mô tả...",value:p,onChange:l=>V(l.target.value),className:P.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:368,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:366,columnNumber:11},void 0),e.jsxDEV("select",{value:L,onChange:l=>Q(l.target.value),className:P.searchInput,style:{width:"180px",minWidth:"unset"},children:[e.jsxDEV("option",{value:"all",children:"Tất cả trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:384,columnNumber:13},void 0),e.jsxDEV("option",{value:"active",children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:385,columnNumber:13},void 0),e.jsxDEV("option",{value:"inactive",children:"Không hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:386,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:378,columnNumber:11},void 0),e.jsxDEV("div",{className:P.actionsGroup,children:[e.jsxDEV("button",{onClick:y,className:P.btnSecondary,children:[e.jsxDEV(ge,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:392,columnNumber:15},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:391,columnNumber:13},void 0),e.jsxDEV("button",{onClick:a,className:P.btnSecondary,children:[e.jsxDEV(Pe,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:396,columnNumber:15},void 0),"Xuất Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:395,columnNumber:13},void 0),e.jsxDEV("div",{className:"importDropdown",style:{position:"relative",display:"inline-block"},children:[e.jsxDEV("button",{className:P.btnSecondary,onClick:()=>O(!U),style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxDEV(mi,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:407,columnNumber:17},void 0),"Nhập dữ liệu",e.jsxDEV(Me,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:409,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:402,columnNumber:15},void 0),U&&e.jsxDEV("div",{style:{position:"absolute",top:"calc(100% + 4px)",right:0,minWidth:"200px",background:"var(--card)",border:"1px solid var(--border)",borderRadius:"var(--radius-md, 8px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:100,overflow:"hidden"},children:[e.jsxDEV("button",{onClick:()=>{var l;return(l=w.current)==null?void 0:l.click()},style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 16px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground)",background:"transparent",border:"none",width:"100%",textAlign:"left",cursor:"pointer"},onMouseEnter:l=>l.currentTarget.style.background="var(--muted)",onMouseLeave:l=>l.currentTarget.style.background="transparent",children:[e.jsxDEV(mi,{size:16,style:{color:"var(--muted-foreground)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:446,columnNumber:21},void 0),"Từ file Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:427,columnNumber:19},void 0),e.jsxDEV("button",{onClick:h,style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 16px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground)",background:"transparent",border:"none",width:"100%",textAlign:"left",cursor:"pointer"},onMouseEnter:l=>l.currentTarget.style.background="var(--muted)",onMouseLeave:l=>l.currentTarget.style.background="transparent",children:[e.jsxDEV(ye,{size:16,style:{color:"var(--muted-foreground)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:468,columnNumber:21},void 0),"Tải mẫu nhập liệu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:449,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:413,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:401,columnNumber:13},void 0),e.jsxDEV("input",{ref:w,type:"file",accept:".xlsx,.xls",onChange:b,style:{display:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:476,columnNumber:13},void 0),e.jsxDEV("button",{onClick:M,className:P.btnPrimary,children:[e.jsxDEV(Le,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:488,columnNumber:15},void 0),"Thêm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:484,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:390,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:364,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:363,columnNumber:7},void 0),u.length===0?e.jsxDEV("div",{className:P.emptyState,children:[e.jsxDEV(ve,{size:48,style:{color:"var(--muted-foreground)",marginBottom:"16px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:498,columnNumber:11},void 0),e.jsxDEV("p",{children:"Không tìm thấy biểu mẫu nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:499,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:497,columnNumber:9},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:P.tableCard,children:e.jsxDEV("div",{className:P.tableWrapper,children:e.jsxDEV("table",{className:P.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"60px"},children:"STT"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:508,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"130px"},children:"Mã biểu mẫu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:509,columnNumber:21},void 0),e.jsxDEV("th",{children:"Tên biểu mẫu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:510,columnNumber:21},void 0),e.jsxDEV("th",{children:"Mô tả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:511,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"110px"},children:"Số tiêu chí"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:512,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"130px"},children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:513,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"200px"},children:"Thao tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:514,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:507,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:506,columnNumber:17},void 0),e.jsxDEV("tbody",{children:ne.map((l,j)=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:(R-1)*Z+j+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:520,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{className:P.iconBadge,children:l.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:522,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:521,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:P.nameCell,children:e.jsxDEV("span",{className:P.nameText,children:l.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:526,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:525,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:524,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{color:"var(--muted-foreground)",fontSize:"var(--text-sm)"},children:l.description?l.description.length>60?l.description.substring(0,60)+"...":l.description:"—"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:530,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:529,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",background:"var(--muted)",color:"var(--primary)",fontSize:"var(--text-sm)",fontWeight:600,borderRadius:"var(--radius)"},children:[l.criteria.length," tiêu chí"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:539,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:538,columnNumber:23},void 0),e.jsxDEV("td",{children:l.status==="active"?e.jsxDEV("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",background:"var(--success-light, #e6f4ea)",color:"var(--success, #0f9d58)",fontSize:"var(--text-sm)",fontWeight:500,borderRadius:"var(--radius)"},children:[e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:569,columnNumber:29},void 0),"Hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:556,columnNumber:27},void 0):e.jsxDEV("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",background:"var(--muted)",color:"var(--muted-foreground)",fontSize:"var(--text-sm)",fontWeight:500,borderRadius:"var(--radius)"},children:[e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:586,columnNumber:29},void 0),"Không hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:573,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:554,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:P.actionButtons,children:[e.jsxDEV("button",{className:P.btnIcon,onClick:()=>$(l),title:"Xem tiêu chí",children:e.jsxDEV(Wi,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:598,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:593,columnNumber:27},void 0),e.jsxDEV("button",{className:P.btnIcon,onClick:()=>N(l),title:"Xem chi tiết",children:e.jsxDEV(ke,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:605,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:600,columnNumber:27},void 0),e.jsxDEV("button",{className:P.btnIcon,onClick:()=>v(l),title:"Chỉnh sửa",children:e.jsxDEV(Ae,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:612,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:607,columnNumber:27},void 0),e.jsxDEV("button",{className:P.btnIcon,onClick:()=>o(l),title:"Xóa",children:e.jsxDEV(Ie,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:619,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:614,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:592,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:591,columnNumber:23},void 0)]},l.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:519,columnNumber:21},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:517,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:505,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:504,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:503,columnNumber:11},void 0),e.jsxDEV($e,{currentPage:R,totalPages:ee,totalItems:u.length,itemsPerPage:Z,onPageChange:A},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:631,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:502,columnNumber:9},void 0),E&&z&&e.jsxDEV(Ft,{template:z,onClose:()=>x(!1)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:643,columnNumber:9},void 0),f&&e.jsxDEV($t,{template:z,mode:k,onClose:()=>D(!1),onSave:g},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:651,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/FormTemplatesTab.tsx",lineNumber:361,columnNumber:5},void 0)},Fi=[{id:"NR-001",rule_code:"SLA_RISK_HIGH",rule_name:"Cảnh báo SLA vượt ngưỡng nguy hiểm",description:"Thông báo khi nhiệm vụ có SLA >= 2 giờ và ưu tiên cao chưa được xử lý",event_type:"SLA_AT_RISK",event_condition:{sla_hours:2,priority:"High"},recipient_roles:["Supervisor","Director"],scope_type:"UNIT",channels:["Push","Email"],cooldown_minutes:30,status:"Active",priority:"High",created_by:"Admin System",created_at:"2024-01-01 08:00:00",updated_at:"2024-01-14 10:30:00"},{id:"NR-002",rule_code:"LEAD_SENSITIVE",rule_name:"Lead nhạy cảm được tạo",description:'Thông báo ngay lập tức khi lead có nhãn "Sensitive" được tạo trong hệ thống',event_type:"LEAD_SENSITIVE_CREATED",event_condition:{label_code:"SENSITIVE"},recipient_roles:["Admin","IT","Director"],scope_type:"GLOBAL",channels:["Push","Email","System"],cooldown_minutes:0,status:"Active",priority:"High",created_by:"Nguyễn Văn A",created_at:"2024-01-05 09:00:00",updated_at:"2024-01-12 14:20:00"},{id:"NR-003",rule_code:"MASTER_DATA_CHANGE",rule_name:"Thay đổi dữ liệu master",description:"Thông báo khi có thay đổi dữ liệu master (Categories, Banks, Areas)",event_type:"MASTER_DATA_UPDATED",event_condition:{custom_conditions:{tables:["categories","banks","areas"]}},recipient_roles:["Admin","Analyst"],scope_type:"GLOBAL",channels:["System","Email"],cooldown_minutes:60,status:"Active",priority:"Medium",created_by:"Trần Thị B",created_at:"2024-01-08 11:00:00",updated_at:"2024-01-13 09:15:00"},{id:"NR-004",rule_code:"EXPORT_FAIL",rule_name:"Job xuất dữ liệu thất bại",description:"Thông báo khi job xuất dữ liệu (Report/Audit) thất bại",event_type:"EXPORT_JOB_FAILED",event_condition:{job_type:"REPORT_RUN"},recipient_roles:["IT","Admin"],scope_type:"BY_JOB_OWNER",channels:["Push","System"],cooldown_minutes:15,status:"Active",priority:"Medium",created_by:"Lê Văn C",created_at:"2024-01-10 13:00:00",updated_at:"2024-01-14 08:45:00"},{id:"NR-005",rule_code:"AUDIT_QUERY_ALERT",rule_name:"Truy vấn audit quan trọng",description:"Thông báo khi có truy vấn audit trên dữ liệu nhạy cảm",event_type:"AUDIT_QUERY_EXECUTED",event_condition:{priority:"High",custom_conditions:{sensitive_tables:!0}},recipient_roles:["Admin","Director","IT"],scope_type:"GLOBAL",channels:["Push","Email","System"],cooldown_minutes:0,status:"Active",priority:"High",created_by:"Admin System",created_at:"2024-01-12 07:00:00",updated_at:"2024-01-14 11:00:00"},{id:"NR-006",rule_code:"SLA_RISK_MEDIUM",rule_name:"Cảnh báo SLA mức trung bình",description:"Thông báo khi nhiệm vụ có SLA >= 4 giờ và ưu tiên trung bình",event_type:"SLA_AT_RISK",event_condition:{sla_hours:4,priority:"Medium"},recipient_roles:["Supervisor","Analyst"],scope_type:"SELF_UNIT",channels:["Push"],cooldown_minutes:60,status:"Active",priority:"Medium",created_by:"Phạm Thị D",created_at:"2024-01-06 10:00:00",updated_at:"2024-01-11 15:30:00"},{id:"NR-007",rule_code:"PROVINCE_DATA_UPDATE",rule_name:"Cập nhật dữ liệu cấp tỉnh",description:"Thông báo khi có thay đổi dữ liệu master ở cấp tỉnh",event_type:"MASTER_DATA_UPDATED",event_condition:{custom_conditions:{level:"province"}},recipient_roles:["Director","Analyst"],scope_type:"PROVINCE",channels:["Email","System"],cooldown_minutes:120,status:"Active",priority:"Low",created_by:"Nguyễn Văn E",created_at:"2024-01-09 12:00:00",updated_at:"2024-01-13 16:00:00"},{id:"NR-008",rule_code:"EXPORT_AUDIT_FAIL",rule_name:"Xuất audit log thất bại",description:"Thông báo khi job xuất audit log thất bại (cao hơn report thường)",event_type:"EXPORT_JOB_FAILED",event_condition:{job_type:"AUDIT_EXCERPT"},recipient_roles:["IT","Admin","Director"],scope_type:"GLOBAL",channels:["Push","Email","System"],cooldown_minutes:0,status:"Active",priority:"High",created_by:"Admin System",created_at:"2024-01-11 08:30:00",updated_at:"2024-01-14 09:00:00"},{id:"NR-009",rule_code:"LEAD_VIP",rule_name:"Lead VIP được tạo",description:'Thông báo khi lead có nhãn "VIP" được tạo (Rule này đã tắt)',event_type:"LEAD_SENSITIVE_CREATED",event_condition:{label_code:"VIP"},recipient_roles:["Director","Supervisor"],scope_type:"UNIT",channels:["Push","Email"],cooldown_minutes:30,status:"Disabled",priority:"Medium",created_by:"Trần Thị F",created_at:"2024-01-07 14:00:00",updated_at:"2024-01-12 10:00:00"},{id:"NR-010",rule_code:"SLA_RISK_LOW",rule_name:"Cảnh báo SLA mức thấp",description:"Thông báo khi nhiệm vụ có SLA >= 8 giờ và ưu tiên thấp",event_type:"SLA_AT_RISK",event_condition:{sla_hours:8,priority:"Low"},recipient_roles:["Reporter","Analyst"],scope_type:"SELF_UNIT",channels:["System"],cooldown_minutes:240,status:"Active",priority:"Low",created_by:"Lê Văn G",created_at:"2024-01-04 16:00:00",updated_at:"2024-01-10 11:30:00"}],$i=n=>({SLA_AT_RISK:"SLA vượt ngưỡng",LEAD_SENSITIVE_CREATED:"Lead nhạy cảm",MASTER_DATA_UPDATED:"Dữ liệu master thay đổi",EXPORT_JOB_FAILED:"Xuất dữ liệu thất bại",AUDIT_QUERY_EXECUTED:"Truy vấn audit"})[n]||n,qt=n=>({SLA_AT_RISK:"Kích hoạt khi nhiệm vụ vượt ngưỡng SLA an toàn",LEAD_SENSITIVE_CREATED:"Kích hoạt khi tạo lead có nhãn nhạy cảm",MASTER_DATA_UPDATED:"Kích hoạt khi có thay đổi dữ liệu danh mục",EXPORT_JOB_FAILED:"Kích hoạt khi job xuất dữ liệu thất bại",AUDIT_QUERY_EXECUTED:"Kích hoạt khi có truy vấn audit quan trọng"})[n]||"",Ui=n=>({SELF_UNIT:"Đơn vị riêng",UNIT:"Đơn vị",PROVINCE:"Cấp tỉnh",GLOBAL:"Toàn hệ thống",BY_JOB_OWNER:"Theo người tạo"})[n]||n,mn=n=>{switch(n){case"Active":return{background:"var(--success-light, #e6f4ea)",color:"var(--success, #0f9d58)"};case"Disabled":return{background:"var(--muted)",color:"var(--muted-foreground)"};default:return{background:"var(--muted)",color:"var(--foreground)"}}},un=n=>{switch(n){case"High":return{background:"var(--destructive-light, #fce8e6)",color:"var(--destructive, #d32f2f)"};case"Medium":return{background:"var(--warning-light, #fff3e0)",color:"var(--warning, #f57c00)"};case"Low":return{background:"var(--info-light, #e3f2fd)",color:"var(--info, #1976d2)"};default:return{background:"var(--muted)",color:"var(--foreground)"}}},kn=n=>{const s={Push:"Push",Email:"Email",System:"Hệ thống"};return n.map(r=>s[r]).join(", ")},An=n=>{const s={Supervisor:"Giám sát",Analyst:"Phân tích",Reporter:"Báo cáo",Admin:"Quản trị",IT:"IT",Director:"Giám đốc"};return n.map(r=>s[r]).join(", ")},Rn=["SLA_AT_RISK","LEAD_SENSITIVE_CREATED","MASTER_DATA_UPDATED","EXPORT_JOB_FAILED","AUDIT_QUERY_EXECUTED"],Pn=["Supervisor","Analyst","Reporter","Admin","IT","Director"],Bn=["SELF_UNIT","UNIT","PROVINCE","GLOBAL","BY_JOB_OWNER"],zn=["Push","Email","System"],Gt=(n=Fi)=>{try{const s=n.map((t,p)=>({STT:p+1,"Mã Quy Tắc":t.rule_code,"Tên Quy Tắc":t.rule_name,"Mô Tả":t.description,"Loại Sự Kiện":$i(t.event_type),"Vai Trò Nhận":An(t.recipient_roles),"Phạm Vi":Ui(t.scope_type),Kênh:kn(t.channels),"Cooldown (phút)":t.cooldown_minutes||"","Trạng Thái":t.status,"Ưu Tiên":t.priority,"Người Tạo":t.created_by,"Ngày Tạo":t.created_at,"Cập Nhật":t.updated_at})),r=ce.json_to_sheet(s),u=ce.book_new();ce.book_append_sheet(u,r,"Notification Rules");const c=[{wch:5},{wch:20},{wch:40},{wch:60},{wch:25},{wch:30},{wch:20},{wch:30},{wch:15},{wch:12},{wch:12},{wch:20},{wch:20},{wch:20}];r["!cols"]=c;const T=`Notification_Rules_${new Date().toISOString().split("T")[0]}.xlsx`;return Fe(u,T),{success:!0,fileName:T}}catch(s){return console.error("❌ Error exporting to Excel:",s),{success:!1,error:s}}},Ot=()=>{try{const n=[{rule_code:"SLA_ALERT_001",rule_name:"Ví dụ: Cảnh báo SLA",description:"Mô tả chi tiết về quy tắc",event_type:"SLA_AT_RISK",condition_json:'{"sla_hours":2,"priority":"High"}',recipient_roles:"Supervisor,Director",scope_type:"UNIT",channels:"Push,Email",status:"Active",priority:"High",cooldown_minutes:30},{rule_code:"LEAD_SENS_001",rule_name:"Ví dụ: Lead nhạy cảm",description:"Thông báo khi tạo lead nhạy cảm",event_type:"LEAD_SENSITIVE_CREATED",condition_json:'{"label_code":"SENSITIVE"}',recipient_roles:"Admin,IT",scope_type:"GLOBAL",channels:"Push,Email,System",status:"Active",priority:"High",cooldown_minutes:0}],s=ce.json_to_sheet(n),r=[{wch:20},{wch:40},{wch:60},{wch:25},{wch:40},{wch:30},{wch:20},{wch:30},{wch:12},{wch:12},{wch:15}];s["!cols"]=r;const u=ce.book_new();ce.book_append_sheet(u,s,"Rules");const c=[{MÃ:"SLA_AT_RISK",TÊN:"SLA vượt ngưỡng","MÔ TẢ":"Kích hoạt khi nhiệm vụ vượt ngưỡng SLA an toàn"},{MÃ:"LEAD_SENSITIVE_CREATED",TÊN:"Lead nhạy cảm","MÔ TẢ":"Kích hoạt khi tạo lead có nhãn nhạy cảm"},{MÃ:"MASTER_DATA_UPDATED",TÊN:"Dữ liệu master thay đổi","MÔ TẢ":"Kích hoạt khi có thay đổi dữ liệu danh mục"},{MÃ:"EXPORT_JOB_FAILED",TÊN:"Xuất dữ liệu thất bại","MÔ TẢ":"Kích hoạt khi job xuất dữ liệu thất bại"},{MÃ:"AUDIT_QUERY_EXECUTED",TÊN:"Truy vấn audit","MÔ TẢ":"Kích hoạt khi có truy vấn audit quan trọng"}],T=ce.json_to_sheet(c);T["!cols"]=[{wch:25},{wch:30},{wch:60}],ce.book_append_sheet(u,T,"Event Types");const t=[{MÃ:"Supervisor",TÊN:"Giám sát"},{MÃ:"Analyst",TÊN:"Phân tích"},{MÃ:"Reporter",TÊN:"Báo cáo"},{MÃ:"Admin",TÊN:"Quản trị"},{MÃ:"IT",TÊN:"IT"},{MÃ:"Director",TÊN:"Giám đốc"}],p=ce.json_to_sheet(t);p["!cols"]=[{wch:20},{wch:20}],ce.book_append_sheet(u,p,"Roles");const V=[{MÃ:"SELF_UNIT",TÊN:"Đơn vị riêng","MÔ TẢ":"Chỉ áp dụng cho đơn vị của chính mình"},{MÃ:"UNIT",TÊN:"Đơn vị","MÔ TẢ":"Áp dụng cho một đơn vị cụ thể"},{MÃ:"PROVINCE",TÊN:"Cấp tỉnh","MÔ TẢ":"Áp dụng cho toàn bộ tỉnh/thành phố"},{MÃ:"GLOBAL",TÊN:"Toàn hệ thống","MÔ TẢ":"Áp dụng cho toàn bộ hệ thống"},{MÃ:"BY_JOB_OWNER",TÊN:"Theo người tạo","MÔ TẢ":"Gửi cho người sở hữu job/task"}],L=ce.json_to_sheet(V);L["!cols"]=[{wch:20},{wch:20},{wch:60}],ce.book_append_sheet(u,L,"Scope Types");const Q=[{MÃ:"Push",TÊN:"Push Notification"},{MÃ:"Email",TÊN:"Email"},{MÃ:"System",TÊN:"Thông báo hệ thống"}],E=ce.json_to_sheet(Q);E["!cols"]=[{wch:20},{wch:30}],ce.book_append_sheet(u,E,"Channels");const x=[{CỘT:"rule_code","BẮT BUỘC":"Có","ĐỊNH DẠNG":"Text (unique)","VÍ DỤ":"SLA_ALERT_001","GHI CHÚ":"Mã quy tắc duy nhất, không trùng lặp"},{CỘT:"rule_name","BẮT BUỘC":"Có","ĐỊNH DẠNG":"Text","VÍ DỤ":"Cảnh báo SLA vượt ngưỡng","GHI CHÚ":"Tên quy tắc dễ hiểu"},{CỘT:"description","BẮT BUỘC":"Không","ĐỊNH DẠNG":"Text","VÍ DỤ":"Mô tả chi tiết...","GHI CHÚ":"Mô tả chi tiết về quy tắc"},{CỘT:"event_type","BẮT BUỘC":"Có","ĐỊNH DẠNG":"Enum","VÍ DỤ":"SLA_AT_RISK","GHI CHÚ":'Xem sheet "Event Types"'},{CỘT:"condition_json","BẮT BUỘC":"Không","ĐỊNH DẠNG":"JSON","VÍ DỤ":'{"sla_hours":2}',"GHI CHÚ":"Điều kiện kích hoạt dạng JSON"},{CỘT:"recipient_roles","BẮT BUỘC":"Có","ĐỊNH DẠNG":"CSV","VÍ DỤ":"Supervisor,Director","GHI CHÚ":"Danh sách vai trò, cách nhau bởi dấu phẩy"},{CỘT:"scope_type","BẮT BUỘC":"Có","ĐỊNH DẠNG":"Enum","VÍ DỤ":"UNIT","GHI CHÚ":'Xem sheet "Scope Types"'},{CỘT:"channels","BẮT BUỘC":"Có","ĐỊNH DẠNG":"CSV","VÍ DỤ":"Push,Email","GHI CHÚ":"Danh sách kênh, cách nhau bởi dấu phẩy"},{CỘT:"status","BẮT BUỘC":"Có","ĐỊNH DẠNG":"Enum","VÍ DỤ":"Active","GHI CHÚ":"Active hoặc Disabled"},{CỘT:"priority","BẮT BUỘC":"Có","ĐỊNH DẠNG":"Enum","VÍ DỤ":"High","GHI CHÚ":"Low, Medium, hoặc High"},{CỘT:"cooldown_minutes","BẮT BUỘC":"Không","ĐỊNH DẠNG":"Number","VÍ DỤ":"30","GHI CHÚ":"Thời gian chờ giữa các lần gửi (phút)"}],f=ce.json_to_sheet(x);f["!cols"]=[{wch:20},{wch:12},{wch:20},{wch:30},{wch:60}],ce.book_append_sheet(u,f,"Hướng dẫn");const D=`Mau_Notification_Rules_${new Date().toISOString().split("T")[0]}.xlsx`;return Fe(u,D),{success:!0,fileName:D}}catch(n){return console.error("❌ Error generating template:",n),{success:!1,error:n}}},Wt=async n=>{try{return new Promise((s,r)=>{const u=new FileReader;u.onload=c=>{var T;try{const t=(T=c.target)==null?void 0:T.result,p=Zi(t,{type:"binary"}),V=p.SheetNames[0],L=p.Sheets[V],Q=ce.sheet_to_json(L),E=[],x=[];Q.forEach((f,D)=>{var k,I;try{if(!f.rule_code||!f.rule_name||!f.event_type){x.push(`Dòng ${D+2}: Thiếu thông tin bắt buộc`);return}if(!Rn.includes(f.event_type)){x.push(`Dòng ${D+2}: event_type không hợp lệ: ${f.event_type}`);return}const z=(k=f.recipient_roles)==null?void 0:k.split(",").map(w=>w.trim()).filter(w=>Pn.includes(w));if(!z||z.length===0){x.push(`Dòng ${D+2}: recipient_roles không hợp lệ`);return}const F=(I=f.channels)==null?void 0:I.split(",").map(w=>w.trim()).filter(w=>zn.includes(w));if(!F||F.length===0){x.push(`Dòng ${D+2}: channels không hợp lệ`);return}if(!Bn.includes(f.scope_type)){x.push(`Dòng ${D+2}: scope_type không hợp lệ: ${f.scope_type}`);return}let U={};if(f.condition_json)try{U=JSON.parse(f.condition_json)}catch{x.push(`Dòng ${D+2}: condition_json không phải JSON hợp lệ`);return}const O={id:`NR-${Date.now()}-${D}`,rule_code:f.rule_code,rule_name:f.rule_name,description:f.description||"",event_type:f.event_type,event_condition:U,recipient_roles:z,scope_type:f.scope_type,channels:F,cooldown_minutes:f.cooldown_minutes?parseInt(f.cooldown_minutes):void 0,status:f.status==="Active"?"Active":"Disabled",priority:f.priority||"Medium",created_by:"Import",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};E.push(O)}catch(z){x.push(`Dòng ${D+2}: Lỗi parse - ${z}`)}}),s({success:!0,data:E,errors:x})}catch(t){r({success:!1,errors:[`Lỗi đọc file Excel: ${t}`]})}},u.onerror=()=>{r({success:!1,errors:["Lỗi đọc file"]})},u.readAsBinaryString(n)})}catch(s){return{success:!1,errors:[`${s}`]}}},Jt=({onOpenModal:n})=>{const[s,r]=d.useState([]),[u,c]=d.useState([]),[T,t]=d.useState(!0),[p,V]=d.useState(""),[L,Q]=d.useState("all"),[E,x]=d.useState("all"),[f,D]=d.useState("all"),[k,I]=d.useState("all"),[z,F]=d.useState("all"),[U,O]=d.useState(!1),w=d.useRef(null),Z=15,B=Je(u,Z),{currentPage:R,setCurrentPage:S,totalPages:ee,currentItems:ne,totalItems:A}=B,y=b=>{S(b)},$=b=>{S(1)},M=async()=>{try{t(!0),await new Promise(b=>setTimeout(b,300)),r(Fi),c(Fi)}catch(b){console.error("❌ Error loading rules:",b),m.error("Lỗi tải dữ liệu quy tắc thông báo")}finally{t(!1)}};d.useEffect(()=>{M()},[]),d.useEffect(()=>{const b=l=>{l.target.closest(".importDropdown")||O(!1)};return U&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[U]),d.useEffect(()=>{let b=[...s];if(p.trim()){const l=p.toLowerCase();b=b.filter(j=>j.rule_name.toLowerCase().includes(l)||j.rule_code.toLowerCase().includes(l)||j.description.toLowerCase().includes(l))}L!=="all"&&(b=b.filter(l=>l.event_type===L)),E!=="all"&&(b=b.filter(l=>l.channels.includes(E))),f!=="all"&&(b=b.filter(l=>l.status===f)),k!=="all"&&(b=b.filter(l=>l.scope_type===k)),z!=="all"&&(b=b.filter(l=>l.recipient_roles.includes(z))),c(b),S(1)},[p,L,E,f,k,z,s]);const v=()=>{V(""),Q("all"),x("all"),D("all"),I("all"),F("all"),m.success("Đã reset bộ lọc")},N=b=>{window.confirm(`Bạn có chắc chắn muốn vô hiệu hóa quy tắc "${b.rule_name}"?`)&&(r(s.map(l=>l.id===b.id?{...l,status:"Disabled",updated_at:new Date().toISOString()}:l)),m.success("Đã vô hiệu hóa quy tắc"))},g=b=>{r(s.map(l=>l.id===b.id?{...l,status:"Active",updated_at:new Date().toISOString()}:l)),m.success("Đã kích hoạt quy tắc")},o=()=>{Gt(u).success?m.success(`Đã xuất ${u.length} quy tắc ra file Excel`):m.error("Lỗi xuất file Excel")},a=()=>{O(!1),Ot().success?m.success("Đã tải file mẫu thành công"):m.error("Lỗi tải file mẫu")},h=async b=>{var j;O(!1);const l=(j=b.target.files)==null?void 0:j[0];if(l)try{m.info("Đang xử lý file Excel...");const _=await Wt(l);if(_.success&&_.data){_.errors&&_.errors.length>0&&m.warning(`${_.errors.length} lỗi/cảnh báo khi import`);const X=_.data.length;m.success(`Đã nhập thành công ${X} quy tắc`),await M()}else m.error("Lỗi import file Excel"),_.errors&&_.errors.forEach(X=>console.error(X))}catch(_){console.error("❌ Import error:",_),m.error("Lỗi nhập file Excel")}finally{w.current&&(w.current.value="")}};return T?e.jsxDEV("div",{className:P.loading,children:e.jsxDEV(he,{size:32,className:P.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:274,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:273,columnNumber:7},void 0):e.jsxDEV("div",{className:P.container,children:[e.jsxDEV("div",{className:P.filtersCard,children:[e.jsxDEV("div",{className:P.filtersRow,style:{marginBottom:"12px"},children:[e.jsxDEV("div",{className:P.searchWrapper,children:[e.jsxDEV(_e,{size:18,className:P.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:286,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm theo mã, tên, mô tả...",value:p,onChange:b=>V(b.target.value),className:P.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:287,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:285,columnNumber:11},void 0),e.jsxDEV("select",{value:L,onChange:b=>Q(b.target.value),className:P.searchInput,style:{width:"220px",minWidth:"unset"},children:[e.jsxDEV("option",{value:"all",children:"Tất cả loại sự kiện"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:302,columnNumber:13},void 0),Rn.map(b=>e.jsxDEV("option",{value:b,children:$i(b)},b,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:304,columnNumber:15},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:296,columnNumber:11},void 0),e.jsxDEV("select",{value:E,onChange:b=>x(b.target.value),className:P.searchInput,style:{width:"180px",minWidth:"unset"},children:[e.jsxDEV("option",{value:"all",children:"Tất cả kênh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:316,columnNumber:13},void 0),zn.map(b=>e.jsxDEV("option",{value:b,children:b},b,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:318,columnNumber:15},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:310,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:284,columnNumber:9},void 0),e.jsxDEV("div",{className:P.filtersRow,children:[e.jsxDEV("select",{value:f,onChange:b=>D(b.target.value),className:P.searchInput,style:{width:"180px",minWidth:"unset"},children:[e.jsxDEV("option",{value:"all",children:"Tất cả trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:333,columnNumber:13},void 0),e.jsxDEV("option",{value:"Active",children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:334,columnNumber:13},void 0),e.jsxDEV("option",{value:"Disabled",children:"Vô hiệu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:335,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:327,columnNumber:11},void 0),e.jsxDEV("select",{value:k,onChange:b=>I(b.target.value),className:P.searchInput,style:{width:"200px",minWidth:"unset"},children:[e.jsxDEV("option",{value:"all",children:"Tất cả phạm vi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:344,columnNumber:13},void 0),Bn.map(b=>e.jsxDEV("option",{value:b,children:Ui(b)},b,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:346,columnNumber:15},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:338,columnNumber:11},void 0),e.jsxDEV("select",{value:z,onChange:b=>F(b.target.value),className:P.searchInput,style:{width:"180px",minWidth:"unset"},children:[e.jsxDEV("option",{value:"all",children:"Tất cả vai trò"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:358,columnNumber:13},void 0),Pn.map(b=>e.jsxDEV("option",{value:b,children:b},b,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:360,columnNumber:15},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:352,columnNumber:11},void 0),e.jsxDEV("div",{className:P.actionsGroup,style:{marginLeft:"auto"},children:[e.jsxDEV("button",{onClick:v,className:P.btnSecondary,children:[e.jsxDEV(ge,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:369,columnNumber:15},void 0),"Reset"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:368,columnNumber:13},void 0),e.jsxDEV("button",{onClick:o,className:P.btnSecondary,children:[e.jsxDEV(Pe,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:373,columnNumber:15},void 0),"Xuất Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:372,columnNumber:13},void 0),e.jsxDEV("div",{className:"importDropdown",style:{position:"relative",display:"inline-block"},children:[e.jsxDEV("button",{className:P.btnSecondary,onClick:()=>O(!U),style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxDEV(mi,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:384,columnNumber:17},void 0),"Nhập dữ liệu",e.jsxDEV(Me,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:386,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:379,columnNumber:15},void 0),U&&e.jsxDEV("div",{style:{position:"absolute",top:"calc(100% + 4px)",right:0,minWidth:"200px",background:"var(--card)",border:"1px solid var(--border)",borderRadius:"var(--radius-md, 8px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:100,overflow:"hidden"},children:[e.jsxDEV("button",{onClick:()=>{var b;return(b=w.current)==null?void 0:b.click()},style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 16px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground)",background:"transparent",border:"none",width:"100%",textAlign:"left",cursor:"pointer"},onMouseEnter:b=>b.currentTarget.style.background="var(--muted)",onMouseLeave:b=>b.currentTarget.style.background="transparent",children:[e.jsxDEV(mi,{size:16,style:{color:"var(--muted-foreground)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:423,columnNumber:21},void 0),"Từ file Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:404,columnNumber:19},void 0),e.jsxDEV("button",{onClick:a,style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 16px",fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm, 14px)",color:"var(--foreground)",background:"transparent",border:"none",width:"100%",textAlign:"left",cursor:"pointer"},onMouseEnter:b=>b.currentTarget.style.background="var(--muted)",onMouseLeave:b=>b.currentTarget.style.background="transparent",children:[e.jsxDEV(ye,{size:16,style:{color:"var(--muted-foreground)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:445,columnNumber:21},void 0),"Tải mẫu nhập liệu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:426,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:390,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:378,columnNumber:13},void 0),e.jsxDEV("input",{ref:w,type:"file",accept:".xlsx,.xls",onChange:h,style:{display:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:453,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>n==null?void 0:n("add"),className:P.btnPrimary,children:[e.jsxDEV(Le,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:462,columnNumber:15},void 0),"Thêm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:461,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:367,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:326,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:282,columnNumber:7},void 0),u.length===0?e.jsxDEV("div",{className:P.emptyState,children:[e.jsxDEV(Cn,{size:48,style:{color:"var(--muted-foreground)",marginBottom:"16px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:472,columnNumber:11},void 0),e.jsxDEV("p",{style:{fontFamily:"Inter, sans-serif"},children:p||L!=="all"||E!=="all"?"Không tìm thấy quy tắc nào":"Chưa có quy tắc thông báo nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:473,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:471,columnNumber:9},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:P.tableCard,children:e.jsxDEV("div",{className:P.tableWrapper,children:e.jsxDEV("table",{className:P.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"140px"},children:"Mã Quy Tắc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:486,columnNumber:21},void 0),e.jsxDEV("th",{children:"Tên Quy Tắc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:487,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"180px"},children:"Loại Sự Kiện"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:488,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"200px"},children:"Vai Trò Nhận"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:489,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"140px"},children:"Phạm Vi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:490,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"140px"},children:"Kênh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:491,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"120px"},children:"Trạng Thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:492,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"100px"},children:"Ưu Tiên"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:493,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"200px"},children:"Thao Tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:494,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:485,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:484,columnNumber:17},void 0),e.jsxDEV("tbody",{children:ne.map(b=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("code",{style:{fontFamily:"monospace",fontSize:"var(--text-sm)",padding:"2px 6px",background:"var(--muted)",borderRadius:"var(--radius-sm)"},children:b.rule_code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:501,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:500,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:P.nameCell,children:e.jsxDEV("span",{className:P.nameText,children:b.rule_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:515,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:514,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:513,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxDEV("span",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm)"},children:$i(b.event_type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:520,columnNumber:27},void 0),e.jsxDEV("div",{style:{position:"relative",display:"inline-block"},children:e.jsxDEV(we,{size:14,style:{color:"var(--muted-foreground)",cursor:"help"},title:qt(b.event_type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:529,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:528,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:519,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:518,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm)",color:"var(--muted-foreground)"},children:An(b.recipient_roles)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:538,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:537,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm)"},children:Ui(b.scope_type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:549,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:548,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{fontFamily:"Inter, sans-serif",fontSize:"var(--text-sm)",color:"var(--muted-foreground)"},children:kn(b.channels)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:559,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:558,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",background:mn(b.status).background,color:mn(b.status).color,fontSize:"var(--text-sm)",fontWeight:500,borderRadius:"var(--radius)",fontFamily:"Inter, sans-serif"},children:[b.status==="Active"?e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:585,columnNumber:29},void 0):e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:587,columnNumber:29},void 0),b.status==="Active"?"Hoạt động":"Vô hiệu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:570,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:569,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",background:un(b.priority).background,color:un(b.priority).color,fontSize:"var(--text-sm)",fontWeight:500,borderRadius:"var(--radius)",fontFamily:"Inter, sans-serif"},children:b.priority},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:593,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:592,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:P.actionButtons,children:[e.jsxDEV("button",{className:P.btnIcon,onClick:()=>n==null?void 0:n("view",b),title:"Xem chi tiết",children:e.jsxDEV(ke,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:616,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:611,columnNumber:27},void 0),e.jsxDEV("button",{className:P.btnIcon,onClick:()=>n==null?void 0:n("edit",b),title:"Chỉnh sửa",children:e.jsxDEV(Ae,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:623,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:618,columnNumber:27},void 0),b.status==="Active"?e.jsxDEV("button",{className:P.btnIcon,onClick:()=>N(b),title:"Vô hiệu hóa",style:{color:"var(--destructive)"},children:e.jsxDEV(ns,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:632,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:626,columnNumber:29},void 0):e.jsxDEV("button",{className:P.btnIcon,onClick:()=>g(b),title:"Kích hoạt",style:{color:"var(--success)"},children:e.jsxDEV(be,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:641,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:635,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:610,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:609,columnNumber:23},void 0)]},b.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:499,columnNumber:21},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:497,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:483,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:482,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:481,columnNumber:11},void 0),e.jsxDEV($e,{currentPage:R,totalPages:ee,totalItems:A,itemsPerPage:Z,onPageChange:y,onItemsPerPageChange:$},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:654,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:480,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/NotificationRulesTab.tsx",lineNumber:280,columnNumber:5},void 0)},Xt="_container_1hc0b_21",Kt="_header_1hc0b_49",Zt="_headerLeft_1hc0b_63",Yt="_headerIcon_1hc0b_75",eo="_title_1hc0b_89",io="_subtitle_1hc0b_107",no="_filterActionsRow_1hc0b_133",so="_filterGroup_1hc0b_155",ro="_searchBox_1hc0b_169",lo="_searchIcon_1hc0b_181",ao="_searchInput_1hc0b_203",to="_actionGroup_1hc0b_249",oo="_btnPrimary_1hc0b_261",co="_btnSecondary_1hc0b_317",mo="_statsGrid_1hc0b_369",uo="_statCard_1hc0b_381",po="_statCardHeader_1hc0b_407",fo="_statIcon_1hc0b_421",No="_statLabel_1hc0b_435",bo="_statValue_1hc0b_449",To="_modulesList_1hc0b_473",Vo="_moduleCard_1hc0b_485",vo="_moduleHeader_1hc0b_511",xo="_moduleToggle_1hc0b_537",go="_moduleInfo_1hc0b_577",ho="_moduleNameRow_1hc0b_587",Eo="_moduleName_1hc0b_587",Ho="_moduleCode_1hc0b_619",_o="_moduleDescription_1hc0b_641",Lo="_moduleMeta_1hc0b_659",Do="_permissionCount_1hc0b_673",jo="_moduleActions_1hc0b_695",yo="_btnIconEdit_1hc0b_709",Qo="_btnIconDelete_1hc0b_711",Co="_permissionsTable_1hc0b_781",So="_permissionsTableHeader_1hc0b_813",wo="_permissionsTableTitle_1hc0b_831",Mo="_table_1hc0b_847",Io="_footer_1hc0b_949",ko="_footerLeft_1hc0b_973",Ao="_footerText_1hc0b_983",Ro="_footerRight_1hc0b_997",Po="_pagination_1hc0b_1009",Bo="_pageButton_1hc0b_1021",zo="_pageInfo_1hc0b_1069",Fo="_loadingContainer_1hc0b_1093",$o="_spinner_1hc0b_1111",Uo="_loadingText_1hc0b_1143",qo="_emptyState_1hc0b_1159",oe={container:Xt,header:Kt,headerLeft:Zt,headerIcon:Yt,title:eo,subtitle:io,filterActionsRow:no,filterGroup:so,searchBox:ro,searchIcon:lo,searchInput:ao,actionGroup:to,btnPrimary:oo,btnSecondary:co,statsGrid:mo,statCard:uo,statCardHeader:po,statIcon:fo,statLabel:No,statValue:bo,modulesList:To,moduleCard:Vo,moduleHeader:vo,moduleToggle:xo,moduleInfo:go,moduleNameRow:ho,moduleName:Eo,moduleCode:Ho,moduleDescription:_o,moduleMeta:Lo,permissionCount:Do,moduleActions:jo,btnIconEdit:yo,btnIconDelete:Qo,permissionsTable:Co,permissionsTableHeader:So,permissionsTableTitle:wo,table:Mo,footer:Io,footerLeft:ko,footerText:Ao,footerRight:Ro,pagination:Po,pageButton:Bo,pageInfo:zo,loadingContainer:Fo,spinner:$o,loadingText:Uo,emptyState:qo},Go=["REPORT_RUN","AUDIT_EXCERPT"],Yi=n=>{const s={display:"inline-block",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:500,fontFamily:"Inter, sans-serif"};switch(n){case"Completed":return{...s,background:"#d4edda",color:"#155724"};case"Processing":return{...s,background:"#fff3cd",color:"#856404"};case"Pending":return{...s,background:"#e3f2fd",color:"#1976d2"};case"Failed":return{...s,background:"#f8d7da",color:"#721c24"};case"Cancelled":return{...s,background:"#e0e0e0",color:"#424242"};case"Expired":return{...s,background:"#f3f4f6",color:"#6b7280"};default:return s}},vi=n=>({REPORT_RUN:"Quy tắc thông báo",AUDIT_EXCERPT:"Nhật ký audit"})[n]||n,Fn=n=>({REPORT_RUN:"🔔",AUDIT_EXCERPT:"📋"})[n]||"📁",Oo=n=>{const s={display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:600,fontFamily:"Inter, sans-serif"};switch(n){case"REPORT_RUN":return{...s,background:"#e3f2fd",color:"#1976d2",border:"1px solid #90caf9"};case"AUDIT_EXCERPT":return{...s,background:"#fff3e0",color:"#e65100",border:"1px solid #ffb74d",fontWeight:700,boxShadow:"0 0 0 3px rgba(230, 81, 0, 0.1)"};default:return s}},en=n=>n?n<1024?`${n} B`:n<1024*1024?`${(n/1024).toFixed(1)} KB`:n<1024*1024*1024?`${(n/(1024*1024)).toFixed(1)} MB`:`${(n/(1024*1024*1024)).toFixed(1)} GB`:"-",Ke=n=>{if(!n)return"-";const s=new Date(n),r=String(s.getDate()).padStart(2,"0"),u=String(s.getMonth()+1).padStart(2,"0"),c=s.getFullYear(),T=String(s.getHours()).padStart(2,"0"),t=String(s.getMinutes()).padStart(2,"0");return`${r}/${u}/${c} ${T}:${t}`},Wo=n=>{const s={display:"inline-block",padding:"4px 10px",borderRadius:"8px",fontSize:"12px",fontWeight:500,fontFamily:"Inter, sans-serif"};return n.includes("7")?{...s,background:"#fff3cd",color:"#856404"}:n.includes("30")?{...s,background:"#d4edda",color:"#155724"}:n.includes("90")?{...s,background:"#e3f2fd",color:"#1976d2"}:{...s,background:"#f3f4f6",color:"#6b7280"}},Jo=[{export_jobs_id:"EXP_001",export_jobs_source_name:"Export Quy tắc thông báo - Q4 2025",export_jobs_source_type:"REPORT_RUN",export_jobs_requested_by:"Nguyễn Văn Admin (admin@mappa.gov.vn)",export_jobs_status:"Completed",export_jobs_requested_at:"2025-01-15T08:30:00Z",export_jobs_completed_at:"2025-01-15T08:32:45Z",export_jobs_download_count:5,export_jobs_retention_policy:"7 days",export_jobs_progress:100,export_jobs_file_format:"Excel (.xlsx)",export_jobs_file_url:"https://storage.mappa.gov.vn/exports/EXP_001.xlsx",export_jobs_file_size:2458624,export_jobs_created_at:"2025-01-15T08:30:00Z",export_jobs_updated_at:"2025-01-15T08:32:45Z",export_jobs_download_history:[{download_id:"DL_001_001",downloaded_by:"Nguyễn Văn Admin (admin@mappa.gov.vn)",downloaded_at:"2025-01-15T08:35:00Z",download_ip:"192.168.1.100"},{download_id:"DL_001_002",downloaded_by:"Trần Thị Kiểm Tra (test@mappa.gov.vn)",downloaded_at:"2025-01-15T09:10:00Z",download_ip:"192.168.1.105"},{download_id:"DL_001_003",downloaded_by:"Nguyễn Văn Admin (admin@mappa.gov.vn)",downloaded_at:"2025-01-15T10:20:00Z",download_ip:"192.168.1.100"},{download_id:"DL_001_004",downloaded_by:"Lê Văn Supervisor (supervisor@mappa.gov.vn)",downloaded_at:"2025-01-15T11:45:00Z",download_ip:"192.168.1.110"},{download_id:"DL_001_005",downloaded_by:"Hoàng Văn Analyst (analyst@mappa.gov.vn)",downloaded_at:"2025-01-15T14:30:00Z",download_ip:"192.168.1.115"}]},{export_jobs_id:"EXP_002",export_jobs_source_name:"Export Danh sách người dùng - Toàn hệ thống",export_jobs_source_type:"REPORT_RUN",export_jobs_requested_by:"Trần Thị Kiểm Tra (test@mappa.gov.vn)",export_jobs_status:"Processing",export_jobs_requested_at:"2025-01-15T09:15:00Z",export_jobs_download_count:0,export_jobs_retention_policy:"30 days",export_jobs_progress:67,export_jobs_file_format:"Excel (.xlsx)",export_jobs_created_at:"2025-01-15T09:15:00Z",export_jobs_updated_at:"2025-01-15T09:18:30Z",export_jobs_download_history:[],export_jobs_monitor_items:[{stage_id:"stage_1",stage_name:"Xác thực yêu cầu",stage_status:"completed",stage_progress:100,stage_started_at:"2025-01-15T09:15:00Z",stage_completed_at:"2025-01-15T09:15:05Z",stage_message:"Xác thực thành công - Người dùng có quyền truy cập"},{stage_id:"stage_2",stage_name:"Truy vấn cơ sở dữ liệu",stage_status:"completed",stage_progress:100,stage_started_at:"2025-01-15T09:15:05Z",stage_completed_at:"2025-01-15T09:16:45Z",stage_message:"Đã truy vấn 1,250 records từ bảng users"},{stage_id:"stage_3",stage_name:"Xử lý và định dạng dữ liệu",stage_status:"completed",stage_progress:100,stage_started_at:"2025-01-15T09:16:45Z",stage_completed_at:"2025-01-15T09:17:30Z",stage_message:"Đã xử lý và format tất cả records"},{stage_id:"stage_4",stage_name:"Tạo file Excel",stage_status:"in_progress",stage_progress:67,stage_started_at:"2025-01-15T09:17:30Z",stage_message:"Đang tạo workbook với 5 sheets... (Sheet 4/6)"},{stage_id:"stage_5",stage_name:"Upload lên Storage",stage_status:"pending",stage_progress:0,stage_message:"Chờ stage trước hoàn thành"},{stage_id:"stage_6",stage_name:"Hoàn tất",stage_status:"pending",stage_progress:0,stage_message:"Chờ stage trước hoàn thành"}]},{export_jobs_id:"EXP_003",export_jobs_source_name:"Export Cơ sở & Địa bàn - Miền Bắc",export_jobs_source_type:"REPORT_RUN",export_jobs_requested_by:"Lê Văn Supervisor (supervisor@mappa.gov.vn)",export_jobs_status:"Failed",export_jobs_requested_at:"2025-01-15T07:45:00Z",export_jobs_download_count:0,export_jobs_retention_policy:"7 days",export_jobs_progress:23,export_jobs_file_format:"Excel (.xlsx)",export_jobs_error_summary:"Database Connection Timeout",export_jobs_error_detail:`Lỗi kết nối database sau 30 giây timeout.

Chi tiết kỹ thuật:
- Error Code: DB_TIMEOUT_001
- Database: PostgreSQL 14.5
- Host: db.mappa.gov.vn:5432
- Database Name: mappa_production
- Connection Pool: Exhausted (max 100 connections)
- Attempted Retries: 3
- Last Error: ETIMEDOUT (Connection timed out)

Stack Trace:
at PostgresConnection.connect (postgres.js:245)
at QueryExecutor.execute (executor.js:112)
at ExportService.fetchAreasData (export-service.js:89)
at ExportJobWorker.processJob (worker.js:156)

Nguyên nhân có thể:
1. Database server đang quá tải (CPU > 90%)
2. Connection pool đã đạt giới hạn
3. Query chậm do thiếu index trên bảng areas
4. Network latency cao giữa app server và database

Khuyến nghị:
- Kiểm tra performance của database server
- Tăng connection pool size nếu cần
- Optimize query với EXPLAIN ANALYZE
- Thêm index vào các cột được filter nhiều`,export_jobs_created_at:"2025-01-15T07:45:00Z",export_jobs_updated_at:"2025-01-15T07:48:15Z",export_jobs_download_history:[]},{export_jobs_id:"EXP_004",export_jobs_source_name:"Export Audit Logs - Tháng 01/2025",export_jobs_source_type:"AUDIT_EXCERPT",export_jobs_requested_by:"Phạm Thị Security (security@mappa.gov.vn)",export_jobs_status:"Completed",export_jobs_requested_at:"2025-01-14T16:20:00Z",export_jobs_completed_at:"2025-01-14T16:25:35Z",export_jobs_download_count:12,export_jobs_retention_policy:"90 days",export_jobs_progress:100,export_jobs_file_format:"JSON (.json)",export_jobs_file_url:"https://storage.mappa.gov.vn/exports/EXP_004.json",export_jobs_file_size:5896421,export_jobs_created_at:"2025-01-14T16:20:00Z",export_jobs_updated_at:"2025-01-14T16:25:35Z",export_jobs_download_history:[{download_id:"DL_004_001",downloaded_by:"Phạm Thị Security (security@mappa.gov.vn)",downloaded_at:"2025-01-14T16:27:00Z",download_ip:"192.168.1.120"},{download_id:"DL_004_002",downloaded_by:"Phạm Thị Security (security@mappa.gov.vn)",downloaded_at:"2025-01-14T17:00:00Z",download_ip:"192.168.1.120"},{download_id:"DL_004_003",downloaded_by:"Vũ Thị Director (director@mappa.gov.vn)",downloaded_at:"2025-01-14T18:15:00Z",download_ip:"192.168.1.200"}]},{export_jobs_id:"EXP_005",export_jobs_source_name:"Export Danh mục - Tất cả",export_jobs_source_type:"REPORT_RUN",export_jobs_requested_by:"Hoàng Văn Analyst (analyst@mappa.gov.vn)",export_jobs_status:"Pending",export_jobs_requested_at:"2025-01-15T09:30:00Z",export_jobs_download_count:0,export_jobs_retention_policy:"30 days",export_jobs_progress:0,export_jobs_file_format:"Excel (.xlsx)",export_jobs_created_at:"2025-01-15T09:30:00Z",export_jobs_updated_at:"2025-01-15T09:30:00Z",export_jobs_download_history:[]},{export_jobs_id:"EXP_006",export_jobs_source_name:"Export Ngân hàng - Active Only",export_jobs_source_type:"REPORT_RUN",export_jobs_requested_by:"Đỗ Thị Manager (manager@mappa.gov.vn)",export_jobs_status:"Completed",export_jobs_requested_at:"2025-01-14T14:00:00Z",export_jobs_completed_at:"2025-01-14T14:01:12Z",export_jobs_download_count:3,export_jobs_retention_policy:"7 days",export_jobs_progress:100,export_jobs_file_format:"Excel (.xlsx)",export_jobs_file_url:"https://storage.mappa.gov.vn/exports/EXP_006.xlsx",export_jobs_file_size:458932,export_jobs_created_at:"2025-01-14T14:00:00Z",export_jobs_updated_at:"2025-01-14T14:01:12Z",export_jobs_download_history:[]},{export_jobs_id:"EXP_007",export_jobs_source_name:"Export Quy tắc thông báo - Failed Only",export_jobs_source_type:"REPORT_RUN",export_jobs_requested_by:"Nguyễn Văn Admin (admin@mappa.gov.vn)",export_jobs_status:"Cancelled",export_jobs_requested_at:"2025-01-13T11:20:00Z",export_jobs_download_count:0,export_jobs_retention_policy:"7 days",export_jobs_progress:0,export_jobs_file_format:"Excel (.xlsx)",export_jobs_created_at:"2025-01-13T11:20:00Z",export_jobs_updated_at:"2025-01-13T11:22:10Z",export_jobs_download_history:[]},{export_jobs_id:"EXP_008",export_jobs_source_name:"Export Người dùng - Role: Supervisor",export_jobs_source_type:"REPORT_RUN",export_jobs_requested_by:"Vũ Thị Director (director@mappa.gov.vn)",export_jobs_status:"Completed",export_jobs_requested_at:"2025-01-12T10:15:00Z",export_jobs_completed_at:"2025-01-12T10:16:45Z",export_jobs_download_count:8,export_jobs_retention_policy:"30 days",export_jobs_progress:100,export_jobs_file_format:"Excel (.xlsx)",export_jobs_file_url:"https://storage.mappa.gov.vn/exports/EXP_008.xlsx",export_jobs_file_size:782451,export_jobs_created_at:"2025-01-12T10:15:00Z",export_jobs_updated_at:"2025-01-12T10:16:45Z",export_jobs_download_history:[]},{export_jobs_id:"EXP_009",export_jobs_source_name:"Export Cơ sở Đà Nẵng - Full Data",export_jobs_source_type:"REPORT_RUN",export_jobs_requested_by:"Nguyễn Văn Admin (admin@mappa.gov.vn)",export_jobs_status:"Completed",export_jobs_requested_at:"2025-01-11T15:20:00Z",export_jobs_completed_at:"2025-01-11T15:22:30Z",export_jobs_download_count:15,export_jobs_retention_policy:"90 days",export_jobs_progress:100,export_jobs_file_format:"Excel (.xlsx)",export_jobs_file_url:"https://storage.mappa.gov.vn/exports/EXP_009.xlsx",export_jobs_file_size:1245678,export_jobs_created_at:"2025-01-11T15:20:00Z",export_jobs_updated_at:"2025-01-11T15:22:30Z",export_jobs_download_history:[]},{export_jobs_id:"EXP_010",export_jobs_source_name:"Export Danh mục - Financial Only",export_jobs_source_type:"REPORT_RUN",export_jobs_requested_by:"Hoàng Văn Analyst (analyst@mappa.gov.vn)",export_jobs_status:"Completed",export_jobs_requested_at:"2025-01-10T10:00:00Z",export_jobs_completed_at:"2025-01-10T10:01:45Z",export_jobs_download_count:2,export_jobs_retention_policy:"7 days",export_jobs_progress:100,export_jobs_file_format:"PDF (.pdf)",export_jobs_file_url:"https://storage.mappa.gov.vn/exports/EXP_010.pdf",export_jobs_file_size:324567,export_jobs_created_at:"2025-01-10T10:00:00Z",export_jobs_updated_at:"2025-01-10T10:01:45Z",export_jobs_download_history:[]},{export_jobs_id:"EXP_011",export_jobs_source_name:"Export Người dùng - Q3 2024",export_jobs_source_type:"REPORT_RUN",export_jobs_requested_by:"Trần Thị Kiểm Tra (test@mappa.gov.vn)",export_jobs_status:"Expired",export_jobs_requested_at:"2024-10-15T10:00:00Z",export_jobs_completed_at:"2024-10-15T10:05:30Z",export_jobs_download_count:3,export_jobs_retention_policy:"7 days",export_jobs_progress:100,export_jobs_file_format:"Excel (.xlsx)",export_jobs_file_url:void 0,export_jobs_file_size:1234567,export_jobs_created_at:"2024-10-15T10:00:00Z",export_jobs_updated_at:"2024-10-22T10:05:30Z",export_jobs_download_history:[]},{export_jobs_id:"EXP_012",export_jobs_source_name:"Export Audit Logs - Tháng 12/2024",export_jobs_source_type:"AUDIT_EXCERPT",export_jobs_requested_by:"Phạm Thị Security (security@mappa.gov.vn)",export_jobs_status:"Expired",export_jobs_requested_at:"2024-12-01T08:00:00Z",export_jobs_completed_at:"2024-12-01T08:10:15Z",export_jobs_download_count:7,export_jobs_retention_policy:"30 days",export_jobs_progress:100,export_jobs_file_format:"JSON (.json)",export_jobs_file_url:void 0,export_jobs_file_size:8765432,export_jobs_created_at:"2024-12-01T08:00:00Z",export_jobs_updated_at:"2024-12-31T08:10:15Z",export_jobs_download_history:[]}],Xo=({job:n,mode:s,onClose:r,onSave:u})=>{const c=s==="view",[T,t]=d.useState((n==null?void 0:n.export_jobs_source_name)||""),[p,V]=d.useState((n==null?void 0:n.export_jobs_source_type)||"REPORT_RUN"),[L,Q]=d.useState((n==null?void 0:n.export_jobs_retention_policy)||"7 days"),E=()=>{if(!T.trim()){alert("Vui lòng nhập tên nguồn dữ liệu");return}u({export_jobs_source_name:T,export_jobs_source_type:p,export_jobs_retention_policy:L})},x=()=>{if(!n)return null;switch(n.export_jobs_status){case"Completed":return e.jsxDEV(be,{size:24,style:{color:"#155724"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:56,columnNumber:16},void 0);case"Processing":return e.jsxDEV(Qe,{size:24,style:{color:"#856404"},className:"animate-spin"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:58,columnNumber:16},void 0);case"Failed":return e.jsxDEV(ve,{size:24,style:{color:"#721c24"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:60,columnNumber:16},void 0);case"Expired":return e.jsxDEV(ve,{size:24,style:{color:"#6b7280"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:62,columnNumber:16},void 0);default:return null}};return e.jsxDEV("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:r,children:e.jsxDEV("div",{style:{background:"var(--card, white)",borderRadius:"var(--radius-lg, 8px)",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0,0,0,0.1)"},onClick:f=>f.stopPropagation(),children:[e.jsxDEV("div",{style:{padding:"20px",borderBottom:"1px solid var(--border, #d0d5dd)",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,background:"var(--card, white)",zIndex:10},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[c&&x(),e.jsxDEV("h2",{style:{margin:0,fontFamily:"Inter, sans-serif",fontSize:"18px",fontWeight:700,color:"var(--foreground, #101828)"},children:c?`Chi Tiết Export Job: ${n==null?void 0:n.export_jobs_id}`:"Tạo Export Job Mới"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:113,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:111,columnNumber:11},void 0),e.jsxDEV("button",{onClick:r,style:{padding:"6px",background:"transparent",border:"none",cursor:"pointer",borderRadius:"var(--radius, 4px)",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:f=>f.currentTarget.style.background="var(--muted, #f9fafb)",onMouseLeave:f=>f.currentTarget.style.background="transparent",children:e.jsxDEV(De,{size:20,style:{color:"var(--muted-foreground, #667085)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:140,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:125,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:98,columnNumber:9},void 0),e.jsxDEV("div",{style:{padding:"20px"},children:c&&n?e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxDEV("div",{style:{padding:"16px",background:n.export_jobs_status==="Completed"?"#d4edda":n.export_jobs_status==="Failed"?"#f8d7da":n.export_jobs_status==="Processing"?"#fff3cd":"#e3f2fd",borderRadius:"var(--radius)",border:`1px solid ${n.export_jobs_status==="Completed"?"#155724":n.export_jobs_status==="Failed"?"#721c24":n.export_jobs_status==="Processing"?"#856404":"#1976d2"}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[x(),e.jsxDEV("div",{children:e.jsxDEV("div",{style:Yi(n.export_jobs_status),children:n.export_jobs_status},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:179,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:178,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:176,columnNumber:17},void 0),n.export_jobs_status==="Completed"&&n.export_jobs_file_url&&e.jsxDEV("button",{style:{padding:"8px 16px",background:"#155724",color:"white",border:"none",borderRadius:"var(--radius)",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:500},children:[e.jsxDEV(ye,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:201,columnNumber:21},void 0),"Tải Xuống"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:185,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:150,columnNumber:15},void 0),n.export_jobs_status==="Failed"&&n.export_jobs_error_message&&e.jsxDEV("div",{style:{padding:"12px",background:"#f8d7da",border:"1px solid #721c24",borderRadius:"var(--radius)",display:"flex",gap:"8px"},children:[e.jsxDEV(ve,{size:20,style:{color:"#721c24",flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:219,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{style:{display:"block",marginBottom:"4px",color:"#721c24",fontFamily:"Inter, sans-serif",fontSize:"14px"},children:"Lỗi:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:221,columnNumber:21},void 0),e.jsxDEV("p",{style:{margin:0,color:"#721c24",fontFamily:"Inter, sans-serif",fontSize:"14px"},children:n.export_jobs_error_message},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:232,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:220,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:209,columnNumber:17},void 0),e.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxDEV(ri,{label:"Job ID",value:n.export_jobs_id,mono:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:254,columnNumber:17},void 0),e.jsxDEV(ri,{label:"Source Type",value:`${Fn(n.export_jobs_source_type)} ${vi(n.export_jobs_source_type)}`},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:255,columnNumber:17},void 0),e.jsxDEV(ri,{label:"Requested By",value:n.export_jobs_requested_by},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:259,columnNumber:17},void 0),e.jsxDEV(ri,{label:"Requested At",value:Ke(n.export_jobs_requested_at)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:260,columnNumber:17},void 0),n.export_jobs_completed_at&&e.jsxDEV(ri,{label:"Completed At",value:Ke(n.export_jobs_completed_at)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:265,columnNumber:19},void 0),e.jsxDEV(ri,{label:"Download Count",value:String(n.export_jobs_download_count)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:270,columnNumber:17},void 0),e.jsxDEV(ri,{label:"Kích Thước File",value:en(n.export_jobs_file_size)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:274,columnNumber:17},void 0),e.jsxDEV(ri,{label:"Retention Policy",value:n.export_jobs_retention_policy},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:278,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:247,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:600,color:"var(--foreground, #101828)",marginBottom:"8px"},children:"Source Name"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:283,columnNumber:17},void 0),e.jsxDEV("p",{style:{margin:0,padding:"10px 14px",background:"var(--muted, #f9fafb)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius)",fontFamily:"Inter, sans-serif",fontSize:"14px",color:"var(--foreground, #101828)"},children:n.export_jobs_source_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:295,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:282,columnNumber:15},void 0),n.export_jobs_file_url&&e.jsxDEV("div",{children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:600,color:"var(--foreground, #101828)",marginBottom:"8px"},children:"File URL"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:314,columnNumber:19},void 0),e.jsxDEV("p",{style:{margin:0,padding:"10px 14px",background:"var(--muted, #f9fafb)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius)",fontFamily:"monospace",fontSize:"12px",color:"#1976d2",wordBreak:"break-all"},children:n.export_jobs_file_url},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:326,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:313,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:148,columnNumber:13},void 0):e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:600,color:"var(--foreground, #101828)",marginBottom:"8px"},children:["Source Name ",e.jsxDEV("span",{style:{color:"var(--destructive, #ef4444)"},children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:359,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:349,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",value:T,onChange:f=>t(f.target.value),placeholder:"VD: Export danh sách thông báo Q4/2025",style:{width:"100%",padding:"10px 14px",fontFamily:"Inter, sans-serif",fontSize:"14px",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 6px)",background:"white",color:"var(--foreground, #101828)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:361,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:348,columnNumber:15},void 0),e.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:600,color:"var(--foreground, #101828)",marginBottom:"8px"},children:["Source Type ",e.jsxDEV("span",{style:{color:"var(--destructive, #ef4444)"},children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:392,columnNumber:33},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:382,columnNumber:19},void 0),e.jsxDEV("select",{value:p,onChange:f=>V(f.target.value),style:{width:"100%",padding:"10px 14px",fontFamily:"Inter, sans-serif",fontSize:"14px",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 6px)",background:"white",color:"var(--foreground, #101828)"},children:Go.map(f=>e.jsxDEV("option",{value:f,children:vi(f)},f,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:409,columnNumber:23},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:394,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:381,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:600,color:"var(--foreground, #101828)",marginBottom:"8px"},children:["Retention Policy ",e.jsxDEV("span",{style:{color:"var(--destructive, #ef4444)"},children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:427,columnNumber:38},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:417,columnNumber:19},void 0),e.jsxDEV("select",{value:L,onChange:f=>Q(f.target.value),style:{width:"100%",padding:"10px 14px",fontFamily:"Inter, sans-serif",fontSize:"14px",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 6px)",background:"white",color:"var(--foreground, #101828)"},children:[e.jsxDEV("option",{value:"7 days",children:"7 days"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:443,columnNumber:21},void 0),e.jsxDEV("option",{value:"30 days",children:"30 days"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:444,columnNumber:21},void 0),e.jsxDEV("option",{value:"90 days",children:"90 days"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:445,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:429,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:416,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:380,columnNumber:15},void 0),e.jsxDEV("div",{style:{padding:"12px",background:"#e3f2fd",border:"1px solid #1976d2",borderRadius:"var(--radius)",display:"flex",gap:"8px"},children:[e.jsxDEV(ve,{size:20,style:{color:"#1976d2",flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:461,columnNumber:17},void 0),e.jsxDEV("p",{style:{margin:0,fontSize:"13px",color:"#1976d2",fontFamily:"Inter, sans-serif"},children:"Job sẽ được đưa vào hàng đợi và xử lý theo thứ tự. File export sẽ được lưu trữ theo retention policy đã chọn."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:462,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:451,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:346,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:145,columnNumber:9},void 0),!c&&e.jsxDEV("div",{style:{padding:"21px 20px",borderTop:"1px solid var(--border, #d0d5dd)",display:"flex",gap:"12px",justifyContent:"flex-end",position:"sticky",bottom:0,background:"var(--card, white)"},children:[e.jsxDEV("button",{onClick:r,style:{padding:"11px 19px",fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:500,border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 6px)",background:"white",color:"var(--foreground, #101828)",cursor:"pointer"},children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:491,columnNumber:13},void 0),e.jsxDEV("button",{onClick:E,style:{padding:"11px 19px",fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:500,border:"none",borderRadius:"var(--radius, 6px)",background:"var(--primary, #005cb6)",color:"white",cursor:"pointer"},children:"Tạo Export Job"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:507,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:479,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:85,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:69,columnNumber:5},void 0)},ri=({label:n,value:s,mono:r,style:u})=>e.jsxDEV("div",{children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"12px",fontWeight:600,color:"var(--muted-foreground, #667085)",marginBottom:"4px",textTransform:"uppercase"},children:n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:538,columnNumber:5},void 0),e.jsxDEV("p",{style:{margin:0,fontFamily:r?"monospace":"Inter, sans-serif",fontSize:"14px",color:"var(--foreground, #101828)",...u},children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:551,columnNumber:5},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobModal.tsx",lineNumber:537,columnNumber:3},void 0),Ko=({job:n,isOpen:s,onClose:r,onDownload:u})=>{if(!n)return null;const c=()=>{switch(n.export_jobs_status){case"Completed":return e.jsxDEV(be,{size:24,style:{color:"#155724"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:33,columnNumber:16},void 0);case"Processing":return e.jsxDEV(Qe,{size:24,style:{color:"#856404"},className:"animate-spin"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:35,columnNumber:16},void 0);case"Failed":return e.jsxDEV(ve,{size:24,style:{color:"#721c24"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:37,columnNumber:16},void 0);case"Expired":return e.jsxDEV(ve,{size:24,style:{color:"#6b7280"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:39,columnNumber:16},void 0);case"Pending":return e.jsxDEV(Qe,{size:24,style:{color:"#1976d2"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:41,columnNumber:16},void 0);default:return null}},T=()=>{var L;if(!n.export_jobs_completed_at)return"-";const t=new Date(n.export_jobs_completed_at),p=parseInt(((L=n.export_jobs_retention_policy.match(/\d+/))==null?void 0:L[0])||"0"),V=new Date(t);return V.setDate(V.getDate()+p),Ke(V.toISOString())};return e.jsxDEV(e.Fragment,{children:[s&&e.jsxDEV("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:999,transition:"opacity 0.3s ease"},onClick:r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:60,columnNumber:9},void 0),e.jsxDEV("div",{style:{position:"fixed",top:0,right:s?0:"-600px",width:"600px",height:"100vh",background:"var(--card, white)",boxShadow:"-4px 0 24px rgba(0, 0, 0, 0.15)",zIndex:1e3,transition:"right 0.3s ease",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxDEV("div",{style:{padding:"24px",borderBottom:"1px solid var(--border, #d0d5dd)",background:"var(--card, white)",display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"16px"},children:[e.jsxDEV("div",{style:{flex:1},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[c(),e.jsxDEV("h2",{style:{margin:0,fontFamily:"Inter, sans-serif",fontSize:"20px",fontWeight:700,color:"var(--foreground, #101828)"},children:"Chi Tiết Export Job"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:107,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:105,columnNumber:13},void 0),e.jsxDEV("code",{style:{fontFamily:"monospace",fontSize:"14px",padding:"4px 8px",background:"var(--muted, #f9fafb)",borderRadius:"var(--radius-sm, 4px)",color:"var(--muted-foreground, #667085)"},children:n.export_jobs_id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:104,columnNumber:11},void 0),e.jsxDEV("button",{onClick:r,style:{padding:"8px",background:"transparent",border:"none",cursor:"pointer",borderRadius:"var(--radius, 6px)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.15s ease"},onMouseEnter:t=>t.currentTarget.style.background="var(--muted, #f9fafb)",onMouseLeave:t=>t.currentTarget.style.background="transparent",children:e.jsxDEV(De,{size:20,style:{color:"var(--muted-foreground, #667085)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:148,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:132,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:93,columnNumber:9},void 0),e.jsxDEV("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:[e.jsxDEV("div",{style:{padding:"16px",background:n.export_jobs_status==="Completed"?"#d4edda":n.export_jobs_status==="Failed"?"#f8d7da":n.export_jobs_status==="Processing"?"#fff3cd":n.export_jobs_status==="Expired"?"#f3f4f6":"#e3f2fd",borderRadius:"var(--radius, 6px)",border:`1px solid ${n.export_jobs_status==="Completed"?"#155724":n.export_jobs_status==="Failed"?"#721c24":n.export_jobs_status==="Processing"?"#856404":n.export_jobs_status==="Expired"?"#6b7280":"#1976d2"}`,marginBottom:"24px"},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[c(),e.jsxDEV("span",{style:Yi(n.export_jobs_status),children:n.export_jobs_status},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:186,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:184,columnNumber:15},void 0),n.export_jobs_status==="Completed"&&n.export_jobs_file_url&&u&&e.jsxDEV("button",{onClick:()=>u(n),style:{padding:"8px 16px",background:"#155724",color:"white",border:"none",borderRadius:"var(--radius, 6px)",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:500,transition:"background 0.15s ease"},onMouseEnter:t=>t.currentTarget.style.background="#0d3d18",onMouseLeave:t=>t.currentTarget.style.background="#155724",children:[e.jsxDEV(ye,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:211,columnNumber:19},void 0),"Tải Xuống"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:191,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:183,columnNumber:13},void 0),n.export_jobs_status==="Processing"&&n.export_jobs_progress!==void 0&&e.jsxDEV("div",{style:{marginTop:"12px"},children:[e.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[e.jsxDEV("span",{style:{fontSize:"13px",fontWeight:500,color:"#856404",fontFamily:"Inter, sans-serif"},children:"Tiến trình xử lý"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:221,columnNumber:19},void 0),e.jsxDEV("span",{style:{fontSize:"13px",fontWeight:600,color:"#856404",fontFamily:"Inter, sans-serif"},children:[n.export_jobs_progress,"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:231,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:220,columnNumber:17},void 0),e.jsxDEV("div",{style:{width:"100%",height:"8px",background:"#fff",borderRadius:"4px",overflow:"hidden"},children:e.jsxDEV("div",{style:{width:`${n.export_jobs_progress}%`,height:"100%",background:"#856404",transition:"width 0.3s ease"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:251,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:242,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:219,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:155,columnNumber:11},void 0),n.export_jobs_status==="Processing"&&n.export_jobs_monitor_items&&n.export_jobs_monitor_items.length>0&&e.jsxDEV("div",{style:{background:"white",border:"2px solid #856404",borderRadius:"var(--radius, 6px)",marginBottom:"24px",overflow:"hidden"},children:[e.jsxDEV("div",{style:{padding:"14px 16px",background:"#fff3cd",borderBottom:"1px solid #856404",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxDEV(he,{size:20,style:{color:"#856404"},className:"animate-spin"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:286,columnNumber:17},void 0),e.jsxDEV("strong",{style:{fontFamily:"Inter, sans-serif",fontSize:"15px",fontWeight:700,color:"#856404"},children:"Tiến trình xử lý chi tiết"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:287,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:276,columnNumber:15},void 0),e.jsxDEV("div",{style:{padding:"16px"},children:n.export_jobs_monitor_items.map((t,p)=>{const V=E=>{switch(E){case"completed":return e.jsxDEV(be,{size:18,style:{color:"#155724",flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:305,columnNumber:32},void 0);case"in_progress":return e.jsxDEV(he,{size:18,style:{color:"#856404",flexShrink:0},className:"animate-spin"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:307,columnNumber:32},void 0);case"failed":return e.jsxDEV(ve,{size:18,style:{color:"#721c24",flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:309,columnNumber:32},void 0);case"pending":return e.jsxDEV(Qe,{size:18,style:{color:"#9ca3af",flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:311,columnNumber:32},void 0);default:return null}},Q=(E=>{switch(E){case"completed":return{bg:"#d4edda",border:"#155724",text:"#155724"};case"in_progress":return{bg:"#fff3cd",border:"#856404",text:"#856404"};case"failed":return{bg:"#f8d7da",border:"#721c24",text:"#721c24"};case"pending":return{bg:"#f3f4f6",border:"#d0d5dd",text:"#6b7280"};default:return{bg:"#f9fafb",border:"#d0d5dd",text:"#667085"}}})(t.stage_status);return e.jsxDEV("div",{style:{position:"relative",paddingLeft:"32px",paddingBottom:p<n.export_jobs_monitor_items.length-1?"24px":"0"},children:[p<n.export_jobs_monitor_items.length-1&&e.jsxDEV("div",{style:{position:"absolute",left:"8px",top:"24px",width:"2px",height:"calc(100% - 24px)",background:t.stage_status==="pending"?"#d0d5dd":"#856404"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:345,columnNumber:25},void 0),e.jsxDEV("div",{style:{position:"absolute",left:"0",top:"2px"},children:V(t.stage_status)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:358,columnNumber:23},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"6px"},children:[e.jsxDEV("span",{style:{fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:600,color:Q.text},children:t.stage_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:378,columnNumber:27},void 0),t.stage_status==="in_progress"&&t.stage_progress>0&&e.jsxDEV("span",{style:{fontFamily:"Inter, sans-serif",fontSize:"13px",fontWeight:700,color:Q.text},children:[t.stage_progress,"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:389,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:370,columnNumber:25},void 0),t.stage_status==="in_progress"&&t.stage_progress>0&&e.jsxDEV("div",{style:{width:"100%",height:"6px",background:"#fff",borderRadius:"3px",overflow:"hidden",marginBottom:"8px",border:`1px solid ${Q.border}`},children:e.jsxDEV("div",{style:{width:`${t.stage_progress}%`,height:"100%",background:Q.text,transition:"width 0.3s ease"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:415,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:404,columnNumber:27},void 0),t.stage_message&&e.jsxDEV("div",{style:{fontSize:"13px",color:"var(--muted-foreground, #667085)",fontFamily:"Inter, sans-serif",lineHeight:"1.5",marginBottom:"6px"},children:t.stage_message},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:428,columnNumber:27},void 0),e.jsxDEV("div",{style:{display:"flex",gap:"12px",fontSize:"12px",color:"var(--muted-foreground, #667085)",fontFamily:"Inter, sans-serif"},children:[t.stage_started_at&&e.jsxDEV("span",{children:["🕐 Bắt đầu: ",Ke(t.stage_started_at)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:452,columnNumber:29},void 0),t.stage_completed_at&&e.jsxDEV("span",{children:["✅ Hoàn thành: ",Ke(t.stage_completed_at)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:455,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:442,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:369,columnNumber:23},void 0)]},t.stage_id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:335,columnNumber:21},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:300,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:266,columnNumber:13},void 0),n.export_jobs_status==="Failed"&&(n.export_jobs_error_summary||n.export_jobs_error_message)&&e.jsxDEV("div",{style:{background:"#f8d7da",border:"2px solid #721c24",borderRadius:"var(--radius, 6px)",marginBottom:"24px",overflow:"hidden"},children:[e.jsxDEV("div",{style:{padding:"16px",background:"#721c24",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxDEV(ve,{size:24,style:{color:"white",flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:487,columnNumber:17},void 0),e.jsxDEV("div",{style:{flex:1},children:[e.jsxDEV("strong",{style:{display:"block",color:"white",fontFamily:"Inter, sans-serif",fontSize:"16px",fontWeight:700},children:n.export_jobs_error_summary||"Lỗi xảy ra"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:489,columnNumber:19},void 0),e.jsxDEV("span",{style:{color:"rgba(255, 255, 255, 0.9)",fontFamily:"Inter, sans-serif",fontSize:"13px",fontWeight:400},children:"Export job thất bại và cần được xử lý"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:500,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:488,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:478,columnNumber:15},void 0),n.export_jobs_error_detail&&e.jsxDEV("div",{style:{padding:"16px"},children:[e.jsxDEV("label",{style:{display:"block",fontFamily:"Inter, sans-serif",fontSize:"13px",fontWeight:600,color:"#721c24",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Chi tiết lỗi:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:516,columnNumber:19},void 0),e.jsxDEV("div",{style:{padding:"12px",background:"white",border:"1px solid #721c24",borderRadius:"var(--radius-sm, 4px)",maxHeight:"300px",overflow:"auto"},children:e.jsxDEV("pre",{style:{margin:0,color:"#721c24",fontFamily:"monospace",fontSize:"12px",lineHeight:"1.6",whiteSpace:"pre-wrap",wordWrap:"break-word"},children:n.export_jobs_error_detail},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:540,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:530,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:515,columnNumber:17},void 0),!n.export_jobs_error_detail&&n.export_jobs_error_message&&e.jsxDEV("div",{style:{padding:"16px"},children:e.jsxDEV("p",{style:{margin:0,color:"#721c24",fontFamily:"Inter, sans-serif",fontSize:"14px",lineHeight:"1.5"},children:n.export_jobs_error_message},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:560,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:559,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:468,columnNumber:13},void 0),e.jsxDEV(pi,{icon:e.jsxDEV(We,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:577,columnNumber:32},void 0),title:"Thông tin nguồn dữ liệu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:577,columnNumber:11},void 0),e.jsxDEV(Pi,{children:[e.jsxDEV(qe,{label:"Tên nguồn",value:n.export_jobs_source_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:579,columnNumber:13},void 0),e.jsxDEV(qe,{label:"Loại dữ liệu",value:vi(n.export_jobs_source_type),icon:e.jsxDEV("span",{style:{fontSize:"16px"},children:Fn(n.export_jobs_source_type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:583,columnNumber:21},void 0),badge:n.export_jobs_source_type==="AUDIT_EXCERPT"?{text:"🔒 AUDIT LOG",color:"#e65100",bg:"#fff3e0"}:void 0,highlight:n.export_jobs_source_type==="AUDIT_EXCERPT",style:n.export_jobs_source_type==="AUDIT_EXCERPT"?{color:"#e65100",fontWeight:700}:void 0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:580,columnNumber:13},void 0),n.export_jobs_file_format&&e.jsxDEV(qe,{label:"Định dạng file",value:n.export_jobs_file_format},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:604,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:578,columnNumber:11},void 0),e.jsxDEV(pi,{icon:e.jsxDEV(Sn,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:609,columnNumber:32},void 0),title:"Thông tin file xuất"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:609,columnNumber:11},void 0),e.jsxDEV(Pi,{children:[e.jsxDEV(qe,{label:"Dung lượng file",value:en(n.export_jobs_file_size)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:611,columnNumber:13},void 0),e.jsxDEV(qe,{label:"Số lần tải xuống",value:String(n.export_jobs_download_count),badge:n.export_jobs_download_count>0?{text:n.export_jobs_download_count>10?"Phổ biến":"Đã tải",color:n.export_jobs_download_count>10?"#155724":"#856404",bg:n.export_jobs_download_count>10?"#d4edda":"#fff3cd"}:void 0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:612,columnNumber:13},void 0),n.export_jobs_file_url&&e.jsxDEV(qe,{label:"File URL",value:n.export_jobs_file_url,mono:!0,style:{wordBreak:"break-all",fontSize:"12px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:626,columnNumber:15},void 0),n.export_jobs_status==="Expired"&&!n.export_jobs_file_url&&e.jsxDEV("div",{style:{padding:"12px",background:"#f3f4f6",border:"1px solid #6b7280",borderRadius:"var(--radius, 6px)",fontSize:"13px",color:"#6b7280",fontFamily:"Inter, sans-serif",fontStyle:"italic"},children:"⚠️ File đã hết hạn và không còn khả dụng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:634,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:610,columnNumber:11},void 0),e.jsxDEV(pi,{icon:e.jsxDEV(ki,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:652,columnNumber:32},void 0),title:"Thời gian & Lưu trữ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:652,columnNumber:11},void 0),e.jsxDEV(Pi,{children:[e.jsxDEV(qe,{label:"Người yêu cầu",value:n.export_jobs_requested_by,icon:e.jsxDEV(Re,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:654,columnNumber:87},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:654,columnNumber:13},void 0),e.jsxDEV(qe,{label:"Thời gian yêu cầu",value:Ke(n.export_jobs_requested_at)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:655,columnNumber:13},void 0),e.jsxDEV(qe,{label:"Thời gian hoàn thành",value:Ke(n.export_jobs_completed_at),highlight:n.export_jobs_status==="Completed"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:656,columnNumber:13},void 0),e.jsxDEV(qe,{label:"Chính sách lưu trữ",value:n.export_jobs_retention_policy,badge:{text:n.export_jobs_retention_policy,color:n.export_jobs_retention_policy.includes("90")?"#1976d2":n.export_jobs_retention_policy.includes("30")?"#155724":"#856404",bg:n.export_jobs_retention_policy.includes("90")?"#e3f2fd":n.export_jobs_retention_policy.includes("30")?"#d4edda":"#fff3cd"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:661,columnNumber:13},void 0),n.export_jobs_status==="Completed"&&e.jsxDEV(qe,{label:"Hết hạn vào",value:T()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:681,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:653,columnNumber:11},void 0),n.export_jobs_download_history&&n.export_jobs_download_history.length>0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(pi,{icon:e.jsxDEV(Ai,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:688,columnNumber:36},void 0),title:"Lịch sử tải xuống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:688,columnNumber:15},void 0),e.jsxDEV("div",{style:{background:"white",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 6px)",marginBottom:"24px",overflow:"hidden"},children:n.export_jobs_download_history.map((t,p)=>e.jsxDEV("div",{style:{padding:"16px",borderBottom:p<n.export_jobs_download_history.length-1?"1px solid var(--border, #d0d5dd)":"none",display:"flex",alignItems:"flex-start",gap:"12px"},children:[e.jsxDEV("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#155724",marginTop:"6px",flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:712,columnNumber:21},void 0),e.jsxDEV("div",{style:{flex:1},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsxDEV(Re,{size:14,style:{color:"var(--muted-foreground, #667085)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:731,columnNumber:25},void 0),e.jsxDEV("span",{style:{fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:500,color:"var(--foreground, #101828)"},children:t.downloaded_by.split("(")[0].trim()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:732,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:723,columnNumber:23},void 0),e.jsxDEV("div",{style:{fontSize:"13px",color:"var(--muted-foreground, #667085)",fontFamily:"Inter, sans-serif"},children:["📅 ",Ke(t.downloaded_at)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:743,columnNumber:23},void 0),t.download_ip&&e.jsxDEV("div",{style:{fontSize:"12px",color:"var(--muted-foreground, #667085)",fontFamily:"monospace",marginTop:"4px"},children:["🌐 IP: ",t.download_ip]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:753,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:722,columnNumber:21},void 0)]},t.download_id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:699,columnNumber:19},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:689,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:687,columnNumber:13},void 0),n.export_jobs_download_history&&n.export_jobs_download_history.length===0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(pi,{icon:e.jsxDEV(Ai,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:774,columnNumber:36},void 0),title:"Lịch sử tải xuống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:774,columnNumber:15},void 0),e.jsxDEV("div",{style:{padding:"32px 16px",textAlign:"center",background:"var(--muted, #f9fafb)",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 6px)",marginBottom:"24px"},children:[e.jsxDEV(Ai,{size:48,style:{color:"var(--muted-foreground, #667085)",marginBottom:"12px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:785,columnNumber:17},void 0),e.jsxDEV("p",{style:{margin:0,fontFamily:"Inter, sans-serif",fontSize:"14px",color:"var(--muted-foreground, #667085)"},children:"Chưa có lịch sử tải xuống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:789,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:775,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:773,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:153,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:76,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:57,columnNumber:5},void 0)},pi=({icon:n,title:s})=>e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",marginTop:"24px"},children:[e.jsxDEV("div",{style:{color:"var(--primary, #005cb6)"},children:n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:820,columnNumber:5},void 0),e.jsxDEV("h3",{style:{margin:0,fontFamily:"Inter, sans-serif",fontSize:"16px",fontWeight:600,color:"var(--foreground, #101828)"},children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:821,columnNumber:5},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:811,columnNumber:3},void 0),Pi=({children:n})=>e.jsxDEV("div",{style:{background:"white",border:"1px solid var(--border, #d0d5dd)",borderRadius:"var(--radius, 6px)",marginBottom:"16px",overflow:"hidden"},children:n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:836,columnNumber:3},void 0),qe=({label:n,value:s,icon:r,mono:u,highlight:c,badge:T,style:t})=>e.jsxDEV("div",{style:{padding:"14px 16px",borderBottom:"1px solid var(--border, #d0d5dd)",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[e.jsxDEV("span",{style:{fontFamily:"Inter, sans-serif",fontSize:"13px",fontWeight:500,color:"var(--muted-foreground, #667085)",display:"flex",alignItems:"center",gap:"6px"},children:[r,n]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:868,columnNumber:5},void 0),e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T&&e.jsxDEV("span",{style:{padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:600,fontFamily:"Inter, sans-serif",color:T.color,background:T.bg},children:T.text},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:884,columnNumber:9},void 0),e.jsxDEV("span",{style:{fontFamily:u?"monospace":"Inter, sans-serif",fontSize:u?"12px":"14px",fontWeight:c?600:400,color:c?"#155724":"var(--foreground, #101828)",textAlign:"right",...t},children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:898,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:882,columnNumber:5},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ExportJobDrawer.tsx",lineNumber:858,columnNumber:3},void 0),Zo=()=>{const[n,s]=d.useState(Jo),[r,u]=d.useState(!1),[c,T]=d.useState(null),[t,p]=d.useState("view"),[V,L]=d.useState(!1),[Q,E]=d.useState(null),[x,f]=d.useState(!1),[D,k]=d.useState(""),[I,z]=d.useState("all"),[F,U]=d.useState("all"),[O,w]=d.useState("all"),[Z,B]=d.useState(""),[R,S]=d.useState(""),ee=10;Array.from(new Set(n.map(_=>_.export_jobs_requested_by)));const ne=n.filter(_=>{const X=D===""||_.export_jobs_id.toLowerCase().includes(D.toLowerCase())||_.export_jobs_source_name.toLowerCase().includes(D.toLowerCase())||_.export_jobs_requested_by.toLowerCase().includes(D.toLowerCase()),H=I==="all"||_.export_jobs_status===I,K=F==="all"||_.export_jobs_source_type===F,q=O==="all"||_.export_jobs_requested_by===O;let ue=!0;if(Z||R){const W=new Date(_.export_jobs_requested_at);if(Z){const te=new Date(Z);te.setHours(0,0,0,0),ue=ue&&W>=te}if(R){const te=new Date(R);te.setHours(23,59,59,999),ue=ue&&W<=te}}return X&&H&&K&&q&&ue}),{currentPage:A,totalPages:y,currentItems:$,setCurrentPage:M}=Je(ne,ee),v=_=>{E(_),f(!0)},N=_=>{_.export_jobs_file_url?(s(X=>X.map(H=>H.export_jobs_id===_.export_jobs_id?{...H,export_jobs_download_count:H.export_jobs_download_count+1,export_jobs_updated_at:new Date().toISOString()}:H)),m.success(`Đang tải xuống: ${_.export_jobs_source_name}`)):m.error("File chưa sẵn sàng để tải xuống")},g=_=>{s(X=>X.map(H=>H.export_jobs_id===_?{...H,export_jobs_status:"Pending",export_jobs_error_message:void 0,export_jobs_updated_at:new Date().toISOString()}:H)),m.success("Đã khởi động lại công việc export")},o=()=>{u(!0),setTimeout(()=>{m.success("Đã làm mới danh sách"),u(!1)},500)},a=()=>{T(null),p("add"),L(!0)},h=_=>{if(t==="add"){const X={export_jobs_id:`EXP_${String(n.length+1).padStart(3,"0")}`,export_jobs_source_name:_.export_jobs_source_name||"Untitled Export",export_jobs_source_type:_.export_jobs_source_type||"REPORT_RUN",export_jobs_requested_by:"Current User (admin@mappa.gov.vn)",export_jobs_requested_at:new Date().toISOString(),export_jobs_status:"Pending",export_jobs_download_count:0,export_jobs_retention_policy:_.export_jobs_retention_policy||"7 days",export_jobs_created_at:new Date().toISOString(),export_jobs_updated_at:new Date().toISOString()};s(H=>[X,...H]),m.success("Đã tạo công việc export mới")}L(!1)},[b,l]=d.useState(new Set),j=_=>{l(X=>{const H=new Set(X);return H.has(_)?H.delete(_):H.add(_),H})};return e.jsxDEV("div",{className:oe.container,children:[e.jsxDEV("div",{className:oe.header,children:e.jsxDEV("div",{className:oe.headerLeft,children:[e.jsxDEV(ye,{className:oe.headerIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:247,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:oe.title,children:"Trung tâm Xuất dữ liệu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:249,columnNumber:13},void 0),e.jsxDEV("p",{className:oe.subtitle,children:"Quản lý và theo dõi các công việc export dữ liệu từ hệ thống MAPPA Portal"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:250,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:248,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:246,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:245,columnNumber:7},void 0),e.jsxDEV("div",{className:oe.filterActionsRow,children:[e.jsxDEV("div",{className:oe.filterGroup,children:e.jsxDEV("div",{className:oe.searchBox,children:[e.jsxDEV(_e,{className:oe.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:261,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm theo Job ID, tên nguồn...",value:D,onChange:_=>k(_.target.value),className:oe.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:262,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:260,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:259,columnNumber:9},void 0),e.jsxDEV("div",{className:oe.actionGroup,children:[e.jsxDEV("button",{onClick:o,className:oe.btnSecondary,children:[e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:273,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:272,columnNumber:11},void 0),e.jsxDEV("button",{onClick:a,className:oe.btnPrimary,children:[e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:277,columnNumber:13},void 0),"Tạo Export Mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:276,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:271,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:258,columnNumber:7},void 0),e.jsxDEV("div",{className:oe.statsGrid,children:[e.jsxDEV("div",{className:oe.statCard,children:[e.jsxDEV("div",{className:oe.statCardHeader,children:[e.jsxDEV(ni,{className:oe.statIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:287,columnNumber:13},void 0),e.jsxDEV("span",{className:oe.statLabel,children:"Tổng số Jobs"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:288,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:286,columnNumber:11},void 0),e.jsxDEV("div",{className:oe.statValue,children:n.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:290,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:285,columnNumber:9},void 0),e.jsxDEV("div",{className:oe.statCard,children:[e.jsxDEV("div",{className:oe.statCardHeader,children:[e.jsxDEV(be,{className:oe.statIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:294,columnNumber:13},void 0),e.jsxDEV("span",{className:oe.statLabel,children:"Hoàn thành"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:295,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:293,columnNumber:11},void 0),e.jsxDEV("div",{className:oe.statValue,children:n.filter(_=>_.export_jobs_status==="Completed").length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:297,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:292,columnNumber:9},void 0),e.jsxDEV("div",{className:oe.statCard,children:[e.jsxDEV("div",{className:oe.statCardHeader,children:[e.jsxDEV(ii,{className:oe.statIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:303,columnNumber:13},void 0),e.jsxDEV("span",{className:oe.statLabel,children:"Đang xử lý"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:304,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:302,columnNumber:11},void 0),e.jsxDEV("div",{className:oe.statValue,children:n.filter(_=>_.export_jobs_status==="Processing").length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:306,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:301,columnNumber:9},void 0),e.jsxDEV("div",{className:oe.statCard,children:[e.jsxDEV("div",{className:oe.statCardHeader,children:[e.jsxDEV(ve,{className:oe.statIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:312,columnNumber:13},void 0),e.jsxDEV("span",{className:oe.statLabel,children:"Thất bại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:313,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:311,columnNumber:11},void 0),e.jsxDEV("div",{className:oe.statValue,children:n.filter(_=>_.export_jobs_status==="Failed").length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:315,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:310,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:284,columnNumber:7},void 0),r?e.jsxDEV("div",{className:oe.loadingContainer,children:[e.jsxDEV(he,{className:oe.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:324,columnNumber:11},void 0),e.jsxDEV("p",{className:oe.loadingText,children:"Đang tải dữ liệu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:325,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:323,columnNumber:9},void 0):ne.length===0?e.jsxDEV("div",{className:oe.emptyState,children:[e.jsxDEV(ye,{size:64},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:329,columnNumber:11},void 0),e.jsxDEV("p",{children:"Không tìm thấy export job nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:330,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:328,columnNumber:9},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:oe.modulesList,children:$.map(_=>{const X=b.has(_.export_jobs_id);return e.jsxDEV("div",{className:oe.moduleCard,children:[e.jsxDEV("div",{className:oe.moduleHeader,children:[e.jsxDEV("button",{className:oe.moduleToggle,onClick:()=>j(_.export_jobs_id),children:X?e.jsxDEV(Me,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:346,columnNumber:37},void 0):e.jsxDEV(Ce,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:346,columnNumber:65},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:342,columnNumber:21},void 0),e.jsxDEV("div",{className:oe.moduleInfo,children:[e.jsxDEV("div",{className:oe.moduleNameRow,children:[e.jsxDEV("h3",{className:oe.moduleName,children:_.export_jobs_source_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:351,columnNumber:25},void 0),e.jsxDEV("code",{className:oe.moduleCode,children:_.export_jobs_id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:352,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:350,columnNumber:23},void 0),e.jsxDEV("p",{className:oe.moduleDescription,children:[vi(_.export_jobs_source_type)," • ",_.export_jobs_requested_by.split("(")[0].trim()]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:354,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:349,columnNumber:21},void 0),e.jsxDEV("div",{className:oe.moduleMeta,children:e.jsxDEV("span",{className:oe.permissionCount,style:Yi(_.export_jobs_status),children:_.export_jobs_status},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:360,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:359,columnNumber:21},void 0),e.jsxDEV("div",{className:oe.moduleActions,children:[_.export_jobs_status==="Completed"&&_.export_jobs_file_url&&e.jsxDEV("button",{className:oe.btnIconEdit,onClick:H=>{H.stopPropagation(),N(_)},title:"Tải xuống",children:e.jsxDEV(ye,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:379,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:371,columnNumber:25},void 0),e.jsxDEV("button",{className:oe.btnIconEdit,onClick:H=>{H.stopPropagation(),v(_)},title:"Xem chi tiết",children:e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:392,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:384,columnNumber:23},void 0),_.export_jobs_status==="Failed"&&e.jsxDEV("button",{className:oe.btnIconDelete,onClick:H=>{H.stopPropagation(),g(_.export_jobs_id)},title:"Thử lại",children:e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:405,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:397,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:368,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:341,columnNumber:19},void 0),X&&e.jsxDEV("div",{className:oe.permissionsTable,children:[e.jsxDEV("div",{className:oe.permissionsTableHeader,children:e.jsxDEV("h4",{className:oe.permissionsTableTitle,children:"Thông tin chi tiết"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:415,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:414,columnNumber:23},void 0),e.jsxDEV("table",{className:oe.table,children:e.jsxDEV("tbody",{children:[e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"200px"},children:"Loại nguồn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:421,columnNumber:29},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:Oo(_.export_jobs_source_type),children:vi(_.export_jobs_source_type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:423,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:422,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:420,columnNumber:27},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Người yêu cầu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:429,columnNumber:29},void 0),e.jsxDEV("td",{children:_.export_jobs_requested_by},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:430,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:428,columnNumber:27},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Thời gian yêu cầu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:433,columnNumber:29},void 0),e.jsxDEV("td",{children:Ke(_.export_jobs_requested_at)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:434,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:432,columnNumber:27},void 0),_.export_jobs_completed_at&&e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Thời gian hoàn thành"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:438,columnNumber:31},void 0),e.jsxDEV("td",{children:Ke(_.export_jobs_completed_at)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:439,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:437,columnNumber:29},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Số lần tải xuống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:443,columnNumber:29},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 12px",background:_.export_jobs_download_count>0?"#e3f2fd":"var(--muted)",color:_.export_jobs_download_count>0?"#1976d2":"var(--muted-foreground)",borderRadius:"12px",fontSize:"var(--text-sm)",fontWeight:600},children:[_.export_jobs_download_count," lần"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:445,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:444,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:442,columnNumber:27},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Chính sách lưu trữ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:462,columnNumber:29},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:Wo(_.export_jobs_retention_policy),children:_.export_jobs_retention_policy},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:464,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:463,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:461,columnNumber:27},void 0),_.export_jobs_file_size&&e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Kích thước file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:471,columnNumber:31},void 0),e.jsxDEV("td",{children:en(_.export_jobs_file_size)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:472,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:470,columnNumber:29},void 0),_.export_jobs_error_message&&e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Thông báo lỗi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:477,columnNumber:31},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{style:{padding:"12px",background:"#fff3e0",border:"1px solid #ffb74d",borderRadius:"var(--radius)",color:"#e65100",fontSize:"var(--text-sm)",fontFamily:"monospace"},children:_.export_jobs_error_message},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:479,columnNumber:33},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:478,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:476,columnNumber:29},void 0),_.export_jobs_processing_stage&&e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Giai đoạn xử lý"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:497,columnNumber:31},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxDEV("span",{style:{fontSize:"var(--text-sm)",fontWeight:500},children:_.export_jobs_processing_stage},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:500,columnNumber:35},void 0),_.export_jobs_progress_percent!==void 0&&e.jsxDEV("div",{children:[e.jsxDEV("div",{style:{width:"100%",height:"8px",background:"var(--muted)",borderRadius:"4px",overflow:"hidden"},children:e.jsxDEV("div",{style:{width:`${_.export_jobs_progress_percent}%`,height:"100%",background:"#1976d2",transition:"width 0.3s ease"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:514,columnNumber:41},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:505,columnNumber:39},void 0),e.jsxDEV("span",{style:{fontSize:"12px",color:"var(--muted-foreground)",marginTop:"4px",display:"block"},children:[_.export_jobs_progress_percent,"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:523,columnNumber:39},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:504,columnNumber:37},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:499,columnNumber:33},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:498,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:496,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:419,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:418,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:413,columnNumber:21},void 0)]},_.export_jobs_id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:339,columnNumber:17},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:334,columnNumber:11},void 0),e.jsxDEV("div",{className:oe.footer,children:[e.jsxDEV("div",{className:oe.footerLeft,children:e.jsxDEV("span",{className:oe.footerText,children:["Hiển thị ",(A-1)*ee+1," -"," ",Math.min(A*ee,ne.length)," của ",ne.length," jobs"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:551,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:550,columnNumber:13},void 0),e.jsxDEV("div",{className:oe.footerRight,children:e.jsxDEV("div",{className:oe.pagination,children:[e.jsxDEV("button",{className:oe.pageButton,onClick:()=>M(A-1),disabled:A===1,children:"← Trước"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:558,columnNumber:17},void 0),e.jsxDEV("span",{className:oe.pageInfo,children:["Trang ",A," / ",y]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:565,columnNumber:17},void 0),e.jsxDEV("button",{className:oe.pageButton,onClick:()=>M(A+1),disabled:A===y,children:"Sau →"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:568,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:557,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:556,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:549,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:333,columnNumber:9},void 0),V&&e.jsxDEV(Xo,{job:c,mode:t,onClose:()=>L(!1),onSave:h},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:583,columnNumber:9},void 0),e.jsxDEV(Ko,{job:Q,isOpen:x,onClose:()=>f(!1),onDownload:N},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:592,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportCenterTab.tsx",lineNumber:243,columnNumber:5},void 0)},Yo="_container_3knyi_21",ed="_header_3knyi_49",id="_headerLeft_3knyi_63",nd="_headerIcon_3knyi_75",sd="_title_3knyi_89",rd="_subtitle_3knyi_107",ld="_filterActionsRow_3knyi_133",ad="_filterGroup_3knyi_155",td="_searchBox_3knyi_171",od="_searchIcon_3knyi_185",dd="_searchInput_3knyi_207",cd="_filterSelect_3knyi_253",md="_actionGroup_3knyi_299",ud="_btnSecondary_3knyi_357",pd="_dateRangeRow_3knyi_409",fd="_dateRangeLabel_3knyi_429",Nd="_dateInput_3knyi_445",bd="_btnClear_3knyi_489",Td="_statsGrid_3knyi_539",Vd="_statCard_3knyi_551",vd="_statCardHeader_3knyi_577",xd="_statIcon_3knyi_591",gd="_statLabel_3knyi_605",hd="_statValue_3knyi_619",Ed="_modulesList_3knyi_643",Hd="_moduleCard_3knyi_655",_d="_moduleHeader_3knyi_681",Ld="_moduleToggle_3knyi_707",Dd="_moduleInfo_3knyi_747",jd="_moduleNameRow_3knyi_757",yd="_moduleName_3knyi_757",Qd="_moduleCode_3knyi_789",Cd="_moduleDescription_3knyi_811",Sd="_moduleMeta_3knyi_835",wd="_timestamp_3knyi_849",Md="_outcomeBadge_3knyi_869",Id="_moduleActions_3knyi_891",kd="_btnIconEdit_3knyi_905",Ad="_permissionsTable_3knyi_951",Rd="_permissionsTableHeader_3knyi_983",Pd="_permissionsTableTitle_3knyi_1001",Bd="_table_3knyi_1017",zd="_drawerBackdrop_3knyi_1109",Fd="_drawer_3knyi_1109",$d="_drawerHeader_3knyi_1197",Ud="_drawerTitle_3knyi_1215",qd="_drawerSubtitle_3knyi_1231",Gd="_drawerClose_3knyi_1245",Od="_drawerBody_3knyi_1283",Wd="_drawerSection_3knyi_1301",Jd="_drawerSectionTitle_3knyi_1313",Xd="_drawerInfoGrid_3knyi_1333",Kd="_drawerInfoItem_3knyi_1345",Zd="_jsonViewer_3knyi_1389",Yd="_footer_3knyi_1425",ec="_footerLeft_3knyi_1449",ic="_footerText_3knyi_1459",nc="_footerRight_3knyi_1473",sc="_pagination_3knyi_1485",rc="_pageButton_3knyi_1497",lc="_pageInfo_3knyi_1545",ac="_loadingContainer_3knyi_1569",tc="_spinner_3knyi_1587",oc="_loadingText_3knyi_1619",dc="_emptyState_3knyi_1635",J={container:Yo,header:ed,headerLeft:id,headerIcon:nd,title:sd,subtitle:rd,filterActionsRow:ld,filterGroup:ad,searchBox:td,searchIcon:od,searchInput:dd,filterSelect:cd,actionGroup:md,btnSecondary:ud,dateRangeRow:pd,dateRangeLabel:fd,dateInput:Nd,btnClear:bd,statsGrid:Td,statCard:Vd,statCardHeader:vd,statIcon:xd,statLabel:gd,statValue:hd,modulesList:Ed,moduleCard:Hd,moduleHeader:_d,moduleToggle:Ld,moduleInfo:Dd,moduleNameRow:jd,moduleName:yd,moduleCode:Qd,moduleDescription:Cd,moduleMeta:Sd,timestamp:wd,outcomeBadge:Md,moduleActions:Id,btnIconEdit:kd,permissionsTable:Ad,permissionsTableHeader:Rd,permissionsTableTitle:Pd,table:Bd,drawerBackdrop:zd,drawer:Fd,drawerHeader:$d,drawerTitle:Ud,drawerSubtitle:qd,drawerClose:Gd,drawerBody:Od,drawerSection:Wd,drawerSectionTitle:Jd,drawerInfoGrid:Xd,drawerInfoItem:Kd,jsonViewer:Zd,footer:Yd,footerLeft:ec,footerText:ic,footerRight:nc,pagination:sc,pageButton:rc,pageInfo:lc,loadingContainer:ac,spinner:tc,loadingText:oc,emptyState:dc},cc=({event:n,isOpen:s,onClose:r})=>!s||!n?null:e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:J.drawerBackdrop,onClick:r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:62,columnNumber:7},void 0),e.jsxDEV("div",{className:J.drawer,children:[e.jsxDEV("div",{className:J.drawerHeader,children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:J.drawerTitle,children:"Chi tiết Audit Log"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:69,columnNumber:13},void 0),e.jsxDEV("p",{className:J.drawerSubtitle,children:["#",n.audit_events_id]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:70,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:68,columnNumber:11},void 0),e.jsxDEV("button",{onClick:r,className:J.drawerClose,children:e.jsxDEV(Ve,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:73,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:72,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:67,columnNumber:9},void 0),e.jsxDEV("div",{className:J.drawerBody,children:[e.jsxDEV("div",{className:J.drawerSection,children:[e.jsxDEV("h3",{className:J.drawerSectionTitle,children:"Thông tin sự kiện"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:81,columnNumber:13},void 0),e.jsxDEV("div",{className:J.drawerInfoGrid,children:[e.jsxDEV("div",{className:J.drawerInfoItem,children:[e.jsxDEV("label",{children:"Event Type"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:84,columnNumber:17},void 0),e.jsxDEV("span",{children:n.audit_events_event_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:85,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:83,columnNumber:15},void 0),e.jsxDEV("div",{className:J.drawerInfoItem,children:[e.jsxDEV("label",{children:"Actor User ID"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:88,columnNumber:17},void 0),e.jsxDEV("span",{children:n.audit_events_actor_user_id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:89,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:87,columnNumber:15},void 0),e.jsxDEV("div",{className:J.drawerInfoItem,children:[e.jsxDEV("label",{children:"Entity Type"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:92,columnNumber:17},void 0),e.jsxDEV("span",{children:n.audit_events_entity_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:93,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:91,columnNumber:15},void 0),e.jsxDEV("div",{className:J.drawerInfoItem,children:[e.jsxDEV("label",{children:"Outcome"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:96,columnNumber:17},void 0),e.jsxDEV("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 12px",borderRadius:"12px",fontSize:"13px",fontWeight:600,background:n.audit_events_outcome==="success"?"#d4edda":"#f8d7da",color:n.audit_events_outcome==="success"?"#155724":"#721c24"},children:n.audit_events_outcome==="success"?"✓ Success":"✗ Failed"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:97,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:95,columnNumber:15},void 0),e.jsxDEV("div",{className:J.drawerInfoItem,children:[e.jsxDEV("label",{children:"Timestamp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:113,columnNumber:17},void 0),e.jsxDEV("span",{children:new Date(n.audit_events_timestamp).toLocaleString("vi-VN")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:114,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:112,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:82,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:80,columnNumber:11},void 0),n.audit_events_context_json&&e.jsxDEV("div",{className:J.drawerSection,children:[e.jsxDEV("h3",{className:J.drawerSectionTitle,children:"Context JSON"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:122,columnNumber:15},void 0),e.jsxDEV("pre",{className:J.jsonViewer,children:JSON.stringify(n.audit_events_context_json,null,2)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:123,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:121,columnNumber:13},void 0),n.audit_events_details_redacted_json&&e.jsxDEV("div",{className:J.drawerSection,children:[e.jsxDEV("h3",{className:J.drawerSectionTitle,children:"Details (Redacted) JSON"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:132,columnNumber:15},void 0),e.jsxDEV("pre",{className:J.jsonViewer,children:JSON.stringify(n.audit_events_details_redacted_json,null,2)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:133,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:131,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:78,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:65,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:60,columnNumber:5},void 0),mc=()=>{const[n,s]=d.useState(!0),[r,u]=d.useState([]),[c,T]=d.useState(""),[t,p]=d.useState("all"),[V,L]=d.useState("all"),[Q,E]=d.useState("all"),[x,f]=d.useState(""),[D,k]=d.useState(""),[I,z]=d.useState(new Set),[F,U]=d.useState(1),O=20,[w,Z]=d.useState(!1),[B,R]=d.useState(null),S=async()=>{try{s(!0);const{data:a,error:h}=await ie.from("audit_events").select("*, id:_id").order("audit_events_timestamp",{ascending:!1});if(h){console.error("❌ Error fetching audit events:",h),m.error(`Lỗi tải dữ liệu: ${h.message}`);return}u(a||[])}catch(a){console.error("❌ Error:",a),m.error("Lỗi kết nối cơ sở dữ liệu")}finally{s(!1)}};d.useEffect(()=>{S()},[]);const ee=d.useMemo(()=>{const a=new Set(r.map(h=>h.audit_events_event_type));return Array.from(a).sort()},[r]),ne=d.useMemo(()=>{const a=new Set(r.map(h=>h.audit_events_actor_user_id));return Array.from(a).sort()},[r]),A=d.useMemo(()=>{let a=[...r];if(c.trim()){const h=c.toLowerCase();a=a.filter(b=>b.audit_events_id.toLowerCase().includes(h)||b.audit_events_event_type.toLowerCase().includes(h))}if(t!=="all"&&(a=a.filter(h=>h.audit_events_event_type===t)),V!=="all"&&(a=a.filter(h=>h.audit_events_actor_user_id===V)),Q!=="all"&&(a=a.filter(h=>h.audit_events_outcome===Q)),x){const h=new Date(x);a=a.filter(b=>new Date(b.audit_events_timestamp)>=h)}if(D){const h=new Date(D);h.setHours(23,59,59,999),a=a.filter(b=>new Date(b.audit_events_timestamp)<=h)}return a},[r,c,t,V,Q,x,D]),y=Math.ceil(A.length/O),$=A.slice((F-1)*O,F*O),M=a=>{const h=new Set(I);h.has(a)?h.delete(a):h.add(a),z(h)},v=a=>{R(a),Z(!0)},N=()=>{m.info("Đang làm mới dữ liệu..."),S()},g=()=>{m.info("Tính năng xuất dữ liệu đang được phát triển")},o=a=>new Date(a).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});return e.jsxDEV("div",{className:J.container,children:[e.jsxDEV("div",{className:J.header,children:e.jsxDEV("div",{className:J.headerLeft,children:[e.jsxDEV(Ze,{className:J.headerIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:312,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:J.title,children:"Nhật ký Hệ thống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:314,columnNumber:13},void 0),e.jsxDEV("p",{className:J.subtitle,children:"Audit logs và security events cho hệ thống MAPPA Portal"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:315,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:313,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:311,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:310,columnNumber:7},void 0),e.jsxDEV("div",{className:J.filterActionsRow,children:[e.jsxDEV("div",{className:J.filterGroup,children:[e.jsxDEV("div",{className:J.searchBox,children:[e.jsxDEV(_e,{className:J.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:326,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm theo Event ID hoặc Event Type...",value:c,onChange:a=>T(a.target.value),className:J.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:327,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:325,columnNumber:11},void 0),e.jsxDEV("select",{value:t,onChange:a=>p(a.target.value),className:J.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"Tất cả Event Types"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:342,columnNumber:13},void 0),ee.map(a=>e.jsxDEV("option",{value:a,children:a},a,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:344,columnNumber:15},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:337,columnNumber:11},void 0),e.jsxDEV("select",{value:V,onChange:a=>L(a.target.value),className:J.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"Tất cả Users"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:356,columnNumber:13},void 0),ne.map(a=>e.jsxDEV("option",{value:a,children:a},a,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:358,columnNumber:15},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:351,columnNumber:11},void 0),e.jsxDEV("select",{value:Q,onChange:a=>E(a.target.value),className:J.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"Tất cả Outcomes"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:370,columnNumber:13},void 0),e.jsxDEV("option",{value:"success",children:"Success"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:371,columnNumber:13},void 0),e.jsxDEV("option",{value:"failed",children:"Failed"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:372,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:365,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:324,columnNumber:9},void 0),e.jsxDEV("div",{className:J.actionGroup,children:[e.jsxDEV("button",{onClick:N,className:J.btnSecondary,children:[e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:378,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:377,columnNumber:11},void 0),e.jsxDEV("button",{onClick:g,className:J.btnSecondary,children:[e.jsxDEV(ye,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:382,columnNumber:13},void 0),"Xuất Log"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:381,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:376,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:323,columnNumber:7},void 0),e.jsxDEV("div",{className:J.dateRangeRow,children:[e.jsxDEV(ki,{size:18,style:{color:"var(--muted-foreground)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:390,columnNumber:9},void 0),e.jsxDEV("span",{className:J.dateRangeLabel,children:"Khoảng thời gian:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:391,columnNumber:9},void 0),e.jsxDEV("input",{type:"date",value:x,onChange:a=>f(a.target.value),className:J.dateInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:392,columnNumber:9},void 0),e.jsxDEV("span",{style:{color:"var(--muted-foreground)",fontWeight:500},children:"→"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:398,columnNumber:9},void 0),e.jsxDEV("input",{type:"date",value:D,onChange:a=>k(a.target.value),className:J.dateInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:399,columnNumber:9},void 0),(x||D)&&e.jsxDEV("button",{onClick:()=>{f(""),k(""),m.success("Đã xóa bộ lọc thời gian")},className:J.btnClear,children:[e.jsxDEV(Ve,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:414,columnNumber:13},void 0),"Xóa"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:406,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:389,columnNumber:7},void 0),e.jsxDEV("div",{className:J.statsGrid,children:[e.jsxDEV("div",{className:J.statCard,children:[e.jsxDEV("div",{className:J.statCardHeader,children:[e.jsxDEV(We,{className:J.statIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:424,columnNumber:13},void 0),e.jsxDEV("span",{className:J.statLabel,children:"Tổng Events"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:425,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:423,columnNumber:11},void 0),e.jsxDEV("div",{className:J.statValue,children:r.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:427,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:422,columnNumber:9},void 0),e.jsxDEV("div",{className:J.statCard,children:[e.jsxDEV("div",{className:J.statCardHeader,children:[e.jsxDEV(be,{className:J.statIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:431,columnNumber:13},void 0),e.jsxDEV("span",{className:J.statLabel,children:"Success"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:432,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:430,columnNumber:11},void 0),e.jsxDEV("div",{className:J.statValue,children:r.filter(a=>a.audit_events_outcome==="success").length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:434,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:429,columnNumber:9},void 0),e.jsxDEV("div",{className:J.statCard,children:[e.jsxDEV("div",{className:J.statCardHeader,children:[e.jsxDEV(Ve,{className:J.statIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:440,columnNumber:13},void 0),e.jsxDEV("span",{className:J.statLabel,children:"Failed"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:441,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:439,columnNumber:11},void 0),e.jsxDEV("div",{className:J.statValue,children:r.filter(a=>a.audit_events_outcome==="failed").length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:443,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:438,columnNumber:9},void 0),e.jsxDEV("div",{className:J.statCard,children:[e.jsxDEV("div",{className:J.statCardHeader,children:[e.jsxDEV(Re,{className:J.statIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:449,columnNumber:13},void 0),e.jsxDEV("span",{className:J.statLabel,children:"Unique Users"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:450,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:448,columnNumber:11},void 0),e.jsxDEV("div",{className:J.statValue,children:ne.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:452,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:447,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:421,columnNumber:7},void 0),n?e.jsxDEV("div",{className:J.loadingContainer,children:[e.jsxDEV(he,{className:J.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:459,columnNumber:11},void 0),e.jsxDEV("p",{className:J.loadingText,children:"Đang tải audit logs..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:460,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:458,columnNumber:9},void 0):A.length===0?e.jsxDEV("div",{className:J.emptyState,children:[e.jsxDEV(Ze,{size:64},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:464,columnNumber:11},void 0),e.jsxDEV("p",{children:"Không tìm thấy audit event nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:465,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:463,columnNumber:9},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:J.modulesList,children:$.map(a=>{const h=I.has(a.audit_events_id);return e.jsxDEV("div",{className:J.moduleCard,children:[e.jsxDEV("div",{className:J.moduleHeader,children:[e.jsxDEV("button",{className:J.moduleToggle,onClick:()=>M(a.audit_events_id),children:h?e.jsxDEV(Me,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:481,columnNumber:37},void 0):e.jsxDEV(Ce,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:481,columnNumber:65},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:477,columnNumber:21},void 0),e.jsxDEV("div",{className:J.moduleInfo,children:[e.jsxDEV("div",{className:J.moduleNameRow,children:[e.jsxDEV("h3",{className:J.moduleName,children:a.audit_events_event_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:486,columnNumber:25},void 0),e.jsxDEV("code",{className:J.moduleCode,children:["#",a.audit_events_id.slice(0,8)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:487,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:485,columnNumber:23},void 0),e.jsxDEV("p",{className:J.moduleDescription,children:[e.jsxDEV(Re,{size:14,style:{display:"inline",marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:490,columnNumber:25},void 0),a.audit_events_actor_user_id," • ",a.audit_events_entity_type]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:489,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:484,columnNumber:21},void 0),e.jsxDEV("div",{className:J.moduleMeta,children:e.jsxDEV("span",{className:J.timestamp,children:[e.jsxDEV(Qe,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:497,columnNumber:25},void 0),o(a.audit_events_timestamp)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:496,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:495,columnNumber:21},void 0),e.jsxDEV("div",{className:J.moduleMeta,children:e.jsxDEV("span",{className:J.outcomeBadge,style:{background:a.audit_events_outcome==="success"?"#d4edda":"#f8d7da",color:a.audit_events_outcome==="success"?"#155724":"#721c24"},children:a.audit_events_outcome==="success"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:512,columnNumber:29},void 0)," Success"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:511,columnNumber:27},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:516,columnNumber:29},void 0)," Failed"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:515,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:503,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:502,columnNumber:21},void 0),e.jsxDEV("div",{className:J.moduleActions,children:e.jsxDEV("button",{className:J.btnIconEdit,onClick:b=>{b.stopPropagation(),v(a)},title:"Xem chi tiết JSON",children:e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:531,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:523,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:522,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:476,columnNumber:19},void 0),h&&e.jsxDEV("div",{className:J.permissionsTable,children:[e.jsxDEV("div",{className:J.permissionsTableHeader,children:e.jsxDEV("h4",{className:J.permissionsTableTitle,children:"Thông tin chi tiết"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:540,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:539,columnNumber:23},void 0),e.jsxDEV("table",{className:J.table,children:e.jsxDEV("tbody",{children:[e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"200px"},children:"Event ID"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:546,columnNumber:29},void 0),e.jsxDEV("td",{children:e.jsxDEV("code",{style:{fontSize:"13px",color:"#666"},children:a.audit_events_id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:548,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:547,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:545,columnNumber:27},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Event Type"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:554,columnNumber:29},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{padding:"4px 10px",background:"rgba(0, 92, 182, 0.1)",color:"#005cb6",borderRadius:"4px",fontSize:"13px",fontWeight:600},children:a.audit_events_event_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:556,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:555,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:553,columnNumber:27},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Actor User ID"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:571,columnNumber:29},void 0),e.jsxDEV("td",{children:a.audit_events_actor_user_id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:572,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:570,columnNumber:27},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Entity Type"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:575,columnNumber:29},void 0),e.jsxDEV("td",{children:a.audit_events_entity_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:576,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:574,columnNumber:27},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Outcome"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:579,columnNumber:29},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"12px",fontSize:"13px",fontWeight:600,background:a.audit_events_outcome==="success"?"#d4edda":"#f8d7da",color:a.audit_events_outcome==="success"?"#155724":"#721c24"},children:a.audit_events_outcome==="success"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:596,columnNumber:37},void 0)," Success"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:595,columnNumber:35},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:600,columnNumber:37},void 0)," Failed"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:599,columnNumber:35},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:581,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:580,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:578,columnNumber:27},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Timestamp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:607,columnNumber:29},void 0),e.jsxDEV("td",{children:o(a.audit_events_timestamp)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:608,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:606,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:544,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:543,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:538,columnNumber:21},void 0)]},a.audit_events_id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:474,columnNumber:17},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:469,columnNumber:11},void 0),e.jsxDEV("div",{className:J.footer,children:[e.jsxDEV("div",{className:J.footerLeft,children:e.jsxDEV("span",{className:J.footerText,children:["Hiển thị ",(F-1)*O+1," -"," ",Math.min(F*O,A.length)," của ",A.length," events"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:622,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:621,columnNumber:13},void 0),e.jsxDEV("div",{className:J.footerRight,children:e.jsxDEV("div",{className:J.pagination,children:[e.jsxDEV("button",{className:J.pageButton,onClick:()=>U(F-1),disabled:F===1,children:"← Trước"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:629,columnNumber:17},void 0),e.jsxDEV("span",{className:J.pageInfo,children:["Trang ",F," / ",y]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:636,columnNumber:17},void 0),e.jsxDEV("button",{className:J.pageButton,onClick:()=>U(F+1),disabled:F===y,children:"Sau →"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:639,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:628,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:627,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:620,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:468,columnNumber:9},void 0),e.jsxDEV(cc,{event:B,isOpen:w,onClose:()=>Z(!1)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:653,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AuditLogTab.tsx",lineNumber:308,columnNumber:5},void 0)},uc="_container_j2m66_21",pc="_header_j2m66_49",fc="_headerLeft_j2m66_65",Nc="_headerIcon_j2m66_77",bc="_title_j2m66_91",Tc="_subtitle_j2m66_109",Vc="_headerRight_j2m66_127",vc="_btnPrimary_j2m66_137",xc="_filterToolbar_j2m66_191",gc="_searchBox_j2m66_213",hc="_searchIcon_j2m66_225",Ec="_searchInput_j2m66_247",Hc="_searchClear_j2m66_293",_c="_filterSelect_j2m66_339",Lc="_tableWrapper_j2m66_395",Dc="_table_j2m66_395",jc="_tableHeader_j2m66_423",yc="_tableRow_j2m66_473",Qc="_timestampCell_j2m66_533",Cc="_entityTypeBadge_j2m66_561",Sc="_eventTypeBadge_j2m66_597",wc="_entityIdCode_j2m66_625",Mc="_userCell_j2m66_647",Ic="_mutedText_j2m66_671",kc="_changedFieldsList_j2m66_681",Ac="_fieldChip_j2m66_695",Rc="_fieldChipMore_j2m66_717",Pc="_pagination_j2m66_747",Bc="_paginationLeft_j2m66_771",zc="_paginationText_j2m66_781",Fc="_paginationRight_j2m66_795",$c="_pageButton_j2m66_807",Uc="_pageInfo_j2m66_861",qc="_drawerOverlay_j2m66_885",Gc="_drawer_j2m66_885",Oc="_drawerHeader_j2m66_975",Wc="_breadcrumb_j2m66_995",Jc="_breadcrumbSeparator_j2m66_1021",Xc="_breadcrumbItem_j2m66_1029",Kc="_breadcrumbItemActive_j2m66_1039",Zc="_breadcrumbEventType_j2m66_1051",Yc="_drawerCloseBtn_j2m66_1071",em="_metadataRow_j2m66_1117",im="_metadataItem_j2m66_1137",nm="_splitViewContainer_j2m66_1173",sm="_splitViewHeader_j2m66_1187",rm="_splitViewColumnHeader_j2m66_1201",lm="_splitViewLabel_j2m66_1221",am="_splitViewContent_j2m66_1239",tm="_diffRow_j2m66_1259",om="_diffRowChanged_j2m66_1277",dm="_diffFieldHeader_j2m66_1293",cm="_diffFieldName_j2m66_1321",mm="_changedIndicator_j2m66_1371",um="_copyBtn_j2m66_1397",pm="_diffFieldValues_j2m66_1447",fm="_diffValueColumn_j2m66_1459",Nm="_diffValuePre_j2m66_1479",bm="_loadingContainer_j2m66_1509",Tm="_spinner_j2m66_1527",Vm="_loadingText_j2m66_1559",vm="_emptyState_j2m66_1575",ae={container:uc,header:pc,headerLeft:fc,headerIcon:Nc,title:bc,subtitle:Tc,headerRight:Vc,btnPrimary:vc,filterToolbar:xc,searchBox:gc,searchIcon:hc,searchInput:Ec,searchClear:Hc,filterSelect:_c,tableWrapper:Lc,table:Dc,tableHeader:jc,tableRow:yc,timestampCell:Qc,entityTypeBadge:Cc,eventTypeBadge:Sc,entityIdCode:wc,userCell:Mc,mutedText:Ic,changedFieldsList:kc,fieldChip:Ac,fieldChipMore:Rc,pagination:Pc,paginationLeft:Bc,paginationText:zc,paginationRight:Fc,pageButton:$c,pageInfo:Uc,drawerOverlay:qc,drawer:Gc,drawerHeader:Oc,breadcrumb:Wc,breadcrumbSeparator:Jc,breadcrumbItem:Xc,breadcrumbItemActive:Kc,breadcrumbEventType:Zc,drawerCloseBtn:Yc,metadataRow:em,metadataItem:im,splitViewContainer:nm,splitViewHeader:sm,splitViewColumnHeader:rm,splitViewLabel:lm,splitViewContent:am,diffRow:tm,diffRowChanged:om,diffFieldHeader:dm,diffFieldName:cm,changedIndicator:mm,copyBtn:um,diffFieldValues:pm,diffValueColumn:fm,diffValuePre:Nm,loadingContainer:bm,spinner:Tm,loadingText:Vm,emptyState:vm},xm=()=>{var N;const[n,s]=d.useState(!0),[r,u]=d.useState([]),[c,T]=d.useState(""),[t,p]=d.useState("all"),[V,L]=d.useState("all"),[Q,E]=d.useState(1),[x,f]=d.useState(null),[D,k]=d.useState(!1),[I,z]=d.useState(new Set),F=30,U=async()=>{try{s(!0);const{data:g,error:o}=await ie.from("data_changes").select("*, id:_id").order("data_change_timestamp",{ascending:!1}).limit(500);if(o){console.error("❌ Error fetching data changes:",o),m.error(`Lỗi tải dữ liệu: ${o.message}`);return}u(g||[])}catch(g){console.error("❌ Error:",g),m.error("Lỗi kết nối cơ sở dữ liệu")}finally{s(!1)}};d.useEffect(()=>{U()},[]);const O=d.useMemo(()=>{const g=new Set(r.map(o=>o.data_change_entity_type));return Array.from(g).sort()},[r]),w=d.useMemo(()=>{let g=[...r];if(c.trim()){const o=c.toLowerCase();g=g.filter(a=>{var h;return a.data_change_entity_id.toLowerCase().includes(o)||a.data_change_entity_type.toLowerCase().includes(o)||((h=a.data_change_user_email)==null?void 0:h.toLowerCase().includes(o))})}return t!=="all"&&(g=g.filter(o=>o.data_change_entity_type===t)),V!=="all"&&(g=g.filter(o=>o.data_change_event_type===V)),g},[r,c,t,V]),Z=Math.ceil(w.length/F),B=w.slice((Q-1)*F,Q*F),R=g=>{if(f(g),k(!0),g.data_change_changed_fields)z(new Set(g.data_change_changed_fields));else{const o=new Set([...Object.keys(g.data_change_before||{}),...Object.keys(g.data_change_after||{})]);z(o)}},S=()=>{k(!1),setTimeout(()=>{f(null),z(new Set)},300)},ee=g=>{const o=new Set(I);o.has(g)?o.delete(g):o.add(g),z(o)},ne=()=>{m.info("Đang làm mới dữ liệu..."),U()},A=(g,o)=>{navigator.clipboard.writeText(g),m.success(`Đã copy ${o}`)},y=g=>new Date(g).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),$=g=>({CREATE:{bg:"#d4edda",color:"#155724",label:"CREATE"},UPDATE:{bg:"#fff3cd",color:"#856404",label:"UPDATE"},DELETE:{bg:"#f8d7da",color:"#721c24",label:"DELETE"}})[g],M=g=>g==null?"null":typeof g=="object"?JSON.stringify(g,null,2):String(g),v=(g,o,a)=>{const h=o==null?void 0:o[g],b=a==null?void 0:a[g];return JSON.stringify(h)!==JSON.stringify(b)};return e.jsxDEV("div",{className:ae.container,children:[e.jsxDEV("div",{className:ae.header,children:[e.jsxDEV("div",{className:ae.headerLeft,children:[e.jsxDEV(ln,{className:ae.headerIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:229,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:ae.title,children:"Biến động Dữ liệu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:231,columnNumber:13},void 0),e.jsxDEV("p",{className:ae.subtitle,children:["Theo dõi tất cả thay đổi dữ liệu trong hệ thống • ",w.length.toLocaleString()," changes"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:232,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:230,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:228,columnNumber:9},void 0),e.jsxDEV("div",{className:ae.headerRight,children:e.jsxDEV("button",{onClick:ne,className:ae.btnPrimary,children:[e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:239,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:238,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:237,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:227,columnNumber:7},void 0),e.jsxDEV("div",{className:ae.filterToolbar,children:[e.jsxDEV("div",{className:ae.searchBox,children:[e.jsxDEV(_e,{className:ae.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:248,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm theo Entity ID, Entity Type, User...",value:c,onChange:g=>T(g.target.value),className:ae.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:249,columnNumber:11},void 0),c&&e.jsxDEV("button",{className:ae.searchClear,onClick:()=>T(""),"aria-label":"Clear search",children:e.jsxDEV(De,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:262,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:257,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:247,columnNumber:9},void 0),e.jsxDEV("select",{value:t,onChange:g=>p(g.target.value),className:ae.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"All Entity Types"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:272,columnNumber:11},void 0),O.map(g=>e.jsxDEV("option",{value:g,children:g},g,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:274,columnNumber:13},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:267,columnNumber:9},void 0),e.jsxDEV("select",{value:V,onChange:g=>L(g.target.value),className:ae.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"All Event Types"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:285,columnNumber:11},void 0),e.jsxDEV("option",{value:"CREATE",children:"CREATE"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:286,columnNumber:11},void 0),e.jsxDEV("option",{value:"UPDATE",children:"UPDATE"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:287,columnNumber:11},void 0),e.jsxDEV("option",{value:"DELETE",children:"DELETE"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:288,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:280,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:246,columnNumber:7},void 0),n?e.jsxDEV("div",{className:ae.loadingContainer,children:[e.jsxDEV(he,{className:ae.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:295,columnNumber:11},void 0),e.jsxDEV("p",{className:ae.loadingText,children:"Đang tải data changes..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:296,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:294,columnNumber:9},void 0):w.length===0?e.jsxDEV("div",{className:ae.emptyState,children:[e.jsxDEV(ln,{size:64},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:300,columnNumber:11},void 0),e.jsxDEV("p",{children:"Không tìm thấy data changes"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:301,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:299,columnNumber:9},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:ae.tableWrapper,children:e.jsxDEV("table",{className:ae.table,children:[e.jsxDEV("thead",{className:ae.tableHeader,children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"180px"},children:"Timestamp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:309,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"180px"},children:"Entity Type"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:310,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"120px"},children:"Event Type"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:311,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"200px"},children:"Entity ID"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:312,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"200px"},children:"User"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:313,columnNumber:19},void 0),e.jsxDEV("th",{children:"Changed Fields"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:314,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:308,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:307,columnNumber:15},void 0),e.jsxDEV("tbody",{children:B.map(g=>{const o=$(g.data_change_event_type);return e.jsxDEV("tr",{className:ae.tableRow,onClick:()=>R(g),children:[e.jsxDEV("td",{className:ae.timestampCell,children:[e.jsxDEV(Qe,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:327,columnNumber:25},void 0),y(g.data_change_timestamp)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:326,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{className:ae.entityTypeBadge,children:[e.jsxDEV(ni,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:332,columnNumber:27},void 0),g.data_change_entity_type]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:331,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:330,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{className:ae.eventTypeBadge,style:{background:o.bg,color:o.color},children:o.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:337,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:336,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("code",{className:ae.entityIdCode,children:[g.data_change_entity_id.slice(0,16),"..."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:345,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:344,columnNumber:23},void 0),e.jsxDEV("td",{className:ae.userCell,children:g.data_change_user_email?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Re,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:352,columnNumber:29},void 0),g.data_change_user_email]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:351,columnNumber:27},void 0):e.jsxDEV("span",{className:ae.mutedText,children:"System"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:356,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:349,columnNumber:23},void 0),e.jsxDEV("td",{children:g.data_change_changed_fields&&e.jsxDEV("div",{className:ae.changedFieldsList,children:[g.data_change_changed_fields.slice(0,3).map(a=>e.jsxDEV("span",{className:ae.fieldChip,children:a},a,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:363,columnNumber:31},void 0)),g.data_change_changed_fields.length>3&&e.jsxDEV("span",{className:ae.fieldChipMore,children:["+",g.data_change_changed_fields.length-3]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:368,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:361,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:359,columnNumber:23},void 0)]},g.data_change_id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:321,columnNumber:21},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:317,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:306,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:305,columnNumber:11},void 0),e.jsxDEV("div",{className:ae.pagination,children:[e.jsxDEV("div",{className:ae.paginationLeft,children:e.jsxDEV("span",{className:ae.paginationText,children:["Hiển thị ",(Q-1)*F+1," -"," ",Math.min(Q*F,w.length)," của"," ",w.length.toLocaleString()," changes"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:385,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:384,columnNumber:13},void 0),e.jsxDEV("div",{className:ae.paginationRight,children:[e.jsxDEV("button",{className:ae.pageButton,onClick:()=>E(Q-1),disabled:Q===1,children:[e.jsxDEV(Oi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:397,columnNumber:17},void 0),"Trước"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:392,columnNumber:15},void 0),e.jsxDEV("span",{className:ae.pageInfo,children:["Trang ",Q," / ",Z]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:400,columnNumber:15},void 0),e.jsxDEV("button",{className:ae.pageButton,onClick:()=>E(Q+1),disabled:Q===Z,children:["Sau",e.jsxDEV(Ce,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:409,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:403,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:391,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:383,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:304,columnNumber:9},void 0),D&&x&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:ae.drawerOverlay,onClick:S},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:419,columnNumber:11},void 0),e.jsxDEV("div",{className:ae.drawer,children:[e.jsxDEV("div",{className:ae.drawerHeader,children:[e.jsxDEV("div",{className:ae.breadcrumb,children:[e.jsxDEV(ss,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:424,columnNumber:17},void 0),e.jsxDEV(Ce,{size:14,className:ae.breadcrumbSeparator},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:425,columnNumber:17},void 0),e.jsxDEV("span",{className:ae.breadcrumbItem,children:x.data_change_entity_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:426,columnNumber:17},void 0),e.jsxDEV(Ce,{size:14,className:ae.breadcrumbSeparator},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:429,columnNumber:17},void 0),e.jsxDEV("span",{className:ae.breadcrumbItemActive,children:[x.data_change_entity_id.slice(0,8),"..."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:430,columnNumber:17},void 0),e.jsxDEV(Ce,{size:14,className:ae.breadcrumbSeparator},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:433,columnNumber:17},void 0),e.jsxDEV("span",{className:ae.breadcrumbEventType,style:$(x.data_change_event_type),children:x.data_change_event_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:434,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:423,columnNumber:15},void 0),e.jsxDEV("button",{className:ae.drawerCloseBtn,onClick:S,children:e.jsxDEV(De,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:442,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:441,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:422,columnNumber:13},void 0),e.jsxDEV("div",{className:ae.metadataRow,children:[e.jsxDEV("div",{className:ae.metadataItem,children:[e.jsxDEV(Qe,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:449,columnNumber:17},void 0),e.jsxDEV("span",{children:y(x.data_change_timestamp)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:450,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:448,columnNumber:15},void 0),e.jsxDEV("div",{className:ae.metadataItem,children:[e.jsxDEV(Re,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:453,columnNumber:17},void 0),e.jsxDEV("span",{children:x.data_change_user_email||"System"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:454,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:452,columnNumber:15},void 0),e.jsxDEV("div",{className:ae.metadataItem,children:[e.jsxDEV(We,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:457,columnNumber:17},void 0),e.jsxDEV("span",{children:[((N=x.data_change_changed_fields)==null?void 0:N.length)||0," fields changed"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:458,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:456,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:447,columnNumber:13},void 0),e.jsxDEV("div",{className:ae.splitViewContainer,children:[e.jsxDEV("div",{className:ae.splitViewHeader,children:[e.jsxDEV("div",{className:ae.splitViewColumnHeader,style:{background:"#fef2f2"},children:e.jsxDEV("span",{className:ae.splitViewLabel,children:"BEFORE (Old)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:466,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:465,columnNumber:17},void 0),e.jsxDEV("div",{className:ae.splitViewColumnHeader,style:{background:"#f0fdf4"},children:e.jsxDEV("span",{className:ae.splitViewLabel,children:"AFTER (New)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:469,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:468,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:464,columnNumber:15},void 0),e.jsxDEV("div",{className:ae.splitViewContent,children:Array.from(new Set([...Object.keys(x.data_change_before||{}),...Object.keys(x.data_change_after||{})])).sort().map(g=>{var l,j;const o=v(g,x.data_change_before,x.data_change_after),a=I.has(g),h=(l=x.data_change_before)==null?void 0:l[g],b=(j=x.data_change_after)==null?void 0:j[g];return e.jsxDEV("div",{className:`${ae.diffRow} ${o?ae.diffRowChanged:""}`,children:[e.jsxDEV("div",{className:ae.diffFieldHeader,onClick:()=>ee(g),children:[e.jsxDEV("div",{className:ae.diffFieldName,children:[a?e.jsxDEV(Me,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:504,columnNumber:31},void 0):e.jsxDEV(Ce,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:506,columnNumber:31},void 0),e.jsxDEV("code",{children:g},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:508,columnNumber:29},void 0),o&&e.jsxDEV("span",{className:ae.changedIndicator,children:"CHANGED"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:509,columnNumber:43},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:502,columnNumber:27},void 0),e.jsxDEV("button",{className:ae.copyBtn,onClick:_=>{_.stopPropagation(),A(g,"Field name")},children:e.jsxDEV(Ii,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:518,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:511,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:498,columnNumber:25},void 0),a&&e.jsxDEV("div",{className:ae.diffFieldValues,children:[e.jsxDEV("div",{className:ae.diffValueColumn,style:{background:o?"#fef2f2":"#fafafa",borderLeft:o?"3px solid #dc2626":"3px solid #e5e7eb"},children:e.jsxDEV("pre",{className:ae.diffValuePre,children:M(h)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:532,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:525,columnNumber:29},void 0),e.jsxDEV("div",{className:ae.diffValueColumn,style:{background:o?"#f0fdf4":"#fafafa",borderLeft:o?"3px solid #15803d":"3px solid #e5e7eb"},children:e.jsxDEV("pre",{className:ae.diffValuePre,children:M(b)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:543,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:536,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:524,columnNumber:27},void 0)]},g,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:493,columnNumber:23},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:473,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:463,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:420,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:418,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DataChangesTab.tsx",lineNumber:225,columnNumber:5},void 0)},gm="_container_kcblo_21",hm="_header_kcblo_49",Em="_headerLeft_kcblo_65",Hm="_headerIcon_kcblo_77",_m="_title_kcblo_91",Lm="_subtitle_kcblo_109",Dm="_headerRight_kcblo_127",jm="_btnPrimary_kcblo_137",ym="_filterToolbar_kcblo_191",Qm="_searchBox_kcblo_213",Cm="_searchIcon_kcblo_225",Sm="_searchInput_kcblo_247",wm="_searchClear_kcblo_293",Mm="_filterSelect_kcblo_339",Im="_tableWrapper_kcblo_395",km="_table_kcblo_395",Am="_tableHeader_kcblo_423",Rm="_tableRow_kcblo_473",Pm="_hoverActions_kcblo_493",Bm="_expiredRow_kcblo_541",zm="_timestampCell_kcblo_559",Fm="_jobNameCell_kcblo_587",$m="_sourceBadge_kcblo_611",Um="_statusBadge_kcblo_649",qm="_spinning_kcblo_687",Gm="_inlineProgress_kcblo_715",Om="_inlineProgressFill_kcblo_733",Wm="_formatCode_kcblo_769",Jm="_sizeCell_kcblo_791",Xm="_userCell_kcblo_803",Km="_mutedText_kcblo_827",Zm="_downloadCountCell_kcblo_837",Ym="_downloadCountBadge_kcblo_845",eu="_actionBtn_kcblo_897",iu="_pagination_kcblo_949",nu="_paginationLeft_kcblo_973",su="_paginationText_kcblo_983",ru="_paginationRight_kcblo_997",lu="_pageButton_kcblo_1009",au="_pageInfo_kcblo_1063",tu="_drawerOverlay_kcblo_1087",ou="_drawer_kcblo_1087",du="_drawerHeader_kcblo_1177",cu="_drawerTitle_kcblo_1197",mu="_drawerSubtitle_kcblo_1215",uu="_copyBtnInline_kcblo_1235",pu="_drawerCloseBtn_kcblo_1275",fu="_drawerContent_kcblo_1313",Nu="_section_kcblo_1339",bu="_sectionTitle_kcblo_1351",Tu="_timeline_kcblo_1393",Vu="_timelineItem_kcblo_1429",vu="_timelineIcon_kcblo_1443",xu="_timelineContent_kcblo_1471",gu="_timelineTitle_kcblo_1485",hu="_timelineTime_kcblo_1499",Eu="_timelineMeta_kcblo_1511",Hu="_timelineProgress_kcblo_1523",_u="_progressBar_kcblo_1537",Lu="_progressFill_kcblo_1553",Du="_errorMessage_kcblo_1583",ju="_detailsGrid_kcblo_1631",yu="_detailItem_kcblo_1643",Qu="_sourceBadgeLarge_kcblo_1685",Cu="_formatCodeLarge_kcblo_1723",Su="_downloadCountLarge_kcblo_1747",wu="_emptyHistory_kcblo_1783",Mu="_historyList_kcblo_1831",Iu="_historyItem_kcblo_1843",ku="_historyIcon_kcblo_1875",Au="_historyContent_kcblo_1899",Ru="_historyUser_kcblo_1913",Pu="_historyTime_kcblo_1943",Bu="_historyIp_kcblo_1969",zu="_loadingContainer_kcblo_1989",Fu="_spinner_kcblo_2007",$u="_loadingText_kcblo_2021",Uu="_emptyState_kcblo_2037",G={container:gm,header:hm,headerLeft:Em,headerIcon:Hm,title:_m,subtitle:Lm,headerRight:Dm,btnPrimary:jm,filterToolbar:ym,searchBox:Qm,searchIcon:Cm,searchInput:Sm,searchClear:wm,filterSelect:Mm,tableWrapper:Im,table:km,tableHeader:Am,tableRow:Rm,hoverActions:Pm,expiredRow:Bm,timestampCell:zm,jobNameCell:Fm,sourceBadge:$m,statusBadge:Um,spinning:qm,inlineProgress:Gm,inlineProgressFill:Om,formatCode:Wm,sizeCell:Jm,userCell:Xm,mutedText:Km,downloadCountCell:Zm,downloadCountBadge:Ym,actionBtn:eu,pagination:iu,paginationLeft:nu,paginationText:su,paginationRight:ru,pageButton:lu,pageInfo:au,drawerOverlay:tu,drawer:ou,drawerHeader:du,drawerTitle:cu,drawerSubtitle:mu,copyBtnInline:uu,drawerCloseBtn:pu,drawerContent:fu,section:Nu,sectionTitle:bu,timeline:Tu,timelineItem:Vu,timelineIcon:vu,timelineContent:xu,timelineTitle:gu,timelineTime:hu,timelineMeta:Eu,timelineProgress:Hu,progressBar:_u,progressFill:Lu,errorMessage:Du,detailsGrid:ju,detailItem:yu,sourceBadgeLarge:Qu,formatCodeLarge:Cu,downloadCountLarge:Su,emptyHistory:wu,historyList:Mu,historyItem:Iu,historyIcon:ku,historyContent:Au,historyUser:Ru,historyTime:Pu,historyIp:Bu,loadingContainer:zu,spinner:Fu,loadingText:$u,emptyState:Uu},qu=()=>{var o;const[n,s]=d.useState(!0),[r,u]=d.useState([]),[c,T]=d.useState(""),[t,p]=d.useState("all"),[V,L]=d.useState("all"),[Q,E]=d.useState(1),[x,f]=d.useState(null),[D,k]=d.useState(!1),[I,z]=d.useState([]),F=40,U=async()=>{try{s(!0);const{data:a,error:h}=await ie.from("export_jobs").select("*, id:_id").order("export_job_created_at",{ascending:!1}).limit(500);if(h){console.error("❌ Error fetching export jobs:",h),m.error(`Lỗi tải dữ liệu: ${h.message}`);return}u(a||[])}catch(a){console.error("❌ Error:",a),m.error("Lỗi kết nối cơ sở dữ liệu")}finally{s(!1)}},O=async a=>{try{const{data:h,error:b}=await ie.from("download_history").select("*, id:_id").eq("export_job_id",a).order("download_timestamp",{ascending:!1});if(b){console.error("❌ Error fetching download history:",b);return}z(h||[])}catch(h){console.error("❌ Error:",h)}};d.useEffect(()=>{U()},[]);const w=d.useMemo(()=>{let a=[...r];if(c.trim()){const h=c.toLowerCase();a=a.filter(b=>{var l;return b.export_job_id.toLowerCase().includes(h)||b.export_job_name.toLowerCase().includes(h)||((l=b.export_job_created_by)==null?void 0:l.toLowerCase().includes(h))})}return t!=="all"&&(a=a.filter(h=>h.export_job_status===t)),V!=="all"&&(a=a.filter(h=>h.export_job_source_type===V)),a},[r,c,t,V]),Z=Math.ceil(w.length/F),B=w.slice((Q-1)*F,Q*F),R=a=>{f(a),k(!0),O(a.export_job_id)},S=()=>{k(!1),setTimeout(()=>{f(null),z([])},300)},ee=()=>{m.info("Đang làm mới dữ liệu..."),U()},ne=(a,h)=>{navigator.clipboard.writeText(a),m.success(`Đã copy ${h}`)},A=a=>{a.export_job_download_url?(window.open(a.export_job_download_url,"_blank"),m.success("Đang tải xuống file...")):m.error("Download URL không khả dụng")},y=a=>new Date(a).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),$=a=>a?a<1024?`${a} B`:a<1024*1024?`${(a/1024).toFixed(1)} KB`:`${(a/(1024*1024)).toFixed(1)} MB`:"N/A",M=a=>({pending:{bg:"#e2e3e5",color:"#383d41",label:"PENDING",icon:e.jsxDEV(Qe,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:229,columnNumber:75},void 0)},processing:{bg:"#d1ecf1",color:"#0c5460",label:"PROCESSING",icon:e.jsxDEV(an,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:230,columnNumber:81},void 0)},completed:{bg:"#d4edda",color:"#155724",label:"COMPLETED",icon:e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:231,columnNumber:79},void 0)},failed:{bg:"#f8d7da",color:"#721c24",label:"FAILED",icon:e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:232,columnNumber:73},void 0)},expired:{bg:"#f3f4f6",color:"#6b7280",label:"EXPIRED",icon:e.jsxDEV(ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:233,columnNumber:75},void 0)}})[a],v=a=>({database:{bg:"rgba(0, 92, 182, 0.1)",color:"#005cb6",label:"DATABASE",icon:e.jsxDEV(ni,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:240,columnNumber:91},void 0)},api:{bg:"rgba(16, 185, 129, 0.1)",color:"#059669",label:"API",icon:e.jsxDEV(Vi,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:241,columnNumber:83},void 0)},report:{bg:"rgba(245, 158, 11, 0.1)",color:"#d97706",label:"REPORT",icon:e.jsxDEV(We,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:242,columnNumber:89},void 0)},manual:{bg:"rgba(139, 92, 246, 0.1)",color:"#7c3aed",label:"MANUAL",icon:e.jsxDEV(Re,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:243,columnNumber:89},void 0)}})[a],N=a=>a.export_job_expires_at?new Date(a.export_job_expires_at)<new Date:!1,g=(a,h)=>{const b=new Date(a).getTime(),j=(h?new Date(h).getTime():Date.now())-b,_=Math.floor(j/1e3),X=Math.floor(_/60);return X<1?`${_}s`:X<60?`${X}m ${_%60}s`:`${Math.floor(X/60)}h ${X%60}m`};return e.jsxDEV("div",{className:G.container,children:[e.jsxDEV("div",{className:G.header,children:[e.jsxDEV("div",{className:G.headerLeft,children:[e.jsxDEV(ye,{className:G.headerIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:275,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:G.title,children:"Nhật ký Tải xuất"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:277,columnNumber:13},void 0),e.jsxDEV("p",{className:G.subtitle,children:["Export jobs management và download tracking • ",w.length.toLocaleString()," jobs"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:278,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:276,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:274,columnNumber:9},void 0),e.jsxDEV("div",{className:G.headerRight,children:e.jsxDEV("button",{onClick:ee,className:G.btnPrimary,children:[e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:285,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:284,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:283,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:273,columnNumber:7},void 0),e.jsxDEV("div",{className:G.filterToolbar,children:[e.jsxDEV("div",{className:G.searchBox,children:[e.jsxDEV(_e,{className:G.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:294,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm theo Job ID, Job Name, User...",value:c,onChange:a=>T(a.target.value),className:G.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:295,columnNumber:11},void 0),c&&e.jsxDEV("button",{className:G.searchClear,onClick:()=>T(""),"aria-label":"Clear search",children:e.jsxDEV(De,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:308,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:303,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:293,columnNumber:9},void 0),e.jsxDEV("select",{value:t,onChange:a=>p(a.target.value),className:G.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"All Status"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:318,columnNumber:11},void 0),e.jsxDEV("option",{value:"pending",children:"Pending"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:319,columnNumber:11},void 0),e.jsxDEV("option",{value:"processing",children:"Processing"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:320,columnNumber:11},void 0),e.jsxDEV("option",{value:"completed",children:"Completed"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:321,columnNumber:11},void 0),e.jsxDEV("option",{value:"failed",children:"Failed"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:322,columnNumber:11},void 0),e.jsxDEV("option",{value:"expired",children:"Expired"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:323,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:313,columnNumber:9},void 0),e.jsxDEV("select",{value:V,onChange:a=>L(a.target.value),className:G.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"All Source Types"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:331,columnNumber:11},void 0),e.jsxDEV("option",{value:"database",children:"Database"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:332,columnNumber:11},void 0),e.jsxDEV("option",{value:"api",children:"API"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:333,columnNumber:11},void 0),e.jsxDEV("option",{value:"report",children:"Report"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:334,columnNumber:11},void 0),e.jsxDEV("option",{value:"manual",children:"Manual"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:335,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:326,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:292,columnNumber:7},void 0),n?e.jsxDEV("div",{className:G.loadingContainer,children:[e.jsxDEV(he,{className:G.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:342,columnNumber:11},void 0),e.jsxDEV("p",{className:G.loadingText,children:"Đang tải export logs..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:343,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:341,columnNumber:9},void 0):w.length===0?e.jsxDEV("div",{className:G.emptyState,children:[e.jsxDEV(ye,{size:64},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:347,columnNumber:11},void 0),e.jsxDEV("p",{children:"Không tìm thấy export jobs"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:348,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:346,columnNumber:9},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:G.tableWrapper,children:e.jsxDEV("table",{className:G.table,children:[e.jsxDEV("thead",{className:G.tableHeader,children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"180px"},children:"Created"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:356,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"280px"},children:"Job Name"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:357,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"140px"},children:"Source Type"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:358,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"140px"},children:"Status"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:359,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"110px"},children:"Format"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:360,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"110px"},children:"Size"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:361,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"180px"},children:"Created By"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:362,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"100px"},children:"Downloads"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:363,columnNumber:19},void 0),e.jsxDEV("th",{style:{width:"140px"},children:"Actions"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:364,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:355,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:354,columnNumber:15},void 0),e.jsxDEV("tbody",{children:B.map(a=>{const h=M(a.export_job_status),b=v(a.export_job_source_type),l=N(a),j=`${G.tableRow} ${l?G.expiredRow:""}`;return e.jsxDEV("tr",{className:j,onClick:()=>R(a),children:[e.jsxDEV("td",{className:G.timestampCell,children:[e.jsxDEV(Qe,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:381,columnNumber:25},void 0),y(a.export_job_created_at)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:380,columnNumber:23},void 0),e.jsxDEV("td",{className:G.jobNameCell,children:[e.jsxDEV(We,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:385,columnNumber:25},void 0),e.jsxDEV("span",{children:a.export_job_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:386,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:384,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{className:G.sourceBadge,style:{background:b.bg,color:b.color},children:[b.icon,b.label]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:389,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:388,columnNumber:23},void 0),e.jsxDEV("td",{children:[e.jsxDEV("span",{className:G.statusBadge,style:{background:h.bg,color:h.color},children:[a.export_job_status==="processing"?e.jsxDEV(he,{size:14,className:G.spinning},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:403,columnNumber:29},void 0):h.icon,h.label]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:398,columnNumber:25},void 0),a.export_job_status==="processing"&&a.export_job_progress!==void 0&&e.jsxDEV("div",{className:G.inlineProgress,children:e.jsxDEV("div",{className:G.inlineProgressFill,style:{width:`${a.export_job_progress}%`}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:411,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:410,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:397,columnNumber:23},void 0),e.jsxDEV("td",{children:a.export_job_file_format&&e.jsxDEV("code",{className:G.formatCode,children:a.export_job_file_format.toUpperCase()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:420,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:418,columnNumber:23},void 0),e.jsxDEV("td",{className:G.sizeCell,children:$(a.export_job_file_size)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:425,columnNumber:23},void 0),e.jsxDEV("td",{className:G.userCell,children:a.export_job_created_by?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Re,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:431,columnNumber:29},void 0),a.export_job_created_by]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:430,columnNumber:27},void 0):e.jsxDEV("span",{className:G.mutedText,children:"System"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:435,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:428,columnNumber:23},void 0),e.jsxDEV("td",{className:G.downloadCountCell,children:a.export_job_download_count!==void 0&&e.jsxDEV("span",{className:G.downloadCountBadge,children:[e.jsxDEV(ye,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:441,columnNumber:29},void 0),a.export_job_download_count]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:440,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:438,columnNumber:23},void 0),e.jsxDEV("td",{children:a.export_job_status==="completed"&&!l&&e.jsxDEV("div",{className:G.hoverActions,children:e.jsxDEV("button",{className:G.actionBtn,onClick:_=>{_.stopPropagation(),A(a)},children:[e.jsxDEV(ye,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:456,columnNumber:31},void 0),"Download"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:449,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:448,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:446,columnNumber:23},void 0)]},a.export_job_id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:375,columnNumber:21},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:367,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:353,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:352,columnNumber:11},void 0),e.jsxDEV("div",{className:G.pagination,children:[e.jsxDEV("div",{className:G.paginationLeft,children:e.jsxDEV("span",{className:G.paginationText,children:["Hiển thị ",(Q-1)*F+1," -"," ",Math.min(Q*F,w.length)," của"," ",w.length.toLocaleString()," jobs"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:472,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:471,columnNumber:13},void 0),e.jsxDEV("div",{className:G.paginationRight,children:[e.jsxDEV("button",{className:G.pageButton,onClick:()=>E(Q-1),disabled:Q===1,children:[e.jsxDEV(Oi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:484,columnNumber:17},void 0),"Trước"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:479,columnNumber:15},void 0),e.jsxDEV("span",{className:G.pageInfo,children:["Trang ",Q," / ",Z]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:487,columnNumber:15},void 0),e.jsxDEV("button",{className:G.pageButton,onClick:()=>E(Q+1),disabled:Q===Z,children:["Sau",e.jsxDEV(Ce,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:496,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:490,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:478,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:470,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:351,columnNumber:9},void 0),D&&x&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:G.drawerOverlay,onClick:S},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:506,columnNumber:11},void 0),e.jsxDEV("div",{className:G.drawer,children:[e.jsxDEV("div",{className:G.drawerHeader,children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:G.drawerTitle,children:x.export_job_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:511,columnNumber:17},void 0),e.jsxDEV("div",{className:G.drawerSubtitle,children:[e.jsxDEV("code",{children:["ID: ",x.export_job_id]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:513,columnNumber:19},void 0),e.jsxDEV("button",{className:G.copyBtnInline,onClick:()=>ne(x.export_job_id,"Job ID"),children:e.jsxDEV(Ii,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:518,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:514,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:512,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:510,columnNumber:15},void 0),e.jsxDEV("button",{className:G.drawerCloseBtn,onClick:S,children:e.jsxDEV(De,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:523,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:522,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:509,columnNumber:13},void 0),e.jsxDEV("div",{className:G.drawerContent,children:[e.jsxDEV("div",{className:G.section,children:[e.jsxDEV("h3",{className:G.sectionTitle,children:[e.jsxDEV(bi,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:532,columnNumber:19},void 0),"Job Timeline"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:531,columnNumber:17},void 0),e.jsxDEV("div",{className:G.timeline,children:[e.jsxDEV("div",{className:G.timelineItem,children:[e.jsxDEV("div",{className:G.timelineIcon,style:{background:"#d1ecf1"},children:e.jsxDEV(ki,{size:16,style:{color:"#0c5460"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:540,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:539,columnNumber:21},void 0),e.jsxDEV("div",{className:G.timelineContent,children:[e.jsxDEV("div",{className:G.timelineTitle,children:"Job Created"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:543,columnNumber:23},void 0),e.jsxDEV("div",{className:G.timelineTime,children:y(x.export_job_created_at)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:544,columnNumber:23},void 0),e.jsxDEV("div",{className:G.timelineMeta,children:["Created by: ",x.export_job_created_by||"System"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:547,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:542,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:538,columnNumber:19},void 0),x.export_job_status!=="pending"&&e.jsxDEV("div",{className:G.timelineItem,children:[e.jsxDEV("div",{className:G.timelineIcon,style:{background:"#fff3cd"},children:e.jsxDEV(an,{size:16,style:{color:"#856404"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:557,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:556,columnNumber:23},void 0),e.jsxDEV("div",{className:G.timelineContent,children:[e.jsxDEV("div",{className:G.timelineTitle,children:"Processing Started"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:560,columnNumber:25},void 0),e.jsxDEV("div",{className:G.timelineMeta,children:["Duration: ",g(x.export_job_created_at,x.export_job_completed_at)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:561,columnNumber:25},void 0),x.export_job_progress!==void 0&&e.jsxDEV("div",{className:G.timelineProgress,children:[e.jsxDEV("div",{className:G.progressBar,children:e.jsxDEV("div",{className:G.progressFill,style:{width:`${x.export_job_progress}%`}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:567,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:566,columnNumber:29},void 0),e.jsxDEV("span",{children:[x.export_job_progress,"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:572,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:565,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:559,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:555,columnNumber:21},void 0),(x.export_job_status==="completed"||x.export_job_status==="failed")&&e.jsxDEV("div",{className:G.timelineItem,children:[e.jsxDEV("div",{className:G.timelineIcon,style:{background:x.export_job_status==="completed"?"#d4edda":"#f8d7da"},children:x.export_job_status==="completed"?e.jsxDEV(be,{size:16,style:{color:"#155724"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:591,columnNumber:27},void 0):e.jsxDEV(Ve,{size:16,style:{color:"#721c24"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:593,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:583,columnNumber:23},void 0),e.jsxDEV("div",{className:G.timelineContent,children:[e.jsxDEV("div",{className:G.timelineTitle,children:x.export_job_status==="completed"?"Job Completed":"Job Failed"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:597,columnNumber:25},void 0),x.export_job_completed_at&&e.jsxDEV("div",{className:G.timelineTime,children:y(x.export_job_completed_at)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:603,columnNumber:27},void 0),x.export_job_error_message&&e.jsxDEV("div",{className:G.errorMessage,children:[e.jsxDEV(ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:609,columnNumber:29},void 0),x.export_job_error_message]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:608,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:596,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:582,columnNumber:21},void 0),N(x)&&e.jsxDEV("div",{className:G.timelineItem,children:[e.jsxDEV("div",{className:G.timelineIcon,style:{background:"#f3f4f6"},children:e.jsxDEV(tn,{size:16,style:{color:"#6b7280"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:621,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:620,columnNumber:23},void 0),e.jsxDEV("div",{className:G.timelineContent,children:[e.jsxDEV("div",{className:G.timelineTitle,children:"Job Expired"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:624,columnNumber:25},void 0),e.jsxDEV("div",{className:G.timelineTime,children:x.export_job_expires_at&&y(x.export_job_expires_at)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:625,columnNumber:25},void 0),e.jsxDEV("div",{className:G.timelineMeta,children:"Download link is no longer available"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:629,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:623,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:619,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:536,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:530,columnNumber:15},void 0),e.jsxDEV("div",{className:G.section,children:[e.jsxDEV("h3",{className:G.sectionTitle,children:[e.jsxDEV(We,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:641,columnNumber:19},void 0),"Job Details"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:640,columnNumber:17},void 0),e.jsxDEV("div",{className:G.detailsGrid,children:[e.jsxDEV("div",{className:G.detailItem,children:[e.jsxDEV("label",{children:"Source Type"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:647,columnNumber:21},void 0),e.jsxDEV("span",{className:G.sourceBadgeLarge,style:{...v(x.export_job_source_type),background:v(x.export_job_source_type).bg,color:v(x.export_job_source_type).color},children:[v(x.export_job_source_type).icon,v(x.export_job_source_type).label]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:648,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:646,columnNumber:19},void 0),e.jsxDEV("div",{className:G.detailItem,children:[e.jsxDEV("label",{children:"File Format"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:662,columnNumber:21},void 0),e.jsxDEV("code",{className:G.formatCodeLarge,children:((o=x.export_job_file_format)==null?void 0:o.toUpperCase())||"N/A"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:663,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:661,columnNumber:19},void 0),e.jsxDEV("div",{className:G.detailItem,children:[e.jsxDEV("label",{children:"File Size"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:669,columnNumber:21},void 0),e.jsxDEV("span",{children:$(x.export_job_file_size)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:670,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:668,columnNumber:19},void 0),e.jsxDEV("div",{className:G.detailItem,children:[e.jsxDEV("label",{children:"Total Downloads"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:674,columnNumber:21},void 0),e.jsxDEV("span",{className:G.downloadCountLarge,children:[e.jsxDEV(ye,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:676,columnNumber:23},void 0),x.export_job_download_count||0," times"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:675,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:673,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:645,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:639,columnNumber:15},void 0),e.jsxDEV("div",{className:G.section,children:[e.jsxDEV("h3",{className:G.sectionTitle,children:[e.jsxDEV(tn,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:686,columnNumber:19},void 0),"Download History (",I.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:685,columnNumber:17},void 0),I.length===0?e.jsxDEV("div",{className:G.emptyHistory,children:[e.jsxDEV(ye,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:692,columnNumber:21},void 0),e.jsxDEV("p",{children:"No download history yet"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:693,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:691,columnNumber:19},void 0):e.jsxDEV("div",{className:G.historyList,children:I.map(a=>e.jsxDEV("div",{className:G.historyItem,children:[e.jsxDEV("div",{className:G.historyIcon,children:e.jsxDEV(ye,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:700,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:699,columnNumber:25},void 0),e.jsxDEV("div",{className:G.historyContent,children:[e.jsxDEV("div",{className:G.historyUser,children:[e.jsxDEV(Re,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:704,columnNumber:29},void 0),a.download_user_email]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:703,columnNumber:27},void 0),e.jsxDEV("div",{className:G.historyTime,children:[e.jsxDEV(Qe,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:708,columnNumber:29},void 0),y(a.download_timestamp)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:707,columnNumber:27},void 0),a.download_ip_address&&e.jsxDEV("div",{className:G.historyIp,children:["IP: ",a.download_ip_address]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:712,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:702,columnNumber:25},void 0)]},a.download_id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:698,columnNumber:23},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:696,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:684,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:528,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:507,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:505,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/ExportLogTab.tsx",lineNumber:271,columnNumber:5},void 0)},Gu="_container_1da7g_21",Ou="_header_1da7g_49",Wu="_headerLeft_1da7g_65",Ju="_headerIcon_1da7g_77",Xu="_title_1da7g_91",Ku="_subtitle_1da7g_109",Zu="_headerRight_1da7g_127",Yu="_btnPrimary_1da7g_137",ep="_infoBanner_1da7g_191",ip="_cardGrid_1da7g_249",np="_policyCard_1da7g_261",sp="_cardHeader_1da7g_297",rp="_cardIcon_1da7g_315",lp="_cardTitle_1da7g_335",ap="_cardSubtitle_1da7g_353",tp="_cardContent_1da7g_379",op="_configItem_1da7g_393",dp="_configLabel_1da7g_419",cp="_configValue_1da7g_439",mp="_highlightValue_1da7g_453",up="_valueUnit_1da7g_469",pp="_statusBadge_1da7g_491",fp="_configChecks_1da7g_535",Np="_checkItem_1da7g_549",bp="_checkYes_1da7g_567",Tp="_checkNo_1da7g_577",Vp="_deliveryMethod_1da7g_597",vp="_ipList_1da7g_627",xp="_ipAddress_1da7g_641",gp="_ipAddressBlocked_1da7g_681",hp="_ipMore_1da7g_721",Ep="_tooltipContainer_1da7g_751",Hp="_tooltipIcon_1da7g_763",_p="_tooltipContent_1da7g_781",Lp="_footerInfo_1da7g_871",Dp="_footerItem_1da7g_893",jp="_loadingContainer_1da7g_929",yp="_spinner_1da7g_947",Qp="_loadingText_1da7g_979",Cp="_emptyState_1da7g_995",C={container:Gu,header:Ou,headerLeft:Wu,headerIcon:Ju,title:Xu,subtitle:Ku,headerRight:Zu,btnPrimary:Yu,infoBanner:ep,cardGrid:ip,policyCard:np,cardHeader:sp,cardIcon:rp,cardTitle:lp,cardSubtitle:ap,cardContent:tp,configItem:op,configLabel:dp,configValue:cp,highlightValue:mp,valueUnit:up,statusBadge:pp,configChecks:fp,checkItem:Np,checkYes:bp,checkNo:Tp,deliveryMethod:Vp,ipList:vp,ipAddress:xp,ipAddressBlocked:gp,ipMore:hp,tooltipContainer:Ep,tooltipIcon:Hp,tooltipContent:_p,footerInfo:Lp,footerItem:Dp,loadingContainer:jp,spinner:yp,loadingText:Qp,emptyState:Cp},Ge={password_min_length:"Độ dài tối thiểu của mật khẩu người dùng",password_expiry_days:"Số ngày trước khi mật khẩu hết hạn và yêu cầu đổi mới",password_history_count:"Số lượng mật khẩu cũ được lưu trữ để ngăn tái sử dụng",otp_code_length:"Số ký tự trong mã OTP (One-Time Password)",otp_expiry_minutes:"Thời gian mã OTP có hiệu lực trước khi hết hạn",otp_max_attempts:"Số lần nhập sai mã OTP tối đa trước khi khóa",session_timeout_minutes:"Thời gian không hoạt động trước khi session tự động đăng xuất",session_absolute_timeout_hours:"Thời gian tối đa session có thể tồn tại",session_concurrent_limit:"Số lượng phiên đăng nhập đồng thời tối đa cho 1 user",ip_whitelist_enabled:"Chỉ cho phép truy cập từ các IP trong danh sách trắng",ip_blacklist_enabled:"Chặn truy cập từ các IP trong danh sách đen"},Oe=({text:n,children:s})=>{const[r,u]=d.useState(!1);return e.jsxDEV("div",{className:C.tooltipContainer,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[s,r&&e.jsxDEV("div",{className:C.tooltipContent,children:n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:97,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:91,columnNumber:5},void 0)},Sp=()=>{const[n,s]=d.useState(!0),[r,u]=d.useState(null),c=async()=>{try{s(!0);const{data:p,error:V}=await ie.from("security_config").select("*, id:_id").single();if(V){console.error("❌ Error fetching security config:",V),m.error(`Lỗi tải dữ liệu: ${V.message}`);return}u(p)}catch(p){console.error("❌ Error:",p),m.error("Lỗi kết nối cơ sở dữ liệu")}finally{s(!1)}};d.useEffect(()=>{c()},[]);const T=()=>{m.info("Đang làm mới dữ liệu..."),c()},t=p=>p?new Date(p).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"N/A";return n?e.jsxDEV("div",{className:C.container,children:e.jsxDEV("div",{className:C.loadingContainer,children:[e.jsxDEV(he,{className:C.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:172,columnNumber:11},void 0),e.jsxDEV("p",{className:C.loadingText,children:"Đang tải cấu hình bảo mật..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:173,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:171,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:170,columnNumber:7},void 0):r?e.jsxDEV("div",{className:C.container,children:[e.jsxDEV("div",{className:C.header,children:[e.jsxDEV("div",{className:C.headerLeft,children:[e.jsxDEV(Ze,{className:C.headerIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:195,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:C.title,children:"Cấu hình Bảo mật"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:197,columnNumber:13},void 0),e.jsxDEV("p",{className:C.subtitle,children:["Read-only security policies • Last updated: ",t(r.config_updated_at)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:198,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:196,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:194,columnNumber:9},void 0),e.jsxDEV("div",{className:C.headerRight,children:e.jsxDEV("button",{onClick:T,className:C.btnPrimary,children:[e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:205,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:204,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:203,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:193,columnNumber:7},void 0),e.jsxDEV("div",{className:C.infoBanner,children:[e.jsxDEV(we,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:213,columnNumber:9},void 0),e.jsxDEV("span",{children:["Các cấu hình bảo mật này là ",e.jsxDEV("strong",{children:"read-only"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:215,columnNumber:39},void 0),". Để thay đổi, vui lòng liên hệ quản trị viên hệ thống hoặc sử dụng công cụ quản lý bảo mật chuyên dụng."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:214,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:212,columnNumber:7},void 0),e.jsxDEV("div",{className:C.cardGrid,children:[e.jsxDEV("div",{className:C.policyCard,children:[e.jsxDEV("div",{className:C.cardHeader,children:[e.jsxDEV("div",{className:C.cardIcon,style:{background:"rgba(220, 38, 38, 0.1)"},children:e.jsxDEV(Ti,{size:28,style:{color:"#dc2626"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:226,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:225,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:C.cardTitle,children:"Password Policy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:229,columnNumber:15},void 0),e.jsxDEV("p",{className:C.cardSubtitle,children:"Chính sách mật khẩu người dùng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:230,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:228,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:224,columnNumber:11},void 0),e.jsxDEV("div",{className:C.cardContent,children:[e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:[e.jsxDEV("span",{children:"Minimum Length"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:237,columnNumber:17},void 0),e.jsxDEV(Oe,{text:Ge.password_min_length,children:e.jsxDEV(we,{size:14,className:C.tooltipIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:239,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:238,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:236,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configValue,children:[e.jsxDEV("span",{className:C.highlightValue,children:r.password_min_length||8},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:243,columnNumber:17},void 0),e.jsxDEV("span",{className:C.valueUnit,children:"characters"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:244,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:242,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:235,columnNumber:13},void 0),e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:e.jsxDEV("span",{children:"Complexity Requirements"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:250,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:249,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configChecks,children:[e.jsxDEV("div",{className:C.checkItem,children:[r.password_require_uppercase?e.jsxDEV(be,{size:16,className:C.checkYes},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:255,columnNumber:21},void 0):e.jsxDEV(Ve,{size:16,className:C.checkNo},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:257,columnNumber:21},void 0),e.jsxDEV("span",{children:"Uppercase (A-Z)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:259,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:253,columnNumber:17},void 0),e.jsxDEV("div",{className:C.checkItem,children:[r.password_require_lowercase?e.jsxDEV(be,{size:16,className:C.checkYes},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:263,columnNumber:21},void 0):e.jsxDEV(Ve,{size:16,className:C.checkNo},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:265,columnNumber:21},void 0),e.jsxDEV("span",{children:"Lowercase (a-z)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:267,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:261,columnNumber:17},void 0),e.jsxDEV("div",{className:C.checkItem,children:[r.password_require_numbers?e.jsxDEV(be,{size:16,className:C.checkYes},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:271,columnNumber:21},void 0):e.jsxDEV(Ve,{size:16,className:C.checkNo},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:273,columnNumber:21},void 0),e.jsxDEV("span",{children:"Numbers (0-9)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:275,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:269,columnNumber:17},void 0),e.jsxDEV("div",{className:C.checkItem,children:[r.password_require_special_chars?e.jsxDEV(be,{size:16,className:C.checkYes},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:279,columnNumber:21},void 0):e.jsxDEV(Ve,{size:16,className:C.checkNo},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:281,columnNumber:21},void 0),e.jsxDEV("span",{children:"Special Characters (!@#$)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:283,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:277,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:252,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:248,columnNumber:13},void 0),e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:[e.jsxDEV("span",{children:"Password Expiry"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:290,columnNumber:17},void 0),e.jsxDEV(Oe,{text:Ge.password_expiry_days,children:e.jsxDEV(we,{size:14,className:C.tooltipIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:292,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:291,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:289,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configValue,children:[e.jsxDEV("span",{className:C.highlightValue,children:r.password_expiry_days||90},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:296,columnNumber:17},void 0),e.jsxDEV("span",{className:C.valueUnit,children:"days"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:297,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:295,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:288,columnNumber:13},void 0),e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:[e.jsxDEV("span",{children:"Password History"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:303,columnNumber:17},void 0),e.jsxDEV(Oe,{text:Ge.password_history_count,children:e.jsxDEV(we,{size:14,className:C.tooltipIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:305,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:304,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:302,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configValue,children:[e.jsxDEV("span",{className:C.highlightValue,children:r.password_history_count||5},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:309,columnNumber:17},void 0),e.jsxDEV("span",{className:C.valueUnit,children:"passwords remembered"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:310,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:308,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:301,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:234,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:223,columnNumber:9},void 0),e.jsxDEV("div",{className:C.policyCard,children:[e.jsxDEV("div",{className:C.cardHeader,children:[e.jsxDEV("div",{className:C.cardIcon,style:{background:"rgba(245, 158, 11, 0.1)"},children:e.jsxDEV(rs,{size:28,style:{color:"#f59e0b"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:320,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:319,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:C.cardTitle,children:"OTP Policy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:323,columnNumber:15},void 0),e.jsxDEV("p",{className:C.cardSubtitle,children:"Chính sách xác thực 2 yếu tố"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:324,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:322,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:318,columnNumber:11},void 0),e.jsxDEV("div",{className:C.cardContent,children:[e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:e.jsxDEV("span",{children:"OTP Status"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:331,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:330,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configValue,children:r.otp_enabled?e.jsxDEV("span",{className:C.statusBadge,style:{background:"#d4edda",color:"#155724"},children:[e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:336,columnNumber:21},void 0),"ENABLED"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:335,columnNumber:19},void 0):e.jsxDEV("span",{className:C.statusBadge,style:{background:"#f8d7da",color:"#721c24"},children:[e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:341,columnNumber:21},void 0),"DISABLED"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:340,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:333,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:329,columnNumber:13},void 0),r.otp_enabled&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:[e.jsxDEV("span",{children:"Code Length"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:352,columnNumber:21},void 0),e.jsxDEV(Oe,{text:Ge.otp_code_length,children:e.jsxDEV(we,{size:14,className:C.tooltipIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:354,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:353,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:351,columnNumber:19},void 0),e.jsxDEV("div",{className:C.configValue,children:[e.jsxDEV("span",{className:C.highlightValue,children:r.otp_code_length||6},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:358,columnNumber:21},void 0),e.jsxDEV("span",{className:C.valueUnit,children:"digits"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:359,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:357,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:350,columnNumber:17},void 0),e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:[e.jsxDEV("span",{children:"Code Expiry"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:365,columnNumber:21},void 0),e.jsxDEV(Oe,{text:Ge.otp_expiry_minutes,children:e.jsxDEV(we,{size:14,className:C.tooltipIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:367,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:366,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:364,columnNumber:19},void 0),e.jsxDEV("div",{className:C.configValue,children:[e.jsxDEV("span",{className:C.highlightValue,children:r.otp_expiry_minutes||5},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:371,columnNumber:21},void 0),e.jsxDEV("span",{className:C.valueUnit,children:"minutes"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:372,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:370,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:363,columnNumber:17},void 0),e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:[e.jsxDEV("span",{children:"Max Attempts"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:378,columnNumber:21},void 0),e.jsxDEV(Oe,{text:Ge.otp_max_attempts,children:e.jsxDEV(we,{size:14,className:C.tooltipIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:380,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:379,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:377,columnNumber:19},void 0),e.jsxDEV("div",{className:C.configValue,children:[e.jsxDEV("span",{className:C.highlightValue,children:r.otp_max_attempts||3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:384,columnNumber:21},void 0),e.jsxDEV("span",{className:C.valueUnit,children:"attempts"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:385,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:383,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:376,columnNumber:17},void 0),e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:e.jsxDEV("span",{children:"Delivery Method"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:391,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:390,columnNumber:19},void 0),e.jsxDEV("div",{className:C.configValue,children:e.jsxDEV("code",{className:C.deliveryMethod,children:r.otp_delivery_method||"EMAIL"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:394,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:393,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:389,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:349,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:328,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:317,columnNumber:9},void 0),e.jsxDEV("div",{className:C.policyCard,children:[e.jsxDEV("div",{className:C.cardHeader,children:[e.jsxDEV("div",{className:C.cardIcon,style:{background:"rgba(0, 92, 182, 0.1)"},children:e.jsxDEV(Qe,{size:28,style:{color:"#005cb6"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:408,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:407,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:C.cardTitle,children:"Session Policy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:411,columnNumber:15},void 0),e.jsxDEV("p",{className:C.cardSubtitle,children:"Chính sách phiên đăng nhập"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:412,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:410,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:406,columnNumber:11},void 0),e.jsxDEV("div",{className:C.cardContent,children:[e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:[e.jsxDEV("span",{children:"Idle Timeout"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:419,columnNumber:17},void 0),e.jsxDEV(Oe,{text:Ge.session_timeout_minutes,children:e.jsxDEV(we,{size:14,className:C.tooltipIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:421,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:420,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:418,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configValue,children:[e.jsxDEV("span",{className:C.highlightValue,children:r.session_timeout_minutes||30},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:425,columnNumber:17},void 0),e.jsxDEV("span",{className:C.valueUnit,children:"minutes"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:426,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:424,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:417,columnNumber:13},void 0),e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:[e.jsxDEV("span",{children:"Absolute Timeout"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:432,columnNumber:17},void 0),e.jsxDEV(Oe,{text:Ge.session_absolute_timeout_hours,children:e.jsxDEV(we,{size:14,className:C.tooltipIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:434,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:433,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:431,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configValue,children:[e.jsxDEV("span",{className:C.highlightValue,children:r.session_absolute_timeout_hours||8},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:438,columnNumber:17},void 0),e.jsxDEV("span",{className:C.valueUnit,children:"hours"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:439,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:437,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:430,columnNumber:13},void 0),e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:[e.jsxDEV("span",{children:"Concurrent Sessions"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:445,columnNumber:17},void 0),e.jsxDEV(Oe,{text:Ge.session_concurrent_limit,children:e.jsxDEV(we,{size:14,className:C.tooltipIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:447,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:446,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:444,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configValue,children:[e.jsxDEV("span",{className:C.highlightValue,children:r.session_concurrent_limit||3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:451,columnNumber:17},void 0),e.jsxDEV("span",{className:C.valueUnit,children:"sessions max"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:452,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:450,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:443,columnNumber:13},void 0),e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:e.jsxDEV("span",{children:"Remember Me"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:458,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:457,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configValue,children:r.session_remember_me_enabled?e.jsxDEV("span",{className:C.statusBadge,style:{background:"#d4edda",color:"#155724"},children:[e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:463,columnNumber:21},void 0),"ENABLED"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:462,columnNumber:19},void 0):e.jsxDEV("span",{className:C.statusBadge,style:{background:"#f8d7da",color:"#721c24"},children:[e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:468,columnNumber:21},void 0),"DISABLED"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:467,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:460,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:456,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:416,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:405,columnNumber:9},void 0),e.jsxDEV("div",{className:C.policyCard,children:[e.jsxDEV("div",{className:C.cardHeader,children:[e.jsxDEV("div",{className:C.cardIcon,style:{background:"rgba(21, 128, 61, 0.1)"},children:e.jsxDEV(ze,{size:28,style:{color:"#15803d"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:481,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:480,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:C.cardTitle,children:"IP Restrictions"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:484,columnNumber:15},void 0),e.jsxDEV("p",{className:C.cardSubtitle,children:"Chính sách giới hạn địa chỉ IP"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:485,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:483,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:479,columnNumber:11},void 0),e.jsxDEV("div",{className:C.cardContent,children:[e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:[e.jsxDEV("span",{children:"IP Whitelist"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:492,columnNumber:17},void 0),e.jsxDEV(Oe,{text:Ge.ip_whitelist_enabled,children:e.jsxDEV(we,{size:14,className:C.tooltipIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:494,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:493,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:491,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configValue,children:r.ip_whitelist_enabled?e.jsxDEV("span",{className:C.statusBadge,style:{background:"#d4edda",color:"#155724"},children:[e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:500,columnNumber:21},void 0),"ENABLED"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:499,columnNumber:19},void 0):e.jsxDEV("span",{className:C.statusBadge,style:{background:"#e2e3e5",color:"#383d41"},children:[e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:505,columnNumber:21},void 0),"DISABLED"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:504,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:497,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:490,columnNumber:13},void 0),r.ip_whitelist_enabled&&r.ip_whitelist_addresses&&e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:e.jsxDEV("span",{children:"Allowed IPs"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:515,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:514,columnNumber:17},void 0),e.jsxDEV("div",{className:C.ipList,children:[r.ip_whitelist_addresses.slice(0,5).map((p,V)=>e.jsxDEV("code",{className:C.ipAddress,children:[e.jsxDEV(Vi,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:520,columnNumber:23},void 0),p]},V,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:519,columnNumber:21},void 0)),r.ip_whitelist_addresses.length>5&&e.jsxDEV("span",{className:C.ipMore,children:["+",r.ip_whitelist_addresses.length-5," more"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:525,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:517,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:513,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:[e.jsxDEV("span",{children:"IP Blacklist"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:535,columnNumber:17},void 0),e.jsxDEV(Oe,{text:Ge.ip_blacklist_enabled,children:e.jsxDEV(we,{size:14,className:C.tooltipIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:537,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:536,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:534,columnNumber:15},void 0),e.jsxDEV("div",{className:C.configValue,children:r.ip_blacklist_enabled?e.jsxDEV("span",{className:C.statusBadge,style:{background:"#f8d7da",color:"#721c24"},children:[e.jsxDEV(ti,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:543,columnNumber:21},void 0),"ENABLED"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:542,columnNumber:19},void 0):e.jsxDEV("span",{className:C.statusBadge,style:{background:"#e2e3e5",color:"#383d41"},children:[e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:548,columnNumber:21},void 0),"DISABLED"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:547,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:540,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:533,columnNumber:13},void 0),r.ip_blacklist_enabled&&r.ip_blacklist_addresses&&e.jsxDEV("div",{className:C.configItem,children:[e.jsxDEV("div",{className:C.configLabel,children:e.jsxDEV("span",{children:"Blocked IPs"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:558,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:557,columnNumber:17},void 0),e.jsxDEV("div",{className:C.ipList,children:[r.ip_blacklist_addresses.slice(0,5).map((p,V)=>e.jsxDEV("code",{className:C.ipAddressBlocked,children:[e.jsxDEV(Vi,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:563,columnNumber:23},void 0),p]},V,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:562,columnNumber:21},void 0)),r.ip_blacklist_addresses.length>5&&e.jsxDEV("span",{className:C.ipMore,children:["+",r.ip_blacklist_addresses.length-5," more"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:568,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:560,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:556,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:489,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:478,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:221,columnNumber:7},void 0),e.jsxDEV("div",{className:C.footerInfo,children:[e.jsxDEV("div",{className:C.footerItem,children:[e.jsxDEV(ki,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:582,columnNumber:11},void 0),e.jsxDEV("span",{children:["Last Updated: ",t(r.config_updated_at)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:583,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:581,columnNumber:9},void 0),r.config_updated_by&&e.jsxDEV("div",{className:C.footerItem,children:[e.jsxDEV(gi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:587,columnNumber:13},void 0),e.jsxDEV("span",{children:["Updated By: ",r.config_updated_by]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:588,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:586,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:580,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:191,columnNumber:5},void 0):e.jsxDEV("div",{className:C.container,children:e.jsxDEV("div",{className:C.emptyState,children:[e.jsxDEV(Ze,{size:64},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:183,columnNumber:11},void 0),e.jsxDEV("p",{children:"Không thể tải cấu hình bảo mật"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:184,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:182,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SecurityConfigTab.tsx",lineNumber:181,columnNumber:7},void 0)},wp="_container_4drta_21",Mp="_header_4drta_49",Ip="_headerLeft_4drta_65",kp="_headerIcon_4drta_77",Ap="_title_4drta_91",Rp="_subtitle_4drta_109",Pp="_headerRight_4drta_127",Bp="_btnPrimary_4drta_137",zp="_btnSecondary_4drta_183",Fp="_btnAutoRefreshActive_4drta_227",$p="_spinning_4drta_271",Up="_quickStats_4drta_305",qp="_statCard_4drta_317",Gp="_statValue_4drta_357",Op="_statLabel_4drta_373",Wp="_serviceGrid_4drta_397",Jp="_serviceCard_4drta_409",Xp="_statusBadge_4drta_463",Kp="_serviceIcon_4drta_515",Zp="_serviceInfo_4drta_539",Yp="_serviceName_4drta_551",ef="_serviceType_4drta_569",nf="_lastSync_4drta_593",sf="_lastSyncLabel_4drta_623",rf="_lastSyncTime_4drta_641",lf="_metricsRow_4drta_665",af="_metric_4drta_665",tf="_metricLabel_4drta_693",of="_metricValue_4drta_711",df="_viewDetails_4drta_733",cf="_modalOverlay_4drta_789",mf="_modal_4drta_789",uf="_modalHeader_4drta_885",pf="_modalTitle_4drta_905",ff="_modalSubtitle_4drta_923",Nf="_modalCloseBtn_4drta_937",bf="_modalContent_4drta_975",Tf="_modalSection_4drta_1001",Vf="_modalSectionTitle_4drta_1013",vf="_statusOverview_4drta_1035",xf="_statusOverviewLabel_4drta_1065",gf="_statusOverviewTime_4drta_1081",hf="_detailsGrid_4drta_1097",Ef="_detailItem_4drta_1109",Hf="_lastErrorBox_4drta_1183",_f="_lastErrorHeader_4drta_1205",Lf="_lastErrorMessage_4drta_1225",Df="_noErrors_4drta_1241",jf="_errorLogsList_4drta_1281",yf="_errorLogItem_4drta_1293",Qf="_errorLogHeader_4drta_1327",Cf="_errorLogTime_4drta_1349",Sf="_errorCode_4drta_1363",wf="_errorLogMessage_4drta_1383",Mf="_errorStackDetails_4drta_1397",If="_errorStack_4drta_1397",kf="_loadingContainer_4drta_1471",Af="_spinner_4drta_1489",Rf="_loadingText_4drta_1503",Pf="_emptyState_4drta_1519",re={container:wp,header:Mp,headerLeft:Ip,headerIcon:kp,title:Ap,subtitle:Rp,headerRight:Pp,btnPrimary:Bp,btnSecondary:zp,btnAutoRefreshActive:Fp,spinning:$p,quickStats:Up,statCard:qp,statValue:Gp,statLabel:Op,serviceGrid:Wp,serviceCard:Jp,statusBadge:Xp,serviceIcon:Kp,serviceInfo:Zp,serviceName:Yp,serviceType:ef,lastSync:nf,lastSyncLabel:sf,lastSyncTime:rf,metricsRow:lf,metric:af,metricLabel:tf,metricValue:of,viewDetails:df,modalOverlay:cf,modal:mf,modalHeader:uf,modalTitle:pf,modalSubtitle:ff,modalCloseBtn:Nf,modalContent:bf,modalSection:Tf,modalSectionTitle:Vf,statusOverview:vf,statusOverviewLabel:xf,statusOverviewTime:gf,detailsGrid:hf,detailItem:Ef,lastErrorBox:Hf,lastErrorHeader:_f,lastErrorMessage:Lf,noErrors:Df,errorLogsList:jf,errorLogItem:yf,errorLogHeader:Qf,errorLogTime:Cf,errorCode:Sf,errorLogMessage:wf,errorStackDetails:Mf,errorStack:If,loadingContainer:kf,spinner:Af,loadingText:Rf,emptyState:Pf},Bf=()=>{const[n,s]=d.useState(!0),[r,u]=d.useState([]),[c,T]=d.useState(null),[t,p]=d.useState(!1),[V,L]=d.useState([]),[Q,E]=d.useState(!0),x=async()=>{try{s(!0);const{data:S,error:ee}=await ie.from("integration_services").select("*, id:_id").order("service_name",{ascending:!0});if(ee){console.error("❌ Error fetching services:",ee),m.error(`Lỗi tải dữ liệu: ${ee.message}`);return}u(S||[])}catch(S){console.error("❌ Error:",S),m.error("Lỗi kết nối cơ sở dữ liệu")}finally{s(!1)}},f=async S=>{try{const{data:ee,error:ne}=await ie.from("integration_error_logs").select("*, id:_id").eq("service_id",S).order("error_timestamp",{ascending:!1}).limit(10);if(ne){console.error("❌ Error fetching error logs:",ne);return}L(ee||[])}catch(ee){console.error("❌ Error:",ee)}};d.useEffect(()=>{x()},[]),d.useEffect(()=>{if(!Q)return;const S=setInterval(()=>{x()},1e4);return()=>clearInterval(S)},[Q]);const D=S=>{T(S),p(!0),f(S.service_id)},k=()=>{p(!1),setTimeout(()=>{T(null),L([])},300)},I=()=>{m.info("Đang làm mới dữ liệu..."),x()},z=()=>{E(!Q),m.success(Q?"Đã tắt auto-refresh":"Đã bật auto-refresh (10s)")},F=S=>new Date(S).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),U=S=>{const ee=new Date().getTime(),ne=new Date(S).getTime(),A=ee-ne,y=Math.floor(A/1e3),$=Math.floor(y/60),M=Math.floor($/60);return y<60?`${y}s ago`:$<60?`${$}m ago`:M<24?`${M}h ago`:`${Math.floor(M/24)}d ago`},O=S=>({healthy:{bg:"#d4edda",color:"#155724",label:"HEALTHY",icon:e.jsxDEV(be,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:200,columnNumber:15},void 0),cardBg:"rgba(212, 237, 218, 0.15)",borderColor:"#15803d"},warning:{bg:"#fff3cd",color:"#856404",label:"WARNING",icon:e.jsxDEV(ti,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:208,columnNumber:15},void 0),cardBg:"rgba(255, 243, 205, 0.15)",borderColor:"#f59e0b"},error:{bg:"#f8d7da",color:"#721c24",label:"ERROR",icon:e.jsxDEV(Ve,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:216,columnNumber:15},void 0),cardBg:"rgba(248, 215, 218, 0.15)",borderColor:"#dc2626"}})[S],w=S=>{const ee=S.toLowerCase();return ee.includes("database")?e.jsxDEV(ni,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:226,columnNumber:44},void 0):ee.includes("api")?e.jsxDEV(Vi,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:227,columnNumber:39},void 0):ee.includes("server")?e.jsxDEV(Ji,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:228,columnNumber:42},void 0):ee.includes("cloud")?e.jsxDEV(ls,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:229,columnNumber:41},void 0):ee.includes("email")?e.jsxDEV(Mi,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:230,columnNumber:41},void 0):e.jsxDEV(Xi,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:231,columnNumber:12},void 0)},Z=r.filter(S=>S.service_status==="healthy").length,B=r.filter(S=>S.service_status==="warning").length,R=r.filter(S=>S.service_status==="error").length;return e.jsxDEV("div",{className:re.container,children:[e.jsxDEV("div",{className:re.header,children:[e.jsxDEV("div",{className:re.headerLeft,children:[e.jsxDEV(ii,{className:re.headerIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:248,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:re.title,children:"Trạng thái Tích hợp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:250,columnNumber:13},void 0),e.jsxDEV("p",{className:re.subtitle,children:["Service health monitoring • ",r.length," services"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:251,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:249,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:247,columnNumber:9},void 0),e.jsxDEV("div",{className:re.headerRight,children:[e.jsxDEV("button",{onClick:z,className:Q?re.btnAutoRefreshActive:re.btnSecondary,children:[e.jsxDEV(ge,{size:16,className:Q?re.spinning:""},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:261,columnNumber:13},void 0),Q?"Auto (10s)":"Auto-refresh"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:257,columnNumber:11},void 0),e.jsxDEV("button",{onClick:I,className:re.btnPrimary,children:[e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:265,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:264,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:256,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:246,columnNumber:7},void 0),e.jsxDEV("div",{className:re.quickStats,children:[e.jsxDEV("div",{className:re.statCard,style:{borderLeft:"4px solid #15803d"},children:[e.jsxDEV(be,{size:24,style:{color:"#15803d"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:274,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:re.statValue,children:Z},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:276,columnNumber:13},void 0),e.jsxDEV("div",{className:re.statLabel,children:"Healthy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:277,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:275,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:273,columnNumber:9},void 0),e.jsxDEV("div",{className:re.statCard,style:{borderLeft:"4px solid #f59e0b"},children:[e.jsxDEV(ti,{size:24,style:{color:"#f59e0b"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:281,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:re.statValue,children:B},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:283,columnNumber:13},void 0),e.jsxDEV("div",{className:re.statLabel,children:"Warning"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:284,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:282,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:280,columnNumber:9},void 0),e.jsxDEV("div",{className:re.statCard,style:{borderLeft:"4px solid #dc2626"},children:[e.jsxDEV(Ve,{size:24,style:{color:"#dc2626"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:288,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:re.statValue,children:R},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:290,columnNumber:13},void 0),e.jsxDEV("div",{className:re.statLabel,children:"Error"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:291,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:289,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:287,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:272,columnNumber:7},void 0),n?e.jsxDEV("div",{className:re.loadingContainer,children:[e.jsxDEV(he,{className:re.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:299,columnNumber:11},void 0),e.jsxDEV("p",{className:re.loadingText,children:"Đang tải integration status..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:300,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:298,columnNumber:9},void 0):r.length===0?e.jsxDEV("div",{className:re.emptyState,children:[e.jsxDEV(ii,{size:64},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:304,columnNumber:11},void 0),e.jsxDEV("p",{children:"Không có integration services"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:305,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:303,columnNumber:9},void 0):e.jsxDEV("div",{className:re.serviceGrid,children:r.map(S=>{const ee=O(S.service_status),ne=U(S.service_last_sync),A=S.service_request_count_24h&&S.service_error_count_24h?(S.service_error_count_24h/S.service_request_count_24h*100).toFixed(2):"0.00";return e.jsxDEV("div",{className:re.serviceCard,style:{background:ee.cardBg,borderColor:ee.borderColor},onClick:()=>D(S),children:[e.jsxDEV("div",{className:re.statusBadge,style:{background:ee.bg,color:ee.color},children:[ee.icon,ee.label]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:331,columnNumber:17},void 0),e.jsxDEV("div",{className:re.serviceIcon,style:{color:ee.borderColor},children:w(S.service_type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:340,columnNumber:17},void 0),e.jsxDEV("div",{className:re.serviceInfo,children:[e.jsxDEV("h3",{className:re.serviceName,children:S.service_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:346,columnNumber:19},void 0),e.jsxDEV("p",{className:re.serviceType,children:S.service_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:347,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:345,columnNumber:17},void 0),e.jsxDEV("div",{className:re.lastSync,children:[e.jsxDEV(Qe,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:352,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:re.lastSyncLabel,children:"Last Sync"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:354,columnNumber:21},void 0),e.jsxDEV("div",{className:re.lastSyncTime,children:ne},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:355,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:353,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:351,columnNumber:17},void 0),e.jsxDEV("div",{className:re.metricsRow,children:[S.service_uptime_percent!==void 0&&e.jsxDEV("div",{className:re.metric,children:[e.jsxDEV("div",{className:re.metricLabel,children:"Uptime"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:363,columnNumber:23},void 0),e.jsxDEV("div",{className:re.metricValue,children:[S.service_uptime_percent.toFixed(1),"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:364,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:362,columnNumber:21},void 0),S.service_response_time_ms!==void 0&&e.jsxDEV("div",{className:re.metric,children:[e.jsxDEV("div",{className:re.metricLabel,children:"Response"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:371,columnNumber:23},void 0),e.jsxDEV("div",{className:re.metricValue,children:[S.service_response_time_ms,"ms"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:372,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:370,columnNumber:21},void 0),S.service_error_count_24h!==void 0&&e.jsxDEV("div",{className:re.metric,children:[e.jsxDEV("div",{className:re.metricLabel,children:"Error Rate"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:377,columnNumber:23},void 0),e.jsxDEV("div",{className:re.metricValue,style:{color:parseFloat(A)>5?"#dc2626":parseFloat(A)>1?"#f59e0b":"#15803d"},children:[A,"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:378,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:376,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:360,columnNumber:17},void 0),e.jsxDEV("div",{className:re.viewDetails,children:["View Details",e.jsxDEV(Ce,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:393,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:391,columnNumber:17},void 0)]},S.service_id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:321,columnNumber:15},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:308,columnNumber:9},void 0),t&&c&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:re.modalOverlay,onClick:k},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:404,columnNumber:11},void 0),e.jsxDEV("div",{className:re.modal,children:[e.jsxDEV("div",{className:re.modalHeader,children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:re.modalTitle,children:c.service_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:409,columnNumber:17},void 0),e.jsxDEV("p",{className:re.modalSubtitle,children:c.service_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:410,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:408,columnNumber:15},void 0),e.jsxDEV("button",{className:re.modalCloseBtn,onClick:k,children:e.jsxDEV(De,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:413,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:412,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:407,columnNumber:13},void 0),e.jsxDEV("div",{className:re.modalContent,children:[e.jsxDEV("div",{className:re.modalSection,children:[e.jsxDEV("h3",{className:re.modalSectionTitle,children:"Current Status"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:421,columnNumber:17},void 0),e.jsxDEV("div",{className:re.statusOverview,style:{...O(c.service_status),background:O(c.service_status).bg,color:O(c.service_status).color},children:[O(c.service_status).icon,e.jsxDEV("div",{children:[e.jsxDEV("div",{className:re.statusOverviewLabel,children:O(c.service_status).label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:432,columnNumber:21},void 0),e.jsxDEV("div",{className:re.statusOverviewTime,children:["Last sync: ",F(c.service_last_sync)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:435,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:431,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:422,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:420,columnNumber:15},void 0),e.jsxDEV("div",{className:re.modalSection,children:[e.jsxDEV("h3",{className:re.modalSectionTitle,children:"Service Details"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:444,columnNumber:17},void 0),e.jsxDEV("div",{className:re.detailsGrid,children:[c.service_endpoint&&e.jsxDEV("div",{className:re.detailItem,children:[e.jsxDEV("label",{children:"Endpoint"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:448,columnNumber:23},void 0),e.jsxDEV("code",{children:c.service_endpoint},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:449,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:447,columnNumber:21},void 0),c.service_uptime_percent!==void 0&&e.jsxDEV("div",{className:re.detailItem,children:[e.jsxDEV("label",{children:"Uptime (24h)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:454,columnNumber:23},void 0),e.jsxDEV("span",{children:[c.service_uptime_percent.toFixed(2),"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:455,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:453,columnNumber:21},void 0),c.service_response_time_ms!==void 0&&e.jsxDEV("div",{className:re.detailItem,children:[e.jsxDEV("label",{children:"Avg Response Time"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:460,columnNumber:23},void 0),e.jsxDEV("span",{children:[c.service_response_time_ms,"ms"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:461,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:459,columnNumber:21},void 0),c.service_request_count_24h!==void 0&&e.jsxDEV("div",{className:re.detailItem,children:[e.jsxDEV("label",{children:"Total Requests (24h)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:466,columnNumber:23},void 0),e.jsxDEV("span",{children:c.service_request_count_24h.toLocaleString()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:467,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:465,columnNumber:21},void 0),c.service_error_count_24h!==void 0&&e.jsxDEV("div",{className:re.detailItem,children:[e.jsxDEV("label",{children:"Total Errors (24h)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:472,columnNumber:23},void 0),e.jsxDEV("span",{style:{color:"#dc2626",fontWeight:600},children:c.service_error_count_24h.toLocaleString()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:473,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:471,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:445,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:443,columnNumber:15},void 0),c.service_last_error&&e.jsxDEV("div",{className:re.modalSection,children:[e.jsxDEV("h3",{className:re.modalSectionTitle,children:"Last Error"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:484,columnNumber:19},void 0),e.jsxDEV("div",{className:re.lastErrorBox,children:[e.jsxDEV("div",{className:re.lastErrorHeader,children:[e.jsxDEV(ve,{size:20,style:{color:"#dc2626"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:487,columnNumber:23},void 0),e.jsxDEV("span",{children:c.service_last_error_time&&F(c.service_last_error_time)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:488,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:486,columnNumber:21},void 0),e.jsxDEV("div",{className:re.lastErrorMessage,children:c.service_last_error},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:493,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:485,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:483,columnNumber:17},void 0),e.jsxDEV("div",{className:re.modalSection,children:[e.jsxDEV("h3",{className:re.modalSectionTitle,children:["Recent Error Logs (",V.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:502,columnNumber:17},void 0),V.length===0?e.jsxDEV("div",{className:re.noErrors,children:[e.jsxDEV(be,{size:32,style:{color:"#15803d"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:508,columnNumber:21},void 0),e.jsxDEV("p",{children:"No errors in recent history"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:509,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:507,columnNumber:19},void 0):e.jsxDEV("div",{className:re.errorLogsList,children:V.map(S=>e.jsxDEV("div",{className:re.errorLogItem,children:[e.jsxDEV("div",{className:re.errorLogHeader,children:[e.jsxDEV(Ve,{size:16,style:{color:"#dc2626"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:516,columnNumber:27},void 0),e.jsxDEV("span",{className:re.errorLogTime,children:F(S.error_timestamp)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:517,columnNumber:27},void 0),S.error_code&&e.jsxDEV("code",{className:re.errorCode,children:S.error_code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:521,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:515,columnNumber:25},void 0),e.jsxDEV("div",{className:re.errorLogMessage,children:S.error_message},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:524,columnNumber:25},void 0),S.error_stack&&e.jsxDEV("details",{className:re.errorStackDetails,children:[e.jsxDEV("summary",{children:"Stack Trace"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:527,columnNumber:29},void 0),e.jsxDEV("pre",{className:re.errorStack,children:S.error_stack},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:528,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:526,columnNumber:27},void 0)]},S.error_id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:514,columnNumber:23},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:512,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:501,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:418,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:405,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:403,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/IntegrationStatusTab.tsx",lineNumber:244,columnNumber:5},void 0)},zf="_container_1td2l_21",Ff="_header_1td2l_49",$f="_headerLeft_1td2l_65",Uf="_headerIcon_1td2l_77",qf="_title_1td2l_91",Gf="_subtitle_1td2l_109",Of="_headerRight_1td2l_127",Wf="_btnPrimary_1td2l_137",Jf="_btnSecondary_1td2l_183",Xf="_btnAutoRefreshActive_1td2l_227",Kf="_spinning_1td2l_271",Zf="_statsGrid_1td2l_305",Yf="_statCard_1td2l_317",eN="_statCardHeader_1td2l_343",iN="_statIconGray_1td2l_371",nN="_statIconBlue_1td2l_385",sN="_statIconGreen_1td2l_399",rN="_statIconRed_1td2l_413",lN="_statLabel_1td2l_427",aN="_statValue_1td2l_441",tN="_filterActionsRow_1td2l_465",oN="_filterGroup_1td2l_487",dN="_searchBox_1td2l_503",cN="_searchIcon_1td2l_517",mN="_searchInput_1td2l_539",uN="_filterSelect_1td2l_585",pN="_modulesList_1td2l_639",fN="_moduleCard_1td2l_651",NN="_moduleHeader_1td2l_677",bN="_moduleToggle_1td2l_703",TN="_moduleInfo_1td2l_743",VN="_moduleNameRow_1td2l_753",vN="_jobTypeIcon_1td2l_769",xN="_moduleName_1td2l_753",gN="_moduleCode_1td2l_811",hN="_moduleDescription_1td2l_833",EN="_moduleMeta_1td2l_857",HN="_timestamp_1td2l_871",_N="_statusBadge_1td2l_891",LN="_progressSection_1td2l_927",DN="_progressHeader_1td2l_965",jN="_progressLabel_1td2l_977",yN="_progressValue_1td2l_995",QN="_progressBar_1td2l_1009",CN="_progressFill_1td2l_1025",SN="_errorSummary_1td2l_1069",wN="_errorCode_1td2l_1111",MN="_permissionsTable_1td2l_1143",IN="_permissionsTableHeader_1td2l_1153",kN="_permissionsTableTitle_1td2l_1171",AN="_table_1td2l_1187",RN="_footer_1td2l_1279",PN="_footerLeft_1td2l_1303",BN="_footerText_1td2l_1313",zN="_footerRight_1td2l_1327",FN="_pagination_1td2l_1339",$N="_pageButton_1td2l_1351",UN="_pageInfo_1td2l_1399",qN="_loadingContainer_1td2l_1423",GN="_spinner_1td2l_1441",ON="_loadingText_1td2l_1455",WN="_emptyState_1td2l_1471",le={container:zf,header:Ff,headerLeft:$f,headerIcon:Uf,title:qf,subtitle:Gf,headerRight:Of,btnPrimary:Wf,btnSecondary:Jf,btnAutoRefreshActive:Xf,spinning:Kf,statsGrid:Zf,statCard:Yf,statCardHeader:eN,statIconGray:iN,statIconBlue:nN,statIconGreen:sN,statIconRed:rN,statLabel:lN,statValue:aN,filterActionsRow:tN,filterGroup:oN,searchBox:dN,searchIcon:cN,searchInput:mN,filterSelect:uN,modulesList:pN,moduleCard:fN,moduleHeader:NN,moduleToggle:bN,moduleInfo:TN,moduleNameRow:VN,jobTypeIcon:vN,moduleName:xN,moduleCode:gN,moduleDescription:hN,moduleMeta:EN,timestamp:HN,statusBadge:_N,progressSection:LN,progressHeader:DN,progressLabel:jN,progressValue:yN,progressBar:QN,progressFill:CN,errorSummary:SN,errorCode:wN,permissionsTable:MN,permissionsTableHeader:IN,permissionsTableTitle:kN,table:AN,footer:RN,footerLeft:PN,footerText:BN,footerRight:zN,pagination:FN,pageButton:$N,pageInfo:UN,loadingContainer:qN,spinner:GN,loadingText:ON,emptyState:WN},JN=()=>{const[n,s]=d.useState(!0),[r,u]=d.useState([]),[c,T]=d.useState(""),[t,p]=d.useState("all"),[V,L]=d.useState("all"),[Q,E]=d.useState(new Set),[x,f]=d.useState(1),[D,k]=d.useState(!0),I=20,z=async()=>{try{r.length===0&&s(!0);const{data:N,error:g}=await ie.from("job_monitor_items").select("*, id:_id").order("job_monitor_items_started_at",{ascending:!1});if(g){console.error("❌ Error fetching jobs:",g),r.length===0&&m.error(`Lỗi tải dữ liệu: ${g.message}`);return}u(N||[])}catch(N){console.error("❌ Error:",N),r.length===0&&m.error("Lỗi kết nối cơ sở dữ liệu")}finally{s(!1)}};d.useEffect(()=>{z()},[]),d.useEffect(()=>{if(!D)return;const N=setInterval(()=>{z()},5e3);return()=>clearInterval(N)},[D,r.length]);const F=d.useMemo(()=>{const N=new Set(r.map(g=>g.job_monitor_items_job_type));return Array.from(N).sort()},[r]),U=d.useMemo(()=>{let N=[...r];if(c.trim()){const g=c.toLowerCase();N=N.filter(o=>o.job_monitor_items_job_id.toLowerCase().includes(g)||o.job_monitor_items_job_type.toLowerCase().includes(g))}return t!=="all"&&(N=N.filter(g=>g.job_monitor_items_job_type===t)),V!=="all"&&(N=N.filter(g=>g.job_monitor_items_status===V)),N},[r,c,t,V]),O=Math.ceil(U.length/I),w=U.slice((x-1)*I,x*I),Z=r.filter(N=>N.job_monitor_items_status==="pending").length,B=r.filter(N=>N.job_monitor_items_status==="running").length,R=r.filter(N=>N.job_monitor_items_status==="completed").length,S=r.filter(N=>N.job_monitor_items_status==="failed").length,ee=N=>{const g=new Set(Q);g.has(N)?g.delete(N):g.add(N),E(g)},ne=()=>{m.info("Đang làm mới dữ liệu..."),z()},A=()=>{k(!D),m.success(D?"Đã tắt auto-refresh":"Đã bật auto-refresh (5s)")},y=N=>new Date(N).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),$=N=>({pending:{bg:"#e2e3e5",color:"#383d41",label:"PENDING",icon:e.jsxDEV(Qe,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:210,columnNumber:75},void 0)},running:{bg:"#d1ecf1",color:"#0c5460",label:"RUNNING",icon:e.jsxDEV(on,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:211,columnNumber:75},void 0)},completed:{bg:"#d4edda",color:"#155724",label:"COMPLETED",icon:e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:212,columnNumber:79},void 0)},failed:{bg:"#f8d7da",color:"#721c24",label:"FAILED",icon:e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:213,columnNumber:73},void 0)},cancelled:{bg:"#fef3c7",color:"#92400e",label:"CANCELLED",icon:e.jsxDEV(as,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:214,columnNumber:79},void 0)}})[N],M=N=>{const g=N.toLowerCase();return g.includes("export")?e.jsxDEV(We,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:221,columnNumber:42},void 0):g.includes("sync")?e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:222,columnNumber:40},void 0):g.includes("email")?e.jsxDEV(Mi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:223,columnNumber:41},void 0):g.includes("database")?e.jsxDEV(ni,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:224,columnNumber:44},void 0):e.jsxDEV(Xi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:225,columnNumber:12},void 0)},v=(N,g)=>{const o=new Date(N).getTime(),h=(g?new Date(g).getTime():Date.now())-o,b=Math.floor(h/1e3),l=Math.floor(b/60);return l<1?`${b}s`:l<60?`${l}m ${b%60}s`:`${Math.floor(l/60)}h ${l%60}m`};return e.jsxDEV("div",{className:le.container,children:[e.jsxDEV("div",{className:le.header,children:[e.jsxDEV("div",{className:le.headerLeft,children:[e.jsxDEV(ii,{className:le.headerIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:250,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:le.title,children:"Giám sát Hệ thống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:252,columnNumber:13},void 0),e.jsxDEV("p",{className:le.subtitle,children:"Theo dõi real-time các job nền và hàng đợi trong hệ thống MAPPA"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:253,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:251,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:249,columnNumber:9},void 0),e.jsxDEV("div",{className:le.headerRight,children:[e.jsxDEV("button",{onClick:A,className:D?le.btnAutoRefreshActive:le.btnSecondary,children:[e.jsxDEV(ge,{size:16,className:D?le.spinning:""},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:263,columnNumber:13},void 0),D?"Auto (5s)":"Auto-refresh"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:259,columnNumber:11},void 0),e.jsxDEV("button",{onClick:ne,className:le.btnPrimary,children:[e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:267,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:266,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:258,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:248,columnNumber:7},void 0),e.jsxDEV("div",{className:le.statsGrid,children:[e.jsxDEV("div",{className:le.statCard,children:[e.jsxDEV("div",{className:le.statCardHeader,children:[e.jsxDEV(Qe,{className:le.statIconGray},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:277,columnNumber:13},void 0),e.jsxDEV("span",{className:le.statLabel,children:"Pending"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:278,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:276,columnNumber:11},void 0),e.jsxDEV("div",{className:le.statValue,children:Z},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:280,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:275,columnNumber:9},void 0),e.jsxDEV("div",{className:le.statCard,children:[e.jsxDEV("div",{className:le.statCardHeader,children:[e.jsxDEV(on,{className:le.statIconBlue},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:284,columnNumber:13},void 0),e.jsxDEV("span",{className:le.statLabel,children:"Running"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:285,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:283,columnNumber:11},void 0),e.jsxDEV("div",{className:le.statValue,children:B},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:287,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:282,columnNumber:9},void 0),e.jsxDEV("div",{className:le.statCard,children:[e.jsxDEV("div",{className:le.statCardHeader,children:[e.jsxDEV(be,{className:le.statIconGreen},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:291,columnNumber:13},void 0),e.jsxDEV("span",{className:le.statLabel,children:"Completed"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:292,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:290,columnNumber:11},void 0),e.jsxDEV("div",{className:le.statValue,children:R},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:294,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:289,columnNumber:9},void 0),e.jsxDEV("div",{className:le.statCard,children:[e.jsxDEV("div",{className:le.statCardHeader,children:[e.jsxDEV(Ve,{className:le.statIconRed},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:298,columnNumber:13},void 0),e.jsxDEV("span",{className:le.statLabel,children:"Failed"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:299,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:297,columnNumber:11},void 0),e.jsxDEV("div",{className:le.statValue,children:S},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:301,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:296,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:274,columnNumber:7},void 0),e.jsxDEV("div",{className:le.filterActionsRow,children:e.jsxDEV("div",{className:le.filterGroup,children:[e.jsxDEV("div",{className:le.searchBox,children:[e.jsxDEV(_e,{className:le.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:309,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm theo Job ID hoặc Job Type...",value:c,onChange:N=>T(N.target.value),className:le.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:310,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:308,columnNumber:11},void 0),e.jsxDEV("select",{value:t,onChange:N=>p(N.target.value),className:le.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"Tất cả Job Types"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:325,columnNumber:13},void 0),F.map(N=>e.jsxDEV("option",{value:N,children:N},N,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:327,columnNumber:15},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:320,columnNumber:11},void 0),e.jsxDEV("select",{value:V,onChange:N=>L(N.target.value),className:le.filterSelect,children:[e.jsxDEV("option",{value:"all",children:"Tất cả Status"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:339,columnNumber:13},void 0),e.jsxDEV("option",{value:"pending",children:"Pending"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:340,columnNumber:13},void 0),e.jsxDEV("option",{value:"running",children:"Running"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:341,columnNumber:13},void 0),e.jsxDEV("option",{value:"completed",children:"Completed"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:342,columnNumber:13},void 0),e.jsxDEV("option",{value:"failed",children:"Failed"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:343,columnNumber:13},void 0),e.jsxDEV("option",{value:"cancelled",children:"Cancelled"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:344,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:334,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:307,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:306,columnNumber:7},void 0),n?e.jsxDEV("div",{className:le.loadingContainer,children:[e.jsxDEV(he,{className:le.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:352,columnNumber:11},void 0),e.jsxDEV("p",{className:le.loadingText,children:"Đang tải job monitor..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:353,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:351,columnNumber:9},void 0):U.length===0?e.jsxDEV("div",{className:le.emptyState,children:[e.jsxDEV(ii,{size:64},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:357,columnNumber:11},void 0),e.jsxDEV("p",{children:"Không tìm thấy job nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:358,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:356,columnNumber:9},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:le.modulesList,children:w.map(N=>{const g=Q.has(N.job_monitor_items_id),o=$(N.job_monitor_items_status),a=N.job_monitor_items_progress||0,h=N.job_monitor_items_status==="running";return e.jsxDEV("div",{className:le.moduleCard,children:[e.jsxDEV("div",{className:le.moduleHeader,children:[e.jsxDEV("button",{className:le.moduleToggle,onClick:()=>ee(N.job_monitor_items_id),children:g?e.jsxDEV(Me,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:377,columnNumber:37},void 0):e.jsxDEV(Ce,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:377,columnNumber:65},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:373,columnNumber:21},void 0),e.jsxDEV("div",{className:le.moduleInfo,children:[e.jsxDEV("div",{className:le.moduleNameRow,children:[e.jsxDEV("span",{className:le.jobTypeIcon,children:M(N.job_monitor_items_job_type)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:382,columnNumber:25},void 0),e.jsxDEV("h3",{className:le.moduleName,children:N.job_monitor_items_job_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:385,columnNumber:25},void 0),e.jsxDEV("code",{className:le.moduleCode,children:["#",N.job_monitor_items_job_id.slice(0,8)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:386,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:381,columnNumber:23},void 0),e.jsxDEV("p",{className:le.moduleDescription,children:[N.job_monitor_items_created_by&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Re,{size:14,style:{display:"inline",marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:393,columnNumber:29},void 0),N.job_monitor_items_created_by," •"," "]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:392,columnNumber:27},void 0),v(N.job_monitor_items_started_at,N.job_monitor_items_completed_at)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:390,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:380,columnNumber:21},void 0),e.jsxDEV("div",{className:le.moduleMeta,children:e.jsxDEV("span",{className:le.timestamp,children:[e.jsxDEV(Qe,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:406,columnNumber:25},void 0),y(N.job_monitor_items_started_at)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:405,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:404,columnNumber:21},void 0),e.jsxDEV("div",{className:le.moduleMeta,children:e.jsxDEV("span",{className:le.statusBadge,style:{background:o.bg,color:o.color},children:[o.icon,o.label]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:412,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:411,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:372,columnNumber:19},void 0),h&&e.jsxDEV("div",{className:le.progressSection,children:[e.jsxDEV("div",{className:le.progressHeader,children:[e.jsxDEV("span",{className:le.progressLabel,children:N.job_monitor_items_current_step&&N.job_monitor_items_total_steps?`Step ${N.job_monitor_items_current_step}/${N.job_monitor_items_total_steps}`:"Processing..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:429,columnNumber:25},void 0),e.jsxDEV("span",{className:le.progressValue,children:[a,"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:434,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:428,columnNumber:23},void 0),e.jsxDEV("div",{className:le.progressBar,children:e.jsxDEV("div",{className:le.progressFill,style:{width:`${a}%`}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:437,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:436,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:427,columnNumber:21},void 0),N.job_monitor_items_status==="failed"&&N.job_monitor_items_error_summary&&e.jsxDEV("div",{className:le.errorSummary,children:[e.jsxDEV(ve,{size:16,style:{flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:449,columnNumber:25},void 0),e.jsxDEV("div",{children:[N.job_monitor_items_error_code&&e.jsxDEV("code",{className:le.errorCode,children:N.job_monitor_items_error_code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:452,columnNumber:29},void 0),e.jsxDEV("span",{children:N.job_monitor_items_error_summary},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:456,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:450,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:448,columnNumber:23},void 0),g&&e.jsxDEV("div",{className:le.permissionsTable,children:[e.jsxDEV("div",{className:le.permissionsTableHeader,children:e.jsxDEV("h4",{className:le.permissionsTableTitle,children:"Thông tin chi tiết"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:465,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:464,columnNumber:23},void 0),e.jsxDEV("table",{className:le.table,children:e.jsxDEV("tbody",{children:[e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"200px"},children:"Job ID"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:471,columnNumber:29},void 0),e.jsxDEV("td",{children:e.jsxDEV("code",{style:{fontSize:"13px",color:"#666"},children:N.job_monitor_items_job_id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:473,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:472,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:470,columnNumber:27},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Job Type"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:479,columnNumber:29},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{padding:"4px 10px",background:"rgba(0, 92, 182, 0.1)",color:"#005cb6",borderRadius:"4px",fontSize:"13px",fontWeight:600},children:N.job_monitor_items_job_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:481,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:480,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:478,columnNumber:27},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Status"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:496,columnNumber:29},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"12px",fontSize:"13px",fontWeight:600,background:o.bg,color:o.color},children:[o.icon,o.label]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:498,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:497,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:495,columnNumber:27},void 0),e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Started At"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:517,columnNumber:29},void 0),e.jsxDEV("td",{children:y(N.job_monitor_items_started_at)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:518,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:516,columnNumber:27},void 0),N.job_monitor_items_completed_at&&e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Completed At"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:522,columnNumber:31},void 0),e.jsxDEV("td",{children:y(N.job_monitor_items_completed_at)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:523,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:521,columnNumber:29},void 0),N.job_monitor_items_progress!==void 0&&e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Progress"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:528,columnNumber:31},void 0),e.jsxDEV("td",{style:{fontWeight:600,color:"#005cb6"},children:[N.job_monitor_items_progress,"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:529,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:527,columnNumber:29},void 0),N.job_monitor_items_retry_count!==void 0&&e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Retry Count"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:536,columnNumber:31},void 0),e.jsxDEV("td",{children:N.job_monitor_items_retry_count},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:537,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:535,columnNumber:29},void 0),N.job_monitor_items_error_code&&e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Error Code"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:542,columnNumber:31},void 0),e.jsxDEV("td",{children:e.jsxDEV("code",{style:{padding:"4px 8px",background:"#fef2f2",color:"#991b1b",borderRadius:"4px",fontSize:"13px"},children:N.job_monitor_items_error_code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:544,columnNumber:33},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:543,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:541,columnNumber:29},void 0),N.job_monitor_items_error_summary&&e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Error Summary"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:560,columnNumber:31},void 0),e.jsxDEV("td",{style:{color:"#dc2626"},children:N.job_monitor_items_error_summary},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:561,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:559,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:469,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:468,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:463,columnNumber:21},void 0)]},N.job_monitor_items_id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:370,columnNumber:17},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:362,columnNumber:11},void 0),e.jsxDEV("div",{className:le.footer,children:[e.jsxDEV("div",{className:le.footerLeft,children:e.jsxDEV("span",{className:le.footerText,children:["Hiển thị ",(x-1)*I+1," -"," ",Math.min(x*I,U.length)," của ",U.length," jobs"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:578,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:577,columnNumber:13},void 0),e.jsxDEV("div",{className:le.footerRight,children:e.jsxDEV("div",{className:le.pagination,children:[e.jsxDEV("button",{className:le.pageButton,onClick:()=>f(x-1),disabled:x===1,children:"← Trước"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:585,columnNumber:17},void 0),e.jsxDEV("span",{className:le.pageInfo,children:["Trang ",x," / ",O]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:592,columnNumber:17},void 0),e.jsxDEV("button",{className:le.pageButton,onClick:()=>f(x+1),disabled:x===O,children:"Sau →"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:595,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:584,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:583,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:576,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:361,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemMonitorTab.tsx",lineNumber:246,columnNumber:5},void 0)},XN="_container_9e1cl_21",KN="_statusBanner_9e1cl_49",ZN="_statusBannerContent_9e1cl_71",YN="_statusBannerIcon_9e1cl_83",eb="_statusBannerText_9e1cl_115",ib="_statusBannerTitle_9e1cl_127",nb="_statusBannerSubtitle_9e1cl_143",sb="_statusBannerActions_9e1cl_159",rb="_btnPrimary_9e1cl_171",lb="_btnSecondary_9e1cl_217",ab="_btnAutoRefreshActive_9e1cl_259",tb="_spinning_9e1cl_305",ob="_bigMetricsGrid_9e1cl_339",db="_bigMetricCard_9e1cl_351",cb="_bigMetricHeader_9e1cl_387",mb="_bigMetricIcon_9e1cl_399",ub="_bigMetricLabel_9e1cl_419",pb="_bigMetricValue_9e1cl_437",fb="_bigMetricTrend_9e1cl_455",Nb="_sparklineContainer_9e1cl_473",bb="_secondaryMetricsGrid_9e1cl_493",Tb="_secondaryMetricCard_9e1cl_505",Vb="_secondaryMetricIcon_9e1cl_539",vb="_secondaryMetricLabel_9e1cl_553",xb="_secondaryMetricValue_9e1cl_571",gb="_section_9e1cl_597",hb="_sectionHeader_9e1cl_609",Eb="_sectionTitle_9e1cl_625",Hb="_serviceSummary_9e1cl_655",_b="_serviceSummaryItem_9e1cl_669",Lb="_servicesGrid_9e1cl_705",Db="_serviceCard_9e1cl_717",jb="_serviceCardHeader_9e1cl_751",yb="_serviceCardIcon_9e1cl_763",Qb="_serviceStatusBadge_9e1cl_783",Cb="_serviceCardBody_9e1cl_813",Sb="_serviceCardName_9e1cl_825",wb="_serviceCardMetric_9e1cl_843",Mb="_serviceCardMetricLabel_9e1cl_857",Ib="_serviceCardMetricValue_9e1cl_871",kb="_serviceCardFooter_9e1cl_885",Ab="_noIncidents_9e1cl_925",Rb="_incidentsList_9e1cl_965",Pb="_incidentCard_9e1cl_977",Bb="_incidentCardHeader_9e1cl_1011",zb="_incidentSeverityBadge_9e1cl_1027",Fb="_incidentTimestamp_9e1cl_1051",$b="_incidentCardBody_9e1cl_1079",Ub="_incidentType_9e1cl_1091",qb="_incidentMessage_9e1cl_1105",Gb="_loadingContainer_9e1cl_1129",Ob="_spinner_9e1cl_1147",Wb="_loadingText_9e1cl_1161",Y={container:XN,statusBanner:KN,statusBannerContent:ZN,statusBannerIcon:YN,statusBannerText:eb,statusBannerTitle:ib,statusBannerSubtitle:nb,statusBannerActions:sb,btnPrimary:rb,btnSecondary:lb,btnAutoRefreshActive:ab,spinning:tb,bigMetricsGrid:ob,bigMetricCard:db,bigMetricHeader:cb,bigMetricIcon:mb,bigMetricLabel:ub,bigMetricValue:pb,bigMetricTrend:fb,sparklineContainer:Nb,secondaryMetricsGrid:bb,secondaryMetricCard:Tb,secondaryMetricIcon:Vb,secondaryMetricLabel:vb,secondaryMetricValue:xb,section:gb,sectionHeader:hb,sectionTitle:Eb,serviceSummary:Hb,serviceSummaryItem:_b,servicesGrid:Lb,serviceCard:Db,serviceCardHeader:jb,serviceCardIcon:yb,serviceStatusBadge:Qb,serviceCardBody:Cb,serviceCardName:Sb,serviceCardMetric:wb,serviceCardMetricLabel:Mb,serviceCardMetricValue:Ib,serviceCardFooter:kb,noIncidents:Ab,incidentsList:Rb,incidentCard:Pb,incidentCardHeader:Bb,incidentSeverityBadge:zb,incidentTimestamp:Fb,incidentCardBody:$b,incidentType:Ub,incidentMessage:qb,loadingContainer:Gb,spinner:Ob,loadingText:Wb},Jb=()=>{var v,N,g,o;const[n,s]=d.useState(!0),[r,u]=d.useState(null),[c,T]=d.useState([]),[t,p]=d.useState([]),[V,L]=d.useState([]),[Q,E]=d.useState([]),[x,f]=d.useState([]),[D,k]=d.useState(!0),I=async()=>{try{r||s(!0);const{data:a,error:h}=await ie.from("system_metrics").select("*, id:_id").order("created_at",{ascending:!1}).limit(1).single();h&&h.code!=="PGRST116"?console.error("❌ Error fetching metrics:",h):u(a||z());const{data:b,error:l}=await ie.from("service_health").select("*, id:_id").order("service_name",{ascending:!0});l&&l.code!=="PGRST116"?console.error("❌ Error fetching services:",l):T(b||F());const{data:j,error:_}=await ie.from("system_incidents").select("*, id:_id").order("incident_timestamp",{ascending:!1}).limit(5);_&&_.code!=="PGRST116"?console.error("❌ Error fetching incidents:",_):p(j||[]);const{data:X,error:H}=await ie.from("system_metrics_history").select("*, id:_id").gte("timestamp",new Date(Date.now()-1440*60*1e3).toISOString()).order("timestamp",{ascending:!0});H&&H.code!=="PGRST116"?console.error("❌ Error fetching history:",H):X?(L(X.map(K=>({timestamp:K.timestamp,value:K.uptime_percent}))),E(X.map(K=>({timestamp:K.timestamp,value:K.avg_response_time_ms}))),f(X.map(K=>({timestamp:K.timestamp,value:K.error_rate_percent})))):(L(U(99.9,.5)),E(U(150,50)),f(U(.5,.3)))}catch(a){console.error("❌ Error:",a),r||m.error("Lỗi kết nối cơ sở dữ liệu")}finally{s(!1)}};d.useEffect(()=>{I()},[]),d.useEffect(()=>{if(!D)return;const a=setInterval(()=>{I()},1e4);return()=>clearInterval(a)},[D,r]);const z=()=>({uptime_percent:99.87,error_rate_percent:.43,avg_response_time_ms:142,total_requests_24h:2847651,total_errors_24h:12245,cpu_usage_percent:45.2,memory_usage_percent:67.8,disk_usage_percent:52.3,active_users:1842}),F=()=>[{service_name:"API Gateway",service_status:"healthy",service_uptime_percent:99.95,service_last_check:new Date().toISOString()},{service_name:"Database Primary",service_status:"healthy",service_uptime_percent:99.99,service_last_check:new Date().toISOString()},{service_name:"Cache Server",service_status:"warning",service_uptime_percent:98.52,service_last_check:new Date().toISOString()},{service_name:"Auth Service",service_status:"healthy",service_uptime_percent:99.89,service_last_check:new Date().toISOString()},{service_name:"Storage Service",service_status:"healthy",service_uptime_percent:99.76,service_last_check:new Date().toISOString()},{service_name:"Email Service",service_status:"error",service_uptime_percent:95.21,service_last_check:new Date().toISOString()}],U=(a,h)=>{const b=[],l=Date.now();for(let j=24;j>=0;j--){const _=new Date(l-j*60*60*1e3).toISOString(),X=a+(Math.random()-.5)*h*2;b.push({timestamp:_,value:Math.max(0,X)})}return b},O=()=>{m.info("Đang làm mới dữ liệu..."),I()},w=()=>{k(!D),m.success(D?"Đã tắt auto-refresh":"Đã bật auto-refresh (10s)")},Z=d.useMemo(()=>r?r.uptime_percent>=99.5&&r.error_rate_percent<1?"healthy":r.uptime_percent>=98&&r.error_rate_percent<3?"warning":"error":"unknown",[r]),B=c.filter(a=>a.service_status==="healthy").length,R=c.filter(a=>a.service_status==="warning").length,S=c.filter(a=>a.service_status==="error").length,ee=(a,h)=>a.length===0?null:e.jsxDEV($n,{width:"100%",height:60,children:e.jsxDEV(Un,{data:a,children:e.jsxDEV(qn,{type:"monotone",dataKey:"value",stroke:h,strokeWidth:2,dot:!1,isAnimationActive:!1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:256,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:255,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:254,columnNumber:7},void 0),ne=a=>{const h={healthy:{bg:"#d4edda",color:"#155724",label:"Hệ thống hoạt động bình thường",icon:e.jsxDEV(be,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:271,columnNumber:98},void 0)},warning:{bg:"#fff3cd",color:"#856404",label:"Hệ thống cần theo dõi",icon:e.jsxDEV(ti,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:272,columnNumber:89},void 0)},error:{bg:"#f8d7da",color:"#721c24",label:"Hệ thống gặp sự cố",icon:e.jsxDEV(Ve,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:273,columnNumber:84},void 0)},unknown:{bg:"#e2e3e5",color:"#383d41",label:"Trạng thái không xác định",icon:e.jsxDEV(ve,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:274,columnNumber:93},void 0)}};return h[a]||h.unknown},A=a=>{const h={low:{bg:"#d1ecf1",color:"#0c5460",label:"Thấp"},medium:{bg:"#fff3cd",color:"#856404",label:"Trung bình"},high:{bg:"#f8d7da",color:"#721c24",label:"Cao"},critical:{bg:"#721c24",color:"#ffffff",label:"Nghiêm trọng"}};return h[a]||h.low},y=a=>new Date(a).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),$=a=>{const h=new Date().getTime(),b=new Date(a).getTime(),l=h-b,j=Math.floor(l/1e3),_=Math.floor(j/60),X=Math.floor(_/60);return j<60?`${j}s trước`:_<60?`${_}m trước`:X<24?`${X}h trước`:`${Math.floor(X/24)}d trước`};if(n)return e.jsxDEV("div",{className:Y.loadingContainer,children:[e.jsxDEV(he,{className:Y.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:322,columnNumber:9},void 0),e.jsxDEV("p",{className:Y.loadingText,children:"Đang tải trạng thái hệ thống..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:323,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:321,columnNumber:7},void 0);const M=ne(Z);return e.jsxDEV("div",{className:Y.container,children:[e.jsxDEV("div",{className:Y.statusBanner,style:{background:M.bg,color:M.color},children:[e.jsxDEV("div",{className:Y.statusBannerContent,children:[e.jsxDEV("div",{className:Y.statusBannerIcon,children:M.icon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:335,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.statusBannerText,children:[e.jsxDEV("h1",{className:Y.statusBannerTitle,children:M.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:337,columnNumber:13},void 0),e.jsxDEV("p",{className:Y.statusBannerSubtitle,children:["Cập nhật lần cuối: ",r?new Date().toLocaleTimeString("vi-VN"):"--:--"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:338,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:336,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:334,columnNumber:9},void 0),e.jsxDEV("div",{className:Y.statusBannerActions,children:[e.jsxDEV("button",{onClick:w,className:D?Y.btnAutoRefreshActive:Y.btnSecondary,children:[e.jsxDEV(ge,{size:16,className:D?Y.spinning:""},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:348,columnNumber:13},void 0),D?"Auto (10s)":"Auto-refresh"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:344,columnNumber:11},void 0),e.jsxDEV("button",{onClick:O,className:Y.btnPrimary,children:[e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:352,columnNumber:13},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:351,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:343,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:333,columnNumber:7},void 0),e.jsxDEV("div",{className:Y.bigMetricsGrid,children:[e.jsxDEV("div",{className:Y.bigMetricCard,children:[e.jsxDEV("div",{className:Y.bigMetricHeader,children:[e.jsxDEV("div",{className:Y.bigMetricIcon,style:{color:"#15803d"},children:e.jsxDEV(ii,{size:28},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:364,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:363,columnNumber:13},void 0),e.jsxDEV("div",{className:Y.bigMetricLabel,children:"Uptime (24h)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:366,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:362,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.bigMetricValue,children:[r==null?void 0:r.uptime_percent.toFixed(2),"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:368,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.bigMetricTrend,children:[e.jsxDEV(bi,{size:16,style:{color:"#15803d"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:372,columnNumber:13},void 0),e.jsxDEV("span",{style:{color:"#15803d"},children:"+0.05% từ hôm qua"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:373,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:371,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.sparklineContainer,children:ee(V,"#15803d")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:375,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:361,columnNumber:9},void 0),e.jsxDEV("div",{className:Y.bigMetricCard,children:[e.jsxDEV("div",{className:Y.bigMetricHeader,children:[e.jsxDEV("div",{className:Y.bigMetricIcon,style:{color:"#dc2626"},children:e.jsxDEV(ve,{size:28},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:384,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:383,columnNumber:13},void 0),e.jsxDEV("div",{className:Y.bigMetricLabel,children:"Error Rate (24h)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:386,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:382,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.bigMetricValue,children:[r==null?void 0:r.error_rate_percent.toFixed(2),"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:388,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.bigMetricTrend,children:[e.jsxDEV(ts,{size:16,style:{color:"#15803d"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:392,columnNumber:13},void 0),e.jsxDEV("span",{style:{color:"#15803d"},children:"-0.12% từ hôm qua"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:393,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:391,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.sparklineContainer,children:ee(x,"#dc2626")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:395,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:381,columnNumber:9},void 0),e.jsxDEV("div",{className:Y.bigMetricCard,children:[e.jsxDEV("div",{className:Y.bigMetricHeader,children:[e.jsxDEV("div",{className:Y.bigMetricIcon,style:{color:"#0c5460"},children:e.jsxDEV(Xi,{size:28},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:404,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:403,columnNumber:13},void 0),e.jsxDEV("div",{className:Y.bigMetricLabel,children:"Avg Response Time"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:406,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:402,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.bigMetricValue,children:[r==null?void 0:r.avg_response_time_ms,"ms"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:408,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.bigMetricTrend,children:[e.jsxDEV(bi,{size:16,style:{color:"#dc2626"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:412,columnNumber:13},void 0),e.jsxDEV("span",{style:{color:"#dc2626"},children:"+8ms từ hôm qua"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:413,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:411,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.sparklineContainer,children:ee(Q,"#0c5460")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:415,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:401,columnNumber:9},void 0),e.jsxDEV("div",{className:Y.bigMetricCard,children:[e.jsxDEV("div",{className:Y.bigMetricHeader,children:[e.jsxDEV("div",{className:Y.bigMetricIcon,style:{color:"#005cb6"},children:e.jsxDEV(Vi,{size:28},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:424,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:423,columnNumber:13},void 0),e.jsxDEV("div",{className:Y.bigMetricLabel,children:"Total Requests (24h)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:426,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:422,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.bigMetricValue,children:r==null?void 0:r.total_requests_24h.toLocaleString("vi-VN")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:428,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.bigMetricTrend,children:[e.jsxDEV(bi,{size:16,style:{color:"#15803d"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:432,columnNumber:13},void 0),e.jsxDEV("span",{style:{color:"#15803d"},children:"+12.3% từ hôm qua"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:433,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:431,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:421,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:359,columnNumber:7},void 0),e.jsxDEV("div",{className:Y.secondaryMetricsGrid,children:[e.jsxDEV("div",{className:Y.secondaryMetricCard,children:[e.jsxDEV(os,{className:Y.secondaryMetricIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:441,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:Y.secondaryMetricLabel,children:"CPU Usage"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:443,columnNumber:13},void 0),e.jsxDEV("div",{className:Y.secondaryMetricValue,children:[((v=r==null?void 0:r.cpu_usage_percent)==null?void 0:v.toFixed(1))||"--","%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:444,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:442,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:440,columnNumber:9},void 0),e.jsxDEV("div",{className:Y.secondaryMetricCard,children:[e.jsxDEV(ds,{className:Y.secondaryMetricIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:448,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:Y.secondaryMetricLabel,children:"Memory Usage"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:450,columnNumber:13},void 0),e.jsxDEV("div",{className:Y.secondaryMetricValue,children:[((N=r==null?void 0:r.memory_usage_percent)==null?void 0:N.toFixed(1))||"--","%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:451,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:449,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:447,columnNumber:9},void 0),e.jsxDEV("div",{className:Y.secondaryMetricCard,children:[e.jsxDEV(Sn,{className:Y.secondaryMetricIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:455,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:Y.secondaryMetricLabel,children:"Disk Usage"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:457,columnNumber:13},void 0),e.jsxDEV("div",{className:Y.secondaryMetricValue,children:[((g=r==null?void 0:r.disk_usage_percent)==null?void 0:g.toFixed(1))||"--","%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:458,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:456,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:454,columnNumber:9},void 0),e.jsxDEV("div",{className:Y.secondaryMetricCard,children:[e.jsxDEV(ii,{className:Y.secondaryMetricIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:462,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:Y.secondaryMetricLabel,children:"Active Users"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:464,columnNumber:13},void 0),e.jsxDEV("div",{className:Y.secondaryMetricValue,children:((o=r==null?void 0:r.active_users)==null?void 0:o.toLocaleString("vi-VN"))||"--"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:465,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:463,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:461,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:439,columnNumber:7},void 0),e.jsxDEV("div",{className:Y.section,children:[e.jsxDEV("div",{className:Y.sectionHeader,children:[e.jsxDEV("h2",{className:Y.sectionTitle,children:[e.jsxDEV(Ji,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:474,columnNumber:13},void 0),"Service Health Overview"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:473,columnNumber:11},void 0),e.jsxDEV("div",{className:Y.serviceSummary,children:[e.jsxDEV("span",{className:Y.serviceSummaryItem,style:{color:"#15803d"},children:[e.jsxDEV(be,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:479,columnNumber:15},void 0),B," Healthy"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:478,columnNumber:13},void 0),e.jsxDEV("span",{className:Y.serviceSummaryItem,style:{color:"#f59e0b"},children:[e.jsxDEV(ti,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:483,columnNumber:15},void 0),R," Warning"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:482,columnNumber:13},void 0),e.jsxDEV("span",{className:Y.serviceSummaryItem,style:{color:"#dc2626"},children:[e.jsxDEV(Ve,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:487,columnNumber:15},void 0),S," Error"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:486,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:477,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:472,columnNumber:9},void 0),e.jsxDEV("div",{className:Y.servicesGrid,children:c.map((a,h)=>{const l={healthy:{bg:"#d4edda",color:"#155724",icon:e.jsxDEV(be,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:496,columnNumber:65},void 0)},warning:{bg:"#fff3cd",color:"#856404",icon:e.jsxDEV(ti,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:497,columnNumber:65},void 0)},error:{bg:"#f8d7da",color:"#721c24",icon:e.jsxDEV(Ve,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:498,columnNumber:63},void 0)}}[a.service_status];return e.jsxDEV("div",{className:Y.serviceCard,children:[e.jsxDEV("div",{className:Y.serviceCardHeader,children:[e.jsxDEV("div",{className:Y.serviceCardIcon,children:e.jsxDEV(ni,{size:24,style:{color:"#005cb6"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:506,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:505,columnNumber:19},void 0),e.jsxDEV("div",{className:Y.serviceStatusBadge,style:{background:l.bg,color:l.color},children:l.icon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:508,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:504,columnNumber:17},void 0),e.jsxDEV("div",{className:Y.serviceCardBody,children:[e.jsxDEV("h3",{className:Y.serviceCardName,children:a.service_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:516,columnNumber:19},void 0),e.jsxDEV("div",{className:Y.serviceCardMetric,children:[e.jsxDEV("span",{className:Y.serviceCardMetricLabel,children:"Uptime:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:518,columnNumber:21},void 0),e.jsxDEV("span",{className:Y.serviceCardMetricValue,children:[a.service_uptime_percent.toFixed(2),"%"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:519,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:517,columnNumber:19},void 0),e.jsxDEV("div",{className:Y.serviceCardFooter,children:[e.jsxDEV(Qe,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:524,columnNumber:21},void 0),e.jsxDEV("span",{children:$(a.service_last_check)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:525,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:523,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:515,columnNumber:17},void 0)]},h,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:503,columnNumber:15},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:493,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:471,columnNumber:7},void 0),e.jsxDEV("div",{className:Y.section,children:[e.jsxDEV("div",{className:Y.sectionHeader,children:e.jsxDEV("h2",{className:Y.sectionTitle,children:[e.jsxDEV(ti,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:538,columnNumber:13},void 0),"Recent Incidents & Alerts"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:537,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:536,columnNumber:9},void 0),t.length===0?e.jsxDEV("div",{className:Y.noIncidents,children:[e.jsxDEV(be,{size:48,style:{color:"#15803d"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:545,columnNumber:13},void 0),e.jsxDEV("p",{children:"Không có sự cố trong 24 giờ qua"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:546,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:544,columnNumber:11},void 0):e.jsxDEV("div",{className:Y.incidentsList,children:t.map(a=>{const h=A(a.incident_severity);return e.jsxDEV("div",{className:Y.incidentCard,children:[e.jsxDEV("div",{className:Y.incidentCardHeader,children:[e.jsxDEV("div",{className:Y.incidentSeverityBadge,style:{background:h.bg,color:h.color},children:h.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:555,columnNumber:21},void 0),e.jsxDEV("div",{className:Y.incidentTimestamp,children:[e.jsxDEV(Qe,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:562,columnNumber:23},void 0),y(a.incident_timestamp)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:561,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:554,columnNumber:19},void 0),e.jsxDEV("div",{className:Y.incidentCardBody,children:[e.jsxDEV("div",{className:Y.incidentType,children:a.incident_type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:567,columnNumber:21},void 0),e.jsxDEV("div",{className:Y.incidentMessage,children:a.incident_message},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:568,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:566,columnNumber:19},void 0)]},a.incident_id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:553,columnNumber:17},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:549,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:535,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/SystemHealthTab.tsx",lineNumber:331,columnNumber:5},void 0)},Xb="_masterDetailContainer_o5vrd_9",Kb="_masterPanel_o5vrd_25",Zb="_detailPanel_o5vrd_51",Yb="_panelHeader_o5vrd_73",eT="_panelTitle_o5vrd_85",iT="_selectedProvinceName_o5vrd_121",nT="_badge_o5vrd_133",sT="_panelActions_o5vrd_161",rT="_searchBox_o5vrd_177",lT="_searchIcon_o5vrd_191",aT="_searchInput_o5vrd_205",tT="_actionButtons_o5vrd_249",oT="_btnPrimarySmall_o5vrd_261",dT="_btnIconSmall_o5vrd_305",cT="_listContainer_o5vrd_349",mT="_listItem_o5vrd_397",uT="_listItemActive_o5vrd_439",pT="_listItemContent_o5vrd_451",fT="_listItemHeader_o5vrd_461",NT="_listItemTitle_o5vrd_485",bT="_listItemMeta_o5vrd_503",TT="_listItemCount_o5vrd_519",VT="_codeSmall_o5vrd_529",vT="_listItemActions_o5vrd_549",xT="_btnIconTiny_o5vrd_579",gT="_btnIconTinyDanger_o5vrd_621",hT="_activeIndicator_o5vrd_661",ET="_panelFooter_o5vrd_675",HT="_emptyDetailPanel_o5vrd_689",_T="_tableWrapper_o5vrd_739",LT="_table_o5vrd_739",DT="_cellMain_o5vrd_827",jT="_cellWithIcon_o5vrd_837",yT="_cellTitle_o5vrd_849",QT="_codeText_o5vrd_859",CT="_btnIcon_o5vrd_305",ST="_btnIconDanger_o5vrd_935",wT="_btnPrimary_o5vrd_261",MT="_tableFooter_o5vrd_1017",IT="_footerInfo_o5vrd_1035",kT="_emptyState_o5vrd_1059",AT="_loadingContainer_o5vrd_1095",RT="_spinner_o5vrd_1113",de={masterDetailContainer:Xb,masterPanel:Kb,detailPanel:Zb,panelHeader:Yb,panelTitle:eT,selectedProvinceName:iT,badge:nT,panelActions:sT,searchBox:rT,searchIcon:lT,searchInput:aT,actionButtons:tT,btnPrimarySmall:oT,btnIconSmall:dT,listContainer:cT,listItem:mT,listItemActive:uT,listItemContent:pT,listItemHeader:fT,listItemTitle:NT,listItemMeta:bT,listItemCount:TT,codeSmall:VT,listItemActions:vT,btnIconTiny:xT,btnIconTinyDanger:gT,activeIndicator:hT,panelFooter:ET,emptyDetailPanel:HT,tableWrapper:_T,table:LT,cellMain:DT,cellWithIcon:jT,cellTitle:yT,codeText:QT,btnIcon:CT,btnIconDanger:ST,btnPrimary:wT,tableFooter:MT,footerInfo:IT,emptyState:kT,loadingContainer:AT,spinner:RT},PT=({mode:n,province:s,onClose:r,onSave:u})=>{const[c,T]=d.useState({code:"",name:""}),[t,p]=d.useState(!1);d.useEffect(()=>{s&&T({code:s.code||"",name:s.name||""})},[s]);const V=async Q=>{if(Q.preventDefault(),!c.code.trim()||!c.name.trim()){m.error("Vui lòng điền đầy đủ thông tin");return}try{if(p(!0),n==="add"){const{error:E}=await ie.from("provinces").insert([{code:c.code.trim(),name:c.name.trim()}]);if(E){console.error("❌ Error creating province:",E),m.error(`Lỗi tạo tỉnh/thành phố: ${E.message}`);return}m.success("Đã tạo tỉnh/thành phố thành công")}else if(n==="edit"&&s){const{error:E}=await ie.from("provinces").update({code:c.code.trim(),name:c.name.trim()}).eq("_id",s.id);if(E){console.error("❌ Error updating province:",E),m.error(`Lỗi cập nhật tỉnh/thành phố: ${E.message}`);return}m.success("Đã cập nhật tỉnh/thành phố thành công")}u(),r()}catch(E){console.error("❌ Error in handleSubmit:",E),m.error("Lỗi lưu dữ liệu")}finally{p(!1)}},L=n==="view";return e.jsxDEV("div",{className:i.modalOverlay,onClick:r,children:e.jsxDEV("div",{className:i.modalContent,onClick:Q=>Q.stopPropagation(),children:[e.jsxDEV("div",{className:i.modalHeader,children:[e.jsxDEV("div",{className:i.modalHeaderLeft,children:[e.jsxDEV(Be,{size:24,style:{color:"var(--primary, #005cb6)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:110,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:i.modalTitle,children:[n==="add"&&"Thêm tỉnh/thành phố mới",n==="edit"&&"Chỉnh sửa tỉnh/thành phố",n==="view"&&"Chi tiết tỉnh/thành phố"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:112,columnNumber:15},void 0),e.jsxDEV("p",{className:i.modalSubtitle,children:[n==="add"&&"Nhập thông tin tỉnh/thành phố",n==="edit"&&"Cập nhật thông tin tỉnh/thành phố",n==="view"&&"Xem thông tin chi tiết"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:117,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:111,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:109,columnNumber:11},void 0),e.jsxDEV("button",{className:i.modalCloseBtn,onClick:r,children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:125,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:124,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:108,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:V,children:[e.jsxDEV("div",{className:i.modalBody,children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:["Mã tỉnh/thành phố ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:135,columnNumber:35},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:134,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:c.code,onChange:Q=>T({...c,code:Q.target.value}),placeholder:"Ví dụ: HN, HCM, DN...",disabled:L,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:137,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:133,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:["Tên tỉnh/thành phố ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:151,columnNumber:36},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:150,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:c.name,onChange:Q=>T({...c,name:Q.target.value}),placeholder:"Ví dụ: Hà Nội, Thành phố Hồ Chí Minh...",disabled:L,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:153,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:149,columnNumber:13},void 0),L&&s&&e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:"Ngày tạo"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:167,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:new Date(s.created_at).toLocaleString("vi-VN"),disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:168,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:166,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:131,columnNumber:11},void 0),e.jsxDEV("div",{className:i.modalFooter,children:[e.jsxDEV("button",{type:"button",className:i.btnSecondary,onClick:r,children:L?"Đóng":"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:180,columnNumber:13},void 0),!L&&e.jsxDEV("button",{type:"submit",className:i.btnPrimary,disabled:t,children:[e.jsxDEV(oi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:185,columnNumber:17},void 0),t?"Đang lưu...":"Lưu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:184,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:179,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:130,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:106,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/ProvinceModal.tsx",lineNumber:105,columnNumber:5},void 0)},BT=({mode:n,ward:s,provinceId:r,provinces:u,onClose:c,onSave:T})=>{var x;const[t,p]=d.useState({code:"",name:"",provinceid:""}),[V,L]=d.useState(!1);d.useEffect(()=>{s?p({code:s.code||"",name:s.name||"",provinceid:s.provinceId||""}):r&&p(f=>({...f,provinceid:r}))},[s,r]);const Q=async f=>{if(f.preventDefault(),!t.code.trim()||!t.name.trim()||!t.provinceid){m.error("Vui lòng điền đầy đủ thông tin bắt buộc");return}try{L(!0);const D={code:t.code.trim(),name:t.name.trim(),provinceid:t.provinceid};if(n==="add"){const{error:k}=await ie.from("wards").insert([D]);if(k){console.error("❌ Error creating ward:",k),m.error(`Lỗi tạo phường/xã: ${k.message}`);return}m.success("Đã tạo phường/xã thành công")}else if(n==="edit"&&s){const{error:k}=await ie.from("wards").update(D).eq("_id",s.id);if(k){console.error("❌ Error updating ward:",k),m.error(`Lỗi cập nhật phường/xã: ${k.message}`);return}m.success("Đã cập nhật phường/xã thành công")}T(),c()}catch(D){console.error("❌ Error in handleSubmit:",D),m.error("Lỗi lưu dữ liệu")}finally{L(!1)}},E=n==="view";return e.jsxDEV("div",{className:i.modalOverlay,onClick:c,children:e.jsxDEV("div",{className:i.modalContent,onClick:f=>f.stopPropagation(),children:[e.jsxDEV("div",{className:i.modalHeader,children:[e.jsxDEV("div",{className:i.modalHeaderLeft,children:[e.jsxDEV(ze,{size:24,style:{color:"var(--primary, #005cb6)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:132,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:i.modalTitle,children:[n==="add"&&"Thêm phường/xã mới",n==="edit"&&"Chỉnh sửa phường/xã",n==="view"&&"Chi tiết phường/xã"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:134,columnNumber:15},void 0),e.jsxDEV("p",{className:i.modalSubtitle,children:[n==="add"&&"Nhập thông tin phường/xã",n==="edit"&&"Cập nhật thông tin phường/xã",n==="view"&&"Xem thông tin chi tiết"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:139,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:133,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:131,columnNumber:11},void 0),e.jsxDEV("button",{className:i.modalCloseBtn,onClick:c,children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:147,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:146,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:130,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:Q,children:[e.jsxDEV("div",{className:i.modalBody,children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:["Mã phường/xã ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:157,columnNumber:30},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:156,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.code,onChange:f=>p({...t,code:f.target.value}),placeholder:"Ví dụ: 00001, 00002...",disabled:E,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:159,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:155,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:["Tên phường/xã ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:173,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:172,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:t.name,onChange:f=>p({...t,name:f.target.value}),placeholder:"Ví dụ: Phường Hoàn Kiếm, Xã Đông Anh...",disabled:E,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:175,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:171,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:["Tỉnh/Thành phố ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:189,columnNumber:32},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:188,columnNumber:15},void 0),E?e.jsxDEV("input",{type:"text",className:i.input,value:((x=s==null?void 0:s.province)==null?void 0:x.name)||"",disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:192,columnNumber:17},void 0):e.jsxDEV("select",{className:i.select,value:t.provinceid,onChange:f=>p({...t,provinceid:f.target.value}),required:!0,children:[e.jsxDEV("option",{value:"",children:"-- Chọn tỉnh/thành phố --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:205,columnNumber:19},void 0),u.map(f=>e.jsxDEV("option",{value:f.id,children:f.name},f.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:207,columnNumber:21},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:199,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:187,columnNumber:13},void 0),E&&s&&e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:"Ngày tạo"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:218,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:new Date(s.created_at).toLocaleString("vi-VN"),disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:219,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:217,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:153,columnNumber:11},void 0),e.jsxDEV("div",{className:i.modalFooter,children:[e.jsxDEV("button",{type:"button",className:i.btnSecondary,onClick:c,children:E?"Đóng":"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:231,columnNumber:13},void 0),!E&&e.jsxDEV("button",{type:"submit",className:i.btnPrimary,disabled:V,children:[e.jsxDEV(oi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:236,columnNumber:17},void 0),V?"Đang lưu...":"Lưu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:235,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:230,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:152,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:128,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/WardModal.tsx",lineNumber:127,columnNumber:5},void 0)},zT=()=>{const[n,s]=d.useState(!0),[r,u]=d.useState([]),[c,T]=d.useState([]),[t,p]=d.useState(null),[V,L]=d.useState(""),[Q,E]=d.useState(""),[x,f]=d.useState(!1),[D,k]=d.useState("add"),[I,z]=d.useState(null),[F,U]=d.useState(!1),[O,w]=d.useState("add"),[Z,B]=d.useState(null),R=15;d.useEffect(()=>{S()},[]),d.useEffect(()=>{t&&ee(t.id)},[t]);const S=async()=>{try{s(!0);const{data:W,error:te}=await ie.from("provinces").select("*, id:_id").order("code",{ascending:!0});te?(console.error("❌ Error fetching provinces:",te),m.error(`Lỗi tải tỉnh/thành phố: ${te.message}`),u([])):(u(W||[]),W&&W.length>0&&!t&&p(W[0]))}catch(W){console.error("❌ Error in fetchProvinces:",W),m.error("Lỗi kết nối Supabase"),u([])}finally{s(!1)}},ee=async W=>{try{let te=[],pe=0;const Te=1e3;let fe=!0;for(;fe;){const xe=pe*Te,Ue=xe+Te-1,{data:Ye,error:hi}=await ie.from("wards").select(`
            *,
            provinces (
              id,
              code,
              name
            )
          `).eq("provinceId",W).order("code",{ascending:!0}).range(xe,Ue);if(hi){console.error("❌ Error fetching wards:",hi),m.error("Không thể tải dữ liệu phường/xã"),T([]);return}!Ye||Ye.length===0?fe=!1:(te=[...te,...Ye],Ye.length<Te?fe=!1:pe++)}const Ne=te.map(xe=>({...xe,provinceId:xe.provinceId||xe.provinceid,province:xe.provinces}));T(Ne)}catch(te){console.error("❌ Error in fetchWardsByProvince:",te),m.error("Lỗi kết nối Supabase"),T([])}},ne=()=>{k("add"),z(null),f(!0)},A=W=>{k("edit"),z(W),f(!0)},y=W=>{k("view"),z(W),f(!0)},$=async W=>{if(confirm(`Bạn có chắc chắn muốn xóa tỉnh/thành phố "${W.name}"?`))try{const{count:te,error:pe}=await ie.from("wards").select("*, id:_id",{count:"exact",head:!0}).eq("provinceId",W.id);if(pe){console.error("❌ Error checking wards count:",pe),m.error(`Lỗi kiểm tra phường/xã: ${pe.message}`);return}if(te&&te>0){m.error(`Không thể xóa tỉnh/thành phố đang có ${te} phường/xã. Vui lòng xóa phường/xã trước.`);return}const{error:Te}=await ie.from("provinces").delete().eq("_id",W.id);Te?(console.error("❌ Error deleting province:",Te),m.error(`Lỗi xóa tỉnh/thành phố: ${Te.message}`)):(m.success("Đã xóa tỉnh/thành phố thành công"),(t==null?void 0:t.id)===W.id&&(p(null),T([])),S())}catch(te){console.error("❌ Error in handleDeleteProvince:",te),m.error("Lỗi xóa tỉnh/thành phố")}},M=()=>{if(!t){m.error("Vui lòng chọn tỉnh/thành phố trước");return}w("add"),B(null),U(!0)},v=W=>{w("edit"),B(W),U(!0)},N=W=>{w("view"),B(W),U(!0)},g=async W=>{if(confirm(`Bạn có chắc chắn muốn xóa phường/xã "${W.name}"?`))try{const{error:te}=await ie.from("wards").delete().eq("_id",W.id);te?(console.error("❌ Error deleting ward:",te),m.error(`Lỗi xóa phường/xã: ${te.message}`)):(m.success("Đã xóa phường/xã thành công"),t&&ee(t.id))}catch(te){console.error("❌ Error in handleDeleteWard:",te),m.error("Lỗi xóa phường/xã")}},o=async()=>{try{const W=await rn(()=>import("./docs-B0haN8rX.js").then(Ne=>Ne.x),__vite__mapDeps([0,1,2,3,4,5,6,7])),te=h.map((Ne,xe)=>({STT:xe+1,"Mã tỉnh/TP":Ne.code,"Tên tỉnh/thành phố":Ne.name,"Ngày tạo":new Date(Ne.created_at).toLocaleString("vi-VN")})),pe=W.utils.book_new(),Te=W.utils.json_to_sheet(te);Te["!cols"]=[{wch:5},{wch:15},{wch:40},{wch:20}],W.utils.book_append_sheet(pe,Te,"Tỉnh-Thành phố");const fe=new Date().toISOString().slice(0,19).replace(/:/g,"-");W.writeFile(pe,`MAPPA_Tinh_ThanhPho_${fe}.xlsx`),m.success(`Đã xuất ${h.length} tỉnh/thành phố ra Excel`)}catch(W){console.error("❌ Error exporting provinces:",W),m.error("Lỗi xuất Excel")}},a=async()=>{if(!t){m.error("Vui lòng chọn tỉnh/thành phố");return}try{const W=await rn(()=>import("./docs-B0haN8rX.js").then(Ne=>Ne.x),__vite__mapDeps([0,1,2,3,4,5,6,7])),te=b.map((Ne,xe)=>({STT:xe+1,"Mã phường/xã":Ne.code,"Tên phường/xã":Ne.name,"Tỉnh/TP":t.name,"Ngày tạo":new Date(Ne.created_at).toLocaleString("vi-VN")})),pe=W.utils.book_new(),Te=W.utils.json_to_sheet(te);Te["!cols"]=[{wch:5},{wch:15},{wch:40},{wch:30},{wch:20}],W.utils.book_append_sheet(pe,Te,"Phường-Xã");const fe=new Date().toISOString().slice(0,19).replace(/:/g,"-");W.writeFile(pe,`MAPPA_Phuong_Xa_${t.name}_${fe}.xlsx`),m.success(`Đã xuất ${b.length} phường/xã ra Excel`)}catch(W){console.error("❌ Error exporting wards:",W),m.error("Lỗi xuất Excel")}},h=r.filter(W=>{var te,pe;if(V){const Te=V.toLowerCase();return((te=W.name)==null?void 0:te.toLowerCase().includes(Te))||((pe=W.code)==null?void 0:pe.toLowerCase().includes(Te))}return!0}),b=c.filter(W=>{var te,pe;if(Q){const Te=Q.toLowerCase();return((te=W.name)==null?void 0:te.toLowerCase().includes(Te))||((pe=W.code)==null?void 0:pe.toLowerCase().includes(Te))}return!0}),{currentPage:l,totalPages:j,currentItems:_,setCurrentPage:X}=Je(h||[],R),{currentPage:H,totalPages:K,currentItems:q,setCurrentPage:ue}=Je(b||[],R);return n?e.jsxDEV("div",{className:de.loadingContainer,children:[e.jsxDEV(he,{className:de.spinner,size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:387,columnNumber:9},void 0),e.jsxDEV("p",{children:"Đang tải dữ liệu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:388,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:386,columnNumber:7},void 0):e.jsxDEV("div",{className:de.masterDetailContainer,children:[e.jsxDEV("div",{className:de.masterPanel,children:[e.jsxDEV("div",{className:de.panelHeader,children:e.jsxDEV("div",{className:de.panelTitle,children:[e.jsxDEV(Be,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:399,columnNumber:13},void 0),e.jsxDEV("h3",{children:"Tỉnh/Thành phố"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:400,columnNumber:13},void 0),e.jsxDEV("span",{className:de.badge,children:r.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:401,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:398,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:397,columnNumber:9},void 0),e.jsxDEV("div",{className:de.panelActions,children:[e.jsxDEV("div",{className:de.searchBox,children:[e.jsxDEV(_e,{size:16,className:de.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:408,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm tỉnh/TP...",value:V,onChange:W=>L(W.target.value),className:de.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:409,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:407,columnNumber:11},void 0),e.jsxDEV("div",{className:de.actionButtons,children:[e.jsxDEV("button",{className:de.btnIconSmall,onClick:S,title:"Làm mới",children:e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:419,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:418,columnNumber:13},void 0),e.jsxDEV("button",{className:de.btnIconSmall,onClick:o,title:"Xuất Excel",children:e.jsxDEV(Pe,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:422,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:421,columnNumber:13},void 0),e.jsxDEV("button",{className:de.btnPrimarySmall,onClick:ne,children:[e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:425,columnNumber:15},void 0),"Thêm"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:424,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:417,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:406,columnNumber:9},void 0),e.jsxDEV("div",{className:de.listContainer,children:_.length===0?e.jsxDEV("div",{className:de.emptyState,children:[e.jsxDEV(ve,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:435,columnNumber:15},void 0),e.jsxDEV("p",{children:"Không tìm thấy tỉnh/thành phố"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:436,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:434,columnNumber:13},void 0):_.map(W=>e.jsxDEV("div",{className:`${de.listItem} ${(t==null?void 0:t.id)===W.id?de.listItemActive:""}`,onClick:()=>p(W),children:[e.jsxDEV("div",{className:de.listItemContent,children:[e.jsxDEV("div",{className:de.listItemHeader,children:[e.jsxDEV(Be,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:447,columnNumber:21},void 0),e.jsxDEV("span",{className:de.listItemTitle,children:W.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:448,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:446,columnNumber:19},void 0),e.jsxDEV("div",{className:de.listItemMeta,children:[e.jsxDEV("code",{className:de.codeSmall,children:W.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:451,columnNumber:21},void 0),e.jsxDEV("span",{className:de.listItemCount,children:[c.filter(te=>te.provinceId===W.id).length," phường/xã"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:452,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:450,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:445,columnNumber:17},void 0),e.jsxDEV("div",{className:de.listItemActions,children:[e.jsxDEV("button",{className:de.btnIconTiny,onClick:te=>{te.stopPropagation(),y(W)},title:"Xem",children:e.jsxDEV(ke,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:466,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:458,columnNumber:19},void 0),e.jsxDEV("button",{className:de.btnIconTiny,onClick:te=>{te.stopPropagation(),A(W)},title:"Sửa",children:e.jsxDEV(Ae,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:476,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:468,columnNumber:19},void 0),e.jsxDEV("button",{className:de.btnIconTinyDanger,onClick:te=>{te.stopPropagation(),$(W)},title:"Xóa",children:e.jsxDEV(Ie,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:486,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:478,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:457,columnNumber:17},void 0),(t==null?void 0:t.id)===W.id&&e.jsxDEV(Ce,{size:16,className:de.activeIndicator},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:490,columnNumber:19},void 0)]},W.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:440,columnNumber:15},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:432,columnNumber:9},void 0),h.length>R&&e.jsxDEV("div",{className:de.panelFooter,children:e.jsxDEV($e,{currentPage:l,totalPages:j,totalItems:h.length,itemsPerPage:R,onPageChange:X},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:500,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:499,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:396,columnNumber:7},void 0),e.jsxDEV("div",{className:de.detailPanel,children:t?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:de.panelHeader,children:e.jsxDEV("div",{className:de.panelTitle,children:[e.jsxDEV(ze,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:517,columnNumber:17},void 0),e.jsxDEV("h3",{children:"Phường/Xã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:518,columnNumber:17},void 0),e.jsxDEV(Ce,{size:16,style:{color:"var(--muted-foreground)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:519,columnNumber:17},void 0),e.jsxDEV("span",{className:de.selectedProvinceName,children:t.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:520,columnNumber:17},void 0),e.jsxDEV("span",{className:de.badge,children:c.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:521,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:516,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:515,columnNumber:13},void 0),e.jsxDEV("div",{className:de.panelActions,children:[e.jsxDEV("div",{className:de.searchBox,children:[e.jsxDEV(_e,{size:16,className:de.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:528,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm phường/xã...",value:Q,onChange:W=>E(W.target.value),className:de.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:529,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:527,columnNumber:15},void 0),e.jsxDEV("div",{className:de.actionButtons,children:[e.jsxDEV("button",{className:de.btnIconSmall,onClick:()=>ee(t.id),title:"Làm mới",children:e.jsxDEV(ge,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:543,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:538,columnNumber:17},void 0),e.jsxDEV("button",{className:de.btnIconSmall,onClick:a,title:"Xuất Excel",children:e.jsxDEV(Pe,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:546,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:545,columnNumber:17},void 0),e.jsxDEV("button",{className:de.btnPrimarySmall,onClick:M,children:[e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:549,columnNumber:19},void 0),"Thêm phường/xã"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:548,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:537,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:526,columnNumber:13},void 0),e.jsxDEV("div",{className:de.tableWrapper,children:e.jsxDEV("table",{className:de.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"50px"},children:"STT"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:560,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"120px"},children:"Mã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:561,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"auto",minWidth:"200px"},children:"Tên phường/xã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:562,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"180px"},children:"Ngày tạo"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:563,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"150px",textAlign:"center"},children:"Thao tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:564,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:559,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:558,columnNumber:17},void 0),e.jsxDEV("tbody",{children:q.length===0?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:5,className:de.emptyState,children:[e.jsxDEV(ve,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:571,columnNumber:25},void 0),e.jsxDEV("p",{children:"Không có phường/xã nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:572,columnNumber:25},void 0),e.jsxDEV("button",{className:de.btnPrimary,onClick:M,children:[e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:574,columnNumber:27},void 0),"Thêm phường/xã đầu tiên"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:573,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:570,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:569,columnNumber:21},void 0):q.map((W,te)=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{style:{textAlign:"center"},children:(H-1)*R+te+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:582,columnNumber:25},void 0),e.jsxDEV("td",{children:W.code?e.jsxDEV("code",{className:de.codeText,children:W.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:587,columnNumber:29},void 0):e.jsxDEV("span",{style:{color:"var(--muted-foreground)",fontStyle:"italic"},children:"Chưa có mã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:589,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:585,columnNumber:25},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:de.cellMain,children:e.jsxDEV("div",{className:de.cellWithIcon,children:[e.jsxDEV(ze,{size:16,style:{color:"var(--primary)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:597,columnNumber:31},void 0),e.jsxDEV("span",{className:de.cellTitle,children:W.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:598,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:596,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:595,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:594,columnNumber:25},void 0),e.jsxDEV("td",{children:new Date(W.created_at).toLocaleString("vi-VN")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:602,columnNumber:25},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:de.actionButtons,children:[e.jsxDEV("button",{className:de.btnIcon,onClick:()=>N(W),title:"Xem chi tiết",children:e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:610,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:605,columnNumber:29},void 0),e.jsxDEV("button",{className:de.btnIcon,onClick:()=>v(W),title:"Chỉnh sửa",children:e.jsxDEV(Ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:617,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:612,columnNumber:29},void 0),e.jsxDEV("button",{className:de.btnIconDanger,onClick:()=>g(W),title:"Xóa",children:e.jsxDEV(Ie,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:624,columnNumber:31},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:619,columnNumber:29},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:604,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:603,columnNumber:25},void 0)]},W.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:581,columnNumber:23},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:567,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:557,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:556,columnNumber:13},void 0),b.length>0&&K>1&&e.jsxDEV("div",{className:de.tableFooter,children:[e.jsxDEV("div",{className:de.footerInfo,children:["Hiển thị ",e.jsxDEV("strong",{children:(H-1)*R+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:639,columnNumber:28},void 0)," đến"," ",e.jsxDEV("strong",{children:Math.min(H*R,b.length)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:640,columnNumber:19},void 0)," trong tổng số"," ",e.jsxDEV("strong",{children:b.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:641,columnNumber:19},void 0)," phường/xã"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:638,columnNumber:17},void 0),e.jsxDEV($e,{currentPage:H,totalPages:K,totalItems:b.length,itemsPerPage:R,onPageChange:ue},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:643,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:637,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:514,columnNumber:11},void 0):e.jsxDEV("div",{className:de.emptyDetailPanel,children:[e.jsxDEV(cs,{size:64,style:{opacity:.3}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:655,columnNumber:13},void 0),e.jsxDEV("h3",{children:"Chọn tỉnh/thành phố"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:656,columnNumber:13},void 0),e.jsxDEV("p",{children:"Vui lòng chọn một tỉnh/thành phố bên trái để xem danh sách phường/xã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:657,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:654,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:512,columnNumber:7},void 0),x&&e.jsxDEV(PT,{mode:D,province:I,onClose:()=>f(!1),onSave:S},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:664,columnNumber:9},void 0),F&&e.jsxDEV(BT,{mode:O,ward:Z,provinceId:t==null?void 0:t.id,onClose:()=>U(!1),onSave:()=>{t&&ee(t.id)}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:673,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocationsTab.tsx",lineNumber:394,columnNumber:5},void 0)},FT="_modalOverlay_4mwdq_8",$T="_modalContent_4mwdq_33",UT="_modalHeader_4mwdq_56",qT="_modalTitle_4mwdq_64",GT="_closeButton_4mwdq_72",OT="_modalBody_4mwdq_91",WT="_formGroup_4mwdq_99",JT="_required_4mwdq_112",XT="_input_4mwdq_118",KT="_modalFooter_4mwdq_148",ZT="_btnCancel_4mwdq_158",YT="_btnSave_4mwdq_184",me={modalOverlay:FT,modalContent:$T,modalHeader:UT,modalTitle:qT,closeButton:GT,modalBody:OT,formGroup:WT,required:JT,input:XT,modalFooter:KT,btnCancel:ZT,btnSave:YT},eV=({mode:n,category:s,onClose:r,onSave:u})=>{const[c,T]=d.useState({name:"",icon:""}),[t,p]=d.useState(!1),[V,L]=d.useState({});d.useEffect(()=>{s&&T({name:s.name,icon:s.icon})},[s]);const Q=()=>{const f={};return c.name.trim()||(f.name="Tên danh mục không được để trống"),c.icon.trim()||(f.icon="Icon không được để trống"),L(f),Object.keys(f).length===0},E=async f=>{if(f.preventDefault(),!Q()){m.error("Vui lòng kiểm tra lại thông tin");return}p(!0);try{if(n==="add"){const{error:D}=await ie.from("categories").insert([{name:c.name.trim(),icon:c.icon.trim()}]);if(D){console.error("❌ Error creating category:",D),m.error(`Lỗi tạo danh mục: ${D.message}`);return}m.success("Đã tạo danh mục thành công")}else if(n==="edit"&&s){const{error:D}=await ie.from("categories").update({name:c.name.trim(),icon:c.icon.trim()}).eq("_id",s.id);if(D){console.error("❌ Error updating category:",D),m.error(`Lỗi cập nhật danh mục: ${D.message}`);return}m.success("Đã cập nhật danh mục thành công")}u()}catch(D){console.error("❌ Error:",D),m.error("Lỗi khi lưu danh mục")}finally{p(!1)}},x=n==="view";return e.jsxDEV("div",{className:me.modalOverlay,onClick:r,children:e.jsxDEV("div",{className:me.modalContent,onClick:f=>f.stopPropagation(),children:[e.jsxDEV("div",{className:me.modalHeader,children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxDEV("div",{className:me.modalIconWrapper,children:e.jsxDEV(Ki,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:127,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:126,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:me.modalTitle,children:[n==="add"&&"Thêm danh mục mới",n==="edit"&&"Chỉnh sửa danh mục",n==="view"&&"Chi tiết danh mục"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:130,columnNumber:15},void 0),x&&e.jsxDEV("p",{className:me.modalSubtitle,children:"Thông tin chi tiết danh mục"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:136,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:129,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:125,columnNumber:11},void 0),e.jsxDEV("button",{onClick:r,className:me.closeButton,children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:141,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:140,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:124,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:E,className:me.modalBody,children:[e.jsxDEV("div",{className:me.formGrid,children:[e.jsxDEV("div",{className:me.formGroup,children:[e.jsxDEV("label",{className:me.label,children:["Tên danh mục ",e.jsxDEV("span",{style:{color:"var(--destructive)"},children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:151,columnNumber:30},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:150,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:c.name,onChange:f=>T({...c,name:f.target.value}),className:me.input,placeholder:"VD: Danh mục A",disabled:x,style:V.name?{borderColor:"var(--destructive)"}:{}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:153,columnNumber:15},void 0),V.name&&e.jsxDEV("div",{className:me.errorMessage,children:[e.jsxDEV(ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:164,columnNumber:19},void 0),V.name]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:163,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:149,columnNumber:13},void 0),e.jsxDEV("div",{className:me.formGroup,children:[e.jsxDEV("label",{className:me.label,children:["Icon ",e.jsxDEV("span",{style:{color:"var(--destructive)"},children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:173,columnNumber:22},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:172,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:c.icon,onChange:f=>T({...c,icon:f.target.value}),className:me.input,placeholder:"VD: 📁 hoặc icon-name",disabled:x,style:V.icon?{borderColor:"var(--destructive)"}:{}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:175,columnNumber:15},void 0),V.icon&&e.jsxDEV("div",{className:me.errorMessage,children:[e.jsxDEV(ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:186,columnNumber:19},void 0),V.icon]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:185,columnNumber:17},void 0),e.jsxDEV("p",{style:{marginTop:"6px",fontSize:"var(--text-xs)",color:"var(--muted-foreground)"},children:"Có thể dùng emoji hoặc tên icon"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:190,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:171,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:147,columnNumber:11},void 0),x&&s&&e.jsxDEV("div",{style:{marginTop:"16px",padding:"12px 16px",backgroundColor:"var(--muted)",borderRadius:"8px",fontSize:"var(--text-sm)",color:"var(--muted-foreground)"},children:e.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxDEV("span",{children:"ID:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:213,columnNumber:17},void 0),e.jsxDEV("span",{style:{fontFamily:"JetBrains Mono, Courier New, monospace"},children:s.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:214,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:212,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:202,columnNumber:13},void 0),e.jsxDEV("div",{className:me.modalFooter,children:[e.jsxDEV("button",{type:"button",onClick:r,className:me.btnSecondary,children:x?"Đóng":"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:223,columnNumber:13},void 0),!x&&e.jsxDEV("button",{type:"submit",className:me.btnPrimary,disabled:t,children:t?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(he,{size:18,className:me.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:230,columnNumber:21},void 0),"Đang lưu..."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:229,columnNumber:19},void 0):e.jsxDEV(e.Fragment,{children:"Lưu thay đổi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:234,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:227,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:222,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:146,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:122,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/CategoryModal.tsx",lineNumber:121,columnNumber:5},void 0)},iV=()=>{const[n,s]=d.useState([]),[r,u]=d.useState([]),[c,T]=d.useState(!0),[t,p]=d.useState(""),[V,L]=d.useState(!1),[Q,E]=d.useState("add"),[x,f]=d.useState(null),D=10,k=Je(r,D),{currentPage:I,setCurrentPage:z,totalPages:F,currentItems:U}=k,O=ne=>{z(ne)},w=async()=>{try{T(!0);const{data:ne,error:A}=await ie.from("categories").select("*, id:_id").order("name",{ascending:!0});if(A){console.error("❌ Error fetching categories:",A),m.error(`Lỗi tải dữ liệu: ${A.message}`);return}s(ne||[]),u(ne||[])}catch(ne){console.error("❌ Error:",ne),m.error("Lỗi kết nối cơ sở dữ liệu")}finally{T(!1)}};d.useEffect(()=>{w()},[]),d.useEffect(()=>{let ne=[...n];if(t.trim()){const A=t.toLowerCase();ne=ne.filter(y=>y.name.toLowerCase().includes(A)||y.icon.toLowerCase().includes(A))}u(ne)},[t,n]);const Z=(ne,A)=>{E(ne),f(A||null),L(!0)},B=()=>{L(!1),f(null)},R=async()=>{await w(),B()},S=async ne=>{if(confirm(`Bạn có chắc muốn xóa danh mục "${ne.name}"?`))try{const{error:A}=await ie.from("categories").delete().eq("_id",ne.id);if(A){console.error("❌ Error deleting category:",A),m.error(`Lỗi xóa danh mục: ${A.message}`);return}m.success("Đã xóa danh mục thành công"),await w()}catch(A){console.error("❌ Error:",A),m.error("Lỗi khi xóa danh mục")}},ee=()=>{try{const ne=r.map((M,v)=>({STT:v+1,"Tên danh mục":M.name,Icon:M.icon})),A=ce.json_to_sheet(ne),y=ce.book_new();ce.book_append_sheet(y,A,"Danh mục");const $=[{wch:5},{wch:35},{wch:20}];A["!cols"]=$,Fe(y,`Danh_muc_${new Date().toISOString().split("T")[0]}.xlsx`),m.success("Đã xuất file Excel thành công")}catch(ne){console.error("❌ Error exporting Excel:",ne),m.error("Lỗi xuất file Excel")}};return c?e.jsxDEV("div",{className:P.loading,children:e.jsxDEV(he,{size:32,className:P.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:177,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:176,columnNumber:7},void 0):e.jsxDEV("div",{className:P.container,children:[e.jsxDEV("div",{className:P.filtersCard,children:e.jsxDEV("div",{className:P.filtersRow,children:[e.jsxDEV("div",{className:P.searchWrapper,children:[e.jsxDEV(_e,{size:18,className:P.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:189,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm theo tên, icon...",value:t,onChange:ne=>p(ne.target.value),className:P.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:190,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:188,columnNumber:11},void 0),e.jsxDEV("div",{className:P.actionsGroup,children:[e.jsxDEV("button",{onClick:w,className:P.btnSecondary,children:[e.jsxDEV(ge,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:202,columnNumber:15},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:201,columnNumber:13},void 0),e.jsxDEV("button",{onClick:ee,className:P.btnSecondary,children:[e.jsxDEV(Pe,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:206,columnNumber:15},void 0),"Xuất Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:205,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>Z("add"),className:P.btnPrimary,children:[e.jsxDEV(Le,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:210,columnNumber:15},void 0),"Thêm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:209,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:200,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:186,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:185,columnNumber:7},void 0),r.length===0?e.jsxDEV("div",{className:P.emptyState,children:[e.jsxDEV(ve,{size:48,style:{color:"var(--muted-foreground)",marginBottom:"16px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:220,columnNumber:11},void 0),e.jsxDEV("p",{children:"Không tìm thấy danh mục nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:221,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:219,columnNumber:9},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:P.tableCard,children:e.jsxDEV("div",{className:P.tableWrapper,children:e.jsxDEV("table",{className:P.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"60px"},children:"STT"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:230,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"100px"},children:"Icon"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:231,columnNumber:21},void 0),e.jsxDEV("th",{children:"Tên danh mục"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:232,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"150px"},children:"Thao tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:233,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:229,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:228,columnNumber:17},void 0),e.jsxDEV("tbody",{children:U.map((ne,A)=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:(I-1)*D+A+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:239,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{className:P.iconBadge,children:ne.icon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:241,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:240,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:P.nameCell,children:[e.jsxDEV(Ki,{size:16,style:{color:"var(--primary)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:245,columnNumber:27},void 0),e.jsxDEV("span",{className:P.nameText,children:ne.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:246,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:244,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:243,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:P.actionButtons,children:[e.jsxDEV("button",{onClick:()=>Z("view",ne),className:P.btnIcon,title:"Xem chi tiết",children:e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:256,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:251,columnNumber:27},void 0),e.jsxDEV("button",{onClick:()=>Z("edit",ne),className:P.btnIcon,title:"Chỉnh sửa",children:e.jsxDEV(Ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:263,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:258,columnNumber:27},void 0),e.jsxDEV("button",{onClick:()=>S(ne),className:P.btnIcon,style:{color:"var(--destructive)"},title:"Xóa",children:e.jsxDEV(Ie,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:271,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:265,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:250,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:249,columnNumber:23},void 0)]},ne.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:238,columnNumber:21},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:236,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:227,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:226,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:225,columnNumber:11},void 0),e.jsxDEV($e,{currentPage:I,totalPages:F,totalItems:r.length,itemsPerPage:D,onPageChange:O},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:283,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:224,columnNumber:9},void 0),V&&e.jsxDEV(eV,{mode:Q,category:x,onClose:B,onSave:R},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:295,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/CategoriesTab.tsx",lineNumber:183,columnNumber:5},void 0)},nV=({mode:n,bank:s,onClose:r,onSave:u})=>{const c=n==="view",[T,t]=d.useState(!1),[p,V]=d.useState({code:"",name:"",short_name:"",bin:"",logo_url:"",is_active:!0});d.useEffect(()=>{s&&V({code:s.code,name:s.name,short_name:s.short_name,bin:s.bin,logo_url:s.logo_url||"",is_active:s.is_active})},[s]);const L=async E=>{if(E.preventDefault(),!p.code.trim()||!p.name.trim()||!p.short_name.trim()||!p.bin.trim()){m.error("Vui lòng điền đầy đủ thông tin bắt buộc");return}try{t(!0);const x={code:p.code.trim(),name:p.name.trim(),short_name:p.short_name.trim(),bin:p.bin.trim(),logo_url:p.logo_url.trim(),is_active:p.is_active};if(n==="add"){const{data:f,error:D}=await ie.from("banks").insert([x]).select().single();if(D){console.error("❌ Error creating bank:",D),m.error(`Lỗi tạo ngân hàng: ${D.message}`);return}m.success("Đã tạo ngân hàng thành công")}else if(n==="edit"&&s){const{error:f}=await ie.from("banks").update(x).eq("_id",s.id);if(f){console.error("❌ Error updating bank:",f),m.error(`Lỗi cập nhật ngân hàng: ${f.message}`);return}m.success("Đã cập nhật ngân hàng thành công")}u()}catch(x){console.error("❌ Error:",x),m.error("Lỗi khi lưu ngân hàng")}finally{t(!1)}},Q=()=>{switch(n){case"add":return"Thêm ngân hàng mới";case"edit":return"Chỉnh sửa ngân hàng";case"view":return"Chi tiết ngân hàng";default:return""}};return e.jsxDEV("div",{className:me.modalOverlay,onClick:r,children:e.jsxDEV("div",{className:me.modalContent,onClick:E=>E.stopPropagation(),children:[e.jsxDEV("div",{className:me.modalHeader,children:[e.jsxDEV("h3",{className:me.modalTitle,children:Q()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:135,columnNumber:11},void 0),e.jsxDEV("button",{onClick:r,className:me.closeButton,children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:137,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:136,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:134,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:L,children:[e.jsxDEV("div",{className:me.modalBody,children:[e.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxDEV("div",{className:me.formGroup,children:[e.jsxDEV("label",{children:["Mã ngân hàng ",e.jsxDEV("span",{className:me.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:149,columnNumber:32},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:148,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",className:me.input,value:p.code,onChange:E=>V({...p,code:E.target.value}),placeholder:"VD: VCB",disabled:c,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:151,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:147,columnNumber:15},void 0),e.jsxDEV("div",{className:me.formGroup,children:[e.jsxDEV("label",{children:["BIN ",e.jsxDEV("span",{className:me.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:165,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:164,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",className:me.input,value:p.bin,onChange:E=>V({...p,bin:E.target.value}),placeholder:"VD: 970436",disabled:c,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:167,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:163,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:145,columnNumber:13},void 0),e.jsxDEV("div",{className:me.formGroup,children:[e.jsxDEV("label",{children:["Tên ngân hàng ",e.jsxDEV("span",{className:me.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:182,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:181,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:me.input,value:p.name,onChange:E=>V({...p,name:E.target.value}),placeholder:"VD: Ngân hàng TMCP Ngoại thương Việt Nam",disabled:c,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:184,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:180,columnNumber:13},void 0),e.jsxDEV("div",{className:me.formGroup,children:[e.jsxDEV("label",{children:["Tên viết tắt ",e.jsxDEV("span",{className:me.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:198,columnNumber:30},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:197,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:me.input,value:p.short_name,onChange:E=>V({...p,short_name:E.target.value}),placeholder:"VD: Vietcombank",disabled:c,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:200,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:196,columnNumber:13},void 0),e.jsxDEV("div",{className:me.formGroup,children:[e.jsxDEV("label",{children:"Logo URL"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:213,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:me.input,value:p.logo_url,onChange:E=>V({...p,logo_url:E.target.value}),placeholder:"VD: https://example.com/logo.png",disabled:c},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:214,columnNumber:15},void 0),e.jsxDEV("p",{style:{fontSize:"var(--text-xs)",color:"var(--muted-foreground)",marginTop:"6px"},children:"URL của logo ngân hàng (không bắt buộc)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:222,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:212,columnNumber:13},void 0),e.jsxDEV("div",{className:me.formGroup,children:e.jsxDEV("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsxDEV("input",{type:"checkbox",checked:p.is_active,onChange:E=>V({...p,is_active:E.target.checked}),disabled:c,style:{width:"18px",height:"18px",cursor:c?"not-allowed":"pointer"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:230,columnNumber:17},void 0),e.jsxDEV("span",{style:{fontSize:"var(--text-sm)",fontWeight:"var(--font-weight-medium)"},children:"Đang hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:241,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:229,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:228,columnNumber:13},void 0),c&&s&&e.jsxDEV("div",{className:me.formGroup,children:[e.jsxDEV("label",{children:"Ngày tạo"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:250,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",className:me.input,value:new Date(s.created_at).toLocaleString("vi-VN"),disabled:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:251,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:249,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:143,columnNumber:11},void 0),e.jsxDEV("div",{className:me.modalFooter,children:c?e.jsxDEV("button",{type:"button",onClick:r,className:me.btnCancel,style:{marginLeft:"auto"},children:"Đóng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:282,columnNumber:15},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{type:"button",onClick:r,className:me.btnCancel,disabled:T,children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:265,columnNumber:17},void 0),e.jsxDEV("button",{type:"submit",className:me.btnSave,disabled:T,children:T?"Đang lưu...":"Lưu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:273,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:264,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:262,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:142,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:132,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/BankModal.tsx",lineNumber:131,columnNumber:5},void 0)},sV=()=>{const[n,s]=d.useState([]),[r,u]=d.useState([]),[c,T]=d.useState(!0),[t,p]=d.useState(""),[V,L]=d.useState("all"),[Q,E]=d.useState(!1),[x,f]=d.useState("add"),[D,k]=d.useState(null),I=10,z=Je(r,I),{currentPage:F,setCurrentPage:U,totalPages:O,currentItems:w}=z,Z=y=>{U(y)},B=async()=>{try{T(!0);const{data:y,error:$}=await ie.from("banks").select("*, id:_id").order("name",{ascending:!0});if($){console.error("❌ Error fetching banks:",$),m.error(`Lỗi tải dữ liệu: ${$.message}`);return}s(y||[]),u(y||[])}catch(y){console.error("❌ Error:",y),m.error("Lỗi kết nối cơ sở dữ liệu")}finally{T(!1)}};d.useEffect(()=>{B()},[]),d.useEffect(()=>{let y=[...n];if(t.trim()){const $=t.toLowerCase();y=y.filter(M=>M.name.toLowerCase().includes($)||M.short_name.toLowerCase().includes($)||M.code.toLowerCase().includes($)||M.bin.toLowerCase().includes($))}V!=="all"&&(y=y.filter($=>V==="active"?$.is_active:!$.is_active)),u(y)},[t,V,n]);const R=(y,$)=>{f(y),k($||null),E(!0)},S=()=>{E(!1),k(null)},ee=async()=>{await B(),S()},ne=async y=>{if(confirm(`Bạn có chắc muốn xóa ngân hàng "${y.name}"?`))try{const{error:$}=await ie.from("banks").delete().eq("_id",y.id);if($){console.error("❌ Error deleting bank:",$),m.error(`Lỗi xóa ngân hàng: ${$.message}`);return}m.success("Đã xóa ngân hàng thành công"),await B()}catch($){console.error("❌ Error:",$),m.error("Lỗi khi xóa ngân hàng")}},A=()=>{try{const y=r.map((N,g)=>({STT:g+1,"Mã ngân hàng":N.code,"Tên ngân hàng":N.name,"Tên viết tắt":N.short_name,BIN:N.bin,"Trạng thái":N.is_active?"Hoạt động":"Không hoạt động","Ngày tạo":new Date(N.created_at).toLocaleDateString("vi-VN")})),$=ce.json_to_sheet(y),M=ce.book_new();ce.book_append_sheet(M,$,"Ngân hàng");const v=[{wch:5},{wch:15},{wch:40},{wch:20},{wch:15},{wch:15},{wch:12}];$["!cols"]=v,Fe(M,`Ngan_hang_${new Date().toISOString().split("T")[0]}.xlsx`),m.success("Đã xuất file Excel thành công")}catch(y){console.error("❌ Error exporting Excel:",y),m.error("Lỗi xuất file Excel")}};return c?e.jsxDEV("div",{className:P.loading,children:e.jsxDEV(he,{size:32,className:P.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:202,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:201,columnNumber:7},void 0):e.jsxDEV("div",{className:P.container,children:[e.jsxDEV("div",{className:P.filtersCard,children:e.jsxDEV("div",{className:P.filtersRow,children:[e.jsxDEV("div",{className:P.searchWrapper,children:[e.jsxDEV(_e,{size:18,className:P.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:214,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm theo tên, mã, BIN...",value:t,onChange:y=>p(y.target.value),className:P.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:215,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:213,columnNumber:11},void 0),e.jsxDEV("select",{value:V,onChange:y=>L(y.target.value),className:P.searchInput,style:{width:"180px",minWidth:"unset"},children:[e.jsxDEV("option",{value:"all",children:"Tất cả trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:231,columnNumber:13},void 0),e.jsxDEV("option",{value:"active",children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:232,columnNumber:13},void 0),e.jsxDEV("option",{value:"inactive",children:"Không hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:233,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:225,columnNumber:11},void 0),e.jsxDEV("div",{className:P.actionsGroup,children:[e.jsxDEV("button",{onClick:B,className:P.btnSecondary,children:[e.jsxDEV(ge,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:239,columnNumber:15},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:238,columnNumber:13},void 0),e.jsxDEV("button",{onClick:A,className:P.btnSecondary,children:[e.jsxDEV(Pe,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:243,columnNumber:15},void 0),"Xuất Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:242,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>R("add"),className:P.btnPrimary,children:[e.jsxDEV(Le,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:247,columnNumber:15},void 0),"Thêm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:246,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:237,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:211,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:210,columnNumber:7},void 0),r.length===0?e.jsxDEV("div",{className:P.emptyState,children:[e.jsxDEV(ve,{size:48,style:{color:"var(--muted-foreground)",marginBottom:"16px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:257,columnNumber:11},void 0),e.jsxDEV("p",{children:"Không tìm thấy ngân hàng nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:258,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:256,columnNumber:9},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:P.tableCard,children:e.jsxDEV("div",{className:P.tableWrapper,children:e.jsxDEV("table",{className:P.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{style:{width:"60px"},children:"STT"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:267,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"70px"},children:"Logo"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:268,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"100px"},children:"Mã NH"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:269,columnNumber:21},void 0),e.jsxDEV("th",{children:"Tên ngân hàng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:270,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"160px"},children:"Tên viết tắt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:271,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"100px"},children:"BIN"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:272,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"130px"},children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:273,columnNumber:21},void 0),e.jsxDEV("th",{style:{width:"140px"},children:"Thao tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:274,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:266,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:265,columnNumber:17},void 0),e.jsxDEV("tbody",{children:w.map((y,$)=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:(F-1)*I+$+1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:280,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{style:{width:"40px",height:"40px",borderRadius:"var(--radius)",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--muted)",border:"1px solid var(--border)"},children:y.logo_url?e.jsxDEV(Ts,{src:y.logo_url,alt:y.name,style:{width:"100%",height:"100%",objectFit:"contain"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:296,columnNumber:29},void 0):e.jsxDEV(Be,{size:20,style:{color:"var(--muted-foreground)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:306,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:282,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:281,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{className:P.iconBadge,children:y.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:311,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:310,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:P.nameCell,children:e.jsxDEV("span",{className:P.nameText,children:y.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:315,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:314,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:313,columnNumber:23},void 0),e.jsxDEV("td",{children:y.short_name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:318,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("span",{style:{fontFamily:"JetBrains Mono, Courier New, monospace",fontSize:"var(--text-sm)",color:"var(--muted-foreground)"},children:y.bin},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:320,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:319,columnNumber:23},void 0),e.jsxDEV("td",{children:y.is_active?e.jsxDEV("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"12px",fontSize:"var(--text-xs)",fontWeight:"var(--font-weight-medium)",color:"#16a34a",backgroundColor:"#dcfce7"},children:[e.jsxDEV(be,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:345,columnNumber:29},void 0),"Hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:332,columnNumber:27},void 0):e.jsxDEV("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"12px",fontSize:"var(--text-xs)",fontWeight:"var(--font-weight-medium)",color:"#dc2626",backgroundColor:"#fee2e2"},children:[e.jsxDEV(Ve,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:362,columnNumber:29},void 0),"Ngừng hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:349,columnNumber:27},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:330,columnNumber:23},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:P.actionButtons,children:[e.jsxDEV("button",{onClick:()=>R("view",y),className:P.btnIcon,title:"Xem chi tiết",children:e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:374,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:369,columnNumber:27},void 0),e.jsxDEV("button",{onClick:()=>R("edit",y),className:P.btnIcon,title:"Chỉnh sửa",children:e.jsxDEV(Ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:381,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:376,columnNumber:27},void 0),e.jsxDEV("button",{onClick:()=>ne(y),className:P.btnIcon,style:{color:"var(--destructive)"},title:"Xóa",children:e.jsxDEV(Ie,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:389,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:383,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:368,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:367,columnNumber:23},void 0)]},y.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:279,columnNumber:21},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:277,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:264,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:263,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:262,columnNumber:11},void 0),e.jsxDEV($e,{currentPage:F,totalPages:O,totalItems:r.length,itemsPerPage:I,onPageChange:Z},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:401,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:261,columnNumber:9},void 0),Q&&e.jsxDEV(nV,{mode:x,bank:D,onClose:S,onSave:ee},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:413,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/BanksTab.tsx",lineNumber:208,columnNumber:5},void 0)},rV=()=>{const[n,s]=d.useState("localities"),r=[{id:"localities",label:"Địa phương",icon:ze},{id:"categories",label:"Danh mục",icon:Ki},{id:"banks",label:"Ngân hàng",icon:Be}];return e.jsxDEV("div",{className:i.tabContentInner,children:[e.jsxDEV("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",borderBottom:"1px solid var(--border)",paddingBottom:"0"},children:r.map(u=>{const c=u.icon,T=n===u.id;return e.jsxDEV("button",{onClick:()=>s(u.id),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"transparent",border:"none",borderBottom:T?"2px solid var(--primary)":"2px solid transparent",color:T?"var(--primary)":"var(--muted-foreground)",fontSize:"14px",fontWeight:T?600:500,cursor:"pointer",transition:"all 0.2s ease",fontFamily:"var(--font-sans)"},children:[e.jsxDEV(c,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocalitiesTab.tsx",lineNumber:62,columnNumber:15},void 0),u.label]},u.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocalitiesTab.tsx",lineNumber:43,columnNumber:13},void 0)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocalitiesTab.tsx",lineNumber:31,columnNumber:7},void 0),n==="localities"&&e.jsxDEV(zT,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocalitiesTab.tsx",lineNumber:70,columnNumber:38},void 0),n==="categories"&&e.jsxDEV(iV,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocalitiesTab.tsx",lineNumber:71,columnNumber:38},void 0),n==="banks"&&e.jsxDEV(sV,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocalitiesTab.tsx",lineNumber:72,columnNumber:33},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/LocalitiesTab.tsx",lineNumber:29,columnNumber:5},void 0)},lV=()=>e.jsxDEV(rV,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1591,columnNumber:10},void 0),aV=({indicators:n,onOpenModal:s})=>e.jsxDEV("div",{className:i.tabContentInner,children:[e.jsxDEV("div",{className:i.filterBar,children:[e.jsxDEV("div",{className:i.searchBox,children:[e.jsxDEV(_e,{size:18,className:i.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1677,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm chỉ báo...",className:i.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1678,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1676,columnNumber:9},void 0),e.jsxDEV("select",{className:i.select,children:[e.jsxDEV("option",{children:"Tất cả mức độ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1681,columnNumber:11},void 0),e.jsxDEV("option",{children:"Cao"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1682,columnNumber:11},void 0),e.jsxDEV("option",{children:"Trung bình"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1683,columnNumber:11},void 0),e.jsxDEV("option",{children:"Thấp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1684,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1680,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1675,columnNumber:7},void 0),e.jsxDEV("div",{className:i.tableContainer,children:e.jsxDEV("table",{className:i.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Mã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1692,columnNumber:15},void 0),e.jsxDEV("th",{children:"Tên chỉ báo"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1693,columnNumber:15},void 0),e.jsxDEV("th",{children:"Mức độ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1694,columnNumber:15},void 0),e.jsxDEV("th",{children:"Ngưỡng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1695,columnNumber:15},void 0),e.jsxDEV("th",{children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1696,columnNumber:15},void 0),e.jsxDEV("th",{className:i.actionCol,children:"Thao tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1697,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1691,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1690,columnNumber:11},void 0),e.jsxDEV("tbody",{children:n.map(r=>e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:e.jsxDEV("code",{className:i.code,children:r.code},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1703,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1703,columnNumber:17},void 0),e.jsxDEV("td",{children:e.jsxDEV("strong",{children:r.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1704,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1704,columnNumber:17},void 0),e.jsxDEV("td",{children:[r.type==="high"&&e.jsxDEV("span",{className:i.riskHigh,children:"Cao"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1706,columnNumber:43},void 0),r.type==="medium"&&e.jsxDEV("span",{className:i.riskMedium,children:"Trung bình"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1707,columnNumber:45},void 0),r.type==="low"&&e.jsxDEV("span",{className:i.riskLow,children:"Thấp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1708,columnNumber:42},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1705,columnNumber:17},void 0),e.jsxDEV("td",{children:r.threshold},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1710,columnNumber:17},void 0),e.jsxDEV("td",{children:r.status==="active"?e.jsxDEV("span",{className:i.statusActive,children:[e.jsxDEV(ci,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1713,columnNumber:59},void 0)," Hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1713,columnNumber:21},void 0):e.jsxDEV("span",{className:i.statusInactive,children:[e.jsxDEV(Ve,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1715,columnNumber:61},void 0)," Không hoạt động"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1715,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1711,columnNumber:17},void 0),e.jsxDEV("td",{children:e.jsxDEV("div",{className:i.actionButtons,children:[e.jsxDEV("button",{className:i.iconBtn,title:"Sửa",onClick:()=>s("edit",r),children:e.jsxDEV(Ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1721,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1720,columnNumber:21},void 0),e.jsxDEV("button",{className:i.iconBtn,title:"Xóa",onClick:()=>s("delete",r),children:e.jsxDEV(Ie,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1724,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1723,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1719,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1718,columnNumber:17},void 0)]},r.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1702,columnNumber:15},void 0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1700,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1689,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1688,columnNumber:7},void 0),e.jsxDEV($e,{currentPage:1,totalItems:n.length,itemsPerPage:10,onPageChange:()=>{}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1734,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminTabComponents.tsx",lineNumber:1673,columnNumber:5},void 0),tV="_treeContainer_19np0_3",oV="_treeNode_19np0_21",dV="_treeExpandButton_19np0_53",cV="_statusDot_19np0_101",mV="_treeNodeInfo_19np0_135",uV="_treeNodeName_19np0_151",pV="_treeNodeActions_19np0_261",fV="_treeChildren_19np0_281",li={treeContainer:tV,treeNode:oV,treeExpandButton:dV,statusDot:cV,treeNodeInfo:mV,treeNodeName:uV,treeNodeActions:pV,treeChildren:fV},Bi=n=>({1:"Cục",2:"Chi cục",3:"Đội"})[n]||`Cấp ${n}`,NV=({mode:n,department:s,parentDepartment:r,onClose:u,onRefresh:c})=>{const[T,t]=d.useState(!1),[p,V]=d.useState([]),[L,Q]=d.useState({parent_id:(r==null?void 0:r.id)||(s==null?void 0:s.parent_id)||null,name:(s==null?void 0:s.name)||"",code:(s==null?void 0:s.code)||"",level:(s==null?void 0:s.level)||(r?r.level+1:1),path:(s==null?void 0:s.path)||null,address:(s==null?void 0:s.address)??null,latitude:(s==null?void 0:s.latitude)??null,longitude:(s==null?void 0:s.longitude)??null}),[E,x]=d.useState([]),[f,D]=d.useState([]),[k,I]=d.useState(""),[z,F]=d.useState(!1),[U,O]=d.useState(new Map),[w,Z]=d.useState([]),B=n==="view",R=n==="add-child";d.useEffect(()=>{if(S(),ee(),ne(),s!=null&&s.id&&A(s.id),L.level===3&&L.parent_id&&y(L.parent_id),L.level===1&&E.length>0&&!(s!=null&&s.id)){const o=E.map(a=>a.id);D(o)}},[s==null?void 0:s.id,L.level,L.parent_id,E.length,n]),d.useEffect(()=>{ne()},[n,s==null?void 0:s.id]),d.useEffect(()=>{console.log({allAreasCount:E.length,selectedAreasCount:f.length,selectedAreaIds:f,departmentId:s==null?void 0:s.id,assignedAreasCount:U.size,assignedAreasMap:Array.from(U.entries()).map(([o,a])=>{var h,b;return{areaId:o,deptId:a,areaName:((h=E.find(l=>l.id===o))==null?void 0:h.name)||"Unknown",deptName:((b=p.find(l=>l.id===a))==null?void 0:b.name)||"Unknown"}})})},[E,f,s==null?void 0:s.id,U,p]);const S=async()=>{try{const{data:o,error:a}=await ie.from("departments").select("*, id:_id").is("deleted_at",null).order("name");if(a){console.error("Error fetching departments:",a);return}V(o||[])}catch(o){console.error("Error in fetchAllDepartments:",o)}},ee=async()=>{try{const{data:o,error:a,count:h}=await ie.from("areas").select("*, id:_id",{count:"exact"}).order("name");if(console.log({data:o,error:a,count:h,dataLength:o==null?void 0:o.length,hasData:!!o,hasError:!!a}),a){console.error("❌ Error fetching areas:",a),console.error("Error code:",a.code),console.error("Error message:",a.message),console.error("Error details:",a.details),console.error("Error hint:",a.hint),m.error(`Lỗi khi tải danh sách địa bàn: ${a.message}`);return}!o||o.length,x(o||[])}catch(o){console.error("💥 Exception in fetchAllAreas:",o),m.error("Lỗi khi tải danh sách địa bàn")}},ne=async()=>{try{const{data:o,error:a}=await ie.from("department_areas").select("*, id:_id");if(console.log({data:o,error:a,dataLength:o==null?void 0:o.length,hasData:!!o,hasError:!!a}),a){console.error("❌ Error fetching assigned areas:",a),console.error("Error code:",a.code),console.error("Error message:",a.message),console.error("Error details:",a.details),console.error("Error hint:",a.hint),m.error(`Lỗi khi tải danh sách phân bổ địa bàn: ${a.message}`);return}!o||o.length;const h=new Map;o==null||o.forEach(b=>{h.set(b.area_id,b.department_id)}),O(h)}catch(o){console.error("💥 Exception in fetchAllAssignedAreas:",o),m.error("Lỗi khi tải danh sách phân bổ địa bàn")}},A=async o=>{try{const{data:a,error:h}=await ie.from("department_areas").select("area_id").eq("department_id",o);if(console.log({data:a,error:h,dataLength:a==null?void 0:a.length}),h){console.error("❌ Error fetching department areas:",h),m.error(`Lỗi khi tải địa bàn của đơn vị: ${h.message}`);return}const b=(a==null?void 0:a.map(l=>l.area_id))||[];b.forEach(l=>{const j=E.find(_=>_.id===l)}),D(b),setTimeout(()=>{},100)}catch(a){console.error("💥 Exception in fetchDepartmentAreas:",a)}},y=async o=>{try{const{data:a,error:h}=await ie.from("department_areas").select("area_id").eq("department_id",o);if(console.log({data:a,error:h,dataLength:a==null?void 0:a.length}),h){console.error("❌ Error fetching parent department areas:",h),m.error(`Lỗi khi tải địa bàn của đơn vị cha: ${h.message}`);return}const b=(a==null?void 0:a.map(l=>l.area_id))||[];b.forEach(l=>{const j=E.find(_=>_.id===l)}),Z(b),setTimeout(()=>{},100)}catch(a){console.error("💥 Exception in fetchParentDepartmentAreas:",a)}},$=(o,a)=>{B||Q(h=>{const b={...h,[o]:a};if(o==="address"){const l=typeof a=="string"?a.trim():"";b.address=l===""?null:a}if(o==="latitude"||o==="longitude"){const l=a===""?null:Number(a);b[o]=Number.isFinite(l)?l:null}if(o==="parent_id")if(a){const l=p.find(j=>j.id===a);l&&(b.level=l.level+1)}else b.level=1;if(o==="level"&&(b.level=typeof a=="string"?parseInt(a,10):a,b.level===1&&(b.parent_id=null,E.length>0))){const l=E.map(j=>j.id);D(l)}return b})},M=()=>L.name.trim()?L.code.trim()?!0:(m.error("Vui lòng nhập mã đơn vị"),!1):(m.error("Vui lòng nhập tên đơn vị"),!1),v=async o=>{if(o.preventDefault(),B){u();return}if(M())try{t(!0);let a=L.code;if(L.parent_id){const l=p.find(j=>j.id===L.parent_id);l&&l.path&&(a=`${l.path}.${L.code}`)}const h={...L,path:a};let b=s==null?void 0:s.id;if(n==="edit"&&(s!=null&&s.id)){const{error:l}=await ie.from("departments").update(h).eq("_id",s.id);if(l)throw l;await N(s.id),m.success("Cập nhật đơn vị thành công")}else{const{data:l,error:j}=await ie.from("departments").insert([h]).select().single();if(j)throw j;l!=null&&l.id&&await N(l.id),m.success(R?"Thêm đơn vị con thành công":"Thêm đơn vị thành công")}c(),u()}catch(a){console.error("Error saving department:",a),m.error(`Lỗi: ${a.message}`)}finally{t(!1)}},N=async o=>{try{console.log({departmentId:o,selectedAreas:f,selectedAreasCount:f.length});const{error:a}=await ie.from("department_areas").delete().eq("department_id",o);if(a)throw console.error("❌ Error deleting old department areas:",a),a;if(f.length>0){const h=f.map(j=>({department_id:o,area_id:j})),{data:b,error:l}=await ie.from("department_areas").insert(h).select();if(l)throw console.error("❌ Error inserting department areas:",l),console.error("Insert error code:",l.code),console.error("Insert error message:",l.message),console.error("Insert error details:",l.details),l}}catch(a){throw console.error("💥 Exception in saveDepartmentAreas:",a),m.error(`Lỗi khi lưu địa bàn: ${a.message}`),a}},g=()=>n==="add"?"Thêm đơn vị gốc":n==="add-child"?`Thêm đơn vị con của "${r==null?void 0:r.name}"`:n==="edit"?"Chỉnh sửa đơn vị":"Chi tiết đơn vị";return e.jsxDEV("div",{className:i.modalOverlay,onClick:u,children:e.jsxDEV("div",{className:i.modal,onClick:o=>o.stopPropagation(),children:e.jsxDEV("form",{onSubmit:v,children:[e.jsxDEV("div",{className:i.modalHeader,children:[e.jsxDEV(Be,{size:24,style:{color:"var(--primary, #005cb6)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:488,columnNumber:13},void 0),e.jsxDEV("h3",{style:{margin:0,flex:1},children:g()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:489,columnNumber:13},void 0),e.jsxDEV("button",{type:"button",onClick:u,className:i.closeButton,"aria-label":"Đóng",children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:496,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:490,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:487,columnNumber:11},void 0),e.jsxDEV("div",{className:i.modalBody,children:[R&&r&&e.jsxDEV("div",{className:i.alertInfo,style:{marginBottom:"var(--spacing-4, 16px)"},children:[e.jsxDEV(ve,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:504,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Đơn vị cha:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:506,columnNumber:19},void 0)," ",r.name," (",r.code,")",e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:507,columnNumber:19},void 0),e.jsxDEV("strong",{children:"Loại:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:508,columnNumber:19},void 0)," ",Bi(r.level)," → ",e.jsxDEV("strong",{children:"Loại mới:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:508,columnNumber:83},void 0)," ",Bi(r.level+1)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:505,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:503,columnNumber:15},void 0),!R&&e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:["Đơn vị cha",e.jsxDEV("span",{style:{fontSize:"13px",fontWeight:400,color:"var(--muted-foreground)"},children:[" ","(Để trống nếu là đơn vị gốc)"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:518,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:516,columnNumber:17},void 0),e.jsxDEV("select",{className:i.select,value:L.parent_id||"",onChange:o=>$("parent_id",o.target.value||null),disabled:B||L.level===1,style:L.level===1?{background:"var(--muted)",cursor:"not-allowed"}:{},children:[e.jsxDEV("option",{value:"",children:"-- Không có (Đơn vị gốc) --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:529,columnNumber:19},void 0),p.filter(o=>o.id!==(s==null?void 0:s.id)).map(o=>e.jsxDEV("option",{value:o.id,children:[o.name," (",o.code,") - ",Bi(o.level)]},o.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:533,columnNumber:23},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:522,columnNumber:17},void 0),L.level===1&&e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px"},children:"Đơn vị Cục không có đơn vị cha (là đơn vị gốc)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:539,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:515,columnNumber:15},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:["Tên đơn vị ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:549,columnNumber:28},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:548,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,placeholder:"Nhập tên đơn vị",value:L.name,onChange:o=>$("name",o.target.value),disabled:B,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:551,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:547,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:["Mã đơn vị ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:565,columnNumber:27},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:564,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,placeholder:"Nhập mã đơn vị (ví dụ: DV001)",value:L.code,onChange:o=>$("code",o.target.value.toUpperCase()),disabled:B||n==="edit",style:n==="edit"?{background:"var(--muted)",cursor:"not-allowed"}:{},required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:567,columnNumber:15},void 0),n==="edit"&&e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px",marginTop:"4px",display:"block"},children:"⚠️ Không thể thay đổi mã đơn vị sau khi tạo (để đảm bảo tính toàn vẹn dữ liệu)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:578,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:563,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:"Địa chỉ đơn vị"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:586,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:i.input,placeholder:"Nhập địa chỉ đơn vị",value:L.address||"",onChange:o=>$("address",o.target.value),disabled:B},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:589,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:585,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formRow,children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:"Latitude"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:602,columnNumber:17},void 0),e.jsxDEV("input",{type:"number",className:i.input,placeholder:"Ví dụ: 21.0285",value:L.latitude??"",onChange:o=>$("latitude",o.target.value),step:"0.000001",disabled:B},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:603,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:601,columnNumber:15},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:"Longitude"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:614,columnNumber:17},void 0),e.jsxDEV("input",{type:"number",className:i.input,placeholder:"Ví dụ: 105.8542",value:L.longitude??"",onChange:o=>$("longitude",o.target.value),step:"0.000001",disabled:B},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:615,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:613,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:600,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:"Loại đơn vị"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:629,columnNumber:15},void 0),e.jsxDEV("select",{className:i.select,value:L.level,onChange:o=>$("level",o.target.value),disabled:B,children:[e.jsxDEV("option",{value:1,children:"Cục"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:636,columnNumber:17},void 0),e.jsxDEV("option",{value:2,children:"Chi cục"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:637,columnNumber:17},void 0),e.jsxDEV("option",{value:3,children:"Đội"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:638,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:630,columnNumber:15},void 0),e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px"},children:"Loại có thể được thay đổi khi cần thiết"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:640,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:628,columnNumber:13},void 0),n==="edit"&&L.path&&e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:"Đường dẫn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:648,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:L.path,disabled:!0,style:{background:"var(--muted)",cursor:"not-allowed",fontFamily:"Monaco, monospace",fontSize:"13px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:649,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:647,columnNumber:15},void 0),L.level!==1&&e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{className:i.label,children:[e.jsxDEV(ze,{size:16,style:{display:"inline",marginRight:"6px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:664,columnNumber:19},void 0),"Địa bàn quản lý",e.jsxDEV("span",{style:{fontSize:"12px",color:"var(--muted-foreground)",marginLeft:"8px"},children:["(",E.length," địa bàn có sẵn)"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:666,columnNumber:19},void 0),e.jsxDEV("button",{type:"button",onClick:ee,style:{marginLeft:"12px",padding:"4px 8px",fontSize:"11px",background:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"🔄 Refresh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:669,columnNumber:19},void 0),e.jsxDEV("button",{type:"button",onClick:()=>{console.table(E.map(o=>({name:o.name,code:o.code,level:o.level,provinceid:o.provinceid,wardid:o.wardid}))),console.table(Array.from(U.entries()).map(([o,a])=>{var h,b;return{areaId:o,areaName:((h=E.find(l=>l.id===o))==null?void 0:h.name)||"Unknown",departmentId:a,departmentName:((b=p.find(l=>l.id===a))==null?void 0:b.name)||"Unknown"}})),alert(`📊 DEBUG INFO:

Total Areas: ${E.length}
- Provinces: ${E.filter(o=>o.level==="province").length}
- Wards: ${E.filter(o=>o.level==="ward").length}

Parent Dept Areas: ${w.length}
Assigned Areas: ${U.size}

Check Console (F12) for detailed table view!`)},style:{marginLeft:"8px",padding:"4px 8px",fontSize:"11px",background:"#f59e0b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"🐛 Debug"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:685,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:663,columnNumber:17},void 0),E.length===0&&e.jsxDEV("div",{style:{padding:"12px",background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"6px",fontSize:"13px",marginBottom:"8px"},children:["⚠️ Không có dữ liệu địa bàn được trả về từ Supabase.",e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:741,columnNumber:21},void 0),e.jsxDEV("strong",{children:"Có thể do:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:742,columnNumber:21},void 0),e.jsxDEV("ul",{style:{marginTop:"8px",marginBottom:"8px",paddingLeft:"20px"},children:[e.jsxDEV("li",{children:["Bảng ",e.jsxDEV("code",{children:"areas"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:744,columnNumber:32},void 0)," chưa có dữ liệu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:744,columnNumber:23},void 0),e.jsxDEV("li",{children:"Row Level Security (RLS) đang chặn query"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:745,columnNumber:23},void 0),e.jsxDEV("li",{children:"Người dùng hiện tại không có quyền đọc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:746,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:743,columnNumber:21},void 0),e.jsxDEV("strong",{children:"Giải pháp:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:748,columnNumber:21},void 0),e.jsxDEV("ol",{style:{marginTop:"8px",paddingLeft:"20px"},children:[e.jsxDEV("li",{children:"Mở Console (F12) và kiểm tra logs"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:750,columnNumber:23},void 0),e.jsxDEV("li",{children:["Chạy file SQL: ",e.jsxDEV("code",{children:"/SUPABASE_RLS_AREAS_POLICY.sql"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:751,columnNumber:42},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:751,columnNumber:23},void 0),e.jsxDEV("li",{children:'Thêm dữ liệu vào bảng "Cơ sở & Địa bàn"'},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:752,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:749,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:730,columnNumber:19},void 0),f.length>0&&e.jsxDEV("div",{className:i.selectedAreaTags,children:f.map(o=>{const a=E.find(h=>h.id===o);return a?e.jsxDEV("div",{className:i.areaTag,children:[e.jsxDEV(ze,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:765,columnNumber:27},void 0),a.name,e.jsxDEV("button",{type:"button",onClick:()=>D(f.filter(h=>h!==o)),disabled:B,children:e.jsxDEV(De,{size:12},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:772,columnNumber:29},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:767,columnNumber:27},void 0)]},o,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:764,columnNumber:25},void 0):null})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:759,columnNumber:19},void 0),e.jsxDEV("div",{className:i.areaSelectContainer,children:[e.jsxDEV("div",{style:{position:"relative"},children:[e.jsxDEV(_e,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:783,columnNumber:21},void 0),e.jsxDEV("input",{type:"text",className:i.areaSearchInput,style:{paddingLeft:"40px"},placeholder:E.length>0?"Tìm kiếm địa bàn...":"Chưa có dữ liệu địa bàn",value:k,onChange:o=>{I(o.target.value)},onFocus:()=>{F(!0)},onBlur:()=>setTimeout(()=>F(!1),200),disabled:B||E.length===0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:793,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:782,columnNumber:19},void 0),z&&!B&&E.length>0&&e.jsxDEV("div",{className:i.areaDropdown,children:(()=>{const a=L.level===1?E:L.level===2?E.filter(b=>{if(b.level!=="province")return!1;const l=U.get(b.id);if(!l||l===(s==null?void 0:s.id))return!0;const j=p.find(_=>_.id===l);return!(j&&j.level===2&&j.id!==(s==null?void 0:s.id))}):L.level===3?(console.log({totalAreas:E.length,totalWards:E.filter(b=>b.level==="ward").length,assignedAreasCount:U.size}),E.filter(b=>{if(b.level!=="ward")return!1;const l=U.get(b.id);if(!l||l===(s==null?void 0:s.id))return!0;const j=p.find(_=>_.id===l);return!(j&&j.level===3&&j.id!==(s==null?void 0:s.id))})):E,h=a.filter(b=>b.name.toLowerCase().includes(k.toLowerCase())||b.code.toLowerCase().includes(k.toLowerCase()));if(console.log({level:L.level,totalAreas:E.length,availableAreas:a.length,filteredBySearch:h.length,parentDepartmentAreasCount:w.length,assignedAreasCount:U.size}),L.level===3&&!L.parent_id)return e.jsxDEV("div",{style:{padding:"16px",textAlign:"center",color:"#ef4444",background:"#fee2e2",borderRadius:"6px",margin:"8px"},children:[e.jsxDEV("strong",{children:"⚠️ Vui lòng chọn đơn vị cha (Chi cục) trước"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:916,columnNumber:31},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:917,columnNumber:31},void 0),e.jsxDEV("small",{style:{fontSize:"12px",marginTop:"8px",display:"block"},children:"Đi chỉ có thể quản lý địa bàn mà Chi cục cha đã được phân công."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:918,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:908,columnNumber:29},void 0);if(L.level===3&&L.parent_id&&w.length===0){const b=p.find(l=>l.id===L.parent_id);return e.jsxDEV("div",{style:{padding:"16px",textAlign:"center",color:"#f59e0b",background:"#fef3c7",borderRadius:"6px",margin:"8px"},children:[e.jsxDEV("strong",{children:"⚠️ Chi cục cha chưa có địa bàn nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:937,columnNumber:31},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:938,columnNumber:31},void 0),e.jsxDEV("small",{style:{fontSize:"12px",marginTop:"8px",display:"block"},children:['Đơn vị cha "',b==null?void 0:b.name,'" chưa được phân công địa bàn nào.',e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:941,columnNumber:33},void 0),"Vui lòng phân công địa bàn cho Chi cục cha trước."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:939,columnNumber:31},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:929,columnNumber:29},void 0)}return h.length===0?L.level===2&&a.length===0?e.jsxDEV("div",{style:{padding:"16px",textAlign:"center",color:"#f59e0b",background:"#fef3c7",borderRadius:"6px",margin:"8px"},children:[e.jsxDEV("strong",{children:"⚠️ Tất cả địa bàn đã được phân công cho các Chi cục khác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:959,columnNumber:33},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:960,columnNumber:33},void 0),e.jsxDEV("small",{style:{fontSize:"12px",marginTop:"8px",display:"block"},children:"Mỗi địa bàn chỉ có thể thuộc về 1 Chi cục duy nhất."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:961,columnNumber:33},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:951,columnNumber:31},void 0):L.level===3&&a.length===0?e.jsxDEV("div",{style:{padding:"16px",textAlign:"center",color:"#f59e0b",background:"#fef3c7",borderRadius:"6px",margin:"8px"},children:[e.jsxDEV("strong",{children:"⚠️ Tất cả địa bàn của Chi cục cha đã được phân công cho các Đội khác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:978,columnNumber:33},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:979,columnNumber:33},void 0),e.jsxDEV("small",{style:{fontSize:"12px",marginTop:"8px",display:"block"},children:"Đội chỉ có thể quản lý địa bàn chưa được phân công cho Đội khác."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:980,columnNumber:33},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:970,columnNumber:31},void 0):e.jsxDEV("div",{style:{padding:"16px",textAlign:"center",color:"var(--muted-foreground)"},children:['Không tìm thấy địa bàn phù hợp với "',k,'"']},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:988,columnNumber:29},void 0):h.map(b=>{const l=U.get(b.id),j=l&&l!==(s==null?void 0:s.id),_=j?p.find(X=>X.id===l):null;return e.jsxDEV("div",{className:i.areaOption,onClick:()=>{f.includes(b.id)?D(f.filter(X=>X!==b.id)):D([...f,b.id])},children:[e.jsxDEV("input",{type:"checkbox",checked:f.includes(b.id),readOnly:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1012,columnNumber:31},void 0),e.jsxDEV("div",{style:{flex:1},children:[e.jsxDEV("div",{style:{fontWeight:500},children:b.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1018,columnNumber:33},void 0),e.jsxDEV("div",{style:{fontSize:"12px",color:"var(--muted-foreground)"},children:[b.code," • ",b.level,j&&_&&e.jsxDEV("span",{style:{marginLeft:"8px",color:"#f59e0b",fontWeight:500},children:["• Đã phân công cho: ",_.name," (",_.code,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1022,columnNumber:37},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1019,columnNumber:33},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1017,columnNumber:31},void 0)]},b.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1001,columnNumber:29},void 0)})})()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:811,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:781,columnNumber:17},void 0),e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px"},children:f.length>0?`Đã chọn ${f.length} địa bàn`:E.length>0?L.level===2?"⚠️ Chi cục chỉ được chọn địa bàn cấp tỉnh (province). Mỗi địa bàn chỉ thu��c 1 Chi cục duy nhất.":L.level===3?"⚠️ Đội chỉ được chọn địa bàn cấp phường/xã (ward). Mỗi địa bàn chỉ thuộc 1 Đội duy nhất.":"Chọn các địa bàn mà đơn vị này quản lý":"Vui lòng thêm địa bàn vào hệ thống trước"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1040,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:662,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:500,columnNumber:11},void 0),e.jsxDEV("div",{className:i.modalFooter,children:[e.jsxDEV("button",{type:"button",onClick:u,className:i.btnSecondary,disabled:T,children:B?"Đóng":"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1056,columnNumber:13},void 0),!B&&e.jsxDEV("button",{type:"submit",className:i.btnPrimary,disabled:T,children:T?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(he,{size:16,className:i.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1072,columnNumber:21},void 0),"Đang lưu..."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1071,columnNumber:19},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Be,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1077,columnNumber:21},void 0),n==="edit"?"Cập nhật":"Thêm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1076,columnNumber:19},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1065,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:1055,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:486,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:485,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentModal.tsx",lineNumber:484,columnNumber:5},void 0)},bV=()=>{const[n,s]=d.useState(!0),[r,u]=d.useState([]),[c,T]=d.useState([]),[t,p]=d.useState(""),[V,L]=d.useState(null),[Q,E]=d.useState(new Set),[x,f]=d.useState(!1),[D,k]=d.useState("add"),[I,z]=d.useState(void 0),[F,U]=d.useState(void 0);d.useEffect(()=>{O()},[]);const O=async()=>{try{s(!0),L(null);const{data:M,error:v}=await ie.from("departments").select("*, id:_id").is("deleted_at",null).order("path",{ascending:!0});if(v){console.error("❌ Error fetching departments:",v),L(v),m.error(`Lỗi tải dữ liệu: ${v.message}`);return}const N=(M||[]).map(o=>({...o,id:o._id||o.id}));u(N);const g=w(N);T(g)}catch(M){console.error("❌ Error in fetchDepartments:",M),m.error("Lỗi kết nối Supabase"),L(M)}finally{s(!1)}},w=M=>{const v=new Map,N=[];return M.forEach(g=>{v.set(g.id,{...g,children:[]})}),M.forEach(g=>{const o=v.get(g.id);if(g.parent_id){const a=v.get(g.parent_id);a?a.children.push(o):N.push(o)}else N.push(o)}),N},Z=M=>{E(v=>{const N=new Set(v);return N.has(M)?N.delete(M):N.add(M),N})},B=()=>{const M=new Set(r.map(v=>v.id));E(M),m.success("Đã mở rộng tất cả")},R=()=>{E(new Set),m.success("Đã thu gọn tất cả")},S=(M,v)=>{if(!v)return M;const N=[];return M.forEach(g=>{var h;const o=g.name.toLowerCase().includes(v.toLowerCase())||((h=g.code)==null?void 0:h.toLowerCase().includes(v.toLowerCase())),a=g.children?S(g.children,v):[];(o||a.length>0)&&(N.push({...g,children:a}),o&&E(b=>new Set(b).add(g.id)))}),N},ee=t?S(c,t):c,ne=(M,v=0)=>{const N=M.children&&M.children.length>0,g=Q.has(M.id),o=v*32;return e.jsxDEV("div",{children:[e.jsxDEV("div",{className:li.treeNode,style:{paddingLeft:`${o+20}px`},children:[e.jsxDEV("button",{className:li.treeExpandButton,onClick:()=>Z(M.id),type:"button",style:{visibility:N?"visible":"hidden",opacity:N?1:0},children:g?"-":"+"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:216,columnNumber:11},void 0),e.jsxDEV("div",{className:li.statusDot},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:229,columnNumber:11},void 0),e.jsxDEV("div",{className:li.treeNodeInfo,children:e.jsxDEV("span",{className:li.treeNodeName,children:M.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:233,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:232,columnNumber:11},void 0),e.jsxDEV("div",{style:{flex:1}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:237,columnNumber:11},void 0),e.jsxDEV("div",{className:li.treeNodeActions,children:[e.jsxDEV("button",{className:P.iconButton,onClick:()=>$(M),title:"Sao chép (bao gồm đơn vị con)",type:"button",children:e.jsxDEV(Ii,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:247,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:241,columnNumber:13},void 0),e.jsxDEV("button",{className:P.iconButton,onClick:()=>{k("edit"),z(M),f(!0)},title:"Chỉnh sửa",type:"button",children:e.jsxDEV(Ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:259,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:249,columnNumber:13},void 0),e.jsxDEV("button",{className:P.iconButton,onClick:()=>{m.info("Tính năng thống kê đang phát triển")},title:"Xem thống kê",type:"button",children:e.jsxDEV(ms,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:269,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:261,columnNumber:13},void 0),e.jsxDEV("button",{className:P.iconButton,onClick:()=>{k("add-child"),U(M),f(!0)},title:"Thêm đơn vị con",type:"button",children:e.jsxDEV(Le,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:281,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:271,columnNumber:13},void 0),e.jsxDEV("button",{className:P.iconButtonDanger,onClick:()=>y(M),title:"Xóa",type:"button",children:e.jsxDEV(Ie,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:289,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:283,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:240,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:209,columnNumber:9},void 0),N&&g&&e.jsxDEV("div",{className:li.treeChildren,children:M.children.map(a=>ne(a,v+1))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:296,columnNumber:11},void 0)]},M.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:207,columnNumber:7},void 0)},A=()=>{try{const M=r.map(o=>({ID:o.id,"Mã đơn vị":o.code||"","Tên đơn vị":o.name,Cấp:o.level,"Đơn vị cha":o.parent_id||"","Đường dẫn":o.path||"","Ngày tạo":new Date(o.created_at).toLocaleString("vi-VN"),"Ngày cập nhật":new Date(o.updated_at).toLocaleString("vi-VN")})),v=ce.json_to_sheet(M),N=ce.book_new();ce.book_append_sheet(N,v,"Đơn vị");const g=`Don_vi_${new Date().toISOString().split("T")[0]}.xlsx`;Fe(N,g),m.success("Đã xuất dữ liệu thành công")}catch(M){console.error("❌ Export error:",M),m.error("Lỗi xuất dữ liệu")}},y=async M=>{if(M.children&&M.children.length>0){m.error("Không thể xóa đơn vị đang có đơn vị con. Vui lòng xóa các đơn vị con trước.");return}if(window.confirm(`Bạn có chắc chắn muốn xóa đơn vị "${M.name}" (${M.code})?

Hành động này không thể hoàn tác.`))try{const{error:N}=await ie.from("departments").update({deleted_at:new Date().toISOString()}).eq("_id",M.id);if(N)throw N;m.success("Đã xóa đơn vị thành công"),O()}catch(N){console.error("❌ Error deleting department:",N),m.error(`Lỗi xóa đơn vị: ${N.message}`)}},$=async M=>{const v=M.children&&M.children.length>0,N=v?M.children.length:0;if(window.confirm(`Bạn có chắc chắn muốn sao chép đơn vị "${M.name}" (${M.code})?\\n\\nHành động này sẽ tạo ra một bản sao mới của đơn vị này`+(v?`, bao gồm ${N} đơn vị con.`:".")))try{m("Đang sao chép...",{icon:"⏳"});const o=(b,l)=>{let j=1,_=`${b}_COPY`;for(;l.includes(_);)j++,_=`${b}_COPY${j}`;return _},a=r.map(b=>b.code||"").filter(Boolean),h=async(b,l,j)=>{const _=o(b.code||"DV",j);j.push(_);let X=_;if(l){const q=r.find(ue=>ue.id===l);q&&q.path&&(X=`${q.path}.${_}`)}const{data:H,error:K}=await ie.from("departments").insert({parent_id:l,name:`${b.name} (Bản sao)`,code:_,level:b.level,path:X}).select("*, id:_id").single();if(K)throw K;if(b.children&&b.children.length>0)for(const q of b.children)await h(q,H._id,j)};await h(M,M.parent_id,[...a]),m.success("Đã sao chép đơn vị thành công"+(v?` (bao gồm ${N} đơn vị con)`:"")),await O(),E(b=>new Set([...b,M.parent_id||""].filter(Boolean)))}catch(o){console.error("❌ Error cloning department:",o),m.error(`Lỗi sao chép đơn vị: ${o.message}`)}};return V?e.jsxDEV(In,{error:V,onRetry:O},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:463,columnNumber:12},void 0):e.jsxDEV("div",{className:P.container,children:[e.jsxDEV("div",{className:P.filtersCard,children:e.jsxDEV("div",{className:P.filtersRow,children:[e.jsxDEV("div",{className:P.searchWrapper,children:[e.jsxDEV(_e,{size:18,className:P.searchIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:473,columnNumber:13},void 0),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm theo tên hoặc mã...",value:t,onChange:M=>p(M.target.value),className:P.searchInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:474,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:472,columnNumber:11},void 0),e.jsxDEV("div",{className:P.actionsGroup,children:[e.jsxDEV("button",{className:P.btnSecondary,onClick:B,type:"button",title:"Mở rộng tất cả",children:[e.jsxDEV(dn,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:491,columnNumber:15},void 0),"Mở rộng tất cả"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:485,columnNumber:13},void 0),e.jsxDEV("button",{className:P.btnSecondary,onClick:R,type:"button",title:"Thu gọn tất cả",children:[e.jsxDEV(dn,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:500,columnNumber:15},void 0),"Thu gọn"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:494,columnNumber:13},void 0),e.jsxDEV("button",{className:P.btnSecondary,onClick:O,type:"button",children:[e.jsxDEV(ge,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:508,columnNumber:15},void 0),"Làm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:503,columnNumber:13},void 0),e.jsxDEV("button",{className:P.btnSecondary,onClick:A,type:"button",children:[e.jsxDEV(Pe,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:516,columnNumber:15},void 0),"Xuất Excel"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:511,columnNumber:13},void 0),e.jsxDEV("button",{className:P.btnPrimary,onClick:()=>{k("add"),z(void 0),U(void 0),f(!0)},type:"button",children:[e.jsxDEV(Le,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:529,columnNumber:15},void 0),"Thêm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:519,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:484,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:470,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:469,columnNumber:7},void 0),e.jsxDEV("div",{className:P.tableCard,children:n?e.jsxDEV("div",{className:P.loading,children:e.jsxDEV(he,{size:32,className:P.spinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:540,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:539,columnNumber:11},void 0):ee.length===0?e.jsxDEV("div",{className:P.emptyState,children:[e.jsxDEV(ve,{size:48,style:{color:"var(--muted-foreground)",marginBottom:"16px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:544,columnNumber:13},void 0),e.jsxDEV("h3",{children:t?"Không tìm thấy kết quả":"Chưa có đơn vị nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:545,columnNumber:13},void 0),e.jsxDEV("p",{children:t?"Thử thay đổi từ khóa tìm kiếm":"Bắt đầu bằng cách thêm đơn vị gốc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:548,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:543,columnNumber:11},void 0):e.jsxDEV("div",{className:li.treeContainer,children:ee.map(M=>ne(M,0))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:555,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:537,columnNumber:7},void 0),!n&&ee.length>0&&e.jsxDEV("div",{className:P.tableFooter,children:e.jsxDEV("div",{className:P.footerInfo,children:[e.jsxDEV(Be,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:565,columnNumber:13},void 0),e.jsxDEV("span",{children:["Tổng số: ",e.jsxDEV("strong",{children:r.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:567,columnNumber:24},void 0)," đơn vị",t&&` • Tìm thấy: ${ee.length}`]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:566,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:564,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:563,columnNumber:9},void 0),x&&e.jsxDEV(NV,{mode:D,department:I,parentDepartment:F,onClose:()=>{f(!1),z(void 0),U(void 0)},onRefresh:O},`${D}-${(I==null?void 0:I.id)||"new"}-${Date.now()}`,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:576,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/DepartmentsTab.tsx",lineNumber:467,columnNumber:5},void 0)},TV=({mode:n,onClose:s,onSave:r})=>{const[u,c]=d.useState({code:"",name:"",level:"",province_id:"",ward_id:"",category_id:"",status:1,description:""}),[T,t]=d.useState([]),[p,V]=d.useState([]),[L,Q]=d.useState([]),[E,x]=d.useState([]),[f,D]=d.useState(!0),[k,I]=d.useState(!0),[z,F]=d.useState(!1);d.useEffect(()=>{U(),O(),w()},[]),d.useEffect(()=>{if(u.province_id){const R=p.filter(S=>S.provinceId===u.province_id);x(R)}else x([])},[u.province_id,p]);const U=async()=>{try{const{data:R,error:S}=await ie.from("provinces").select("*, id:_id").order("name",{ascending:!0});if(S)throw console.error("❌ Error fetching provinces:",S),S;t(R||[]),D(!1)}catch(R){console.error("❌ Error in fetchProvinces:",R),m.error("Lỗi tải danh sách Tỉnh/TP")}},O=async()=>{try{const{data:R,error:S}=await ie.from("wards").select("*, id:_id").order("name",{ascending:!0});if(S)throw console.error("❌ Error fetching wards:",S),S;V(R||[]),I(!1)}catch(R){console.error("❌ Error in fetchWards:",R),m.error("Lỗi tải danh sách Phường/Xã")}},w=async()=>{try{const{data:R,error:S}=await ie.from("categories").select("*, id:_id").order("name",{ascending:!0});if(S)throw S;Q(R||[])}catch(R){console.error("Error fetching categories:",R)}},Z=async R=>{if(R.preventDefault(),!u.code.trim()||!u.name.trim()){m.error("Vui lòng điền đầy đủ thông tin bắt buộc");return}if(!u.level){m.error("Vui lòng chọn cấp địa bàn");return}if(u.level==="province"&&!u.province_id){m.error("Vui lòng chọn Tỉnh/Thành phố");return}if(u.level==="ward"&&(!u.province_id||!u.ward_id)){m.error("Vui lòng chọn đầy đủ Tỉnh/Thành phố và Xã/Phường");return}try{F(!0),await new Promise(S=>setTimeout(S,500)),m.success(n==="add"?"Đã tạo địa bàn thành công":"Đã cập nhật địa bàn thành công"),r(),s()}catch(S){console.error("❌ Error in handleSubmit:",S),m.error("Lỗi lưu dữ liệu")}finally{F(!1)}},B=n==="view";return e.jsxDEV("div",{className:i.modalOverlay,onClick:s,children:e.jsxDEV("div",{className:i.modal,onClick:R=>R.stopPropagation(),style:{maxWidth:"800px",width:"100%"},children:[e.jsxDEV("div",{className:i.modalHeader,children:[e.jsxDEV(ze,{size:20,style:{color:"var(--primary, #005cb6)",flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:204,columnNumber:11},void 0),e.jsxDEV("h3",{children:[n==="add"&&"Thêm địa bàn mới",n==="edit"&&"Chỉnh sửa địa bàn",n==="view"&&"Chi tiết địa bàn"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:205,columnNumber:11},void 0),e.jsxDEV("button",{className:i.closeBtn,onClick:s,type:"button",children:e.jsxDEV(De,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:211,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:210,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:203,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:Z,children:[e.jsxDEV("div",{className:i.modalBody,children:[e.jsxDEV("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"var(--spacing-4, 16px)"},children:[e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Mã ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:227,columnNumber:22},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:226,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:u.code,onChange:R=>c({...u,code:R.target.value}),placeholder:"VD: DB001",disabled:B,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:229,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:225,columnNumber:15},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Tên ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:243,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:242,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",className:i.input,value:u.name,onChange:R=>c({...u,name:R.target.value}),placeholder:"Nhập tên địa bàn",disabled:B,required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:245,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:241,columnNumber:15},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Cấp ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:259,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:258,columnNumber:17},void 0),e.jsxDEV("select",{className:i.select,value:u.level,onChange:R=>{const S=R.target.value;c({...u,level:S,province_id:"",ward_id:""})},disabled:B,required:!0,children:[e.jsxDEV("option",{value:"",children:"-- Chọn cấp --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:276,columnNumber:19},void 0),e.jsxDEV("option",{value:"province",children:"Cấp Tỉnh/Thành ph��"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:277,columnNumber:19},void 0),e.jsxDEV("option",{value:"ward",children:"Cấp Xã/Phường"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:278,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:261,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:257,columnNumber:15},void 0),e.jsxDEV("div",{className:i.formGroup,children:[e.jsxDEV("label",{children:["Trạng thái ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:285,columnNumber:30},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:284,columnNumber:17},void 0),e.jsxDEV("select",{className:i.select,value:u.status,onChange:R=>c({...u,status:parseInt(R.target.value)}),disabled:B,required:!0,children:[e.jsxDEV("option",{value:"1",children:"Hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:299,columnNumber:19},void 0),e.jsxDEV("option",{value:"0",children:"Tạm dừng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:300,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:287,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:283,columnNumber:15},void 0),(u.level==="province"||u.level==="ward")&&e.jsxDEV("div",{className:i.formGroup,style:{gridColumn:"1 / -1"},children:[e.jsxDEV("label",{children:["Chọn Tỉnh/Thành phố ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:308,columnNumber:41},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:307,columnNumber:19},void 0),e.jsxDEV("div",{style:{position:"relative"},children:[e.jsxDEV(Be,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground)",pointerEvents:"none",zIndex:1}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:311,columnNumber:21},void 0),e.jsxDEV("select",{className:i.select,style:{paddingLeft:"40px",width:"100%"},value:u.province_id,onChange:R=>{const S=R.target.value;c({...u,province_id:S,ward_id:""})},disabled:B||f,required:!0,children:[e.jsxDEV("option",{value:"",children:f?"Đang tải...":"-- Chọn Tỉnh/Thành phố --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:334,columnNumber:23},void 0),T.map(R=>e.jsxDEV("option",{value:R.id,children:R.name},R.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:338,columnNumber:25},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:323,columnNumber:21},void 0),e.jsxDEV(Me,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground)",pointerEvents:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:343,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:310,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:306,columnNumber:17},void 0),u.level==="ward"&&e.jsxDEV("div",{className:i.formGroup,style:{gridColumn:"1 / -1"},children:[e.jsxDEV("label",{children:["Chọn Xã/Phường ",e.jsxDEV("span",{className:i.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:362,columnNumber:36},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:361,columnNumber:19},void 0),e.jsxDEV("div",{style:{position:"relative"},children:[e.jsxDEV(ze,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground)",pointerEvents:"none",zIndex:1}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:365,columnNumber:21},void 0),e.jsxDEV("select",{className:i.select,style:{paddingLeft:"40px",width:"100%"},value:u.ward_id,onChange:R=>c({...u,ward_id:R.target.value}),disabled:B||!u.province_id,required:!0,children:[e.jsxDEV("option",{value:"",children:"-- Chọn Xã/Phường --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:385,columnNumber:23},void 0),E.map(R=>e.jsxDEV("option",{value:R.id,children:R.name},R.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:387,columnNumber:25},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:377,columnNumber:21},void 0),e.jsxDEV(Me,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground)",pointerEvents:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:392,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:364,columnNumber:19},void 0),!u.province_id&&e.jsxDEV("small",{style:{color:"var(--muted-foreground)",fontSize:"12px"},children:"Vui lòng chọn Tỉnh/Thành phố trước"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:405,columnNumber:21},void 0),u.province_id&&E.length===0&&e.jsxDEV("small",{style:{color:"var(--destructive)",fontSize:"12px"},children:"⚠️ Không có dữ liệu Phường/Xã cho tỉnh này"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:410,columnNumber:21},void 0),u.province_id&&E.length>0&&e.jsxDEV("small",{style:{color:"var(--success, green)",fontSize:"12px"},children:[E.length," Phường/Xã có sẵn"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:415,columnNumber:21},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:360,columnNumber:17},void 0),e.jsxDEV("div",{className:i.formGroup,style:{gridColumn:"1 / -1"},children:[e.jsxDEV("label",{children:"Đơn vị/Đội phụ trách"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:424,columnNumber:17},void 0),e.jsxDEV("div",{style:{position:"relative"},children:[e.jsxDEV(gi,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground)",pointerEvents:"none",zIndex:1}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:426,columnNumber:19},void 0),e.jsxDEV("select",{className:i.select,style:{paddingLeft:"40px",width:"100%"},value:u.category_id,onChange:R=>c({...u,category_id:R.target.value}),disabled:B,children:[e.jsxDEV("option",{value:"",children:"-- Chọn đơn vị/đội --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:445,columnNumber:21},void 0),L.map(R=>e.jsxDEV("option",{value:R.id,children:[R.name," ",R.code&&`(${R.code})`]},R.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:447,columnNumber:23},void 0))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:438,columnNumber:19},void 0),e.jsxDEV(Me,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--muted-foreground)",pointerEvents:"none"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:452,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:425,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:423,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:219,columnNumber:13},void 0),e.jsxDEV("div",{className:i.formGroup,style:{marginTop:"var(--spacing-2, 8px)"},children:[e.jsxDEV("label",{children:"Mô tả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:469,columnNumber:15},void 0),e.jsxDEV("textarea",{className:i.textarea,value:u.description,onChange:R=>c({...u,description:R.target.value}),placeholder:"Nhập mô tả địa bàn...",disabled:B,rows:4,style:{resize:"vertical",minHeight:"100px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:470,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:468,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:217,columnNumber:11},void 0),e.jsxDEV("div",{className:i.modalFooter,children:[e.jsxDEV("button",{type:"button",className:i.btnSecondary,onClick:s,children:B?"Đóng":"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:487,columnNumber:13},void 0),!B&&e.jsxDEV("button",{type:"submit",className:i.btnPrimary,disabled:z,children:[e.jsxDEV(oi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:492,columnNumber:17},void 0),z?"Đang lưu...":"Lưu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:491,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:486,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:216,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:197,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/components/LocalityModal.tsx",lineNumber:196,columnNumber:5},void 0)};function Se(n,s){return`${n}${String(s+1).padStart(4,"0")}`}function ui(){return new Date().toISOString().replace("T"," ").substring(0,19)}const qi=["Nguyễn","Trần","Lê","Phạm","Hoàng","Huỳnh","Phan","Vũ","Võ","Đặng"],pn=["Văn","Thị","Đức","Minh","Hữu","Thành","Quang","Đình","Công","Tuấn"],fn=["Anh","Bình","Cường","Dũng","Hùng","Khoa","Long","Nam","Quang","Sơn"],wi=["An","Bình","Cường","Dũng","Hùng","Khoa","Long","Nam","Quang","Sơn","Tuấn","Vinh","Đức","Minh","Thành"],Nn=["Công dân","Kiểm soát viên","Quản lý","Giám đốc","Nhân viên","Trưởng phòng","Phó phòng","Chuyên viên"],bn=["R001","R002","R003","R004","R005","R006","R007","R008"],Tn=["Chi cục QLTT Quận 1","Chi cục QLTT Quận 2","Chi cục QLTT Quận 3","Phòng Kế hoạch","Phòng Nghiệp vụ","Phòng Hành chính"],Vn=["U001","U002","U003","U004","U005","U006"],Gi=["Hà Nội","TP. Hồ Chí Minh","Đà Nẵng","Hải Phòng","Cần Thơ","An Giang","Bà Rịa - Vũng Tàu","Bắc Giang"],vn=["T001","T002","T003","T004","T005","T006","T007","T008"],VV=["Quận 1","Quận 2","Quận 3","Quận 4","Quận 5","Quận 6","Quận 7","Quận 8","Quận 9","Quận 10"],vV=["Phường 1","Phường 2","Phường 3","Phường 4","Phường 5","Phường 6","Phường 7","Phường 8"],xn=["department","team","group"],gn=["Đội Kiểm tra","Đội Giám sát","Phòng Nghiệp vụ","Phòng Kế hoạch","Tổ Chuyên môn","Nhóm Hỗ trợ"],hn=["Loại hình cơ sở","Hạng mục kiểm tra","Tiêu chí đánh giá","Mức độ rủi ro","Phân loại ngành nghề"],Di=["Nhà hàng","Quán ăn","Cửa hàng thực phẩm","Siêu thị","Chợ","Cơ sở sản xuất","Trung tâm thương mại"],En=["high","medium","low"],Hn=["Rủi ro cao","Rủi ro trung bình","Rủi ro thấp","An toàn thực phẩm","Vệ sinh môi trường","An toàn lao động"],ji=["An toàn thực phẩm","Vệ sinh môi trường","An toàn lao động","Phòng cháy chữa cháy","Chất lượng sản phẩm"],yi=["Tạo mới","Cập nhật","Xóa","Kiểm tra","Cảnh báo","Sự cố"],_n=["Khi có thay đổi","Hàng ngày","Hàng tuần","Khi có sự cố","Theo lịch"],Ln=["admin@example.com","manager@example.com","team@example.com","all@example.com"];function xV(n){const s=["active","locked","pending"];return Array.from({length:n},(r,u)=>{const c=qi[u%qi.length],T=pn[u%pn.length],t=fn[u%fn.length],p=wi[u%wi.length],V=`${c} ${T} ${t} ${p}`,L=`user${u+1}`;return{id:Se("U",u),username:L,fullName:V,email:`${L}@example.com`,phone:`0${Math.floor(Math.random()*9e8)+1e8}`,role:Nn[u%Nn.length],roleId:bn[u%bn.length],unit:Tn[u%Tn.length],unitId:Vn[u%Vn.length],territory:Gi[u%Gi.length],territoryId:vn[u%vn.length],status:s[u%s.length],lastLogin:u%3===0?ui():void 0,createdAt:ui(),createdBy:"admin"}})}function gV(n){const s=["active","inactive"],r=["Quản trị viên","Người dùng","Kiểm soát viên","Quản lý","Xem báo cáo","Nhập liệu","Xuất báo cáo","Phê duyệt"];return Array.from({length:n},(u,c)=>({id:Se("R",c),code:Se("R",c),name:`${r[c%r.length]} ${c>r.length?c+1:""}`.trim(),description:`Vai trò ${r[c%r.length]}`,userCount:Math.floor(Math.random()*50)+1,status:s[c%s.length],createdAt:ui()}))}function hV(n){const s=["province","district","ward"],r=["active","inactive"],u=[...VV,...vV,...Gi];return Array.from({length:n},(c,T)=>({id:Se("T",T),code:Se("T",T),name:u[T%u.length],level:s[T%s.length],parentId:T>0&&T%3===0?Se("T",T-1):void 0,status:r[T%r.length],userCount:Math.floor(Math.random()*100)+1}))}function EV(n){const s=["active","inactive"],r=qi.map(u=>`${u} Văn ${wi[Math.floor(Math.random()*wi.length)]}`);return Array.from({length:n},(u,c)=>({id:Se("T",c),code:Se("TEAM",c),name:`${gn[c%gn.length]} ${c+1}`,type:xn[c%xn.length],leader:r[c%r.length],memberCount:Math.floor(Math.random()*20)+1,parentId:c>0&&c%5===0?Se("T",c-1):void 0,status:s[c%s.length]}))}function HV(n){const s=["draft","pending","approved","rejected"],r=new Date,u=r.toISOString().split("T")[0];return Array.from({length:n},(c,T)=>({id:Se("C",T),code:Se("CAT",T),name:`${Di[T%Di.length]} ${T+1}`,type:hn[T%hn.length],order:T+1,effectiveFrom:u,effectiveTo:T%10===0?new Date(r.getTime()+365*24*60*60*1e3).toISOString().split("T")[0]:void 0,version:"v1.0",status:s[T%s.length],createdBy:"admin",createdAt:ui(),approvedBy:T%4===0?"admin":void 0,approvedAt:T%4===0?ui():void 0,description:`Mô tả cho danh mục ${Di[T%Di.length]}`}))}function _V(n){const s=["active","inactive"],u=new Date().toISOString().split("T")[0];return Array.from({length:n},(c,T)=>({id:Se("RI",T),code:Se("RISK",T),name:`${Hn[T%Hn.length]} ${T+1}`,type:En[T%En.length],description:`Mô tả chỉ báo rủi ro ${T+1}`,threshold:Math.floor(Math.random()*100)+1,status:s[T%s.length],effectiveFrom:u}))}function LV(n){const s=["active","inactive"];return Array.from({length:n},(r,u)=>({id:Se("CL",u),code:Se("CHK",u),name:`Checklist ${ji[u%ji.length]} ${u+1}`,topic:ji[u%ji.length],itemCount:Math.floor(Math.random()*50)+5,status:s[u%s.length],createdAt:ui(),description:`Mô tả checklist ${u+1}`}))}function DV(n){const s=["active","inactive"];return Array.from({length:n},(r,u)=>({id:Se("NR",u),name:`Quy tắc thông báo ${yi[u%yi.length]} ${u+1}`,event:yi[u%yi.length],condition:_n[u%_n.length],recipients:Ln[u%Ln.length],status:s[u%s.length],description:`Mô tả quy tắc thông báo ${u+1}`}))}const jV=[{id:"users",label:"Quản trị Người dùng & Phân quyền",icon:gi},{id:"categories",label:"Danh mục & Cấu hình",icon:ni},{id:"audit",label:"Audit – Giám sát – Tình trạng",icon:ii}],Dn={users:[{id:"user-list",label:"Quản lý người dùng",icon:gi},{id:"roles",label:"Vai trò",icon:Ze},{id:"permissions-matrix",label:"Ma trận quyền",icon:ps},{id:"territory",label:"Địa bàn & phạm vi",icon:ze},{id:"teams",label:"Đơn vị / Đội",icon:fs}],categories:[{id:"common-categories",label:"Danh mục dùng chung",icon:ni},{id:"risk-config",label:"Cấu hình chỉ báo rủi ro",icon:bi},{id:"checklist",label:"Checklist theo chuyên đề",icon:Wi},{id:"form-templates",label:"Thiết lập biểu mẫu",icon:We},{id:"notification-rules",label:"Quy tắc thông báo",icon:Cn}],audit:[{id:"export-center",label:"Trung tâm xuất dữ liệu",icon:ye},{id:"system-logs",label:"Nhật ký hệ thống",icon:We},{id:"data-changes",label:"Biến động dữ liệu",icon:ii},{id:"export-logs",label:"Nhật ký tải / xuất",icon:Pe},{id:"security-config",label:"Cấu hình bảo mật",icon:Ti},{id:"integration-status",label:"Trạng thái tích hợp",icon:us},{id:"system-monitoring",label:"Giám sát hệ thống",icon:Ji},{id:"system-status",label:"Trạng thái hệ thống",icon:ve}]},yV=xV(250),QV=gV(20),CV=hV(80),SV=EV(50),wV=HV(100),MV=_V(35),IV=LV(45),kV=DV(30),fi=n=>`${n}${Date.now()}${Math.random().toString(36).substr(2,9)}`,zi=()=>new Date().toISOString().slice(0,16).replace("T"," ");function AV(){const[n,s]=d.useState("users"),[r,u]=d.useState("user-list"),[c,T]=d.useState(!1),[t,p]=d.useState("add"),[V,L]=d.useState(null),Q=Qi.useRef(null),[E,x]=si("mappa_admin_users",yV);si("mappa_admin_roles",QV);const[f]=si("mappa_admin_territories",CV),[D,k]=si("mappa_admin_teams",SV),[I]=si("mappa_admin_categories",wV),[z,F]=si("mappa_admin_risks",MV),[U,O]=si("mappa_admin_checklists_v2",IV),[w,Z]=si("mappa_admin_notifications",kV),B=H=>{s(H),u(Dn[H][0].id)},R=(H,K)=>{p(H),L(K||null),T(!0)},S=()=>{T(!1),L(null)},ee=H=>{if(t==="add"){const K={id:fi("U"),username:H.username||"",fullName:H.fullName||"",email:H.email||"",phone:H.phone||"",role:H.role||"Cng dân",roleId:H.roleId||"R001",unit:H.unit||"N/A",unitId:H.unitId||"",territory:H.territory||"N/A",territoryId:H.territoryId||"",status:H.status||"pending",createdAt:zi(),createdBy:"admin"};x([...E,K]),m.success("Người dng đã được thêm thành công")}else t==="edit"&&V&&(x(E.map(K=>K.id===V.id?{...K,...H}:K)),m.success("Người dùng đã được cập nhật thành công"));S()},ne=()=>{V&&(x(E.filter(H=>H.id!==V.id)),m.success("Người dùng đã được xóa thành công")),S()},A=async H=>{try{const K=`https://${Ci}.supabase.co/functions/v1/make-server-e994bb5d`;if(t==="add"){const q=await fetch(`${K}/areas`,{method:"POST",headers:{Authorization:`Bearer ${Ni}`,"Content-Type":"application/json"},body:JSON.stringify({code:H.code||"",name:H.name||"",level:H.level||"PROVINCE",description:H.description||null,status:H.status!==void 0?H.status:1,parentId:H.parentId||null,managerId:H.managerId||null,provinceId:H.provinceId||null})});if(!q.ok){const ue=await q.json();throw new Error(ue.error||"Failed to create area")}m.success("Địa bàn đã được thêm thành công")}else if(t==="edit"&&V){const q=await fetch(`${K}/areas/${V.id}`,{method:"PUT",headers:{Authorization:`Bearer ${Ni}`,"Content-Type":"application/json"},body:JSON.stringify(H)});if(!q.ok){const ue=await q.json();throw new Error(ue.error||"Failed to update area")}m.success("Địa bàn đã được cập nhật thành công")}}catch(K){console.error("Error saving territory:",K),m.error(`Lỗi lưu dữ liệu: ${K.message}`)}S()},y=async()=>{if(V)try{const H=`https://${Ci}.supabase.co/functions/v1/make-server-e994bb5d`,K=await fetch(`${H}/areas/${V.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${Ni}`,"Content-Type":"application/json"}});if(!K.ok){const q=await K.json();throw new Error(q.error||"Failed to delete area")}m.success("Địa bàn đã được xóa thành công")}catch(H){console.error("Error deleting territory:",H),m.error(`Lỗi xóa dữ liệu: ${H.message}`)}S()},$=H=>{if(t==="add"){const K={id:fi("T"),code:H.code||"",name:H.name||"",type:H.type||"team",leader:H.leader||"",memberCount:0,status:H.status||"active"};k([...D,K]),m.success("Đơn vị / Đội đã được thêm thành công")}else t==="edit"&&V&&(k(D.map(K=>K.id===V.id?{...K,...H}:K)),m.success("Đơn vị / Đội đã được cập nhật thành công"));S()},M=()=>{V&&(k(D.filter(H=>H.id!==V.id)),m.success("Đơn vị / Đội đã được xóa thành công")),S()},v=H=>{if(t==="add"){const K={id:fi("RI"),code:H.code||"",name:H.name||"",type:H.type||"low",description:H.description||"",threshold:parseInt(H.threshold)||0,status:H.status||"active",effectiveFrom:H.effectiveFrom||zi().split(" ")[0]};F([...z,K]),m.success("Chỉ báo rủi ro đã được thêm thành công")}else t==="edit"&&V&&(F(z.map(K=>K.id===V.id?{...K,...H}:K)),m.success("Chỉ báo rủi ro đã được cập nhật thành công"));S()},N=()=>{V&&(F(z.filter(H=>H.id!==V.id)),m.success("Chỉ báo rủi ro đã được xóa thành công")),S()},g=H=>{if(t==="add"){const K={id:fi("CL"),code:H.code||"",name:H.name||"",topic:H.topic||"",itemCount:parseInt(H.itemCount)||0,status:H.status||"active",createdAt:zi(),description:H.description||"",formTemplateId:H.formTemplateId||null};O([...U,K]),m.success("Checklist đã được thêm thành công")}else t==="edit"&&V&&(O(U.map(K=>K.id===V.id?{...K,...H}:K)),m.success("Checklist đã được cập nhật thành công"));S()},o=()=>{V&&(O(U.filter(H=>H.id!==V.id)),m.success("Checklist đã được xóa thành công")),S()},a=H=>{if(t==="add"){const K={id:fi("NR"),name:H.name||"",event:H.event||"",condition:H.condition||"",recipients:H.recipients||"",status:H.status||"active",description:H.description||""};Z([...w,K]),m.success("Quy tắc thông báo đã được thêm thành công")}else t==="edit"&&V&&(Z(w.map(K=>K.id===V.id?{...K,...H}:K)),m.success("Quy tắc thông báo đã được cập nhật thành công"));S()},h=()=>{V&&(Z(w.filter(H=>H.id!==V.id)),m.success("Quy tắc thông báo đã được xóa thành công")),S()},b=H=>{t==="add"?m.info("Chức năng thêm biểu mẫu đang được phát triển"):t==="edit"&&V&&m.info("Chức năng sửa biểu mẫu đang được phát triển"),S()},l=()=>{V&&m.info("Chức năng xóa biểu mẫu đang được phát triển"),S()},j=H=>{switch(r){case"user-list":ee(H);break;case"territory":A(H);break;case"teams":$(H);break;case"risk-config":v(H);break;case"checklist":g(H);break;case"notification-rules":a(H);break;case"form-templates":b();break;default:S()}},_=()=>{switch(r){case"user-list":ne();break;case"territory":y();break;case"teams":M();break;case"risk-config":N();break;case"checklist":o();break;case"notification-rules":h();break;case"form-templates":l();break;default:S()}},X=()=>r==="user-list"?e.jsxDEV(va,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:693,columnNumber:46},this):r==="roles"?e.jsxDEV(ga,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:694,columnNumber:42},this):r==="permissions-matrix"?e.jsxDEV(ha,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:695,columnNumber:55},this):r==="territory"?e.jsxDEV(vt,{territories:f,onOpenModal:R,onRefreshReady:H=>{Q.current=H}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:697,columnNumber:7},this):r==="teams"?e.jsxDEV(bV,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:705,columnNumber:42},this):r==="common-categories"?e.jsxDEV(lV,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:708,columnNumber:54},this):r==="risk-config"?e.jsxDEV(aV,{indicators:z,onOpenModal:R},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:709,columnNumber:48},this):r==="checklist"?e.jsxDEV(xt,{checklists:U,onOpenModal:R},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:710,columnNumber:46},this):r==="form-templates"?e.jsxDEV(Ut,{onOpenModal:R},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:711,columnNumber:51},this):r==="notification-rules"?e.jsxDEV(Jt,{rules:w,onOpenModal:R},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:712,columnNumber:55},this):r==="export-center"?e.jsxDEV(Zo,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:715,columnNumber:50},this):r==="system-logs"?e.jsxDEV(mc,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:716,columnNumber:48},this):r==="data-changes"?e.jsxDEV(xm,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:717,columnNumber:49},this):r==="export-logs"?e.jsxDEV(qu,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:718,columnNumber:48},this):r==="security-config"?e.jsxDEV(Sp,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:719,columnNumber:52},this):r==="integration-status"?e.jsxDEV(Bf,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:720,columnNumber:55},this):r==="system-monitoring"?e.jsxDEV(JN,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:721,columnNumber:54},this):r==="system-status"?e.jsxDEV(Jb,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:722,columnNumber:50},this):e.jsxDEV("div",{className:i.placeholder,children:"Nội dung đang phát triển"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:724,columnNumber:12},this);return e.jsxDEV("div",{className:i.pageContainer,children:[e.jsxDEV("div",{className:i.breadcrumb,children:[e.jsxDEV("span",{children:"Trang chủ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:731,columnNumber:9},this),e.jsxDEV(Ce,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:732,columnNumber:9},this),e.jsxDEV("span",{className:i.active,children:"Quản trị"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:733,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:730,columnNumber:7},this),e.jsxDEV("div",{className:i.pageHeader,children:e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:i.pageTitle,children:"Quản trị"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:739,columnNumber:11},this),e.jsxDEV("p",{className:i.pageSubtitle,children:"Quản lý người dùng, phân quyền, danh mục, cấu hình và giám sát hệ thống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:740,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:738,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:737,columnNumber:7},this),e.jsxDEV("div",{className:i.mainTabs,children:jV.map(H=>{const K=H.icon;return e.jsxDEV("button",{className:`${i.mainTab} ${n===H.id?i.mainTabActive:""}`,onClick:()=>B(H.id),children:[e.jsxDEV(K,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:756,columnNumber:15},this),H.label]},H.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:751,columnNumber:13},this)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:747,columnNumber:7},this),e.jsxDEV("div",{className:i.contentContainer,children:[e.jsxDEV("div",{className:i.subTabs,children:Dn[n].map(H=>{const K=H.icon;return e.jsxDEV("button",{className:`${i.subTab} ${r===H.id?i.subTabActive:""}`,onClick:()=>u(H.id),children:[e.jsxDEV(K,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:775,columnNumber:17},this),H.label]},H.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:770,columnNumber:15},this)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:766,columnNumber:9},this),e.jsxDEV("div",{className:i.tabContent,children:X()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:783,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:764,columnNumber:7},this),c&&(()=>{if(r==="territory")return e.jsxDEV(TV,{mode:t==="add"?"add":t==="edit"?"edit":"view",data:V,onClose:S,onSave:()=>{Q.current&&Q.current(),S()}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:793,columnNumber:13},this);let H=V;return V&&t!=="add"&&(r==="user-list"&&V.id?H=E.find(K=>K.id===V.id)||V:r==="teams"&&V.id?H=D.find(K=>K.id===V.id)||V:r==="category-management"&&V.id?H=I.find(K=>K.id===V.id)||V:r==="risk-config"&&V.id?H=z.find(K=>K.id===V.id)||V:r==="checklist"&&V.id?H=U.find(K=>K.id===V.id)||V:r==="notification-rules"&&V.id&&(H=w.find(K=>K.id===V.id)||V)),e.jsxDEV(hl,{type:t,item:H,subTab:r,onClose:S,onSave:j,onDelete:_},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:827,columnNumber:11},this)})()]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/AdminPage.tsx",lineNumber:728,columnNumber:5},this)}const ov=Object.freeze(Object.defineProperty({__proto__:null,default:AV},Symbol.toStringTag,{value:"Module"})),RV="_filterBarContainer_1ex2h_1",PV="_filterBarContent_1ex2h_20",BV="_filtersGrid_1ex2h_29",zV="_filterItem_1ex2h_36",FV="_searchActionsRow_1ex2h_41",$V="_searchContainer_1ex2h_48",Xe={filterBarContainer:RV,filterBarContent:PV,filtersGrid:BV,filterItem:zV,searchActionsRow:FV,searchContainer:$V};function UV({customFilters:n,showSearch:s=!0,searchPlaceholder:r="Tìm kiếm...",onFilterChange:u,onSearchChange:c,onReset:T,showDefaultFilters:t=!0}){const[p,V]=d.useState({jurisdiction:"",topic:"",timeRange:"",status:""}),[L,Q]=d.useState(""),E=(k,I)=>{const z={...p,[k]:I};V(z),u==null||u(z)},x=k=>{const I=k.target.value;Q(I),c==null||c(I)},f=()=>{const k={jurisdiction:"",topic:"",timeRange:"",status:""};V(k),Q(""),T==null||T(),u==null||u(k),c==null||c("")},D=p.jurisdiction||p.topic||p.timeRange||p.status||L;return e.jsxDEV("div",{className:Xe.filterBarContainer,children:[e.jsxDEV("div",{className:Xe.filterBarIcon,children:e.jsxDEV(xi,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:80,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:79,columnNumber:7},this),e.jsxDEV("div",{className:Xe.filterBarContent,children:[e.jsxDEV("div",{className:Xe.filtersGrid,children:[t&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:Xe.filterItem,children:e.jsxDEV(Ei,{value:p.jurisdiction,onValueChange:k=>E("jurisdiction",k),children:[e.jsxDEV(Hi,{children:e.jsxDEV(_i,{placeholder:"Tất cả địa bàn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:95,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:94,columnNumber:19},this),e.jsxDEV(Li,{children:[e.jsxDEV(Ee,{value:"all",children:"Tất cả địa bàn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:98,columnNumber:21},this),e.jsxDEV(Ee,{value:"q1",children:"Quận 1"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:99,columnNumber:21},this),e.jsxDEV(Ee,{value:"q3",children:"Quận 3"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:100,columnNumber:21},this),e.jsxDEV(Ee,{value:"q5",children:"Quận 5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:101,columnNumber:21},this),e.jsxDEV(Ee,{value:"q10",children:"Quận 10"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:102,columnNumber:21},this),e.jsxDEV(Ee,{value:"binhthanh",children:"Bình Thạnh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:103,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:97,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:90,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:89,columnNumber:15},this),e.jsxDEV("div",{className:Xe.filterItem,children:e.jsxDEV(Ei,{value:p.topic,onValueChange:k=>E("topic",k),children:[e.jsxDEV(Hi,{children:e.jsxDEV(_i,{placeholder:"Tất cả chuyên đề"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:115,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:114,columnNumber:19},this),e.jsxDEV(Li,{children:[e.jsxDEV(Ee,{value:"all",children:"Tất cả chuyên đề"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:118,columnNumber:21},this),e.jsxDEV(Ee,{value:"food",children:"An toàn thực phẩm"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:119,columnNumber:21},this),e.jsxDEV(Ee,{value:"cosmetics",children:"Mỹ phẩm"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:120,columnNumber:21},this),e.jsxDEV(Ee,{value:"quality",children:"Chất lượng hàng hóa"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:121,columnNumber:21},this),e.jsxDEV(Ee,{value:"price",children:"Giá cả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:122,columnNumber:21},this),e.jsxDEV(Ee,{value:"fake",children:"Hàng giả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:123,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:117,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:110,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:109,columnNumber:15},this),e.jsxDEV("div",{className:Xe.filterItem,children:e.jsxDEV(Ei,{value:p.timeRange,onValueChange:k=>E("timeRange",k),children:[e.jsxDEV(Hi,{children:e.jsxDEV(_i,{placeholder:"Tất cả thời gian"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:135,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:134,columnNumber:19},this),e.jsxDEV(Li,{children:[e.jsxDEV(Ee,{value:"all",children:"Tất cả thời gian"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:138,columnNumber:21},this),e.jsxDEV(Ee,{value:"today",children:"Hôm nay"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:139,columnNumber:21},this),e.jsxDEV(Ee,{value:"week",children:"Tuần này"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:140,columnNumber:21},this),e.jsxDEV(Ee,{value:"month",children:"Tháng này"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:141,columnNumber:21},this),e.jsxDEV(Ee,{value:"quarter",children:"Quý này"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:142,columnNumber:21},this),e.jsxDEV(Ee,{value:"year",children:"Năm nay"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:143,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:137,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:130,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:129,columnNumber:15},this),e.jsxDEV("div",{className:Xe.filterItem,children:e.jsxDEV(Ei,{value:p.status,onValueChange:k=>E("status",k),children:[e.jsxDEV(Hi,{children:e.jsxDEV(_i,{placeholder:"Tất cả trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:155,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:154,columnNumber:19},this),e.jsxDEV(Li,{children:[e.jsxDEV(Ee,{value:"all",children:"Tất cả trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:158,columnNumber:21},this),e.jsxDEV(Ee,{value:"draft",children:"Nháp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:159,columnNumber:21},this),e.jsxDEV(Ee,{value:"pending",children:"Chờ xử lý"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:160,columnNumber:21},this),e.jsxDEV(Ee,{value:"active",children:"Đang hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:161,columnNumber:21},this),e.jsxDEV(Ee,{value:"completed",children:"Hoàn thành"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:162,columnNumber:21},this),e.jsxDEV(Ee,{value:"overdue",children:"Quá hạn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:163,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:157,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:150,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:149,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:87,columnNumber:13},this),n]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:85,columnNumber:9},this),e.jsxDEV("div",{className:Xe.searchActionsRow,children:[s&&e.jsxDEV("div",{className:Xe.searchContainer,children:e.jsxDEV(Ns,{placeholder:r,value:L,onChange:x},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:179,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:178,columnNumber:13},this),D&&e.jsxDEV(di,{variant:"ghost",size:"sm",onClick:f,className:"gap-2",children:[e.jsxDEV(yn,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:190,columnNumber:15},this),"Đặt lại"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:189,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:175,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:83,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/patterns/ModernFilterBar.tsx",lineNumber:78,columnNumber:5},this)}function nn({title:n,description:s,breadcrumbs:r}){return e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV(On,{breadcrumbs:r||[{label:"Trang chủ",href:"/"},{label:n}],title:n,actions:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(di,{variant:"outline",children:"Xuất dữ liệu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:22,columnNumber:13},this),e.jsxDEV(di,{children:"Tạo mới"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:23,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:21,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:17,columnNumber:7},this),e.jsxDEV("div",{className:"px-6 pt-4",children:e.jsxDEV(UV,{showDefaultFilters:!0,showSearch:!0,searchPlaceholder:`Tìm kiếm ${n.toLowerCase()}...`},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:29,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:28,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 p-6",children:e.jsxDEV(Wn,{children:e.jsxDEV(Jn,{className:"flex flex-col items-center justify-center py-20",children:[e.jsxDEV(wn,{className:"h-20 w-20 text-muted-foreground mb-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:39,columnNumber:13},this),e.jsxDEV("h3",{className:"text-xl font-semibold mb-2",children:n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:40,columnNumber:13},this),e.jsxDEV("p",{className:"text-muted-foreground text-center max-w-md",children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:41,columnNumber:13},this),e.jsxDEV(di,{className:"mt-6",children:"Bắt đầu sử dụng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:44,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:38,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:37,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:36,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/PlaceholderPage.tsx",lineNumber:16,columnNumber:5},this)}function qV(){return e.jsxDEV(nn,{title:"Quản lý người dùng",description:"Quản lý danh sách người dùng, phân quyền và cấu hình truy cập hệ thống.",breadcrumbs:[{label:"Trang chủ",href:"/"},{label:"Quản trị",href:"/admin"},{label:"Người dùng"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/UserList.tsx",lineNumber:7,columnNumber:5},this)}const dv=Object.freeze(Object.defineProperty({__proto__:null,default:qV},Symbol.toStringTag,{value:"Module"}));function GV(){return e.jsxDEV(nn,{title:"Quản lý vai trò",description:"Quản lý các vai trò và quyền hạn trong hệ thống MAPPA Portal.",breadcrumbs:[{label:"Trang chủ",href:"/"},{label:"Quản trị",href:"/admin"},{label:"Vai trò"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/RoleList.tsx",lineNumber:7,columnNumber:5},this)}const cv=Object.freeze(Object.defineProperty({__proto__:null,default:GV},Symbol.toStringTag,{value:"Module"}));function OV(){return e.jsxDEV(nn,{title:"Cấu hình hệ thống",description:"Cấu hình các thông số hệ thống, danh mục dữ liệu và tùy chọn chung.",breadcrumbs:[{label:"Trang chủ",href:"/"},{label:"Quản trị",href:"/admin"},{label:"Cấu hình"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/SystemSettings.tsx",lineNumber:7,columnNumber:5},this)}const mv=Object.freeze(Object.defineProperty({__proto__:null,default:OV},Symbol.toStringTag,{value:"Module"})),WV="_errorPage_ofqwj_1",JV="_errorCard_ofqwj_19",XV="_errorIcon_ofqwj_31",KV="_error404_ofqwj_61",ZV="_errorCode_ofqwj_85",YV="_errorTitle_ofqwj_103",ev="_errorDescription_ofqwj_119",iv="_errorActions_ofqwj_135",ai={errorPage:WV,errorCard:JV,errorIcon:XV,error404:KV,errorCode:ZV,errorTitle:YV,errorDescription:ev,errorActions:iv};function nv(){const n=Gn();return e.jsxDEV("div",{className:ai.errorPage,children:e.jsxDEV("div",{className:ai.errorCard,children:[e.jsxDEV("div",{className:`${ai.errorIcon} ${ai.error404}`,children:e.jsxDEV(wn,{size:64,color:"white"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/Error404.tsx",lineNumber:14,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/Error404.tsx",lineNumber:13,columnNumber:9},this),e.jsxDEV("h1",{className:ai.errorCode,children:"404"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/Error404.tsx",lineNumber:16,columnNumber:9},this),e.jsxDEV("h2",{className:ai.errorTitle,children:"Không tìm thấy trang"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/Error404.tsx",lineNumber:17,columnNumber:9},this),e.jsxDEV("p",{className:ai.errorDescription,children:"Trang bạn đang tìm kiếm không tồn tại hoặc đã bị di chuyển. Vui lòng kiểm tra lại đường dẫn."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/Error404.tsx",lineNumber:18,columnNumber:9},this),e.jsxDEV("div",{className:ai.errorActions,children:[e.jsxDEV(di,{onClick:()=>n(-1),variant:"ghost",children:"Quay lại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/Error404.tsx",lineNumber:23,columnNumber:11},this),e.jsxDEV(di,{onClick:()=>n("/overview"),children:"Về Tổng quan"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/Error404.tsx",lineNumber:26,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/Error404.tsx",lineNumber:22,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/Error404.tsx",lineNumber:12,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/system/Error404.tsx",lineNumber:11,columnNumber:5},this)}const uv=Object.freeze(Object.defineProperty({__proto__:null,default:nv},Symbol.toStringTag,{value:"Module"}));export{ov as A,uv as E,Ts as I,cv as R,mv as S,dv as U,si as u};
