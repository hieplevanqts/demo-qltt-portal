import{j as e,r as m,aB as C,bz as $e,bA as ct,bB as ut,bC as mt,bD as dt,k as Ze,e as ht}from"./vendor-Cja35lIC.js";import{D as be,m as Ve,n as ge,o as Te,p as fe,L as j,X as He,B as A,I as R,q as ve,Y as Di,Z as Je,C as Nt,c as ze,$ as Hi,g as ki,h as Li,i as Qi,P as pt,k as pi,l as vi,a0 as vt}from"./system-admin-I2_aTVlW.js";import{S as Se,a as Ce,b as we,c as Ae,d as W,l as Pe,e as Ai,m as Re,B as bt,D as Vt,T as gt,A as Tt,C as ie}from"./evidence-xKqsT-wX.js";import{g as de,ap as Pi,N as Ii,ag as he,j as ei,T as ke,X as ae,Q as pe,Z as ft,w as ui,aw as Bi,ak as qe,a9 as ii,n as mi,U as ci,J as Ti,k as xt,o as ji,bj as bi,c0 as Fi,ad as Ui,a5 as _i,O as Ri,a4 as Mi,al as Et,v as Dt,E as Ht,at as yi,a8 as kt,x as Lt,b2 as Qt,a$ as jt,a_ as _t,c1 as yt}from"./icons-BAlVBlw-.js";import{C as St}from"./ConfirmDialog-tcdRFPXk.js";import{u as Ct,c as wt,b as At}from"./storesApi-DSWh-Upg.js";import{b as Pt,g as It}from"./locationsApi-DFkHd2yk.js";import{M as Bt}from"./MapLocationPicker-B44smMKc.js";import{N as Vi}from"./index-B9NIvV4W.js";import{addStore as Ft,mockStores as Si}from"./mockStores-DistbSc0.js";import{I as Ut}from"./admin-legacy-BpTuoz7B.js";import{r as Rt,u as oi,e as Mt}from"./docs-CwoUdLMw.js";import{e as qt,h as $t}from"./mockComplaints-CI6iyxaE.js";import"./leaflet-fbicKXUd.js";import"./alert-dialog-obvgVbI0.js";import"./plans-CUEgwpG0.js";import"./todolist-Bm5pI06f.js";import"./kpi-pwr7av2Z.js";const zt="_statusBadge_l0oc4_1",Ot="_icon_l0oc4_23",Gt="_pending_l0oc4_37",Wt="_active_l0oc4_49",Xt="_underInspection_l0oc4_61",Kt="_suspended_l0oc4_73",Yt="_rejected_l0oc4_85",Jt="_closed_l0oc4_97",gi={statusBadge:zt,icon:Ot,pending:Gt,active:Wt,underInspection:Xt,suspended:Kt,rejected:Yt,closed:Jt},Zt={pending:{label:"Chờ xác minh",icon:ei,variant:"pending",allowedActions:["verify","edit","delete"]},active:{label:"Đang hoạt động",icon:he,variant:"active",allowedActions:["view","edit","assignRisk","inspect","suspend"]},underInspection:{label:"Đang xử lý kiểm tra",icon:Ii,variant:"underInspection",allowedActions:["view","viewHistory"]},suspended:{label:"Tạm ngưng hoạt động",icon:Pi,variant:"suspended",allowedActions:["view","resume","close"]},rejected:{label:"Từ chối phê duyệt",icon:de,variant:"rejected",allowedActions:["verify","edit","delete"]},closed:{label:"Ngừng hoạt động",icon:de,variant:"closed",allowedActions:["view","viewHistory"]}};function fi({status:s,showIcon:n=!0}){const l=Zt[s],v=l.icon;return e.jsxDEV("span",{className:`${gi.statusBadge} ${gi[l.variant]}`,children:[n&&e.jsxDEV(v,{className:gi.icon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/FacilityStatusBadge.tsx",lineNumber:80,columnNumber:20},this),l.label]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/FacilityStatusBadge.tsx",lineNumber:79,columnNumber:5},this)}function el({open:s,onOpenChange:n,storeName:l,onConfirm:v}){const[d,r]=m.useState("medium"),[N,p]=m.useState(""),[h,u]=m.useState(""),V=()=>{N.trim()&&(v({level:d,reason:N,note:h}),r("medium"),p(""),u(""),n(!1))},o=()=>{r("medium"),p(""),u(""),n(!1)};return e.jsxDEV(be,{open:s,onOpenChange:n,children:e.jsxDEV(Ve,{className:"sm:max-w-[500px]",children:[e.jsxDEV(ge,{children:e.jsxDEV("div",{className:"flex items-start justify-between w-full",children:[e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-yellow-500/10",children:e.jsxDEV(ke,{className:"h-5 w-5 text-yellow-600"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:67,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:66,columnNumber:15},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV(Te,{children:"Gắn rủi ro"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:70,columnNumber:17},this),e.jsxDEV(fe,{className:"mt-1",children:["Đánh dấu mức độ rủi ro cho cơ sở: ",e.jsxDEV("strong",{children:l},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:72,columnNumber:53},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:71,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:69,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:65,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>n(!1),className:"rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100",children:e.jsxDEV(ae,{className:"h-5 w-5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:80,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:76,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:64,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:63,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-4 py-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"risk-level",children:["Mức độ rủi ro ",e.jsxDEV("span",{className:"text-destructive",children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:88,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:87,columnNumber:13},this),e.jsxDEV(Se,{value:d,onValueChange:a=>r(a),children:[e.jsxDEV(Ce,{id:"risk-level",children:e.jsxDEV(we,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:92,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:91,columnNumber:15},this),e.jsxDEV(Ae,{children:[e.jsxDEV(W,{value:"low",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"h-2 w-2 rounded-full bg-green-500"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:97,columnNumber:21},this),"Thấp"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:96,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:95,columnNumber:17},this),e.jsxDEV(W,{value:"medium",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"h-2 w-2 rounded-full bg-yellow-500"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:103,columnNumber:21},this),"Trung bình"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:102,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:101,columnNumber:17},this),e.jsxDEV(W,{value:"high",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"h-2 w-2 rounded-full bg-red-500"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:109,columnNumber:21},this),"Cao"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:108,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:107,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:94,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:86,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"reason",children:["Lý do ",e.jsxDEV("span",{className:"text-destructive",children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:119,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:118,columnNumber:13},this),e.jsxDEV(Se,{value:N,onValueChange:p,children:[e.jsxDEV(Ce,{id:"reason",children:e.jsxDEV(we,{placeholder:"Chọn lý do"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:123,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:122,columnNumber:15},this),e.jsxDEV(Ae,{children:[e.jsxDEV(W,{value:"Phát hiện vi phạm an toàn thực phẩm",children:"Phát hiện vi phạm an toàn thực phẩm"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:126,columnNumber:17},this),e.jsxDEV(W,{value:"Hồ sơ pháp lý không đầy đủ",children:"Hồ sơ pháp lý không đầy đủ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:129,columnNumber:17},this),e.jsxDEV(W,{value:"Điều kiện vệ sinh kém",children:"Điều kiện vệ sinh kém"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:132,columnNumber:17},this),e.jsxDEV(W,{value:"Nguồn gốc xuất xứ không rõ ràng",children:"Nguồn gốc xuất xứ không rõ ràng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:135,columnNumber:17},this),e.jsxDEV(W,{value:"Khiếu nại từ người tiêu dùng",children:"Khiếu nại từ người tiêu dùng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:138,columnNumber:17},this),e.jsxDEV(W,{value:"Khác",children:"Khác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:141,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:125,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:121,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:117,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"note",children:"Ghi chú"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:147,columnNumber:13},this),e.jsxDEV(Pe,{id:"note",value:h,onChange:a=>u(a.target.value),placeholder:"Nhập thông tin bổ sung (nếu có)...",rows:3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:148,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:146,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:85,columnNumber:9},this),e.jsxDEV(He,{children:[e.jsxDEV(A,{variant:"outline",onClick:o,children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:159,columnNumber:11},this),e.jsxDEV(A,{onClick:V,disabled:!N.trim(),children:"Xác nhận"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:162,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:158,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:62,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/RiskDialog.tsx",lineNumber:61,columnNumber:5},this)}function il({open:s,onOpenChange:n,store:l,onConfirm:v,hasPermission:d=!0,onApprove:r,onReject:N}){const[p,h]=m.useState("form"),[u,V]=m.useState(!1),[o,a]=m.useState({name:"",phone:"",email:"",notes:"",tags:[],ownerName:"",ownerPhone:"",businessPhone:"",businessEmail:"",website:"",ownerPhone2:"",ownerBirthYear:void 0,ownerIdNumber:"",ownerEmail:""}),[E,B]=m.useState(""),[f,T]=m.useState(""),[D,Q]=m.useState({});m.useEffect(()=>{s&&l&&(a({name:l.name,phone:l.phone||"",email:l.email||"",notes:l.notes||"",tags:l.tags||[],ownerName:l.ownerName||"",ownerPhone:l.ownerPhone||"",businessPhone:l.businessPhone||"",businessEmail:l.businessEmail||"",website:l.website||"",ownerPhone2:l.ownerPhone2||"",ownerBirthYear:l.ownerBirthYear,ownerIdNumber:l.ownerIdNumber||"",ownerEmail:l.ownerEmail||""}),B(""),T(""),Q({}),h("form"))},[l,s]);const _=(()=>{if(!l)return[];const b=[];return o.name!==l.name&&b.push("Tên cơ sở"),o.phone!==(l.phone||"")&&b.push("Số điện thoại"),o.email!==(l.email||"")&&b.push("Email"),o.notes!==(l.notes||"")&&b.push("Ghi chú"),JSON.stringify(o.tags)!==JSON.stringify(l.tags||[])&&b.push("Tags"),b})(),q=_.length>0,k=()=>{const b={};return o.name.trim()||(b.name="Tên cơ sở không được để trống"),o.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)&&(b.email="Email không hợp lệ"),o.phone&&!/^(0|\+84)[0-9]{9,10}$/.test(o.phone.replace(/\s/g,""))&&(b.phone="Số điện thoại không hợp lệ"),Q(b),Object.keys(b).length===0},te=()=>{const b={};return E.trim()?E.trim().length<10&&(b.changeReason="Lý do chỉnh sửa phải ít nhất 10 ký tự"):b.changeReason="Vui lòng nhập lý do chỉnh sửa",Q(b),Object.keys(b).length===0},Oe=()=>{if(k()){if(!q){Q({form:"Không có thay đổi nào để lưu"});return}h("reason")}},Ie=async()=>{if(te()){V(!0);try{if(l!=null&&l.merchantId){const b={p_business_name:o.name,p_owner_name:o.ownerName,p_owner_phone:o.ownerPhone,p_business_phone:o.businessPhone,p_business_email:o.businessEmail,p_website:o.website,p_owner_phone_2:o.ownerPhone2,p_owner_birth_year:o.ownerBirthYear,p_owner_identity_no:o.ownerIdNumber,p_owner_email:o.ownerEmail,p_note:o.notes};await Ct(l.merchantId,b),C.success("Cập nhật cơ sở thành công")}v({...o,changeReason:E}),V(!1),n(!1)}catch(b){console.error("Error updating merchant:",b),C.error("Lỗi khi cập nhật cơ sở: "+b.message),V(!1)}}},le=()=>{q&&p==="form"?confirm("Bạn có chắc muốn hủy? Các thay đổi chưa lưu sẽ bị mất.")&&n(!1):n(!1)},M=()=>{h("form"),Q({})},xe=()=>{const b=f.trim();b&&!o.tags.includes(b)&&(a({...o,tags:[...o.tags,b]}),T(""))},Ne=b=>{a({...o,tags:o.tags.filter(Ee=>Ee!==b)})},Ge=b=>{b.key==="Enter"&&(b.preventDefault(),xe())};return d?e.jsxDEV(be,{open:s,onOpenChange:n,children:e.jsxDEV(Ve,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxDEV(ge,{children:e.jsxDEV("div",{className:"flex items-start justify-between w-full",children:[e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary/10",children:p==="form"?e.jsxDEV(ft,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:333,columnNumber:19},this):e.jsxDEV(ei,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:335,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:331,columnNumber:15},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV(Te,{children:p==="form"?"Chỉnh sửa nhanh":"Xác nhận thay đổi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:339,columnNumber:17},this),e.jsxDEV(fe,{className:"mt-1",children:p==="form"?e.jsxDEV(e.Fragment,{children:["Cập nhật thông tin cơ bản: ",e.jsxDEV("strong",{children:l==null?void 0:l.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:345,columnNumber:50},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:344,columnNumber:21},this):"Vui lòng nhập lý do chỉnh sửa trước khi gửi phê duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:342,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:338,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:330,columnNumber:13},this),e.jsxDEV("button",{onClick:le,className:"rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100",children:e.jsxDEV(ae,{className:"h-5 w-5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:357,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:353,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:329,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:328,columnNumber:9},this),p==="form"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex gap-3 p-3 rounded-lg bg-blue-50 border border-blue-200",children:[e.jsxDEV(pe,{className:"h-5 w-5 text-blue-600 shrink-0 mt-0.5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:366,columnNumber:15},this),e.jsxDEV("div",{className:"flex-1 text-sm",children:[e.jsxDEV("p",{className:"font-medium text-blue-900 mb-1",children:"Chỉnh sửa nhanh - Cần phê duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:368,columnNumber:17},this),e.jsxDEV("p",{className:"text-blue-700",children:["Các thay đổi sẽ được gửi đến quản lý phê duyệt và chỉ có hiệu lực sau khi được duyệt. Để chỉnh sửa địa chỉ, tọa độ hoặc loại hình, vui lòng sử dụng"," ",e.jsxDEV("strong",{children:"Chỉnh sửa đầy đủ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:372,columnNumber:19},this),"."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:369,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:367,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:365,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-4 py-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"name",children:["Tên cơ sở ",e.jsxDEV("span",{className:"text-destructive",children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:382,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:381,columnNumber:17},this),e.jsxDEV(R,{id:"name",value:o.name,onChange:b=>a({...o,name:b.target.value}),placeholder:"Nhập tên cơ sở"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:384,columnNumber:17},this),D.name&&e.jsxDEV("p",{className:"text-sm text-destructive",children:D.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:390,columnNumber:33},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:380,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"phone",children:"Số điện thoại chủ hộ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:396,columnNumber:19},this),e.jsxDEV(R,{id:"phone",value:o.phone,onChange:b=>a({...o,phone:b.target.value}),placeholder:"0123456789"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:397,columnNumber:19},this),D.phone&&e.jsxDEV("p",{className:"text-sm text-destructive",children:D.phone},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:403,columnNumber:36},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:395,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"business-phone",children:"Số điện thoại cơ sở"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:407,columnNumber:19},this),e.jsxDEV(R,{id:"business-phone",value:o.businessPhone,onChange:b=>a({...o,businessPhone:b.target.value}),placeholder:"028xxxxxxxx"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:408,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:406,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:394,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"business-email",children:"Email cơ sở"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:420,columnNumber:19},this),e.jsxDEV(R,{id:"business-email",type:"email",value:o.businessEmail,onChange:b=>a({...o,businessEmail:b.target.value}),placeholder:"example@email.com"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:421,columnNumber:19},this),D.email&&e.jsxDEV("p",{className:"text-sm text-destructive",children:D.email},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:428,columnNumber:36},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:419,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"owner-email",children:"Email chủ hộ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:432,columnNumber:19},this),e.jsxDEV(R,{id:"owner-email",type:"email",value:o.ownerEmail,onChange:b=>a({...o,ownerEmail:b.target.value}),placeholder:"owner@email.com"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:433,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:431,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:418,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-3 pt-2 border-t border-border",children:[e.jsxDEV("h4",{className:"text-sm font-medium",children:"Thông tin chủ hộ kinh doanh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:445,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"owner-name",children:"Tên chủ hộ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:449,columnNumber:21},this),e.jsxDEV(R,{id:"owner-name",value:o.ownerName,onChange:b=>a({...o,ownerName:b.target.value}),placeholder:"Nguyễn Văn A"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:450,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:448,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"owner-birth-year",children:"Năm sinh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:459,columnNumber:21},this),e.jsxDEV(R,{id:"owner-birth-year",type:"number",value:o.ownerBirthYear||"",onChange:b=>a({...o,ownerBirthYear:b.target.value?parseInt(b.target.value):void 0}),placeholder:"1990"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:460,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:458,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:447,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"owner-phone2",children:"Số điện thoại thứ 2"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:472,columnNumber:21},this),e.jsxDEV(R,{id:"owner-phone2",value:o.ownerPhone2,onChange:b=>a({...o,ownerPhone2:b.target.value}),placeholder:"0987654321"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:473,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:471,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"owner-id",children:"CMND/CCCD"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:482,columnNumber:21},this),e.jsxDEV(R,{id:"owner-id",value:o.ownerIdNumber,onChange:b=>a({...o,ownerIdNumber:b.target.value}),placeholder:"079123456789"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:483,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:481,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:470,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:444,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"website",children:"Website"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:495,columnNumber:17},this),e.jsxDEV(R,{id:"website",value:o.website,onChange:b=>a({...o,website:b.target.value}),placeholder:"https://example.com"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:496,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:494,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"tag-input",children:"Tags"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:506,columnNumber:17},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(R,{id:"tag-input",value:f,onChange:b=>T(b.target.value),onKeyPress:Ge,placeholder:"Nhập tag và Enter"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:508,columnNumber:19},this),e.jsxDEV(A,{type:"button",variant:"outline",onClick:xe,children:"Thêm"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:515,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:507,columnNumber:17},this),o.tags.length>0&&e.jsxDEV("div",{className:"flex flex-wrap gap-2 mt-2",children:o.tags.map(b=>e.jsxDEV(ve,{variant:"secondary",className:"gap-1",children:[b,e.jsxDEV("button",{type:"button",onClick:()=>Ne(b),className:"ml-1 hover:text-destructive",children:e.jsxDEV(ae,{className:"h-3 w-3"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:529,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:524,columnNumber:25},this)]},b,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:522,columnNumber:23},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:520,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:505,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"notes",children:"Ghi chú"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:539,columnNumber:17},this),e.jsxDEV(Pe,{id:"notes",className:"border border-gray-300",value:o.notes,onChange:b=>a({...o,notes:b.target.value}),placeholder:"Nhập ghi chú về cơ sở...",rows:3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:540,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:538,columnNumber:17},this),e.jsxDEV("div",{className:"pt-4 border-t border-border space-y-3",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-muted-foreground",children:"Thông tin tham khảo (không thể chỉnh sửa nhanh)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:552,columnNumber:17},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV(j,{className:"text-xs text-muted-foreground",children:"Loại hình"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:558,columnNumber:21},this),e.jsxDEV("div",{className:"px-3 py-2 rounded-md bg-muted text-sm",children:l==null?void 0:l.type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:559,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:557,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV(j,{className:"text-xs text-muted-foreground",children:"Địa bàn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:563,columnNumber:21},this),e.jsxDEV("div",{className:"px-3 py-2 rounded-md bg-muted text-sm",children:l==null?void 0:l.jurisdiction},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:564,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:562,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:556,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV(j,{className:"text-xs text-muted-foreground",children:"Địa chỉ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:571,columnNumber:19},this),e.jsxDEV("div",{className:"px-3 py-2 rounded-md bg-muted text-sm",children:l==null?void 0:l.address},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:572,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:570,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:551,columnNumber:15},this),D.form&&e.jsxDEV("div",{className:"flex gap-2 p-3 rounded-md bg-destructive/10 border border-destructive",children:[e.jsxDEV(pe,{className:"h-4 w-4 text-destructive shrink-0 mt-0.5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:578,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-destructive",children:D.form},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:579,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:577,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:378,columnNumber:13},this),e.jsxDEV(He,{children:[e.jsxDEV(A,{variant:"outline",onClick:le,children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:585,columnNumber:15},this),((l==null?void 0:l.status)==="pending"||(l==null?void 0:l.status)==="rejected")&&r&&N&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(A,{variant:"destructive",onClick:()=>{l&&(N(l.id),n(!1))},children:[e.jsxDEV(de,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:599,columnNumber:21},this),"Từ chối"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:590,columnNumber:19},this),e.jsxDEV(A,{onClick:()=>{l&&(r(l.id),n(!1))},children:[e.jsxDEV(he,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:610,columnNumber:21},this),"Phê duyệt"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:602,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:589,columnNumber:17},this),(l==null?void 0:l.status)!=="pending"&&(l==null?void 0:l.status)!=="rejected"&&e.jsxDEV(A,{onClick:Oe,disabled:!q,children:["Tiếp tục",q&&e.jsxDEV(ve,{variant:"secondary",className:"ml-2",children:_.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:619,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:616,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:584,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:363,columnNumber:11},this),p==="reason"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"space-y-3 py-4",children:[e.jsxDEV("div",{className:"flex gap-3 p-3 rounded-lg bg-amber-50 border border-amber-200",children:[e.jsxDEV(pe,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:634,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1 text-sm",children:[e.jsxDEV("p",{className:"font-medium text-amber-900 mb-1",children:["Tóm tắt thay đổi (",_.length," trường)"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:636,columnNumber:19},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2 mt-2",children:_.map(b=>e.jsxDEV(ve,{variant:"outline",className:"bg-white",children:[e.jsxDEV(ui,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:642,columnNumber:25},this),b]},b,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:641,columnNumber:23},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:639,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:635,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:633,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"change-reason",children:["Lý do chỉnh sửa ",e.jsxDEV("span",{className:"text-destructive",children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:653,columnNumber:35},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:652,columnNumber:17},this),e.jsxDEV(Pe,{id:"change-reason",value:E,onChange:b=>B(b.target.value),placeholder:"VD: Cập nhật thông tin liên hệ mới của chủ cơ sở, thêm tags phân loại, cập nhật ghi chú sau thanh tra...",rows:4,autoFocus:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:655,columnNumber:17},this),D.changeReason&&e.jsxDEV("p",{className:"text-sm text-destructive",children:D.changeReason},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:664,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Lý do chỉnh sửa sẽ được ghi lại trong audit log và hiển thị trong yêu cầu phê duyệt."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:666,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:651,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-3 p-3 rounded-lg bg-blue-50 border border-blue-200",children:[e.jsxDEV(ei,{className:"h-5 w-5 text-blue-600 shrink-0 mt-0.5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:673,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1 text-sm",children:[e.jsxDEV("p",{className:"font-medium text-blue-900 mb-1",children:"Quy trình phê duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:675,columnNumber:19},this),e.jsxDEV("p",{className:"text-blue-700",children:["Thay đổi sẽ được gửi đến quản lý để phê duyệt. Trong thời gian chờ duyệt, dữ liệu cũ vẫn được hiển thị và cơ sở sẽ có badge"," ",e.jsxDEV("span",{className:"font-semibold",children:'"Đang chờ phê duyệt"'},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:679,columnNumber:21},this),"."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:676,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:674,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:672,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:632,columnNumber:13},this),e.jsxDEV(He,{children:[e.jsxDEV(A,{variant:"outline",onClick:M,disabled:u,children:"Quay lại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:686,columnNumber:15},this),e.jsxDEV(A,{onClick:Ie,disabled:u,children:u?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"mr-2",children:"Đang gửi..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:692,columnNumber:21},this),e.jsxDEV("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:693,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:691,columnNumber:19},this):"Gửi phê duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:689,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:685,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:630,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:327,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:326,columnNumber:5},this):e.jsxDEV(be,{open:s,onOpenChange:n,children:e.jsxDEV(Ve,{className:"sm:max-w-[500px]",children:[e.jsxDEV(ge,{children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-destructive/10",children:e.jsxDEV(pe,{className:"h-5 w-5 text-destructive"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:307,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:306,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV(Te,{children:"Không có quyền truy cập"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:310,columnNumber:17},this),e.jsxDEV(fe,{className:"mt-1",children:"Bạn không có quyền chỉnh sửa thông tin cơ sở này."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:311,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:309,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:305,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:304,columnNumber:11},this),e.jsxDEV(He,{children:e.jsxDEV(A,{onClick:le,children:"Đóng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:318,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:317,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:303,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/QuickEditDialog.tsx",lineNumber:302,columnNumber:7},this)}function tl({open:s,onOpenChange:n,totalRecords:l=0,selectedCount:v=0,onExport:d}){const[r,N]=m.useState("xlsx"),[p,h]=m.useState("all"),[u,V]=m.useState(!0),o=()=>{d==null||d({format:r,scope:p,includeHeaders:u,columns:["name","address","type","jurisdiction","status"]}),n(!1)};return e.jsxDEV(be,{open:s,onOpenChange:n,children:e.jsxDEV(Ve,{className:"sm:max-w-[500px]",children:[e.jsxDEV(ge,{children:e.jsxDEV("div",{className:"flex items-start justify-between w-full",children:[e.jsxDEV("div",{children:[e.jsxDEV(Te,{children:"Xuất dữ liệu cơ sở"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:58,columnNumber:15},this),e.jsxDEV(fe,{children:"Chọn định dạng và phạm vi dữ liệu cần xuất"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:59,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:57,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>n(!1),className:"rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100",children:e.jsxDEV(ae,{className:"h-5 w-5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:67,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:63,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:56,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:55,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(j,{className:"text-sm font-medium",children:"Định dạng file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:75,columnNumber:13},this),e.jsxDEV(Di,{value:r,onValueChange:a=>N(a),children:[e.jsxDEV("div",{className:"flex items-center space-x-2 border rounded-lg p-3 hover:bg-muted/50 cursor-pointer",children:[e.jsxDEV(Je,{value:"xlsx",id:"xlsx"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:78,columnNumber:17},this),e.jsxDEV(j,{htmlFor:"xlsx",className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsxDEV(Bi,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:80,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium",children:"Excel (.xlsx)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:82,columnNumber:21},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Định dạng bảng tính, hỗ trợ formatting"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:83,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:81,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:79,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:77,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center space-x-2 border rounded-lg p-3 hover:bg-muted/50 cursor-pointer",children:[e.jsxDEV(Je,{value:"csv",id:"csv"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:90,columnNumber:17},this),e.jsxDEV(j,{htmlFor:"csv",className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsxDEV(qe,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:92,columnNumber:19},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium",children:"CSV (.csv)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:94,columnNumber:21},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Dữ liệu thuần, dễ import vào hệ thống khác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:95,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:93,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:91,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:89,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:76,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:74,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(j,{className:"text-sm font-medium",children:"Phạm vi xuất"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:106,columnNumber:13},this),e.jsxDEV(Di,{value:p,onValueChange:a=>h(a),children:[e.jsxDEV("div",{className:"flex items-center space-x-2 border rounded-lg p-3 hover:bg-muted/50 cursor-pointer",children:[e.jsxDEV(Je,{value:"all",id:"all"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:109,columnNumber:17},this),e.jsxDEV(j,{htmlFor:"all",className:"cursor-pointer flex-1",children:[e.jsxDEV("div",{className:"text-sm font-medium",children:["Tất cả (",l," bản ghi)"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:111,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Xuất toàn bộ dữ liệu trong hệ thống"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:112,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:110,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:108,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center space-x-2 border rounded-lg p-3 hover:bg-muted/50 cursor-pointer",children:[e.jsxDEV(Je,{value:"filtered",id:"filtered"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:118,columnNumber:17},this),e.jsxDEV(j,{htmlFor:"filtered",className:"cursor-pointer flex-1",children:[e.jsxDEV("div",{className:"text-sm font-medium",children:"Dữ liệu đang lọc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:120,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Xuất các bản ghi đang hiển thị sau khi lọc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:121,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:119,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:117,columnNumber:15},this),v>0&&e.jsxDEV("div",{className:"flex items-center space-x-2 border rounded-lg p-3 hover:bg-muted/50 cursor-pointer",children:[e.jsxDEV(Je,{value:"selected",id:"selected"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:128,columnNumber:19},this),e.jsxDEV(j,{htmlFor:"selected",className:"cursor-pointer flex-1",children:[e.jsxDEV("div",{className:"text-sm font-medium",children:["Các bản ghi đã chọn (",v,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:130,columnNumber:21},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Chỉ xuất các dòng đã được tích chọn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:133,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:129,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:127,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:107,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:105,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(j,{className:"text-sm font-medium",children:"Tùy chọn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:144,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(Nt,{id:"headers",checked:u,onCheckedChange:a=>V(a)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:146,columnNumber:15},this),e.jsxDEV(j,{htmlFor:"headers",className:"text-sm font-normal cursor-pointer",children:"Bao gồm tiêu đề cột"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:151,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:145,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:143,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:72,columnNumber:9},this),e.jsxDEV(He,{children:[e.jsxDEV(A,{variant:"outline",onClick:()=>n(!1),children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:162,columnNumber:11},this),e.jsxDEV(A,{onClick:o,children:[e.jsxDEV(ii,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:166,columnNumber:13},this),"Xuất dữ liệu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:165,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:161,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:54,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ExportDialog.tsx",lineNumber:53,columnNumber:5},this)}function qi({className:s,...n}){return e.jsxDEV($e,{"data-slot":"command",className:ze("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",s),...n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/command.tsx",lineNumber:21,columnNumber:5},this)}function $i({className:s,...n}){return e.jsxDEV("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e.jsxDEV(Ii,{className:"size-4 shrink-0 opacity-50"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/command.tsx",lineNumber:65,columnNumber:7},this),e.jsxDEV($e.Input,{"data-slot":"command-input",className:ze("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",s),...n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/command.tsx",lineNumber:66,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/command.tsx",lineNumber:61,columnNumber:5},this)}function zi({className:s,...n}){return e.jsxDEV($e.List,{"data-slot":"command-list",className:ze("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",s),...n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/command.tsx",lineNumber:83,columnNumber:5},this)}function Oi({...s}){return e.jsxDEV($e.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/command.tsx",lineNumber:98,columnNumber:5},this)}function Gi({className:s,...n}){return e.jsxDEV($e.Group,{"data-slot":"command-group",className:ze("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",s),...n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/command.tsx",lineNumber:111,columnNumber:5},this)}function Wi({className:s,...n}){return e.jsxDEV($e.Item,{"data-slot":"command-item",className:ze("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/command.tsx",lineNumber:140,columnNumber:5},this)}function Xi({...s}){return e.jsxDEV(ct,{"data-slot":"popover",...s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/popover.tsx",lineNumber:11,columnNumber:10},this)}function Ki({...s}){return e.jsxDEV(ut,{"data-slot":"popover-trigger",...s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/popover.tsx",lineNumber:17,columnNumber:10},this)}function Yi({className:s,align:n="center",sideOffset:l=4,...v}){return e.jsxDEV(mt,{children:e.jsxDEV(dt,{"data-slot":"popover-content",align:n,sideOffset:l,className:ze("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",s),...v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/popover.tsx",lineNumber:28,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/app/components/ui/popover.tsx",lineNumber:27,columnNumber:5},this)}const ll=[{id:"1",code:"FOOD_01",name:"Bán lẻ thực phẩm",category:"Thực phẩm & Đồ uống"},{id:"2",code:"FOOD_02",name:"Bán lẻ đồ uống",category:"Thực phẩm & Đồ uống"},{id:"3",code:"FOOD_03",name:"Nhà hàng, quán ăn",category:"Thực phẩm & Đồ uống"},{id:"4",code:"FOOD_04",name:"Quán cà phê",category:"Thực phẩm & Đồ uống"},{id:"5",code:"FOOD_05",name:"Siêu thị thực phẩm",category:"Thực phẩm & Đồ uống"},{id:"6",code:"FOOD_06",name:"Cửa hàng tiện lợi",category:"Thực phẩm & Đồ uống"},{id:"7",code:"FOOD_07",name:"Bán buôn thực phẩm",category:"Thực phẩm & Đồ uống"},{id:"8",code:"COSM_01",name:"Bán lẻ mỹ phẩm",category:"Mỹ phẩm & Chăm sóc"},{id:"9",code:"COSM_02",name:"Spa & chăm sóc da",category:"Mỹ phẩm & Chăm sóc"},{id:"10",code:"COSM_03",name:"Salon tóc & làm đẹp",category:"Mỹ phẩm & Chăm sóc"},{id:"11",code:"COSM_04",name:"Bán buôn mỹ phẩm",category:"Mỹ phẩm & Chăm sóc"},{id:"12",code:"PHAR_01",name:"Nhà thuốc bán lẻ",category:"Dược phẩm & Y tế"},{id:"13",code:"PHAR_02",name:"Quầy thuốc",category:"Dược phẩm & Y tế"},{id:"14",code:"PHAR_03",name:"Phòng khám tư nhân",category:"Dược phẩm & Y tế"},{id:"15",code:"PHAR_04",name:"Thiết bị y tế",category:"Dược phẩm & Y tế"},{id:"16",code:"PHAR_05",name:"Bán buôn dược phẩm",category:"Dược phẩm & Y tế"},{id:"17",code:"FASH_01",name:"Bán lẻ thời trang",category:"Thời trang & Phụ kiện"},{id:"18",code:"FASH_02",name:"Giày dép",category:"Thời trang & Phụ kiện"},{id:"19",code:"FASH_03",name:"Túi xách & phụ kiện",category:"Thời trang & Phụ kiện"},{id:"20",code:"FASH_04",name:"Đồng hồ & trang sức",category:"Thời trang & Phụ kiện"},{id:"21",code:"FASH_05",name:"Quần áo trẻ em",category:"Thời trang & Phụ kiện"},{id:"22",code:"FASH_06",name:"Bán buôn thời trang",category:"Thời trang & Phụ kiện"},{id:"23",code:"ELEC_01",name:"Điện thoại & phụ kiện",category:"Điện tử & Công nghệ"},{id:"24",code:"ELEC_02",name:"Máy tính & laptop",category:"Điện tử & Công nghệ"},{id:"25",code:"ELEC_03",name:"Điện máy gia dụng",category:"Điện tử & Công nghệ"},{id:"26",code:"ELEC_04",name:"Thiết bị âm thanh",category:"Điện tử & Công nghệ"},{id:"27",code:"ELEC_05",name:"Camera & thiết bị giám sát",category:"Điện tử & Công nghệ"},{id:"28",code:"FURN_01",name:"Nội thất gia đình",category:"Nội thất & Trang trí"},{id:"29",code:"FURN_02",name:"Nội thất văn phòng",category:"Nội thất & Trang trí"},{id:"30",code:"FURN_03",name:"Đồ trang trí",category:"Nội thất & Trang trí"},{id:"31",code:"FURN_04",name:"Đồ gỗ & mây tre",category:"Nội thất & Trang trí"},{id:"32",code:"CONS_01",name:"Vật liệu xây dựng",category:"Xây dựng & Vật liệu"},{id:"33",code:"CONS_02",name:"Sắt thép",category:"Xây dựng & Vật liệu"},{id:"34",code:"CONS_03",name:"Gạch men & gốm sứ",category:"Xây dựng & Vật liệu"},{id:"35",code:"CONS_04",name:"Sơn & hóa chất xây dựng",category:"Xây dựng & Vật liệu"},{id:"36",code:"CONS_05",name:"Thiết bị điện & chiếu sáng",category:"Xây dựng & Vật liệu"},{id:"37",code:"AUTO_01",name:"Đại lý ô tô",category:"Ô tô & Xe máy"},{id:"38",code:"AUTO_02",name:"Đại lý xe máy",category:"Ô tô & Xe máy"},{id:"39",code:"AUTO_03",name:"Phụ tùng ô tô",category:"Ô tô & Xe máy"},{id:"40",code:"AUTO_04",name:"Phụ tùng xe máy",category:"Ô tô & Xe máy"},{id:"41",code:"AUTO_05",name:"Garage sửa chữa",category:"Ô tô & Xe máy"},{id:"42",code:"SERV_01",name:"Giặt là & giặt khô",category:"Dịch vụ"},{id:"43",code:"SERV_02",name:"Sửa chữa điện tử",category:"Dịch vụ"},{id:"44",code:"SERV_03",name:"In ấn & photocopy",category:"Dịch vụ"},{id:"45",code:"SERV_04",name:"Cho thuê xe",category:"Dịch vụ"},{id:"46",code:"SERV_05",name:"Khách sạn & lưu trú",category:"Dịch vụ"},{id:"47",code:"SERV_06",name:"Du lịch & lữ hành",category:"Dịch vụ"},{id:"48",code:"EDU_01",name:"Trung tâm ngoại ngữ",category:"Giáo dục & Đào tạo"},{id:"49",code:"EDU_02",name:"Trung tâm tin học",category:"Giáo dục & Đào tạo"},{id:"50",code:"EDU_03",name:"Trung tâm kỹ năng",category:"Giáo dục & Đào tạo"},{id:"51",code:"EDU_04",name:"Nhà sách & văn phòng phẩm",category:"Giáo dục & Đào tạo"},{id:"52",code:"SPOR_01",name:"Phòng gym & fitness",category:"Thể thao & Giải trí"},{id:"53",code:"SPOR_02",name:"Thiết bị thể thao",category:"Thể thao & Giải trí"},{id:"54",code:"SPOR_03",name:"Game center",category:"Thể thao & Giải trí"},{id:"55",code:"SPOR_04",name:"Karaoke",category:"Thể thao & Giải trí"},{id:"56",code:"MISC_01",name:"Bán lẻ hàng hóa tổng hợp",category:"Khác"},{id:"57",code:"MISC_02",name:"Bán buôn hàng hóa tổng hợp",category:"Khác"},{id:"58",code:"MISC_03",name:"Kho bãi & logistics",category:"Khác"},{id:"59",code:"MISC_04",name:"Đại lý & phân phối",category:"Khác"},{id:"60",code:"MISC_05",name:"Thương mại điện tử",category:"Khác"}],sl="_dialogContent_1ung1_133",al="_dialogTitle_1ung1_207",nl="_uploadSection_1ung1_229",rl="_isDragging_1ung1_271",ol="_uploadButton_1ung1_281",cl="_uploadedFileInfo_1ung1_337",ul="_uploadHint_1ung1_379",ml="_tabsNav_1ung1_399",dl="_tabButton_1ung1_413",hl="_tabButtonActive_1ung1_451",Nl="_tabContent_1ung1_483",pl="_formGrid_1ung1_517",vl="_addressTab_1ung1_531",bl="_autoFilledBadge_1ung1_545",K={dialogContent:sl,dialogTitle:al,uploadSection:nl,isDragging:rl,uploadButton:ol,uploadedFileInfo:cl,uploadHint:ul,tabsNav:ml,tabButton:dl,tabButtonActive:hl,tabContent:Nl,formGrid:pl,addressTab:vl,autoFilledBadge:bl},Vl="_comboboxTrigger_bj2md_3",gl="_comboboxIcon_bj2md_34",Tl="_popoverContent_bj2md_47",fl="_commandInput_bj2md_69",xl="_searchIcon_bj2md_96",El="_commandList_bj2md_104",Dl="_commandEmpty_bj2md_132",Hl="_commandItem_bj2md_141",kl="_checkIcon_bj2md_175",Ll="_industryContent_bj2md_192",Ql="_industryName_bj2md_201",jl="_industryCategory_bj2md_212",re={comboboxTrigger:Vl,comboboxIcon:gl,popoverContent:Tl,commandInput:fl,searchIcon:xl,commandList:El,commandEmpty:Dl,commandItem:Hl,checkIcon:kl,industryContent:Ll,industryName:Ql,industryCategory:jl};function _l({open:s,onOpenChange:n,onSubmit:l}){var ri,Ye;const[v,d]=m.useState("business"),[r,N]=m.useState(!1),[p,h]=m.useState(null),[u,V]=m.useState(!1),o=m.useRef(null),[a,E]=m.useState({operationStatus:"active"}),[B,f]=m.useState({}),[T,D]=m.useState({}),[Q,x]=m.useState([]),[_,q]=m.useState([]),[k,te]=m.useState(!1),[Oe,Ie]=m.useState(!1),[le,M]=m.useState(""),[xe,Ne]=m.useState(""),[Ge,b]=m.useState(""),[Ee,oe]=m.useState("");m.useEffect(()=>{We()},[]);const We=async()=>{try{te(!0);const t=await Pt();x(t)}catch(t){console.error("Error fetching provinces:",t),C.error("Không thể tải danh sách tỉnh/thành phố")}finally{te(!1)}},ue=async t=>{if(!t){q([]);return}try{Ie(!0);const L=await It(t);q(L)}catch(L){console.error("Error fetching wards:",L),C.error("Không thể tải danh sách phường/xã")}finally{Ie(!1)}},Be=m.useMemo(()=>(console.log("📊 Wards state updated:",_.length,"wards"),_),[_]),Xe=[a.registeredAddress||"",Ee||"",Ge||""].filter(L=>L.trim()).join(", "),Ke=async t=>{await new Promise($=>setTimeout($,2e3));const L=t.name.toLowerCase();return L.includes("business")||L.includes("license")||L.includes("gpkd")?{business_name:"Công ty TNHH Thương mại Dịch vụ ABC",taxCode:"0123456789",industryName:"Bán lẻ thực phẩm",establishedDate:"2020-01-15",operationStatus:"active",businessArea:"150",businessPhone:"0901234567",email:"contact@abc.com.vn",registeredAddress:"123 Nguyễn Huệ, Phường Bến Nghé, Quận 1, TP.HCM"}:L.includes("cmnd")||L.includes("cccd")||L.includes("id")?{ownerName:"Nguyễn Văn A",ownerBirthYear:"1985",ownerIdNumber:"001085012345",ownerPhone:"0912345678"}:{business_name:"Cửa hàng tiện lợi Tiến Hùng",taxCode:"0987654321",industryName:"Bán lẻ hàng hóa tổng hợp",ownerName:"Trần Thị B",ownerPhone:"0923456789"}},z=async t=>{var $;const L=($=t.target.files)==null?void 0:$[0];L&&await ee(L)},ee=async t=>{if(!["image/jpeg","image/png","image/webp","application/pdf"].includes(t.type)){C.error("Chỉ hỗ trợ file JPG, PNG, WEBP, PDF");return}const $=10*1024*1024;if(t.size>$){C.error("Kích thước file vượt quá 10MB");return}if(Object.values(B).some(Z=>Z.isManuallyEdited)&&p&&!window.confirm("Bạn đã chỉnh sửa một số trường thủ công. Upload lại sẽ ghi đè dữ liệu. Bạn có chắc chắn?")){o.current&&(o.current.value="");return}N(!0),h(t);try{const Z=await Ke(t),ce={...a},Le={};Object.entries(Z).forEach(([De,Qe])=>{Qe!=null&&(ce[De]=Qe,Le[De]={isAutoFilled:!0,isManuallyEdited:!1})}),E(ce),f(De=>({...De,...Le})),C.success(e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(bi,{className:"w-4 h-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:330,columnNumber:13},this),e.jsxDEV("span",{children:"Trích xuất dữ liệu thành công"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:331,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:329,columnNumber:11},this),e.jsxDEV("div",{className:"text-sm opacity-80 mt-1",children:["Đã tự động điền ",Object.keys(Z).length," trường"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:333,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:328,columnNumber:9},this))}catch(Z){C.error("Không thể trích xuất dữ liệu từ file"),console.error("OCR error:",Z)}finally{N(!1)}},di=t=>{t.preventDefault(),t.stopPropagation(),V(!0)},ti=t=>{t.preventDefault(),t.stopPropagation(),V(!1)},li=t=>{t.preventDefault(),t.stopPropagation()},si=async t=>{t.preventDefault(),t.stopPropagation(),V(!1);const L=t.dataTransfer.files;L&&L.length>0&&await ee(L[0])},O=(t,L)=>{var $;E(Y=>({...Y,[t]:L})),($=B[t])!=null&&$.isAutoFilled&&f(Y=>({...Y,[t]:{...Y[t],isManuallyEdited:!0}})),T[t]&&D(Y=>{const Z={...Y};return delete Z[t],Z})},ai=()=>{var L,$,Y,Z;const t={};if((L=a.business_name)!=null&&L.trim()||(t.business_name="Vui lòng nhập tên cơ sở kinh doanh"),($=a.taxCode)!=null&&$.trim()||(t.taxCode="Vui lòng nhập mã số thuế"),(Y=a.industryName)!=null&&Y.trim()||(t.industryName="Vui lòng nhập tên ngành kinh doanh"),(Z=a.operationStatus)!=null&&Z.trim()||(t.operationStatus="Vui lòng chọn tình trạng hoạt động"),a.businessArea&&!/^\d+$/.test(a.businessArea)&&(t.businessArea="Diện tích phải là số"),a.businessPhone&&!/^\d+$/.test(a.businessPhone)&&(t.businessPhone="Số điện thoại phải là số"),a.ownerName&&!a.ownerName.trim()&&(t.ownerName="Vui lòng nhập tên chủ hộ"),a.ownerBirthYear&&!/^\d+$/.test(a.ownerBirthYear)&&(t.ownerBirthYear="Năm sinh phải là số"),a.ownerIdNumber&&!a.ownerIdNumber.trim()&&(t.ownerIdNumber="Vui lòng nhập số CMTND/CCCD"),a.ownerPhone&&!/^\d+$/.test(a.ownerPhone)&&(t.ownerPhone="Số điện thoại phải là số"),D(t),Object.keys(t).length>0){const ce=Object.keys(t),Le=["name","taxCode","industryName","operationStatus","businessArea","businessPhone"],De=["ownerName","ownerBirthYear","ownerIdNumber","ownerPhone"],Qe=["registeredAddress","province","ward"];return ce.some(je=>Le.includes(je))?(d("business"),C.error("Vui lòng điền đầy đủ thông tin HKD")):ce.some(je=>De.includes(je))?(d("owner"),C.error("Vui lòng điền đầy đủ thông tin chủ hộ")):ce.some(je=>Qe.includes(je))&&(d("address"),C.error("Vui lòng điền đầy đủ thông tin địa chỉ")),!1}return!0},ni=()=>{var L;if(!ai())return;const t={business_name:a.business_name,taxCode:a.taxCode,fax:a.fax,industryName:a.industryName,establishedDate:a.establishedDate,operationStatus:a.operationStatus,businessArea:a.businessArea,businessPhone:a.businessPhone,email:a.email,website:a.website,notes:a.notes,ownerName:a.ownerName,ownerBirthYear:a.ownerBirthYear,ownerIdNumber:a.ownerIdNumber,ownerPhone:a.ownerPhone,ownerPhone2:a.ownerPhone2,registeredAddress:a.registeredAddress,province:le||void 0,jurisdiction:le?"":void 0,ward:xe||void 0,headquarterAddress:a.headquarterAddress,productionAddress:a.productionAddress,latitude:a.latitude,longitude:a.longitude,status:"pending",managementUnit:le?`Chi cục QLTT ${((L=Q.find($=>$._id===le))==null?void 0:L.name)||""}`:void 0};l==null||l(t),n(!1),E({operationStatus:"active"}),f({}),h(null),d("business"),M(""),Ne(""),D({})},J=(t,L,$)=>{var Z,ce;const Y=((Z=B[t])==null?void 0:Z.isAutoFilled)&&!((ce=B[t])!=null&&ce.isManuallyEdited);return e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:t,className:"flex items-center gap-2",children:[L,Y&&e.jsxDEV(Hi,{children:e.jsxDEV(ki,{children:[e.jsxDEV(Li,{asChild:!0,children:e.jsxDEV("span",{className:K.autoFilledBadge,children:[e.jsxDEV(bi,{className:"w-3 h-3"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:551,columnNumber:21},this),e.jsxDEV("span",{children:"Tự động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:552,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:550,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:549,columnNumber:17},this),e.jsxDEV(Qi,{children:e.jsxDEV("p",{children:"Đã trích xuất từ file upload"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:556,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:555,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:548,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:547,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:544,columnNumber:9},this),$,T[t]&&e.jsxDEV("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[e.jsxDEV(pe,{className:"w-3 h-3"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:565,columnNumber:13},this),T[t]]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:564,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:543,columnNumber:7},this)};return e.jsxDEV(be,{open:s,onOpenChange:n,children:e.jsxDEV(Ve,{className:K.dialogContent,children:[e.jsxDEV(ge,{children:[e.jsxDEV(Te,{className:K.dialogTitle,children:[e.jsxDEV(mi,{className:"w-5 h-5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:578,columnNumber:13},this),"Thêm cơ sở mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:577,columnNumber:11},this),e.jsxDEV(fe,{children:"Upload file để tự động điền thông tin hoặc nhập thủ công"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:581,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:576,columnNumber:9},this),e.jsxDEV("div",{className:`${K.uploadSection} ${u?K.isDragging:""}`,onDragEnter:di,onDragLeave:ti,onDragOver:li,onDrop:si,onClick:()=>{var t;return!r&&((t=o.current)==null?void 0:t.click())},children:[e.jsxDEV("input",{ref:o,type:"file",accept:"image/jpeg,image/png,image/webp,application/pdf",onChange:z,className:"hidden"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:595,columnNumber:11},this),p?e.jsxDEV(e.Fragment,{children:r?e.jsxDEV("div",{className:"flex flex-col items-center gap-3",children:[e.jsxDEV(Ti,{className:"w-8 h-8 text-primary animate-spin"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:642,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm font-medium",children:"Đang trích xuất dữ liệu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:643,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:641,columnNumber:17},this):e.jsxDEV("div",{className:K.uploadedFileInfo,children:[e.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:647,columnNumber:19},this),e.jsxDEV("span",{children:p.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:648,columnNumber:19},this),e.jsxDEV(he,{className:"w-4 h-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:649,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:646,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:639,columnNumber:13},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ci,{className:"w-8 h-8 text-gray-400"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:605,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-col items-center gap-1",children:[e.jsxDEV("p",{className:"font-medium text-sm",children:u?"Thả file vào đây":"Kéo & thả file vào đây"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:607,columnNumber:17},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"hoặc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:610,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:606,columnNumber:15},this),e.jsxDEV(A,{type:"button",variant:"outline",disabled:r,className:K.uploadButton,onClick:t=>{var L;t.stopPropagation(),(L=o.current)==null||L.click()},children:r?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ti,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:624,columnNumber:21},this),e.jsxDEV("span",{children:"Đang trích xuất dữ liệu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:625,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:623,columnNumber:19},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ci,{className:"w-4 h-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:629,columnNumber:21},this),e.jsxDEV("span",{children:"Chọn file từ máy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:630,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:628,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:612,columnNumber:15},this),e.jsxDEV("p",{className:K.uploadHint,children:"Hỗ trợ: JPG, PNG, WEBP, PDF (tối đa 10MB)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:634,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:604,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:587,columnNumber:9},this),e.jsxDEV("div",{className:K.tabsNav,children:[e.jsxDEV("button",{type:"button",className:`${K.tabButton} ${v==="business"?K.tabButtonActive:""}`,onClick:()=>d("business"),children:[e.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:663,columnNumber:13},this),e.jsxDEV("span",{children:"Thông tin HKD"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:664,columnNumber:13},this),Object.keys(T).some(t=>["name","taxCode","industryName","operationStatus","businessArea","businessPhone"].includes(t))&&e.jsxDEV(de,{className:"w-3 h-3 text-red-500"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:666,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:658,columnNumber:11},this),e.jsxDEV("button",{type:"button",className:`${K.tabButton} ${v==="owner"?K.tabButtonActive:""}`,onClick:()=>d("owner"),children:[e.jsxDEV(xt,{className:"w-4 h-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:674,columnNumber:13},this),e.jsxDEV("span",{children:"Thông tin chủ hộ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:675,columnNumber:13},this),Object.keys(T).some(t=>["ownerName","ownerBirthYear","ownerIdNumber","ownerPhone"].includes(t))&&e.jsxDEV(de,{className:"w-3 h-3 text-red-500"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:677,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:669,columnNumber:11},this),e.jsxDEV("button",{type:"button",className:`${K.tabButton} ${v==="address"?K.tabButtonActive:""}`,onClick:()=>d("address"),children:[e.jsxDEV(ji,{className:"w-4 h-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:685,columnNumber:13},this),e.jsxDEV("span",{children:"Địa chỉ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:686,columnNumber:13},this),Object.keys(T).some(t=>["registeredAddress","province","ward"].includes(t))&&e.jsxDEV(de,{className:"w-3 h-3 text-red-500"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:688,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:680,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:657,columnNumber:9},this),e.jsxDEV("div",{className:K.tabContent,children:[v==="business"&&e.jsxDEV("div",{className:K.formGrid,children:[J("business_name","Tên cơ sở kinh doanh *",e.jsxDEV(R,{id:"business_name",value:a.business_name||"",onChange:t=>O("business_name",t.target.value),placeholder:"Nhập tên cơ sở kinh doanh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:701,columnNumber:17},this)),J("taxCode","Mã số thuế *",e.jsxDEV(R,{id:"taxCode",value:a.taxCode||"",onChange:t=>O("taxCode",t.target.value),placeholder:"Nhập mã số thuế"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:712,columnNumber:17},this)),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"industryName",className:"flex items-center gap-2",children:["Tên ngành kinh doanh *",((ri=B.industryName)==null?void 0:ri.isAutoFilled)&&!((Ye=B.industryName)!=null&&Ye.isManuallyEdited)&&e.jsxDEV(Hi,{children:e.jsxDEV(ki,{children:[e.jsxDEV(Li,{asChild:!0,children:e.jsxDEV("span",{className:K.autoFilledBadge,children:[e.jsxDEV(bi,{className:"w-3 h-3"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:729,columnNumber:29},this),e.jsxDEV("span",{children:"Tự động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:730,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:728,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:727,columnNumber:25},this),e.jsxDEV(Qi,{children:e.jsxDEV("p",{children:"Đã trích xuất từ file upload"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:734,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:733,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:726,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:725,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:722,columnNumber:17},this),e.jsxDEV(Xi,{children:[e.jsxDEV(Ki,{asChild:!0,children:e.jsxDEV("button",{id:"industryName",type:"button",role:"combobox",className:re.comboboxTrigger,"data-placeholder":!a.industryName,"data-error":!!T.industryName,children:[e.jsxDEV("span",{children:a.industryName||"Chọn ngành kinh doanh..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:750,columnNumber:23},this),e.jsxDEV(Fi,{className:re.comboboxIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:751,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:742,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:741,columnNumber:19},this),e.jsxDEV(Yi,{className:re.popoverContent,align:"start",children:e.jsxDEV(qi,{children:[e.jsxDEV("div",{className:re.commandInput,children:[e.jsxDEV("svg",{className:re.searchIcon,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsxDEV("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:758,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:757,columnNumber:25},this),e.jsxDEV($i,{placeholder:"Tìm kiếm ngành kinh doanh..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:760,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:756,columnNumber:23},this),e.jsxDEV(zi,{className:re.commandList,children:[e.jsxDEV(Oi,{className:re.commandEmpty,children:"Không tìm thấy ngành kinh doanh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:763,columnNumber:25},this),e.jsxDEV(Gi,{children:ll.map(t=>e.jsxDEV(Wi,{value:t.name,onSelect:()=>{O("industryName",t.name===a.industryName?"":t.name)},className:re.commandItem,"data-selected":a.industryName===t.name,children:[e.jsxDEV("div",{className:re.industryContent,children:[e.jsxDEV("span",{className:re.industryName,children:t.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:778,columnNumber:33},this),t.category&&e.jsxDEV("span",{className:re.industryCategory,children:t.category},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:780,columnNumber:35},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:777,columnNumber:31},this),e.jsxDEV(ui,{className:re.checkIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:783,columnNumber:31},this)]},t.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:768,columnNumber:29},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:766,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:762,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:755,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:754,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:740,columnNumber:17},this),T.industryName&&e.jsxDEV("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[e.jsxDEV(pe,{className:"w-3 h-3"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:793,columnNumber:21},this),T.industryName]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:792,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:721,columnNumber:15},this),J("establishedDate","Ngày thành lập",e.jsxDEV(R,{id:"establishedDate",type:"date",value:a.establishedDate||"",onChange:t=>O("establishedDate",t.target.value)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:802,columnNumber:17},this)),J("operationStatus","Tình trạng hoạt động *",e.jsxDEV(Se,{value:a.operationStatus||"active",onValueChange:t=>O("operationStatus",t),children:[e.jsxDEV(Ce,{id:"operationStatus",children:e.jsxDEV(we,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:818,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:817,columnNumber:19},this),e.jsxDEV(Ae,{children:[e.jsxDEV(W,{value:"active",children:"Đang hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:821,columnNumber:21},this),e.jsxDEV(W,{value:"suspended",children:"Tạm ngừng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:822,columnNumber:21},this),e.jsxDEV(W,{value:"closed",children:"Đã đóng cửa"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:823,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:820,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:813,columnNumber:17},this)),J("businessArea","Diện tích cửa hàng (m²)",e.jsxDEV(R,{id:"businessArea",type:"number",value:a.businessArea||"",onChange:t=>O("businessArea",t.target.value),placeholder:"Nhập diện tích"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:831,columnNumber:17},this)),J("businessPhone","SĐT hộ kinh doanh",e.jsxDEV(R,{id:"businessPhone",type:"tel",value:a.businessPhone||"",onChange:t=>O("businessPhone",t.target.value),placeholder:"Nhập số điện thoại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:843,columnNumber:17},this)),J("email","Email",e.jsxDEV(R,{id:"email",type:"email",value:a.email||"",onChange:t=>O("email",t.target.value),placeholder:"Nhập email"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:855,columnNumber:17},this)),J("website","Website",e.jsxDEV(R,{id:"website",type:"url",value:a.website||"",onChange:t=>O("website",t.target.value),placeholder:"Nhập website"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:867,columnNumber:17},this)),J("fax","Fax",e.jsxDEV(R,{id:"fax",value:a.fax||"",onChange:t=>O("fax",t.target.value),placeholder:"Nhập số fax"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:879,columnNumber:17},this)),e.jsxDEV("div",{className:"space-y-2 col-span-2",children:[e.jsxDEV(j,{htmlFor:"notes",children:"Ghi chú"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:888,columnNumber:17},this),e.jsxDEV(Pe,{id:"notes",value:a.notes||"",onChange:t=>O("notes",t.target.value),placeholder:"Nhập ghi chú (nếu có)",rows:3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:889,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:887,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:697,columnNumber:13},this),v==="owner"&&e.jsxDEV("div",{className:K.formGrid,children:[J("ownerName","Tên chủ hộ kinh doanh",e.jsxDEV(R,{id:"ownerName",value:a.ownerName||"",onChange:t=>O("ownerName",t.target.value),placeholder:"Nhập tên chủ hộ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:906,columnNumber:17},this)),J("ownerBirthYear","Năm sinh chủ hộ",e.jsxDEV(R,{id:"ownerBirthYear",type:"number",value:a.ownerBirthYear||"",onChange:t=>O("ownerBirthYear",t.target.value),placeholder:"Nhập năm sinh",min:"1900",max:"2100"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:917,columnNumber:17},this)),J("ownerIdNumber","Số CMTND / CCCD / ĐDCN",e.jsxDEV(R,{id:"ownerIdNumber",value:a.ownerIdNumber||"",onChange:t=>O("ownerIdNumber",t.target.value),placeholder:"Nhập số CMTND/CCCD/ĐDCN"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:931,columnNumber:17},this)),J("ownerPhone","Số điện thoại chủ hộ",e.jsxDEV(R,{id:"ownerPhone",type:"tel",className:"placeholder:text-gray-500",value:a.ownerPhone||"",onChange:t=>O("ownerPhone",t.target.value),placeholder:"Nhập số điện thoại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:942,columnNumber:17},this)),J("ownerPhone2","Số điện thoại khác (nếu có)",e.jsxDEV(R,{id:"ownerPhone2",type:"tel",className:"placeholder:text-gray-500",value:a.ownerPhone2||"",onChange:t=>O("ownerPhone2",t.target.value),placeholder:"Nhập số điện thoại"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:955,columnNumber:17},this)),J("email","Email chủ hộ",e.jsxDEV(R,{id:"email",type:"email",value:a.email||"",onChange:t=>O("email",t.target.value),placeholder:"Nhập email"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:968,columnNumber:17},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:902,columnNumber:13},this),v==="address"&&e.jsxDEV("div",{className:K.addressTab,children:[e.jsxDEV("div",{className:K.formGrid,children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"province",children:"Tỉnh / Thành phố"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:985,columnNumber:19},this),e.jsxDEV(Se,{value:le,onValueChange:t=>{const L=Q.find($=>$._id===t);M(t),b((L==null?void 0:L.name)||""),Ne(""),oe(""),ue(t),T.province&&D($=>{const Y={...$};return delete Y.province,Y})},children:[e.jsxDEV(Ce,{id:"province",children:e.jsxDEV(we,{placeholder:"Chọn Tỉnh/Thành phố"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1005,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1004,columnNumber:21},this),e.jsxDEV(Ae,{children:Q.map(t=>e.jsxDEV(W,{value:t._id,children:t.name},t._id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1009,columnNumber:25},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1007,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:986,columnNumber:19},this),T.province&&e.jsxDEV("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[e.jsxDEV(pe,{className:"w-3 h-3"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1017,columnNumber:23},this),T.province]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1016,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:984,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"ward",children:"Phường / Xã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1024,columnNumber:19},this),e.jsxDEV(Se,{value:xe,onValueChange:t=>{const L=Be.find($=>$._id===t);Ne(t),oe((L==null?void 0:L.name)||""),T.ward&&D($=>{const Y={...$};return delete Y.ward,Y})},disabled:!le,children:[e.jsxDEV(Ce,{id:"ward",children:e.jsxDEV(we,{placeholder:"Chọn Phường/Xã"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1042,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1041,columnNumber:21},this),e.jsxDEV(Ae,{children:Be.map(t=>e.jsxDEV(W,{value:t._id,children:t.name},t._id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1046,columnNumber:25},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1044,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1025,columnNumber:19},this),T.ward&&e.jsxDEV("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[e.jsxDEV(pe,{className:"w-3 h-3"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1054,columnNumber:23},this),T.ward]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1053,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1023,columnNumber:17},this),J("registeredAddress","Địa chỉ đăng ký kinh doanh",e.jsxDEV(R,{id:"registeredAddress",value:a.registeredAddress||"",onChange:t=>O("registeredAddress",t.target.value),placeholder:"Nhập địa chỉ đăng ký kinh doanh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1063,columnNumber:19},this)),e.jsxDEV("div",{className:"space-y-2 col-span-2",children:[e.jsxDEV(j,{htmlFor:"headquarterAddress",children:"Địa chỉ trụ sở chính (nếu khác)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1072,columnNumber:19},this),e.jsxDEV(R,{id:"headquarterAddress",value:a.headquarterAddress||"",onChange:t=>O("headquarterAddress",t.target.value),placeholder:"Nhập địa chỉ trụ sở chính"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1073,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1071,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2 col-span-2",children:[e.jsxDEV(j,{htmlFor:"productionAddress",children:"Địa chỉ cơ sở sản xuất (nếu có)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1082,columnNumber:19},this),e.jsxDEV(R,{id:"productionAddress",value:a.productionAddress||"",onChange:t=>O("productionAddress",t.target.value),placeholder:"Nhập địa chỉ cơ sở sản xuất"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1083,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1081,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:982,columnNumber:15},this),e.jsxDEV("div",{className:"mt-4",children:[e.jsxDEV(j,{className:"inline-flex items-center gap-1.5 mb-3",style:{display:"inline-flex",alignItems:"center",lineHeight:"1"},children:[e.jsxDEV(ji,{className:"w-4 h-4 flex-shrink-0",style:{flexShrink:0}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1095,columnNumber:19},this),e.jsxDEV("span",{style:{lineHeight:"1"},children:"Định vị trên bản đồ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1096,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1094,columnNumber:17},this),e.jsxDEV("input",{type:"hidden",value:Xe},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1100,columnNumber:17},this),e.jsxDEV(Bt,{address:Xe||a.registeredAddress||"",latitude:a.latitude,longitude:a.longitude,onLocationChange:t=>{E(L=>({...L,latitude:t.latitude,longitude:t.longitude,registeredAddress:t.address||L.registeredAddress}))}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1102,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1093,columnNumber:15},this),e.jsxDEV("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"latitude",children:"Vĩ độ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1120,columnNumber:19},this),e.jsxDEV(R,{id:"latitude",type:"number",step:"0.000001",value:a.latitude||"",onChange:t=>O("latitude",t.target.value?parseFloat(t.target.value):void 0),placeholder:"Vĩ độ (từ bản đồ)",disabled:!1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1121,columnNumber:19},this),a.latitude&&e.jsxDEV("p",{className:"text-xs text-gray-500",children:[a.latitude.toFixed(6),"°"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1131,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1119,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(j,{htmlFor:"longitude",children:"Kinh độ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1138,columnNumber:19},this),e.jsxDEV(R,{id:"longitude",type:"number",step:"0.000001",value:a.longitude||"",onChange:t=>O("longitude",t.target.value?parseFloat(t.target.value):void 0),placeholder:"Kinh độ (từ bản đồ)",disabled:!1},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1139,columnNumber:19},this),a.longitude&&e.jsxDEV("p",{className:"text-xs text-gray-500",children:[a.longitude.toFixed(6),"°"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1149,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1137,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1118,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:981,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:694,columnNumber:9},this),e.jsxDEV(He,{children:[e.jsxDEV(A,{type:"button",variant:"outline",onClick:()=>{n(!1),E({operationStatus:"active"}),f({}),h(null),d("business"),D({})},children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1161,columnNumber:11},this),e.jsxDEV(A,{type:"button",onClick:ni,children:[e.jsxDEV(he,{className:"w-4 h-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1176,columnNumber:13},this),"Lưu cơ sở"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1175,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:1160,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:575,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AddStoreDialogTabbed.tsx",lineNumber:574,columnNumber:5},this)}const yl=[{value:"fresh-food",label:"Thực phẩm tươi sống"},{value:"processed-food",label:"Thực phẩm chế biến"},{value:"consumer-goods",label:"Hàng tiêu dùng"},{value:"electronics",label:"Điện máy - Điện tử"},{value:"fashion",label:"Thời trang - Phụ kiện"},{value:"furniture",label:"Nội thất - Gia dụng"},{value:"construction",label:"Vật liệu xây dựng"},{value:"pharmacy",label:"Dược phẩm - Y tế"},{value:"cosmetics",label:"Mỹ phẩm - Làm đẹp"},{value:"restaurant",label:"Nhà hàng - Ăn uống"},{value:"service",label:"Dịch vụ"},{value:"other",label:"Khác"}],Sl="_trigger_t8lkb_7",Cl="_triggerText_t8lkb_81",wl="_triggerIcon_t8lkb_105",Al="_popoverContent_t8lkb_121",Pl="_commandInput_t8lkb_143",Il="_searchIcon_t8lkb_159",Bl="_commandList_t8lkb_177",Fl="_commandEmpty_t8lkb_189",Ul="_commandItem_t8lkb_207",Rl="_optionContent_t8lkb_255",Ml="_optionLabel_t8lkb_271",ql="_optionCategory_t8lkb_287",$l="_checkIcon_t8lkb_303",se={trigger:Sl,triggerText:Cl,triggerIcon:wl,popoverContent:Al,commandInput:Pl,searchIcon:Il,commandList:Bl,commandEmpty:Fl,commandItem:Ul,optionContent:Rl,optionLabel:Ml,optionCategory:ql,checkIcon:$l};function zl({value:s,onValueChange:n,options:l,placeholder:v="Chọn...",searchPlaceholder:d="Tìm kiếm...",emptyText:r="Không tìm thấy kết quả",width:N="200px",disabled:p=!1}){const[h,u]=Ze.useState(!1),V=l.find(o=>o.value===s);return e.jsxDEV(Xi,{open:h,onOpenChange:u,children:[e.jsxDEV(Ki,{asChild:!0,children:e.jsxDEV("button",{type:"button",role:"combobox","aria-expanded":h,className:se.trigger,style:{width:N},disabled:p,"data-placeholder":!V,children:[e.jsxDEV("span",{className:se.triggerText,children:V?V.label:v},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:61,columnNumber:11},this),e.jsxDEV(Fi,{className:se.triggerIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:64,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:52,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:51,columnNumber:7},this),e.jsxDEV(Yi,{className:se.popoverContent,align:"start",style:{width:N},children:e.jsxDEV(qi,{children:[e.jsxDEV("div",{className:se.commandInput,children:[e.jsxDEV("svg",{className:se.searchIcon,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsxDEV("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:71,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:70,columnNumber:13},this),e.jsxDEV($i,{placeholder:d},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:77,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:69,columnNumber:11},this),e.jsxDEV(zi,{className:se.commandList,children:[e.jsxDEV(Oi,{className:se.commandEmpty,children:r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:80,columnNumber:13},this),e.jsxDEV(Gi,{children:l.map(o=>e.jsxDEV(Wi,{value:o.label,onSelect:()=>{n(o.value===s?"":o.value),u(!1)},className:se.commandItem,"data-selected":s===o.value,children:[e.jsxDEV("div",{className:se.optionContent,children:[e.jsxDEV("span",{className:se.optionLabel,children:o.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:94,columnNumber:21},this),o.category&&e.jsxDEV("span",{className:se.optionCategory,children:o.category},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:96,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:93,columnNumber:19},this),s===o.value&&e.jsxDEV(ui,{className:se.checkIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:99,columnNumber:46},this)]},o.value,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:83,columnNumber:17},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:81,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:79,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:68,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:67,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/SearchableSelect.tsx",lineNumber:50,columnNumber:5},this)}const Ol="_container_1rmen_3",Gl="_toggleButton_1rmen_15",Wl="_active_1rmen_77",Xl="_badge_1rmen_123",Kl="_chevron_1rmen_153",Yl="_chevronOpen_1rmen_161",Jl="_popup_1rmen_171",Zl="_popupHeader_1rmen_225",es="_popupTitle_1rmen_241",is="_closeButton_1rmen_257",ts="_popupContent_1rmen_297",ls="_filterGroup_1rmen_311",ss="_filterLabel_1rmen_323",as="_popupActions_1rmen_397",ns="_clearButton_1rmen_419",rs="_applyButton_1rmen_421",G={container:Ol,toggleButton:Gl,active:Wl,badge:Xl,chevron:Kl,chevronOpen:Yl,popup:Jl,popupHeader:Zl,popupTitle:es,closeButton:is,popupContent:ts,filterGroup:ls,filterLabel:ss,popupActions:as,clearButton:ns,applyButton:rs};function os({appliedFilters:s,onApply:n,onClear:l,hasActiveFilters:v,iconOnly:d}){const[r,N]=m.useState(!1),[p,h]=m.useState(s),u=m.useRef(null),V=m.useRef(null);m.useEffect(()=>{r||h(s)},[s,r]),m.useEffect(()=>{const f=T=>{const D=T.target,Q=D.closest('[data-slot="popover-content"]');u.current&&V.current&&!u.current.contains(D)&&!V.current.contains(D)&&!Q&&N(!1)};return r&&document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[r]);const o=()=>{n(p)},a=()=>{h({hasViolations:"all",hasComplaints:"all",riskLevel:"all",businessType:"all"}),l()},E=[s.hasViolations,s.hasComplaints,s.riskLevel,s.businessType].filter(f=>f&&f!=="all").length,B=[{value:"all",label:"Chọn loại kinh doanh"},...yl.map(f=>({value:f.value,label:f.label}))];return e.jsxDEV("div",{className:G.container,children:[e.jsxDEV("button",{ref:V,className:`${G.toggleButton} ${v?G.active:""}`,onClick:()=>N(!r),type:"button",children:[e.jsxDEV(Ui,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:126,columnNumber:9},this),d?e.jsxDEV(_i,{size:16,className:`${G.chevron} ${r?G.chevronOpen:""}`},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:128,columnNumber:11},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{children:"Lọc nâng cao"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:134,columnNumber:13},this),v&&E>0&&e.jsxDEV("span",{className:G.badge,children:E},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:136,columnNumber:15},this),e.jsxDEV(_i,{size:16,className:`${G.chevron} ${r?G.chevronOpen:""}`},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:138,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:133,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:120,columnNumber:7},this),r&&e.jsxDEV("div",{ref:u,className:G.popup,children:[e.jsxDEV("div",{className:G.popupHeader,children:[e.jsxDEV("h4",{className:G.popupTitle,children:"Bộ lọc nâng cao"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:150,columnNumber:13},this),e.jsxDEV("button",{className:G.closeButton,onClick:()=>N(!1),type:"button","aria-label":"Đóng",children:e.jsxDEV(ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:157,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:151,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:149,columnNumber:11},this),e.jsxDEV("div",{className:G.popupContent,children:[e.jsxDEV("div",{className:G.filterGroup,children:[e.jsxDEV("label",{className:G.filterLabel,children:"Vi phạm"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:164,columnNumber:15},this),e.jsxDEV(Vi,{value:p.hasViolations||"all",onChange:f=>h({...p,hasViolations:f}),options:[{value:"all",label:"Tất cả"},{value:"yes",label:"Có vi phạm"},{value:"no",label:"Không có vi phạm"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:165,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:163,columnNumber:13},this),e.jsxDEV("div",{className:G.filterGroup,children:[e.jsxDEV("label",{className:G.filterLabel,children:"Phản ánh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:180,columnNumber:15},this),e.jsxDEV(Vi,{value:p.hasComplaints||"all",onChange:f=>h({...p,hasComplaints:f}),options:[{value:"all",label:"Tất cả"},{value:"yes",label:"Có phản ánh"},{value:"no",label:"Không có phản ánh"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:179,columnNumber:13},this),e.jsxDEV("div",{className:G.filterGroup,children:[e.jsxDEV("label",{className:G.filterLabel,children:"Mức độ rủi ro"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:196,columnNumber:15},this),e.jsxDEV(Vi,{value:p.riskLevel||"all",onChange:f=>h({...p,riskLevel:f}),options:[{value:"all",label:"Tất cả mức độ"},{value:"none",label:"Không có rủi ro"},{value:"low",label:"🟢 Thấp"},{value:"medium",label:"🟡 Trung bình"},{value:"high",label:"🔴 Cao"}]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:197,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:195,columnNumber:13},this),e.jsxDEV("div",{className:G.filterGroup,children:[e.jsxDEV("label",{className:G.filterLabel,children:"Loại kinh doanh"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:214,columnNumber:15},this),e.jsxDEV(zl,{value:p.businessType||"all",onValueChange:f=>h({...p,businessType:f}),options:B,placeholder:"Chọn loại kinh doanh",searchPlaceholder:"Tìm kiếm...",emptyText:"Không tìm thấy",width:"100%"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:215,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:213,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:161,columnNumber:11},this),e.jsxDEV("div",{className:G.popupActions,children:[e.jsxDEV(A,{variant:"outline",size:"sm",onClick:a,className:G.clearButton,children:[e.jsxDEV(ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:237,columnNumber:15},this),"Xóa tất cả"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:231,columnNumber:13},this),e.jsxDEV(A,{variant:"default",size:"sm",onClick:o,className:G.applyButton,children:[e.jsxDEV(ui,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:246,columnNumber:15},this),"Áp dụng"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:240,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:230,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:148,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/AdvancedFilterPopup.tsx",lineNumber:118,columnNumber:5},this)}const cs="_dialogContent_162lm_1",us="_iconWrapper_162lm_11",ms="_approveIcon_162lm_23",ds="_rejectIcon_162lm_45",hs="_title_162lm_67",Ns="_description_162lm_83",ps="_formContent_162lm_107",vs="_formField_162lm_121",bs="_label_162lm_133",Vs="_required_162lm_145",gs="_textarea_162lm_153",Ts="_helperText_162lm_167",fs="_verifyBox_162lm_177",xs="_warningIcon_162lm_201",Es="_verifyInput_162lm_221",Ds="_errorText_162lm_235",Hs="_footer_162lm_247",ks="_approveButton_162lm_259",Ls="_rejectButton_162lm_279",S={dialogContent:cs,iconWrapper:us,approveIcon:ms,rejectIcon:ds,title:hs,description:Ns,formContent:ps,formField:vs,label:bs,required:Vs,textarea:gs,helperText:Ts,verifyBox:fs,warningIcon:xs,verifyInput:Es,errorText:Ds,footer:Hs,approveButton:ks,rejectButton:Ls};function Qs({open:s,onOpenChange:n,storeName:l,onConfirm:v}){const[d,r]=m.useState(""),[N,p]=m.useState(""),[h,u]=m.useState(!1),V="PHÊ DUYỆT",o=d.trim().length>=10&&N===V,a=async()=>{if(o){u(!0);try{await v(d,N),E()}finally{u(!1)}}},E=()=>{r(""),p(""),u(!1),n(!1)};return e.jsxDEV(be,{open:s,onOpenChange:E,children:e.jsxDEV(Ve,{className:S.dialogContent,children:[e.jsxDEV(ge,{children:[e.jsxDEV("div",{className:S.iconWrapper,children:e.jsxDEV("div",{className:S.approveIcon,children:e.jsxDEV(he,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:66,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:65,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:64,columnNumber:11},this),e.jsxDEV(Te,{className:S.title,children:"Phê duyệt cửa hàng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:69,columnNumber:11},this),e.jsxDEV(fe,{className:S.description,children:["Bạn đang phê duyệt cửa hàng ",e.jsxDEV("strong",{children:['"',l,'"']},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:71,columnNumber:41},this),".",e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:72,columnNumber:13},this),'Sau khi phê duyệt, cửa hàng sẽ chuyển sang trạng thái "Đang hoạt động".']},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:70,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:63,columnNumber:9},this),e.jsxDEV("div",{className:S.formContent,children:[e.jsxDEV("div",{className:S.formField,children:[e.jsxDEV(j,{htmlFor:"approve-reason",className:S.label,children:["Lý do phê duyệt ",e.jsxDEV("span",{className:S.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:81,columnNumber:31},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:80,columnNumber:13},this),e.jsxDEV(Pe,{id:"approve-reason",placeholder:"Nhập lý do phê duyệt (tối thiểu 10 ký tự)...",value:d,onChange:B=>r(B.target.value),className:S.textarea,rows:4},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:83,columnNumber:13},this),e.jsxDEV("div",{className:S.helperText,children:[d.trim().length,"/10 ký tự tối thiểu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:91,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:79,columnNumber:11},this),e.jsxDEV("div",{className:S.formField,children:[e.jsxDEV(j,{htmlFor:"approve-verify",className:S.label,children:["Xác nhận ",e.jsxDEV("span",{className:S.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:99,columnNumber:24},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:98,columnNumber:13},this),e.jsxDEV("div",{className:S.verifyBox,children:[e.jsxDEV(ke,{size:16,className:S.warningIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:102,columnNumber:15},this),e.jsxDEV("span",{children:["Nhập ",e.jsxDEV("strong",{children:V},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:104,columnNumber:22},this)," để xác nhận"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:103,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:101,columnNumber:13},this),e.jsxDEV(R,{id:"approve-verify",type:"text",placeholder:"Nhập PHÊ DUYỆT",value:N,onChange:B=>p(B.target.value),className:S.verifyInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:107,columnNumber:13},this),N&&N!==V&&e.jsxDEV("div",{className:S.errorText,children:"Văn bản xác nhận không khớp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:116,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:97,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:77,columnNumber:9},this),e.jsxDEV(He,{className:S.footer,children:[e.jsxDEV(A,{variant:"outline",onClick:E,disabled:h,children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:124,columnNumber:11},this),e.jsxDEV(A,{onClick:a,disabled:!o||h,className:S.approveButton,children:h?"Đang xử lý...":"Xác nhận phê duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:131,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:123,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:62,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:61,columnNumber:5},this)}function js({open:s,onOpenChange:n,storeName:l,onConfirm:v}){const[d,r]=m.useState(""),[N,p]=m.useState(""),[h,u]=m.useState(!1),V="TỪ CHỐI",o=d.trim().length>=10&&N===V,a=async()=>{if(o){u(!0);try{await v(d,N),E()}finally{u(!1)}}},E=()=>{r(""),p(""),u(!1),n(!1)};return e.jsxDEV(be,{open:s,onOpenChange:E,children:e.jsxDEV(Ve,{className:S.dialogContent,children:[e.jsxDEV(ge,{children:[e.jsxDEV("div",{className:S.iconWrapper,children:e.jsxDEV("div",{className:S.rejectIcon,children:e.jsxDEV(de,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:193,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:192,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:191,columnNumber:11},this),e.jsxDEV(Te,{className:S.title,children:"Từ chối phê duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:196,columnNumber:11},this),e.jsxDEV(fe,{className:S.description,children:["Bạn đang từ chối phê duyệt cửa hàng ",e.jsxDEV("strong",{children:['"',l,'"']},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:198,columnNumber:49},this),".",e.jsxDEV("br",{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:199,columnNumber:13},this),'Sau khi từ chối, cửa hàng sẽ chuyển sang trạng thái "Từ chối phê duyệt".']},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:197,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:190,columnNumber:9},this),e.jsxDEV("div",{className:S.formContent,children:[e.jsxDEV("div",{className:S.formField,children:[e.jsxDEV(j,{htmlFor:"reject-reason",className:S.label,children:["Lý do từ chối ",e.jsxDEV("span",{className:S.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:208,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:207,columnNumber:13},this),e.jsxDEV(Pe,{id:"reject-reason",placeholder:"Nhập lý do từ chối phê duyệt (tối thiểu 10 ký tự)...",value:d,onChange:B=>r(B.target.value),className:S.textarea,rows:4},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:210,columnNumber:13},this),e.jsxDEV("div",{className:S.helperText,children:[d.trim().length,"/10 ký tự tối thiểu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:218,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:206,columnNumber:11},this),e.jsxDEV("div",{className:S.formField,children:[e.jsxDEV(j,{htmlFor:"reject-verify",className:S.label,children:["Xác nhận ",e.jsxDEV("span",{className:S.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:226,columnNumber:24},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:225,columnNumber:13},this),e.jsxDEV("div",{className:S.verifyBox,children:[e.jsxDEV(ke,{size:16,className:S.warningIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:229,columnNumber:15},this),e.jsxDEV("span",{children:["Nhập ",e.jsxDEV("strong",{children:V},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:231,columnNumber:22},this)," để xác nhận"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:230,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:228,columnNumber:13},this),e.jsxDEV(R,{id:"reject-verify",type:"text",placeholder:"Nhập TỪ CHỐI",value:N,onChange:B=>p(B.target.value),className:S.verifyInput},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:234,columnNumber:13},this),N&&N!==V&&e.jsxDEV("div",{className:S.errorText,children:"Văn bản xác nhận không khớp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:243,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:224,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:204,columnNumber:9},this),e.jsxDEV(He,{className:S.footer,children:[e.jsxDEV(A,{variant:"outline",onClick:E,disabled:h,children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:251,columnNumber:11},this),e.jsxDEV(A,{variant:"destructive",onClick:a,disabled:!o||h,className:S.rejectButton,children:h?"Đang xử lý...":"Xác nhận từ chối"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:258,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:250,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:189,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/ApprovalDialogs.tsx",lineNumber:188,columnNumber:5},this)}const _s="_dialogContent_1w15g_5",ys="_content_1w15g_19",Ss="_imagePreview_1w15g_39",Cs="_previewImage_1w15g_61",ws="_downloadButton_1w15g_75",As="_details_1w15g_111",Ps="_detailRow_1w15g_123",Is="_detailColumn_1w15g_135",Bs="_detailLabel_1w15g_147",Fs="_detailValue_1w15g_161",Us="_badgeValid_1w15g_175",Rs="_badgeExpiring_1w15g_193",Ms="_notesSection_1w15g_213",qs="_notesBox_1w15g_225",$s="_footer_1w15g_249",F={dialogContent:_s,content:ys,imagePreview:Ss,previewImage:Cs,downloadButton:ws,details:As,detailRow:Ps,detailColumn:Is,detailLabel:Bs,detailValue:Fs,badgeValid:Us,badgeExpiring:Rs,notesSection:Ms,notesBox:qs,footer:$s};function zs({open:s,onOpenChange:n,document:l}){if(!l)return null;const v=async()=>{if(l.fileUrl)try{const N=await(await fetch(l.fileUrl)).blob(),p=window.URL.createObjectURL(N),h=window.document.createElement("a");h.href=p,h.download=l.fileName||`${l.type}.png`,window.document.body.appendChild(h),h.click(),window.document.body.removeChild(h),window.URL.revokeObjectURL(p)}catch(r){console.error("Download failed:",r)}},d=()=>l.status==="valid"?e.jsxDEV(ve,{variant:"secondary",className:F.badgeValid,children:"Còn hiệu lực"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:57,columnNumber:9},this):l.status==="expiring"?e.jsxDEV(ve,{variant:"default",className:F.badgeExpiring,children:"Sắp hết hạn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:64,columnNumber:9},this):null;return e.jsxDEV(be,{open:s,onOpenChange:n,children:e.jsxDEV(Ve,{className:F.dialogContent,children:[e.jsxDEV(ge,{children:[e.jsxDEV(Te,{children:"Chi tiết giấy phép"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:76,columnNumber:11},this),e.jsxDEV(fe,{children:"Xem thông tin chi tiết và tải xuống giấy phép"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:77,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:75,columnNumber:9},this),e.jsxDEV("div",{className:F.content,children:[e.jsxDEV("div",{className:F.imagePreview,children:[e.jsxDEV(Ut,{src:l.fileUrl||"",alt:l.title,className:F.previewImage},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:85,columnNumber:13},this),e.jsxDEV(A,{size:"sm",variant:"outline",className:F.downloadButton,onClick:v,children:[e.jsxDEV(ii,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:96,columnNumber:15},this),"Tải xuống"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:84,columnNumber:11},this),e.jsxDEV("div",{className:F.details,children:[e.jsxDEV("div",{className:F.detailRow,children:[e.jsxDEV("div",{className:F.detailColumn,children:[e.jsxDEV("div",{className:F.detailLabel,children:"Loại giấy phép"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:105,columnNumber:17},this),e.jsxDEV("div",{className:F.detailValue,children:l.title},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:106,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:104,columnNumber:15},this),e.jsxDEV("div",{className:F.detailColumn,children:[e.jsxDEV("div",{className:F.detailLabel,children:"Số giấy phép"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:109,columnNumber:17},this),e.jsxDEV("div",{className:F.detailValue,children:l.documentNumber},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:110,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:108,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:103,columnNumber:13},this),e.jsxDEV("div",{className:F.detailRow,children:[e.jsxDEV("div",{className:F.detailColumn,children:[e.jsxDEV("div",{className:F.detailLabel,children:"Ngày cấp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:116,columnNumber:17},this),e.jsxDEV("div",{className:F.detailValue,children:l.issueDate},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:117,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:115,columnNumber:15},this),e.jsxDEV("div",{className:F.detailColumn,children:[e.jsxDEV("div",{className:F.detailLabel,children:"Ngày hết hạn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:120,columnNumber:17},this),e.jsxDEV("div",{className:F.detailValue,children:l.expiryDate},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:121,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:119,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:114,columnNumber:13},this),e.jsxDEV("div",{className:F.detailRow,children:e.jsxDEV("div",{className:F.detailColumn,children:[e.jsxDEV("div",{className:F.detailLabel,children:"Cơ quan cấp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:127,columnNumber:17},this),e.jsxDEV("div",{className:F.detailValue,children:l.issuingAuthority},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:128,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:126,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:125,columnNumber:13},this),e.jsxDEV("div",{className:F.detailRow,children:e.jsxDEV("div",{className:F.detailColumn,children:[e.jsxDEV("div",{className:F.detailLabel,children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:134,columnNumber:17},this),e.jsxDEV("div",{className:F.detailValue,children:d()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:135,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:133,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:132,columnNumber:13},this),l.notes&&e.jsxDEV("div",{className:F.notesSection,children:[e.jsxDEV("div",{className:F.detailLabel,children:"Ghi chú"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:141,columnNumber:17},this),e.jsxDEV("div",{className:F.notesBox,children:l.notes},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:142,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:140,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:102,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:82,columnNumber:9},this),e.jsxDEV("div",{className:F.footer,children:e.jsxDEV(A,{variant:"outline",onClick:()=>n(!1),children:"Đóng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:152,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:151,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:74,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/LegalDocumentDialog.tsx",lineNumber:73,columnNumber:5},this)}const Os={active:"Hoạt động",pending:"Chờ duyệt",suspended:"Tạm ngừng",closed:"Ngừng hoạt động",rejected:"Từ chối phê duyệt"};function Me(s){if(s==null)return"";const n=String(s);return n.includes(",")||n.includes(`
`)||n.includes('"')?`"${n.replace(/"/g,'""')}"`:n}function Ci(s){if(!s)return"";try{const n=new Date(s);if(isNaN(n.getTime()))return s;const l=n.getDate().toString().padStart(2,"0"),v=(n.getMonth()+1).toString().padStart(2,"0"),d=n.getFullYear();return`${l}/${v}/${d}`}catch{return s}}function Gs(s){const n=new Date,l=n.getFullYear(),v=(n.getMonth()+1).toString().padStart(2,"0"),d=n.getDate().toString().padStart(2,"0"),r=s.id.toString().padStart(5,"0");return`CH-${l}${v}${d}-${r}`}function Ji(s,n="danh-sach-cua-hang.csv"){const l=["Mã cửa hàng","Tên cửa hàng","Chủ hộ / Người đại diện","Mã số thuế","Số điện thoại","Tỉnh / Thành phố","Phường / Xã","Địa chỉ chi tiết","Ngành hàng chính","Trạng thái hoạt động","Đơn vị quản lý","Ngày tạo","Ngày cập nhật gần nhất"],v=s.map(u=>{const V=Gs(u),o=u.name||"",a=u.ownerName||"",E=u.taxCode||"",B=u.phone||u.businessPhone||u.ownerPhone||"";let f=u.province||"";if(!f&&u.address){const te=u.address.split(",");te.length>=3?f=te[te.length-1].trim():f="TP. Hồ Chí Minh"}const T=u.ward||"";let D=u.address||"";D.includes(",")&&(D=D.split(",").slice(0,-1).join(",").trim());const Q=u.industryName||u.type||u.businessType||"",x=Os[u.status]||u.status,_=u.managementUnit||`Chi cục QLTT ${u.jurisdiction}`,q=Ci(new Date().toISOString()),k=Ci(new Date().toISOString());return[V,o,a,E,B,f,T,D,Q,x,_,q,k].map(Me)}),N="\uFEFF"+[l.map(Me).join(","),...v.map(u=>u.join(","))].join(`
`),p=new Blob([N],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a");if(h.download!==void 0){const u=URL.createObjectURL(p);h.setAttribute("href",u),h.setAttribute("download",n),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(u)}}function Ws(s="danh-muc-tham-chieu.csv"){const n=["Thực phẩm","ồ uống","Mỹ phẩm","Dược phẩm","Thời trang","Điện tử","Nội thất","Xây dựng","Ô tô - Xe máy","Dịch vụ"],l=["Hoạt động","Chờ duyệt","Tạm ngưng","Ngừng hoạt động"],v=["Chi cục QLTT Quận 1","Chi cục QLTT Quận 2","Chi cục QLTT Quận 3","Chi cục QLTT Quận 4","Chi cục QLTT Quận 5","Chi cục QLTT Quận 6","Chi cục QLTT Quận 7","Chi cục QLTT Quận 8","Chi cục QLTT Quận 9","Chi cục QLTT Quận 10","Chi cục QLTT Quận 11","Chi cục QLTT Quận 12","Chi cục QLTT Thủ Đức","Chi cục QLTT Bình Thạnh","Chi cục QLTT Tân Bình","Chi cục QLTT Tân Phú","Chi cục QLTT Phú Nhuận","Chi cục QLTT Gò Vấp","Chi cục QLTT Bình Tân"],d=["Hướng dẫn nhập dữ liệu:","- Không để trống các trường bắt buộc","- Mã số thuế không được trùng trong hệ thống","- Tỉnh/Thành phố phải nằm trong phạm vi quản lý","- Ngành hàng chính chỉ chọn từ danh mục","- Đơn vị quản lý không được vượt phạm vi quản lý","- Sau khi import, tất cả cửa hàng ở trạng thái Chờ duyệt"],r=[];r.push("DANH SÁCH NGÀNH HÀNG HỢP LỆ"),r.push("Ngành hàng"),n.forEach(V=>r.push(Me(V))),r.push(""),r.push("DANH SÁCH TRẠNG THÁI HỢP LỆ"),r.push("Trạng thái"),l.forEach(V=>r.push(Me(V))),r.push(""),r.push("DANH SÁCH ĐƠN VỊ QUẢN LÝ HỢP LỆ"),r.push("Đơn vị quản lý"),v.forEach(V=>r.push(Me(V))),r.push(""),r.push("GHI CHÚ HƯỚNG DẪN NHẬP DỮ LIỆU"),r.push("Nội dung"),d.forEach(V=>r.push(Me(V)));const p="\uFEFF"+r.join(`
`),h=new Blob([p],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a");if(u.download!==void 0){const V=URL.createObjectURL(h);u.setAttribute("href",V),u.setAttribute("download",s),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(V)}}function Xs(s,n){const l=new Date().toISOString().slice(0,10).replace(/-/g,""),v=n?`${n}.csv`:`danh-sach-cua-hang-${l}.csv`,d=n?`${n}_danh-muc-tham-chieu.csv`:`danh-muc-tham-chieu-${l}.csv`;Ji(s,v),setTimeout(()=>{Ws(d)},500)}const Ks="_backdrop_1yqlj_3",Ys="_fadeIn_1yqlj_1",Js="_modal_1yqlj_53",Zs="_slideUp_1yqlj_1",ea="_header_1yqlj_103",ia="_headerDefault_1yqlj_121",ta="_headerSuccess_1yqlj_131",la="_headerWarning_1yqlj_141",sa="_headerDanger_1yqlj_151",aa="_headerIcon_1yqlj_161",na="_title_1yqlj_177",ra="_closeButton_1yqlj_195",oa="_content_1yqlj_241",ca="_description_1yqlj_261",ua="_warning_1yqlj_277",ma="_summary_1yqlj_317",da="_summaryRow_1yqlj_337",ha="_summaryLabel_1yqlj_349",Na="_summaryValue_1yqlj_363",pa="_summarySuccess_1yqlj_377",va="_summaryDanger_1yqlj_385",ba="_invalidWarning_1yqlj_395",Va="_invalidWarningContent_1yqlj_427",ga="_invalidWarningTitle_1yqlj_435",Ta="_invalidWarningText_1yqlj_451",fa="_preview_1yqlj_467",xa="_previewTitle_1yqlj_479",Ea="_previewList_1yqlj_493",Da="_previewItem_1yqlj_517",Ha="_previewItemInfo_1yqlj_539",ka="_previewItemName_1yqlj_549",La="_previewItemAddress_1yqlj_569",Qa="_previewMore_1yqlj_589",ja="_invalidDetails_1yqlj_609",_a="_invalidSummary_1yqlj_621",ya="_invalidList_1yqlj_653",Sa="_invalidItem_1yqlj_671",Ca="_invalidItemInfo_1yqlj_693",wa="_invalidItemName_1yqlj_703",Aa="_invalidItemReason_1yqlj_723",Pa="_reasonField_1yqlj_739",Ia="_reasonLabel_1yqlj_751",Ba="_required_1yqlj_765",Fa="_reasonTextarea_1yqlj_775",Ua="_reasonHint_1yqlj_785",Ra="_footer_1yqlj_801",H={backdrop:Ks,fadeIn:Ys,modal:Js,slideUp:Zs,header:ea,headerDefault:ia,headerSuccess:ta,headerWarning:la,headerDanger:sa,headerIcon:aa,title:na,closeButton:ra,content:oa,description:ca,warning:ua,summary:ma,summaryRow:da,summaryLabel:ha,summaryValue:Na,summarySuccess:pa,summaryDanger:va,invalidWarning:ba,invalidWarningContent:Va,invalidWarningTitle:ga,invalidWarningText:Ta,preview:fa,previewTitle:xa,previewList:Ea,previewItem:Da,previewItemInfo:Ha,previewItemName:ka,previewItemAddress:La,previewMore:Qa,invalidDetails:ja,invalidSummary:_a,invalidList:ya,invalidItem:Sa,invalidItemInfo:Ca,invalidItemName:wa,invalidItemReason:Aa,reasonField:Pa,reasonLabel:Ia,required:Ba,reasonTextarea:Fa,reasonHint:Ua,footer:Ra},Ma={approve:{title:"Phê duyệt hàng loạt",description:'Phê duyệt các cơ sở đã chọn và chuyển sang trạng thái "Đang hoạt động"',requiresReason:!0,variant:"success",icon:e.jsxDEV(he,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:40,columnNumber:11},void 0)},reject:{title:"Từ chối hàng loạt",description:"Từ chối các cơ sở đã chọn và yêu cầu chỉnh sửa lại",requiresReason:!0,variant:"danger",icon:e.jsxDEV(ae,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:47,columnNumber:11},void 0),warningText:'Cơ sở sẽ được chuyển về trạng thái "Chờ xác minh" và cần bổ sung thông tin.'},suspend:{title:"Tạm ngừng hàng loạt",description:"Tạm ngừng hoạt động các cơ sở đã chọn",requiresReason:!0,variant:"warning",icon:e.jsxDEV(ke,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:55,columnNumber:11},void 0),warningText:"Cơ sở sẽ không thể hoạt động cho đến khi được kích hoạt lại."},activate:{title:"Kích hoạt lại hàng loạt",description:"Kích hoạt lại các cơ sở đang tạm ngừng",requiresReason:!1,variant:"success",icon:e.jsxDEV(he,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:63,columnNumber:11},void 0)},close:{title:"Ngừng hoạt động hàng loạt",description:"Ngừng hoạt động vĩnh viễn các cơ sở đã chọn",requiresReason:!0,variant:"danger",icon:e.jsxDEV(ae,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:70,columnNumber:11},void 0),warningText:'Hành động này không thể hoàn tác. Cơ sở sẽ chuyển sang trạng thái "Ngừng hoạt động" vĩnh viễn.'},export:{title:"Xuất dữ liệu CSV",description:"Xuất danh sách các cơ sở đã chọn ra file CSV",requiresReason:!1,variant:"default",icon:e.jsxDEV(Ri,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:78,columnNumber:11},void 0)}};function qa({open:s,onOpenChange:n,actionType:l,selectedStores:v,onConfirm:d,loading:r=!1}){const[N,p]=m.useState(""),h=Ma[l],{validStores:u,invalidStores:V}=Ze.useMemo(()=>{const T=[],D=[];return v.forEach(Q=>{switch(l){case"approve":Q.status==="pending"?T.push(Q):D.push({store:Q,reason:'Chỉ có thể phê duyệt cơ sở ở trạng thái "Chờ xác minh"'});break;case"reject":Q.status==="pending"||Q.status==="active"?T.push(Q):D.push({store:Q,reason:'Chỉ có thể từ chối cơ sở ở trạng thái "Chờ xác minh" hoặc "Đang hoạt động"'});break;case"suspend":Q.status==="active"?T.push(Q):D.push({store:Q,reason:'Chỉ có thể tạm ngừng cơ sở ở trạng thái "Đang hoạt động"'});break;case"activate":Q.status==="suspended"?T.push(Q):D.push({store:Q,reason:'Chỉ có thể kích hoạt lại cơ sở ở trạng thái "Tạm ngừng"'});break;case"close":Q.status==="suspended"||Q.status==="active"?T.push(Q):D.push({store:Q,reason:'Chỉ có thể ngừng hoạt động cơ sở ở trạng thái "Đang hoạt động" hoặc "Tạm ngừng"'});break;case"export":T.push(Q);break}}),{validStores:T,invalidStores:D}},[v,l]),o=V.length>0,a=u.length>0&&(!h.requiresReason||N.trim().length>0);if(Ze.useEffect(()=>{s||p("")},[s]),!s)return null;const E=T=>{T.target===T.currentTarget&&!r&&n(!1)},B=()=>{if(a&&!r){if(l==="export"){const T=new Date().toISOString().slice(0,10).replace(/-/g,"");Ji(u,`danh-sach-cua-hang-${T}.csv`)}d(h.requiresReason?N:void 0)}},f=()=>{r||(p(""),n(!1))};return e.jsxDEV("div",{className:H.backdrop,onClick:E,children:e.jsxDEV("div",{className:H.modal,children:[e.jsxDEV("div",{className:`${H.header} ${H[`header${h.variant.charAt(0).toUpperCase()+h.variant.slice(1)}`]}`,children:[e.jsxDEV("div",{className:H.headerIcon,children:h.icon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:197,columnNumber:11},this),e.jsxDEV("h2",{className:H.title,children:h.title},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:200,columnNumber:11},this),!r&&e.jsxDEV("button",{className:H.closeButton,onClick:f,"aria-label":"Đóng",children:e.jsxDEV(ae,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:207,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:202,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:196,columnNumber:9},this),e.jsxDEV("div",{className:H.content,children:[e.jsxDEV("div",{className:H.description,children:h.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:215,columnNumber:11},this),h.warningText&&e.jsxDEV("div",{className:H.warning,children:[e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:222,columnNumber:15},this),e.jsxDEV("span",{children:h.warningText},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:223,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:221,columnNumber:13},this),e.jsxDEV("div",{className:H.summary,children:[e.jsxDEV("div",{className:H.summaryRow,children:[e.jsxDEV("span",{className:H.summaryLabel,children:"Tổng số bản ghi đã chọn:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:230,columnNumber:15},this),e.jsxDEV("span",{className:H.summaryValue,children:v.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:231,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:229,columnNumber:13},this),o&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:H.summaryRow,children:[e.jsxDEV("span",{className:H.summaryLabel,children:"Bản ghi hợp lệ:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:236,columnNumber:19},this),e.jsxDEV("span",{className:`${H.summaryValue} ${H.summarySuccess}`,children:u.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:237,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:235,columnNumber:17},this),e.jsxDEV("div",{className:H.summaryRow,children:[e.jsxDEV("span",{className:H.summaryLabel,children:"Bản ghi không hợp lệ:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:240,columnNumber:19},this),e.jsxDEV("span",{className:`${H.summaryValue} ${H.summaryDanger}`,children:V.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:241,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:239,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:234,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:228,columnNumber:11},this),o&&e.jsxDEV("div",{className:H.invalidWarning,children:[e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:250,columnNumber:15},this),e.jsxDEV("div",{className:H.invalidWarningContent,children:[e.jsxDEV("div",{className:H.invalidWarningTitle,children:[V.length," cơ sở không đủ điều kiện"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:252,columnNumber:17},this),e.jsxDEV("div",{className:H.invalidWarningText,children:["Các cơ sở này sẽ được bỏ qua. Chỉ ",u.length," cơ sở hợp lệ sẽ được xử lý."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:255,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:251,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:249,columnNumber:13},this),e.jsxDEV("div",{className:H.preview,children:[e.jsxDEV("div",{className:H.previewTitle,children:["Danh sách cơ sở sẽ được xử lý (",u.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:264,columnNumber:13},this),e.jsxDEV("div",{className:H.previewList,children:[u.slice(0,10).map(T=>e.jsxDEV("div",{className:H.previewItem,children:[e.jsxDEV("div",{className:H.previewItemInfo,children:[e.jsxDEV("div",{className:H.previewItemName,children:T.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:271,columnNumber:21},this),e.jsxDEV("div",{className:H.previewItemAddress,children:T.address},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:272,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:270,columnNumber:19},this),e.jsxDEV(fi,{status:T.status},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:274,columnNumber:19},this)]},T.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:269,columnNumber:17},this)),u.length>10&&e.jsxDEV("div",{className:H.previewMore,children:["...và ",u.length-10," cơ sở khác"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:278,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:267,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:263,columnNumber:11},this),o&&e.jsxDEV("details",{className:H.invalidDetails,children:[e.jsxDEV("summary",{className:H.invalidSummary,children:["Xem danh sách cơ sở không hợp lệ (",V.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:288,columnNumber:15},this),e.jsxDEV("div",{className:H.invalidList,children:V.map(({store:T,reason:D})=>e.jsxDEV("div",{className:H.invalidItem,children:[e.jsxDEV("div",{className:H.invalidItemInfo,children:[e.jsxDEV("div",{className:H.invalidItemName,children:T.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:295,columnNumber:23},this),e.jsxDEV("div",{className:H.invalidItemReason,children:D},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:296,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:294,columnNumber:21},this),e.jsxDEV(fi,{status:T.status},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:298,columnNumber:21},this)]},T.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:293,columnNumber:19},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:291,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:287,columnNumber:13},this),h.requiresReason&&e.jsxDEV("div",{className:H.reasonField,children:[e.jsxDEV("label",{className:H.reasonLabel,children:["Lý do ",e.jsxDEV("span",{className:H.required,children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:309,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:308,columnNumber:15},this),e.jsxDEV(Pe,{value:N,onChange:T=>p(T.target.value),placeholder:`Nhập lý do ${h.title.toLowerCase()}...`,rows:4,disabled:r,className:H.reasonTextarea},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:311,columnNumber:15},this),e.jsxDEV("div",{className:H.reasonHint,children:"Lý do này sẽ được ghi vào lịch sử thay đổi của từng cơ sở."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:319,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:307,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:213,columnNumber:9},this),e.jsxDEV("div",{className:H.footer,children:[e.jsxDEV(A,{variant:"outline",onClick:f,disabled:r,children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:328,columnNumber:11},this),e.jsxDEV(A,{variant:h.variant==="danger"?"destructive":"default",onClick:B,disabled:!a||r,children:r?"Đang xử lý...":`Xác nhận ${h.title.toLowerCase()}`},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:335,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:327,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:194,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/BulkActionModal.tsx",lineNumber:193,columnNumber:5},this)}const $a="_dialogWrapper_1rkmx_4",za="_header_1rkmx_15",Oa="_headerContent_1rkmx_22",Ga="_title_1rkmx_26",Wa="_description_1rkmx_34",Xa="_content_1rkmx_47",Ka="_templateSection_1rkmx_54",Ya="_downloadButton_1rkmx_64",Ja="_templateNote_1rkmx_87",Za="_section_1rkmx_95",en="_sectionTitle_1rkmx_101",tn="_uploadArea_1rkmx_109",ln="_uploadAreaActive_1rkmx_125",sn="_uploadContent_1rkmx_131",an="_uploadIcon_1rkmx_138",nn="_uploadText_1rkmx_164",rn="_uploadTextHighlight_1rkmx_172",on="_uploadHint_1rkmx_178",cn="_filePreview_1rkmx_186",un="_fileInfo_1rkmx_201",mn="_fileIconWrapper_1rkmx_208",dn="_fileDetails_1rkmx_223",hn="_fileName_1rkmx_230",Nn="_fileSize_1rkmx_240",pn="_removeButton_1rkmx_247",vn="_errorAlert_1rkmx_267",bn="_errorAlertIcon_1rkmx_290",Vn="_errorAlertContent_1rkmx_296",gn="_errorAlertTitle_1rkmx_301",Tn="_errorAlertMessage_1rkmx_309",fn="_errorAlertClose_1rkmx_317",xn="_infoBox_1rkmx_339",En="_infoIcon_1rkmx_349",Dn="_infoText_1rkmx_356",Hn="_footer_1rkmx_365",kn="_hiddenInput_1rkmx_374",Ln="_loadingSpinner_1rkmx_378",P={dialogWrapper:$a,header:za,headerContent:Oa,title:Ga,description:Wa,content:Xa,templateSection:Ka,downloadButton:Ya,templateNote:Ja,section:Za,sectionTitle:en,uploadArea:tn,uploadAreaActive:ln,uploadContent:sn,uploadIcon:an,uploadText:nn,uploadTextHighlight:rn,uploadHint:on,filePreview:cn,fileInfo:un,fileIconWrapper:mn,fileDetails:dn,fileName:hn,fileSize:Nn,removeButton:pn,errorAlert:vn,errorAlertIcon:bn,errorAlertContent:Vn,errorAlertTitle:gn,errorAlertMessage:Tn,errorAlertClose:fn,infoBox:xn,infoIcon:En,infoText:Dn,footer:Hn,hiddenInput:kn,loadingSpinner:Ln};function Qn({open:s,onOpenChange:n,onImport:l,onDownloadTemplate:v}){const[d,r]=m.useState(null),[N,p]=m.useState(!1),[h,u]=m.useState(!1),[V,o]=m.useState(null),a=m.useRef(null),E=k=>{k.preventDefault(),k.stopPropagation(),k.type==="dragenter"||k.type==="dragover"?u(!0):k.type==="dragleave"&&u(!1)},B=k=>{if(k.preventDefault(),k.stopPropagation(),u(!1),k.dataTransfer.files&&k.dataTransfer.files[0]){const te=k.dataTransfer.files[0];f(te)}},f=k=>{if(!["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(k.type)){o("Chỉ hỗ trợ file .xlsx và .xls"),r(null);return}if(k.size>10485760){o("File không được vượt quá 10MB"),r(null);return}r(k),o(null)},T=k=>{k.target.files&&k.target.files[0]&&f(k.target.files[0])},D=()=>{var k;(k=a.current)==null||k.click()},Q=async()=>{if(!(!d||N)){p(!0);try{await(l==null?void 0:l(d))}catch(k){console.error("Import failed:",k),C.error("Có lỗi xảy ra khi import file. Vui lòng thử lại.")}finally{p(!1)}}},x=()=>{N||(r(null),o(null),n(!1))},_=()=>{v==null||v()},q=k=>k<1024?k+" B":k<1024*1024?(k/1024).toFixed(2)+" KB":(k/(1024*1024)).toFixed(2)+" MB";return e.jsxDEV(be,{open:s,onOpenChange:n,children:e.jsxDEV(Ve,{className:P.dialogWrapper,children:[e.jsxDEV(ge,{className:P.header,children:e.jsxDEV("div",{className:P.headerContent,children:[e.jsxDEV(Te,{className:P.title,children:"Import danh sách cửa hàng từ Excel"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:135,columnNumber:13},this),e.jsxDEV(fe,{className:P.description,children:["Tải lên file Excel chứa thông tin cửa hàng. Sau khi import thành công, tất cả cửa hàng sẽ ở trạng thái ",e.jsxDEV("strong",{children:"Chờ duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:138,columnNumber:47},this),"."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:136,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:134,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:133,columnNumber:9},this),e.jsxDEV("div",{className:P.content,children:[e.jsxDEV("div",{className:P.templateSection,children:[e.jsxDEV("button",{className:P.downloadButton,onClick:_,disabled:N,children:[e.jsxDEV(ii,{size:18},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:152,columnNumber:15},this),"Tải file mẫu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:147,columnNumber:13},this),e.jsxDEV("p",{className:P.templateNote,children:"Chỉ áp dụng cho cửa hàng trong phạm vi quản lý"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:155,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:146,columnNumber:11},this),e.jsxDEV("div",{className:P.section,children:[e.jsxDEV("h3",{className:P.sectionTitle,children:["Chọn file Excel ",e.jsxDEV("span",{style:{color:"var(--color-danger)"},children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:163,columnNumber:31},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:162,columnNumber:13},this),d?e.jsxDEV("div",{className:P.filePreview,children:[e.jsxDEV("div",{className:P.fileInfo,children:[e.jsxDEV("div",{className:P.fileIconWrapper,children:e.jsxDEV(Bi,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:201,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:200,columnNumber:19},this),e.jsxDEV("div",{className:P.fileDetails,children:[e.jsxDEV("p",{className:P.fileName,children:d.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:204,columnNumber:21},this),e.jsxDEV("p",{className:P.fileSize,children:q(d.size)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:205,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:203,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:199,columnNumber:17},this),e.jsxDEV("button",{className:P.removeButton,onClick:()=>r(null),disabled:N,"aria-label":"Xóa file",children:e.jsxDEV(ae,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:214,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:208,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:198,columnNumber:15},this):e.jsxDEV("div",{className:`${P.uploadArea} ${h?P.uploadAreaActive:""}`,onDragEnter:E,onDragLeave:E,onDragOver:E,onDrop:B,onClick:D,children:[e.jsxDEV("input",{ref:a,type:"file",className:P.hiddenInput,accept:".xlsx,.xls",onChange:T,disabled:N},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:175,columnNumber:17},this),e.jsxDEV("div",{className:P.uploadContent,children:[e.jsxDEV("div",{className:P.uploadIcon,children:e.jsxDEV(ci,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:186,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:185,columnNumber:19},this),e.jsxDEV("p",{className:P.uploadText,children:[e.jsxDEV("span",{className:P.uploadTextHighlight,children:"Click để chọn file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:189,columnNumber:21},this)," ","hoặc kéo thả vào đây"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:188,columnNumber:19},this),e.jsxDEV("p",{className:P.uploadHint,children:"Chỉ hỗ trợ file .xlsx và .xls"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:192,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:184,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:167,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:161,columnNumber:11},this),V&&e.jsxDEV("div",{className:P.errorAlert,children:[e.jsxDEV("div",{className:P.errorAlertIcon,children:e.jsxDEV(pe,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:224,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:223,columnNumber:15},this),e.jsxDEV("div",{className:P.errorAlertContent,children:[e.jsxDEV("p",{className:P.errorAlertTitle,children:"Không thể chọn file"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:227,columnNumber:17},this),e.jsxDEV("p",{className:P.errorAlertMessage,children:V},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:228,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:226,columnNumber:15},this),e.jsxDEV("button",{className:P.errorAlertClose,onClick:()=>o(null),"aria-label":"Đóng thông báo",children:e.jsxDEV(ae,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:235,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:230,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:222,columnNumber:13},this),e.jsxDEV("div",{className:P.infoBox,children:[e.jsxDEV(Ri,{size:18,className:P.infoIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:242,columnNumber:13},this),e.jsxDEV("p",{className:P.infoText,children:"Hệ thống sẽ kiểm tra và thông báo nếu có lỗi. Bạn có thể xem trước và chỉnh sửa trước khi xác nhận import."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:243,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:241,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:144,columnNumber:9},this),e.jsxDEV("div",{className:P.footer,children:[e.jsxDEV(A,{variant:"outline",onClick:x,disabled:N,children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:252,columnNumber:11},this),e.jsxDEV(A,{onClick:Q,disabled:!d||N,children:N?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ti,{size:16,className:P.loadingSpinner},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:265,columnNumber:17},this),"Đang xử lý..."]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:264,columnNumber:15},this):"Nhập thông tin"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:259,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:251,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:131,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/StoreImportDialog.tsx",lineNumber:130,columnNumber:5},this)}function jn(){const s=["Tên cửa hàng","Chủ hộ / Người đại diện","Mã số thuế","Số điện thoại","Tỉnh / Thành phố","Phường / Xã","Địa chỉ chi tiết","Ngành hàng chính","Đơn vị quản lý","Ghi chú (nếu có)"],n=[["Nhà hàng Phở Hà Nội","Nguyễn Văn An","0123456789","0901234567","TP. Hồ Chí Minh","Phường Bến Nghé","123 Nguyễn Huệ, Quận 1","Thực phẩm","Chi cục QLTT Quận 1","Nhà hàng phở truyền thống"],["Cà phê Sài Gòn","Trần Thị Bình","0987654321","0912345678","TP. Hồ Chí Minh","Phường Võ Thị Sáu","456 Lê Lợi, Quận 3","Đồ uống","Chi cục QLTT Quận 3","Cà phê take away"],["Cửa hàng Mỹ phẩm Beauty","Lê Thị Cúc","1234567890","0903456789","TP. Hồ Chí Minh","Phường Phạm Ngũ Lão","789 Nguyễn Trãi, Quận 5","Mỹ phẩm","Chi cục QLTT Quận 5","Bán mỹ phẩm chính hãng"],["Nhà thuốc An Khang","Phạm Văn Dũng","2345678901","0914567890","TP. Hồ Chí Minh","Phường 14","234 Lý Thường Kiệt, Quận 10","Dược phẩm","Chi cục QLTT Quận 10","Nhà thuốc GPP đạt chuẩn"],["Shop Thời trang Teen","Ngô Thị Em","3456789012","0925678901","TP. Hồ Chí Minh","Phường 1","567 Phan Đăng Lưu, Phú Nhuận","Thời trang","Chi cục QLTT Phú Nhuận","Chuyên thời trang teen"]],l=oi.book_new(),v=[s,...n],d=oi.aoa_to_sheet(v);d["!cols"]=[{wch:25},{wch:25},{wch:15},{wch:15},{wch:20},{wch:20},{wch:30},{wch:18},{wch:25},{wch:30}],oi.book_append_sheet(l,d,"Danh sách cửa hàng");const r=Mt(l,{bookType:"xlsx",type:"array"}),N=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),p=document.createElement("a"),h=URL.createObjectURL(N);p.setAttribute("href",h),p.setAttribute("download",`mau-import-cua-hang-${Sn()}.xlsx`),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(h)}async function _n(s){try{let n;if(s.name.endsWith(".xlsx")||s.name.endsWith(".xls")){const r=await s.arrayBuffer(),N=Rt(r,{type:"array"}),p=N.SheetNames[0],h=N.Sheets[p];n=oi.sheet_to_json(h,{header:1}).slice(1).map(V=>V.map(o=>o!=null?String(o).trim():""))}else n=(await s.text()).replace(/^\uFEFF/,"").split(`
`).map(u=>yn(u)).slice(1);const v=[],d=[];return n.forEach((r,N)=>{var o,a,E,B,f,T,D,Q,x,_;const p=N+2;if(!r||r.length===0||!r[0]||r[0].trim()==="")return;const h={rowIndex:p,name:((o=r[0])==null?void 0:o.trim())||"",ownerName:((a=r[1])==null?void 0:a.trim())||"",taxCode:((E=r[2])==null?void 0:E.trim())||"",phone:((B=r[3])==null?void 0:B.trim())||"",province:((f=r[4])==null?void 0:f.trim())||"",ward:((T=r[5])==null?void 0:T.trim())||"",address:((D=r[6])==null?void 0:D.trim())||"",industryName:((Q=r[7])==null?void 0:Q.trim())||"",managementUnit:((x=r[8])==null?void 0:x.trim())||"",notes:((_=r[9])==null?void 0:_.trim())||""},u=[{key:"name",label:"Tên cửa hàng"},{key:"ownerName",label:"Chủ hộ / Người đại diện"},{key:"taxCode",label:"Mã số thuế"},{key:"phone",label:"Số điện thoại"},{key:"province",label:"Tỉnh / Thành phố"},{key:"ward",label:"Phường / Xã"},{key:"address",label:"Địa chỉ chi tiết"},{key:"industryName",label:"Ngành hàng chính"},{key:"managementUnit",label:"Đơn vị quản lý"}];let V=!1;u.forEach(({key:q,label:k})=>{h[q]||(d.push({row:p,field:k,message:`${k} không được để trống`}),V=!0)}),h.taxCode&&!/^\d{10,13}$/.test(h.taxCode)&&(d.push({row:p,field:"Mã số thuế",message:"Mã số thuế phải là 10-13 chữ số"}),V=!0),h.phone&&!/^0\d{9,10}$/.test(h.phone)&&(d.push({row:p,field:"Số điện thoại",message:"Số điện thoại không đúng định dạng (phải bắt đầu bằng 0 và có 10-11 số)"}),V=!0),V||v.push(h)}),{success:d.length===0,data:v,errors:d,summary:{total:n.filter(r=>r&&r[0]&&r[0].trim()).length,valid:v.length,invalid:d.length}}}catch(n){throw console.error("Error parsing file:",n),new Error("Không thể đọc file. Vui lòng kiểm tra định dạng file.")}}function yn(s){const n=[];let l="",v=!1;for(let d=0;d<s.length;d++){const r=s[d],N=s[d+1];r==='"'?v&&N==='"'?(l+='"',d++):v=!v:r===","&&!v?(n.push(l),l=""):l+=r}return n.push(l),n}function Sn(){const s=new Date;return[s.getFullYear(),String(s.getMonth()+1).padStart(2,"0"),String(s.getDate()).padStart(2,"0"),String(s.getHours()).padStart(2,"0"),String(s.getMinutes()).padStart(2,"0"),String(s.getSeconds()).padStart(2,"0")].join("")}const Zi=[{id:1,storeId:1,storeName:"Cửa hàng Bách Hóa Xanh",updateType:"business_info",category:"general_info",categoryLabel:"Thông tin chung",description:"Cập nhật số điện thoại và email liên hệ",changes:[{field:"phone",label:"Số điện thoại",oldValue:"0901234567",newValue:"0909876543"},{field:"email",label:"Email",oldValue:"bachhoa@example.com",newValue:"bachhoa.new@example.com"}],updatedBy:"Nguyễn Văn A",updatedAt:"2025-01-14T10:30:00",status:"pending"},{id:2,storeId:3,storeName:"Nhà hàng Phở 24",updateType:"business_info",category:"address_location",categoryLabel:"Địa chỉ / Địa bàn",description:"Thay đổi địa chỉ kinh doanh",changes:[{field:"address",label:"Địa chỉ",oldValue:"123 Nguyễn Huệ, Phường Bến Nghé, Quận 1, TP.HCM",newValue:"456 Lê Lợi, Phường Bến Thành, Quận 1, TP.HCM"},{field:"ward",label:"Phường/Xã",oldValue:"Phường Bến Nghé",newValue:"Phường Bến Thành"}],updatedBy:"Trần Thị B",updatedAt:"2025-01-14T09:15:00",status:"pending"},{id:3,storeId:5,storeName:"Siêu thị Mini Mart",updateType:"business_info",category:"general_info",categoryLabel:"Thông tin chung",description:"Cập nhật tên cơ sở và mô tả",changes:[{field:"name",label:"Tên cơ sở",oldValue:"Siêu thị Mini Mart",newValue:"Siêu thị Mini Mart Plus"},{field:"description",label:"Mô tả",oldValue:"Siêu thị tiện lợi",newValue:"Siêu thị tiện lợi 24/7 - Phục vụ tận tâm"}],updatedBy:"Lê Văn C",updatedAt:"2025-01-13T16:45:00",status:"pending"},{id:4,storeId:2,storeName:"Cửa hàng Tạp Hóa Thanh Nga",updateType:"legal_profile",category:"citizen_id",categoryLabel:"CCCD / CMND chủ hộ",description:"Cập nhật CCCD mới (thẻ chip)",changes:[{field:"citizenId",label:"Số CCCD",oldValue:"025123456789",newValue:"025987654321"},{field:"citizenIdFile",label:"File CCCD",oldValue:"cccd_old.pdf",newValue:"cccd_new_2025.pdf"},{field:"issuedDate",label:"Ngày cấp",oldValue:"15/06/2015",newValue:"10/01/2025"}],updatedBy:"Nguyễn Thị Nga",updatedAt:"2025-01-14T11:20:00",status:"pending"},{id:5,storeId:4,storeName:"Quán Cafe Sunrise",updateType:"legal_profile",category:"business_license",categoryLabel:"Giấy phép kinh doanh",description:"Gia hạn giấy phép kinh doanh",changes:[{field:"licenseNumber",label:"Số giấy phép",oldValue:"GPKD-2023-001",newValue:"GPKD-2025-001"},{field:"expiryDate",label:"Ngày hết hạn",oldValue:"31/12/2024",newValue:"31/12/2026"},{field:"licenseFile",label:"File giấy phép",oldValue:"gpkd_2023.pdf",newValue:"gpkd_renewed_2025.pdf"}],updatedBy:"Phạm Văn D",updatedAt:"2025-01-14T08:00:00",status:"pending"},{id:6,storeId:3,storeName:"Nhà hàng Phở 24",updateType:"legal_profile",category:"food_safety_cert",categoryLabel:"Giấy chứng nhận ATTP",description:"Upload giấy chứng nhận ATTP mới",changes:[{field:"certNumber",label:"Số chứng nhận",oldValue:null,newValue:"ATTP-2025-HCM-123"},{field:"certFile",label:"File chứng nhận",oldValue:null,newValue:"attp_pho24_2025.pdf"},{field:"issuedDate",label:"Ngày cấp",oldValue:null,newValue:"05/01/2025"},{field:"expiryDate",label:"Ngày hết hạn",oldValue:null,newValue:"05/01/2027"}],updatedBy:"Trần Thị B",updatedAt:"2025-01-13T14:30:00",status:"pending"},{id:7,storeId:6,storeName:"Cửa hàng Điện Máy Xanh",updateType:"legal_profile",category:"fire_safety_cert",categoryLabel:"PCCC",description:"Cập nhật chứng nhận phòng cháy chữa cháy",changes:[{field:"certNumber",label:"Số chứng nhận",oldValue:"PCCC-2023-100",newValue:"PCCC-2025-100"},{field:"certFile",label:"File chứng nhận",oldValue:"pccc_2023.pdf",newValue:"pccc_renewed_2025.pdf"},{field:"inspectionDate",label:"Ngày kiểm tra",oldValue:"20/12/2023",newValue:"10/01/2025"}],updatedBy:"Hoàng Văn E",updatedAt:"2025-01-12T15:45:00",status:"pending"},{id:8,storeId:7,storeName:"Tiệm Bánh Ngọt Sweet Home",updateType:"legal_profile",category:"lease_contract",categoryLabel:"Hợp đồng thuê mặt bằng",description:"Gia hạn hợp đồng thuê",changes:[{field:"contractNumber",label:"Số hợp đồng",oldValue:"HĐ-MB-2023-456",newValue:"HĐ-MB-2025-456"},{field:"contractFile",label:"File hợp đồng",oldValue:"hd_thue_2023.pdf",newValue:"hd_thue_renewed_2025.pdf"},{field:"startDate",label:"Ngày bắt đầu",oldValue:"01/01/2023",newValue:"01/01/2025"},{field:"endDate",label:"Ngày kết thúc",oldValue:"31/12/2024",newValue:"31/12/2026"}],updatedBy:"Vũ Thị F",updatedAt:"2025-01-11T10:00:00",status:"pending"}];function Cn(){return Zi.filter(s=>s.status==="pending").length}const wn="_overlay_mqrmh_5",An="_dialog_mqrmh_47",Pn="_header_mqrmh_95",In="_headerContent_mqrmh_113",Bn="_headerTitle_mqrmh_127",Fn="_headerSubtitle_mqrmh_157",Un="_closeButton_mqrmh_173",Rn="_body_mqrmh_213",Mn="_metadata_mqrmh_233",qn="_metadataItem_mqrmh_251",$n="_metadataLabel_mqrmh_267",zn="_metadataValue_mqrmh_277",On="_badgeBlue_mqrmh_289",Gn="_badgePurple_mqrmh_309",Wn="_description_mqrmh_331",Xn="_changesSection_mqrmh_363",Kn="_sectionTitle_mqrmh_375",Yn="_changesList_mqrmh_393",Jn="_changeRow_mqrmh_407",Zn="_changeLabel_mqrmh_437",er="_changeComparison_mqrmh_455",ir="_changeOld_mqrmh_469",tr="_changeNew_mqrmh_471",lr="_changeTag_mqrmh_483",sr="_changeValue_mqrmh_501",ar="_changeValueNew_mqrmh_529",nr="_emptyValue_mqrmh_543",rr="_changeArrow_mqrmh_555",or="_rejectSection_mqrmh_573",cr="_rejectLabel_mqrmh_593",ur="_rejectTextarea_mqrmh_607",mr="_footer_mqrmh_643",dr="_footerActions_mqrmh_661",y={overlay:wn,dialog:An,header:Pn,headerContent:In,headerTitle:Bn,headerSubtitle:Fn,closeButton:Un,body:Rn,metadata:Mn,metadataItem:qn,metadataLabel:$n,metadataValue:zn,badgeBlue:On,badgePurple:Gn,description:Wn,changesSection:Xn,sectionTitle:Kn,changesList:Yn,changeRow:Jn,changeLabel:Zn,changeComparison:er,changeOld:ir,changeNew:tr,changeTag:lr,changeValue:sr,changeValueNew:ar,emptyValue:nr,changeArrow:rr,rejectSection:or,rejectLabel:cr,rejectTextarea:ur,footer:mr,footerActions:dr};function hr({open:s,update:n,onClose:l,onApprove:v,onReject:d}){const[r,N]=Ze.useState(""),[p,h]=Ze.useState(!1);if(!s||!n)return null;const u=()=>{v(n.id),l()},V=()=>{if(!p){h(!0);return}d(n.id,r),h(!1),N(""),l()},o=()=>{h(!1),N(""),l()},a=n.updateType==="business_info"?y.badgeBlue:y.badgePurple;return e.jsxDEV("div",{className:y.overlay,onClick:o,children:e.jsxDEV("div",{className:y.dialog,onClick:E=>E.stopPropagation(),children:[e.jsxDEV("div",{className:y.header,children:[e.jsxDEV("div",{className:y.headerContent,children:[e.jsxDEV("div",{className:y.headerTitle,children:[e.jsxDEV(qe,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:60,columnNumber:15},this),e.jsxDEV("h2",{children:"Chi tiết nội dung chờ phê duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:61,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:59,columnNumber:13},this),e.jsxDEV("p",{className:y.headerSubtitle,children:n.storeName},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:63,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:58,columnNumber:11},this),e.jsxDEV("button",{className:y.closeButton,onClick:o,children:e.jsxDEV(ae,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:66,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:65,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:57,columnNumber:9},this),e.jsxDEV("div",{className:y.body,children:[e.jsxDEV("div",{className:y.metadata,children:[e.jsxDEV("div",{className:y.metadataItem,children:[e.jsxDEV("span",{className:y.metadataLabel,children:"Loại thông tin:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:75,columnNumber:15},this),e.jsxDEV(ve,{className:a,children:n.updateType==="business_info"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(mi,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:79,columnNumber:21},this),e.jsxDEV("span",{children:"Thông tin cơ sở"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:80,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:78,columnNumber:19},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Mi,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:84,columnNumber:21},this),e.jsxDEV("span",{children:"Hồ sơ pháp lý"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:85,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:83,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:76,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:74,columnNumber:13},this),e.jsxDEV("div",{className:y.metadataItem,children:[e.jsxDEV("span",{className:y.metadataLabel,children:"Danh mục:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:91,columnNumber:15},this),e.jsxDEV("span",{className:y.metadataValue,children:n.categoryLabel},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:92,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:90,columnNumber:13},this),e.jsxDEV("div",{className:y.metadataItem,children:[e.jsxDEV(Et,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:95,columnNumber:15},this),e.jsxDEV("span",{className:y.metadataValue,children:n.updatedBy},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:96,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:94,columnNumber:13},this),e.jsxDEV("div",{className:y.metadataItem,children:[e.jsxDEV(ei,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:99,columnNumber:15},this),e.jsxDEV("span",{className:y.metadataValue,children:new Date(n.updatedAt).toLocaleString("vi-VN")},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:100,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:98,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:73,columnNumber:11},this),e.jsxDEV("div",{className:y.description,children:e.jsxDEV("p",{children:n.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:108,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:107,columnNumber:11},this),e.jsxDEV("div",{className:y.changesSection,children:[e.jsxDEV("h3",{className:y.sectionTitle,children:"So sánh thay đổi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:113,columnNumber:13},this),e.jsxDEV("div",{className:y.changesList,children:n.changes.map((E,B)=>e.jsxDEV(Nr,{change:E},B,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:116,columnNumber:17},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:114,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:112,columnNumber:11},this),p&&e.jsxDEV("div",{className:y.rejectSection,children:[e.jsxDEV("label",{className:y.rejectLabel,children:"Lý do từ chối:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:124,columnNumber:15},this),e.jsxDEV("textarea",{className:y.rejectTextarea,placeholder:"Nhập lý do từ chối (tùy chọn)...",value:r,onChange:E=>N(E.target.value),rows:3},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:125,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:123,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:71,columnNumber:9},this),e.jsxDEV("div",{className:y.footer,children:[e.jsxDEV(A,{variant:"outline",onClick:o,children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:138,columnNumber:11},this),e.jsxDEV("div",{className:y.footerActions,children:[e.jsxDEV(A,{variant:"destructive",onClick:V,children:p?"Xác nhận từ chối":"Từ chối"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:142,columnNumber:13},this),e.jsxDEV(A,{onClick:u,children:"Phê duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:145,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:141,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:137,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:55,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:54,columnNumber:5},this)}function Nr({change:s}){const n=s.oldValue===null||s.oldValue===void 0,l=s.oldValue==="";return e.jsxDEV("div",{className:y.changeRow,children:[e.jsxDEV("div",{className:y.changeLabel,children:s.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:160,columnNumber:7},this),e.jsxDEV("div",{className:y.changeComparison,children:[e.jsxDEV("div",{className:y.changeOld,children:[e.jsxDEV("span",{className:y.changeTag,children:"Cũ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:163,columnNumber:11},this),e.jsxDEV("div",{className:y.changeValue,children:n||l?e.jsxDEV("span",{className:y.emptyValue,children:"Chưa có"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:166,columnNumber:15},this):wi(s.oldValue)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:164,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:162,columnNumber:9},this),e.jsxDEV("div",{className:y.changeArrow,children:e.jsxDEV(Dt,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:173,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:172,columnNumber:9},this),e.jsxDEV("div",{className:y.changeNew,children:[e.jsxDEV("span",{className:y.changeTag,children:"Mới"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:176,columnNumber:11},this),e.jsxDEV("div",{className:`${y.changeValue} ${y.changeValueNew}`,children:wi(s.newValue)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:177,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:175,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:161,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdateDetailDialog.tsx",lineNumber:159,columnNumber:5},this)}function wi(s){return s==null?"Chưa có":typeof s=="string"&&s.includes(".pdf")?`📄 ${s}`:String(s)}const pr="_overlay_qtuay_5",vr="_dialog_qtuay_61",br="_header_qtuay_111",Vr="_headerContent_qtuay_129",gr="_headerTitle_qtuay_143",Tr="_headerSubtitle_qtuay_173",fr="_closeButton_qtuay_189",xr="_filters_qtuay_229",Er="_searchWrapper_qtuay_249",Dr="_nativeSelectWrapper_qtuay_273",Hr="_selectIcon_qtuay_289",kr="_nativeSelect_qtuay_273",Lr="_countBadge_qtuay_375",Qr="_body_qtuay_387",jr="_emptyState_qtuay_403",_r="_emptyTitle_qtuay_423",yr="_emptyDescription_qtuay_439",Sr="_tableWrapper_qtuay_459",Cr="_table_qtuay_459",wr="_tableRow_qtuay_523",Ar="_storeName_qtuay_555",Pr="_description_qtuay_567",Ir="_descriptionContent_qtuay_577",Br="_categoryLabel_qtuay_589",Fr="_descriptionText_qtuay_605",Ur="_updatedBy_qtuay_615",Rr="_updatedAt_qtuay_625",Mr="_actions_qtuay_637",qr="_actionButtons_qtuay_647",$r="_actionBtn_qtuay_659",zr="_actionApprove_qtuay_697",Or="_actionReject_qtuay_707",Gr="_badgeBlue_qtuay_719",Wr="_badgePurple_qtuay_741",Xr="_footer_qtuay_765",Kr="_footerInfo_qtuay_783",w={overlay:pr,dialog:vr,header:br,headerContent:Vr,headerTitle:gr,headerSubtitle:Tr,closeButton:fr,filters:xr,searchWrapper:Er,nativeSelectWrapper:Dr,selectIcon:Hr,nativeSelect:kr,countBadge:Lr,body:Qr,emptyState:jr,emptyTitle:_r,emptyDescription:yr,tableWrapper:Sr,table:Cr,tableRow:wr,storeName:Ar,description:Pr,descriptionContent:Ir,categoryLabel:Br,descriptionText:Fr,updatedBy:Ur,updatedAt:Rr,actions:Mr,actionButtons:qr,actionBtn:$r,actionApprove:zr,actionReject:Or,badgeBlue:Gr,badgePurple:Wr,footer:Xr,footerInfo:Kr};function Yr({open:s,onClose:n}){const[l,v]=m.useState(Zi),[d,r]=m.useState(""),[N,p]=m.useState("all"),[h,u]=m.useState(null),[V,o]=m.useState(!1),a=m.useMemo(()=>{let x=l.filter(_=>_.status==="pending");if(N!=="all"&&(x=x.filter(_=>_.updateType===N)),d){const _=d.toLowerCase();x=x.filter(q=>q.storeName.toLowerCase().includes(_)||q.categoryLabel.toLowerCase().includes(_)||q.description.toLowerCase().includes(_))}return x.sort((_,q)=>new Date(q.updatedAt).getTime()-new Date(_.updatedAt).getTime())},[l,N,d]),E=x=>{u(x),o(!0)},B=x=>{v(_=>_.map(q=>q.id===x?{...q,status:"approved"}:q)),C.success("Đã phê duyệt thành công",{description:"Thông tin đã được cập nhật vào hệ thống"})},f=(x,_)=>{v(q=>q.map(k=>k.id===x?{...k,status:"rejected",rejectionReason:_}:k)),C.error("Đã từ chối yêu cầu",{description:_||"Yêu cầu cập nhật đã bị từ chối"})},T=(x,_)=>{_.stopPropagation(),B(x.id)},D=(x,_)=>{_.stopPropagation(),window.confirm(`Bạn có chắc muốn từ chối yêu cầu cập nhật "${x.description}"?`)&&f(x.id)};if(!s)return null;const Q=a.length;return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:w.overlay,onClick:n,children:e.jsxDEV("div",{className:w.dialog,onClick:x=>x.stopPropagation(),children:[e.jsxDEV("div",{className:w.header,children:[e.jsxDEV("div",{className:w.headerContent,children:[e.jsxDEV("div",{className:w.headerTitle,children:[e.jsxDEV(qe,{size:24},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:105,columnNumber:17},this),e.jsxDEV("h2",{children:"Danh sách thông tin chờ phê duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:106,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:104,columnNumber:15},this),e.jsxDEV("p",{className:w.headerSubtitle,children:"Các thông tin cơ sở và hồ sơ pháp lý được người dùng cập nhật và đang chờ xác nhận"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:108,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:103,columnNumber:13},this),e.jsxDEV("button",{className:w.closeButton,onClick:n,children:e.jsxDEV(ae,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:113,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:112,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:102,columnNumber:11},this),e.jsxDEV("div",{className:w.filters,children:[e.jsxDEV("div",{className:w.searchWrapper,children:e.jsxDEV(Ai,{value:d,onChange:r,placeholder:"Tìm kiếm theo tên cơ sở..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:120,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:119,columnNumber:13},this),e.jsxDEV("div",{className:w.nativeSelectWrapper,children:[e.jsxDEV(Ui,{size:16,className:w.selectIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:128,columnNumber:15},this),e.jsxDEV("select",{value:N,onChange:x=>p(x.target.value),className:w.nativeSelect,children:[e.jsxDEV("option",{value:"all",children:"Tất cả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:134,columnNumber:17},this),e.jsxDEV("option",{value:"business_info",children:"Thông tin cơ sở"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:135,columnNumber:17},this),e.jsxDEV("option",{value:"legal_profile",children:"Hồ sơ pháp lý"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:136,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:129,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:127,columnNumber:13},this),e.jsxDEV("div",{className:w.countBadge,children:e.jsxDEV(ve,{variant:"secondary",children:[Q," yêu cầu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:141,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:140,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:118,columnNumber:11},this),e.jsxDEV("div",{className:w.body,children:a.length===0?e.jsxDEV("div",{className:w.emptyState,children:[e.jsxDEV(qe,{size:48},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:151,columnNumber:17},this),e.jsxDEV("p",{className:w.emptyTitle,children:"Không có yêu cầu chờ duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:152,columnNumber:17},this),e.jsxDEV("p",{className:w.emptyDescription,children:d?"Không tìm thấy kết quả phù hợp":"Hiện tại không có thông tin nào đang chờ phê duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:153,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:150,columnNumber:15},this):e.jsxDEV("div",{className:w.tableWrapper,children:e.jsxDEV("table",{className:w.table,children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{children:"Tên cơ sở"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:164,columnNumber:23},this),e.jsxDEV("th",{children:"Loại thông tin"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:165,columnNumber:23},this),e.jsxDEV("th",{children:"Nội dung chi tiết"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:166,columnNumber:23},this),e.jsxDEV("th",{children:"Người cập nhật"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:167,columnNumber:23},this),e.jsxDEV("th",{children:"Thời gian"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:168,columnNumber:23},this),e.jsxDEV("th",{children:"Thao tác"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:169,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:163,columnNumber:21},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:162,columnNumber:19},this),e.jsxDEV("tbody",{children:a.map(x=>e.jsxDEV("tr",{className:w.tableRow,onClick:()=>E(x),children:[e.jsxDEV("td",{className:w.storeName,children:x.storeName},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:179,columnNumber:25},this),e.jsxDEV("td",{children:e.jsxDEV(Jr,{type:x.updateType},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:181,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:180,columnNumber:25},this),e.jsxDEV("td",{className:w.description,children:e.jsxDEV("div",{className:w.descriptionContent,children:[e.jsxDEV("span",{className:w.categoryLabel,children:x.categoryLabel},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:185,columnNumber:29},this),e.jsxDEV("span",{className:w.descriptionText,children:x.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:188,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:184,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:183,columnNumber:25},this),e.jsxDEV("td",{className:w.updatedBy,children:x.updatedBy},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:193,columnNumber:25},this),e.jsxDEV("td",{className:w.updatedAt,children:Zr(x.updatedAt)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:194,columnNumber:25},this),e.jsxDEV("td",{className:w.actions,children:e.jsxDEV("div",{className:w.actionButtons,children:[e.jsxDEV("button",{className:w.actionBtn,onClick:()=>E(x),title:"Xem chi tiết",children:e.jsxDEV(Ht,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:204,columnNumber:31},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:199,columnNumber:29},this),e.jsxDEV("button",{className:`${w.actionBtn} ${w.actionApprove}`,onClick:_=>T(x,_),title:"Phê duyệt",children:e.jsxDEV(he,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:211,columnNumber:31},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:206,columnNumber:29},this),e.jsxDEV("button",{className:`${w.actionBtn} ${w.actionReject}`,onClick:_=>D(x,_),title:"Từ chối",children:e.jsxDEV(de,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:218,columnNumber:31},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:213,columnNumber:29},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:198,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:197,columnNumber:25},this)]},x.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:174,columnNumber:23},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:172,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:161,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:160,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:148,columnNumber:11},this),e.jsxDEV("div",{className:w.footer,children:[e.jsxDEV("p",{className:w.footerInfo,children:["Tổng số: ",e.jsxDEV("strong",{children:Q},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:233,columnNumber:24},this)," yêu cầu chờ phê duyệt"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:232,columnNumber:13},this),e.jsxDEV(A,{variant:"outline",onClick:n,children:"Đóng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:235,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:231,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:100,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:99,columnNumber:7},this),e.jsxDEV(hr,{open:V,update:h,onClose:()=>o(!1),onApprove:B,onReject:f},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:243,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:98,columnNumber:5},this)}function Jr({type:s}){const n=s==="business_info";return e.jsxDEV(ve,{className:n?w.badgeBlue:w.badgePurple,children:n?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(mi,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:261,columnNumber:11},this),e.jsxDEV("span",{children:"Thông tin cơ sở"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:262,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:260,columnNumber:9},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Mi,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:266,columnNumber:11},this),e.jsxDEV("span",{children:"Hồ sơ pháp lý"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:267,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:265,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/ui-kit/PendingUpdatesDialog.tsx",lineNumber:258,columnNumber:5},this)}function Zr(s){const n=new Date(s),v=new Date().getTime()-n.getTime(),d=Math.floor(v/6e4),r=Math.floor(v/36e5),N=Math.floor(v/864e5);return d<60?`${d} phút trước`:r<24?`${r} giờ trước`:N<7?`${N} ngày trước`:n.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}const eo="_pageContainer_1f230_1",io="_summaryContainer_1f230_13",to="_summaryGrid_1f230_21",lo="_tableContainer_1f230_35",so="_tableCard_1f230_45",ao="_storeName_1f230_53",no="_storeType_1f230_73",ro="_ownerPhone_1f230_91",oo="_pendingButton_1f230_107",co="_pendingBadge_1f230_123",me={pageContainer:eo,summaryContainer:io,summaryGrid:to,tableContainer:lo,tableCard:so,storeName:ao,storeType:no,ownerPhone:ro,pendingButton:oo,pendingBadge:co};function jo(){const s=ht(),[n,l]=m.useState(""),[v,d]=m.useState(new Set),[r,N]=m.useState("active"),[p,h]=m.useState("all"),[u,V]=m.useState("active"),[o,a]=m.useState(1),[E,B]=m.useState(20),[f,T]=m.useState({open:!1,title:"",description:"",variant:"default",onConfirm:()=>{}}),[D,Q]=m.useState({open:!1,storeId:0,storeName:""}),[x,_]=m.useState({open:!1,store:null}),[q,k]=m.useState(!1),[te,Oe]=m.useState(!1),[Ie,le]=m.useState(!1),[M,xe]=m.useState({hasViolations:"all",hasComplaints:"all",riskLevel:"all",businessType:"all"}),[Ne,Ge]=m.useState({open:!1,document:null}),[b,Ee]=m.useState({open:!1,actionType:"export",loading:!1}),[oe,We]=m.useState({open:!1,storeId:0,storeName:""}),[ue,Be]=m.useState({open:!1,storeId:0,storeName:""}),[xi,Xe]=m.useState(!1),Ke="mappa_stores",[z,ee]=m.useState([]),[di,ti]=m.useState(!0),[li,si]=m.useState(null),[O,ai]=m.useState([]),[ni,J]=m.useState(!0);m.useEffect(()=>{(async()=>{try{ti(!0),si(null),console.log("📥 Fetching stores from API...");const c=p&&p!=="all"?{province_id:p}:void 0,g=await At(1e4,0,c);console.log("Successfully loaded",g.length,"stores from API"),c!=null&&c.province_id&&console.log("📍 Filtered by province_id:",c.province_id),ee(g);try{localStorage.setItem(Ke,JSON.stringify(g))}catch(I){console.warn("Could not save to localStorage:",I)}}catch(c){console.error("Error loading stores:",c),si(c.message||"Failed to load stores");try{const g=localStorage.getItem(Ke);if(g){const I=JSON.parse(g);console.warn("⚠️ Loaded stores from localStorage fallback"),ee(I)}else console.warn("⚠️ Using mock data as last resort"),ee(Si)}catch(g){console.error("Fallback error:",g),ee(Si)}}finally{ti(!1)}})()},[p]),m.useEffect(()=>{(async()=>{try{J(!0),console.log("📥 Fetching provinces from API...");const c=await vt.listProvinces();console.log("Successfully loaded",c.length,"provinces from API"),ai(c)}catch(c){console.error("Error loading provinces:",c),ai([{id:"1",code:"HCM",name:"Quận 1"},{id:"2",code:"HCM",name:"Quận 3"},{id:"3",code:"HCM",name:"Quận 5"},{id:"4",code:"HCM",name:"Quận 10"}])}finally{J(!1)}})()},[]),m.useEffect(()=>{try{localStorage.setItem(Ke,JSON.stringify(z))}catch(i){console.error("Error saving stores to localStorage:",i)}},[z]);const ri=(i,c)=>{let g=i;return c.hasViolations&&c.hasViolations!=="all"&&(g=g.filter(I=>{const U=qt(I.id).length>0;return c.hasViolations==="yes"?U:!U})),c.hasComplaints&&c.hasComplaints!=="all"&&(g=g.filter(I=>{const U=$t(I.id).length>0;return c.hasComplaints==="yes"?U:!U})),c.riskLevel&&c.riskLevel!=="all"&&(g=g.filter(I=>c.riskLevel==="none"?!I.riskLevel||I.riskLevel==="none":I.riskLevel===c.riskLevel)),c.businessType&&c.businessType!=="all"&&(g=g.filter(I=>I.businessType===c.businessType)),g},Ye=i=>{_({open:!0,store:i})},t=i=>{var g,I;const c={id:Date.now(),storeId:(g=x.store)==null?void 0:g.id,storeName:(I=x.store)==null?void 0:I.name,type:"quick-edit",changedFields:Object.keys(i).filter(X=>{var U;return X!=="changeReason"&&i[X]!==((U=x.store)==null?void 0:U[X])}),newData:i,changeReason:i.changeReason,status:"pending",submittedAt:new Date().toISOString(),submittedBy:"Current User"};console.log("📝 Approval Request Created:",c),ee(X=>X.map(U=>{var ne;return U.id===((ne=x.store)==null?void 0:ne.id)?{...U,name:i.name,phone:i.phone,email:i.email,notes:i.notes,tags:i.tags,hasPendingApproval:!0,pendingApprovalType:"quick-edit"}:U})),C.success("Thay đổi đã được gửi và đang chờ phê duyệt",{description:"Bạn sẽ nhận được thông báo khi yêu cầu được xử lý.",duration:5e3})},L=i=>{Q({open:!0,storeId:i.id,storeName:i.name})},$=i=>{ee(c=>c.map(g=>g.id===D.storeId?{...g,riskLevel:i.level}:g)),C.success(`Gắn rủi ro mức độ ${i.level==="high"?"Cao":i.level==="medium"?"Trung bình":"Thấp"} thành công`)},Y=i=>{T({open:!0,title:"Tạm ngừng hoạt động",description:`Bạn có chắc chắn muốn tạm ngừng hoạt động của cơ sở "${i.name}"?`,variant:"warning",onConfirm:()=>{ee(c=>c.map(g=>g.id===i.id?{...g,status:"suspended"}:g)),C.success("Tạm ngừng cơ sở thành công")}})},Z=i=>{T({open:!0,title:"Ngừng hoạt động",description:`Bạn có chắc chắn muốn ngừng hoạt động vĩnh viễn cơ sở "${i.name}"? Hành động này không thể hoàn tác.`,variant:"danger",requireDoubleConfirm:!0,onConfirm:()=>{ee(c=>c.map(g=>g.id===i.id?{...g,status:"closed"}:g)),C.success("Ngừng hoạt động cơ sở thành công")}})},ce=i=>{T({open:!0,title:"Khôi phục hoạt động",description:`Bạn có chắc chn muốn khôi phục hoạt động cơ sở "${i.name}"?`,variant:"default",onConfirm:()=>{ee(c=>c.map(g=>g.id===i.id?{...g,status:"active"}:g)),C.success("Khôi phục cơ sở thành công")}})},Le=i=>{T({open:!0,title:"Xóa cơ sở",description:`Bạn có chắc chắn muốn xóa cơ sở "${i.name}"? Hành động này không thể hoàn tác.`,variant:"danger",onConfirm:()=>{ee(c=>c.filter(g=>g.id!==i.id)),C.success("Xóa cơ sở thành công")}})},De=i=>{const c=z.find(g=>g.id===i);c&&We({open:!0,storeId:c.id,storeName:c.name})},Qe=i=>{const c=z.find(g=>g.id===i);c&&Be({open:!0,storeId:c.id,storeName:c.name})},je=(i,c)=>{const g=z.find(I=>I.id===oe.storeId);g&&(ee(I=>I.map(X=>X.id===oe.storeId?{...X,status:"active"}:X)),console.log("✅ Approval Audit Log:",{storeId:oe.storeId,storeName:oe.storeName,action:"approve",oldStatus:g.status,newStatus:"active",reason:i,verifyText:c,timestamp:new Date().toISOString(),performedBy:"Current User"}),C.success(`Đã phê duyệt cửa hàng "${oe.storeName}"`,{description:'Cửa hàng đã chuyển sang trạng thái "Đang hoạt động"',duration:5e3}),We({open:!1,storeId:0,storeName:""}))},et=(i,c)=>{const g=z.find(I=>I.id===ue.storeId);g&&(ee(I=>I.map(X=>X.id===ue.storeId?{...X,status:"rejected"}:X)),console.log("❌ Rejection Audit Log:",{storeId:ue.storeId,storeName:ue.storeName,action:"reject",oldStatus:g.status,newStatus:"rejected",reason:i,verifyText:c,timestamp:new Date().toISOString(),performedBy:"Current User"}),C.error(`Đã từ chối phê duyệt cửa hàng "${ue.storeName}"`,{description:'Cửa hàng đã chuyển sang trạng thái "Từ chối phê duyệt"',duration:5e3}),Be({open:!1,storeId:0,storeName:""}))},_e={total:z.length,active:z.filter(i=>i.status==="active").length,pending:z.filter(i=>i.status==="pending").length,suspended:z.filter(i=>i.status==="suspended").length,closed:z.filter(i=>i.status==="closed").length,other:z.filter(i=>i.status!=="active"&&i.status!=="pending"&&i.status!=="suspended"&&i.status!=="closed").length,highRisk:z.filter(i=>i.riskLevel==="high").length},Fe=m.useMemo(()=>{let i=z;return u!=="all"&&(u==="other"?i=i.filter(c=>c.status!=="active"&&c.status!=="pending"&&c.status!=="suspended"&&c.status!=="closed"):i=i.filter(c=>c.status===u)),n&&(i=i.filter(c=>c.name.toLowerCase().includes(n.toLowerCase())||c.address.toLowerCase().includes(n.toLowerCase()))),r&&(r==="highRisk"?i=i.filter(c=>c.riskLevel==="high"):r==="other"?i=i.filter(c=>c.status!=="active"&&c.status!=="pending"&&c.status!=="suspended"&&c.status!=="closed"):i=i.filter(c=>c.status===r)),M&&(i=ri(i,M)),i},[u,n,r,M,z]),hi=m.useMemo(()=>{const i=(o-1)*E;return Fe.slice(i,i+E)},[Fe,o,E]),it=Math.ceil(Fe.length/E),Ni=m.useMemo(()=>z.filter(i=>v.has(i.id)),[z,v]),Ue=i=>{Ee({open:!0,actionType:i,loading:!1})},tt=async i=>{Ee(U=>({...U,loading:!0})),await new Promise(U=>setTimeout(U,1500));const{actionType:c}=b,g=Ni.filter(U=>{switch(c){case"approve":return U.status==="pending";case"reject":return U.status==="pending"||U.status==="active";case"suspend":return U.status==="active";case"activate":return U.status==="suspended";case"close":return U.status==="suspended"||U.status==="active";case"export":return!0;default:return!1}}).map(U=>U.id),I=g.length;c!=="export"&&ee(U=>U.map(ne=>{if(!g.includes(ne.id))return ne;let ye=ne.status;switch(c){case"approve":ye="active";break;case"reject":ye="pending";break;case"suspend":ye="suspended";break;case"activate":ye="active";break;case"close":ye="closed";break}return console.log("📋 Audit Log:",{storeId:ne.id,storeName:ne.name,action:c,oldStatus:ne.status,newStatus:ye,reason:i,timestamp:new Date().toISOString(),performedBy:"Current User"}),{...ne,status:ye}}));const X={approve:"phê duyệt",reject:"từ chi",suspend:"tạm ngừng",activate:"kích hoạt lại",close:"ngừng hoạt động",export:"xuất"};c==="export"?(console.log("📥 Exporting stores:",Ni),C.success(`Xuất ${I} cơ sở thành công`)):C.success(`${X[c].charAt(0).toUpperCase()+X[c].slice(1)} ${I} cơ sở thành công`,{description:i?`Lý do: ${i}`:void 0,duration:5e3}),Ee({open:!1,actionType:"export",loading:!1}),d(new Set)},lt=[{label:"Xuất CSV",onClick:()=>Ue("export"),variant:"secondary",icon:e.jsxDEV(ii,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:712,columnNumber:13},this)},{label:"Phê duyệt",onClick:()=>Ue("approve"),variant:"default",icon:e.jsxDEV(he,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:718,columnNumber:13},this)},{label:"Từ chối",onClick:()=>Ue("reject"),variant:"secondary",icon:e.jsxDEV(de,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:724,columnNumber:13},this)},{label:"Tạm ngừng",onClick:()=>Ue("suspend"),variant:"secondary",icon:e.jsxDEV(jt,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:730,columnNumber:13},this)},{label:"Kích hoạt lại",onClick:()=>Ue("activate"),variant:"default",icon:e.jsxDEV(_t,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:736,columnNumber:13},this)},{label:"Ngừng hoạt động",onClick:()=>Ue("close"),variant:"destructive",icon:e.jsxDEV(yt,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:742,columnNumber:13},this)}],st=i=>{const c=[];switch(i.status){case"pending":case"rejected":c.push(ie.view(()=>s(`/registry/stores/${i.id}`)),ie.edit(()=>Ye(i)),ie.delete(()=>Le(i)));break;case"active":c.push(ie.view(()=>s(`/registry/stores/${i.id}`)),ie.edit(()=>Ye(i)),ie.assignRisk(()=>L(i)),ie.viewHistory(()=>s(`/registry/stores/${i.id}?tab=inspections`)),ie.viewViolations(()=>s(`/registry/stores/${i.id}?tab=violations`)),ie.viewLegal(()=>s(`/registry/stores/${i.id}?tab=legal`)),{...ie.pause(()=>Y(i)),separator:!0});break;case"suspended":c.push(ie.view(()=>s(`/registry/stores/${i.id}`)),ie.resume(()=>ce(i)),{...ie.delete(()=>Z(i)),label:"Ngừng hoạt động",separator:!0});break;case"closed":c.push(ie.view(()=>s(`/registry/stores/${i.id}`)),ie.viewHistory(()=>s(`/registry/stores/${i.id}?tab=history`)),{...ie.delete(()=>Le(i)),separator:!0});break}return c},at=[{key:"stt",label:"STT",width:"60px",align:"center",render:i=>{const c=hi.findIndex(I=>I.id===i.id),g=(o-1)*E+(c>=0?c:0)+1;return e.jsxDEV("div",{style:{fontWeight:"var(--font-weight-medium)"},children:g},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:808,columnNumber:16},this)}},{key:"name",label:"Tên cơ sở",sortable:!0,width:"300px",render:i=>e.jsxDEV("div",{children:[e.jsxDEV("div",{className:me.storeName,children:i.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:818,columnNumber:11},this),e.jsxDEV("div",{className:me.storeType,children:i.type},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:819,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:817,columnNumber:9},this)},{key:"ownerName",label:"Chủ hộ kinh doanh",sortable:!0,width:"190px",render:i=>(i.id===1&&console.log("Store 1 data:",{ownerName:i.ownerName,ownerPhone:i.ownerPhone}),e.jsxDEV("div",{children:[e.jsxDEV("div",{children:i.ownerName||"—"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:835,columnNumber:13},this),i.ownerPhone&&e.jsxDEV("div",{className:me.ownerPhone,children:i.ownerPhone},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:837,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:834,columnNumber:11},this))},{key:"taxCode",label:"Mã số thuế",sortable:!0,width:"140px",truncate:!0,render:i=>i.taxCode||"—"},{key:"address",label:"Địa chỉ",sortable:!0,width:"300px",truncate:!0,render:i=>i.address},{key:"jurisdiction",label:"Địa bàn",sortable:!0,width:"110px",render:i=>i.jurisdiction},{key:"status",label:"Trạng thái",width:"180px",render:i=>e.jsxDEV(fi,{status:i.status},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:870,columnNumber:26},this)},{key:"actions",label:"Thao tác",width:"160px",sticky:"right",render:i=>e.jsxDEV(Tt,{actions:st(i)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:878,columnNumber:9},this)}],nt=i=>{const c=typeof i=="string"?parseInt(i):i,g=new Set(v);g.has(c)?g.delete(c):g.add(c),d(g)},rt=i=>{d(i?new Set(hi.map(c=>c.id)):new Set)};m.useEffect(()=>{a(1)},[p,u,n,r]),m.useEffect(()=>{N(u==="all"?null:u)},[u]);const ot=()=>{const i={};p&&p!=="all"&&(i.jurisdiction=p),u&&u!=="all"&&(i.status=u),M.hasViolations&&M.hasViolations!=="all"&&(i.hasViolations=M.hasViolations),M.hasComplaints&&M.hasComplaints!=="all"&&(i.hasComplaints=M.hasComplaints),M.riskLevel&&M.riskLevel!=="all"&&(i.riskLevel=M.riskLevel),M.businessType&&M.businessType!=="all"&&(i.businessType=M.businessType),s("/map",{state:{filters:i,fromPage:"stores-list"}})},Ei=p!=="all"||u!=="all"||M.hasViolations!=="all"||M.hasComplaints!=="all"||M.riskLevel!=="all"||M.businessType!=="all";return e.jsxDEV("div",{className:me.pageContainer,children:[e.jsxDEV(pt,{breadcrumbs:[{label:"Trang chủ",href:"/"},{label:"Cơ sở & Địa bàn"}],title:"Tra cứu cơ sở",actions:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(A,{variant:"outline",size:"sm",onClick:()=>{l(""),h("all"),V("all"),N(null),C.success("Đã tải lại dữ liệu")},children:[e.jsxDEV(yi,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:983,columnNumber:15},this),"Tải lại"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:976,columnNumber:13},this),e.jsxDEV(A,{variant:"outline",size:"sm",onClick:()=>k(!0),children:[e.jsxDEV(ci,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:987,columnNumber:15},this),"Nhập dữ liệu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:986,columnNumber:13},this),e.jsxDEV(A,{variant:"outline",size:"sm",onClick:()=>{let i=z;v.size>0&&(i=z.filter(X=>v.has(X.id)));const g=`danh-sach-cua-hang_${new Date().toISOString().split("T")[0]}`;Xs(i,g);const I=v.size>0?`${v.size} cửa hàng được chọn`:Fe.length<z.length?`${Fe.length} cửa hàng (đã lọc)`:`${z.length} cửa hàng`;C.success("Xuất dữ liệu thành công",{description:`Đã xuất ${I} sang file CSV`,duration:5e3})},children:[e.jsxDEV(ii,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1019,columnNumber:15},this),"Xuất dữ liệu"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:990,columnNumber:13},this),e.jsxDEV(A,{variant:"secondary",size:"sm",onClick:()=>Xe(!0),className:me.pendingButton,title:"Danh sách thông tin cơ sở & hồ sơ pháp lý đang chờ phê duyệt",children:[e.jsxDEV(kt,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1029,columnNumber:15},this),"Chờ duyệt",e.jsxDEV(ve,{variant:"destructive",className:me.pendingBadge,children:Cn()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1031,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1022,columnNumber:13},this),e.jsxDEV(A,{size:"sm",onClick:()=>le(!0),children:[e.jsxDEV(Lt,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1039,columnNumber:15},this),"Thêm mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1038,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:975,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:968,columnNumber:7},this),e.jsxDEV("div",{className:me.summaryContainer,children:[e.jsxDEV("div",{className:me.summaryGrid,children:[e.jsxDEV(Re,{label:"Đang hoạt động",value:_e.active,icon:he,variant:"success",active:r==="active",onClick:()=>{N("active"),V("active")}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1050,columnNumber:11},this),e.jsxDEV(Re,{label:"Chờ duyệt",value:_e.pending,icon:ei,variant:"warning",active:r==="pending",onClick:()=>{N("pending"),V("pending")}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1061,columnNumber:11},this),e.jsxDEV(Re,{label:"Tạm ngừng",value:_e.suspended,icon:Pi,variant:"danger",active:r==="suspended",onClick:()=>{N("suspended"),V("suspended")}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1072,columnNumber:11},this),e.jsxDEV(Re,{label:"Ngừng hoạt động",value:_e.closed,icon:de,variant:"neutral",active:r==="closed",onClick:()=>{N("closed"),V("closed")}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1083,columnNumber:11},this),_e.other>0&&e.jsxDEV(Re,{label:"Khác",value:_e.other,icon:ke,variant:"warning",active:r==="other",onClick:()=>{N("other"),V("other")}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1095,columnNumber:13},this),e.jsxDEV(Re,{label:"Tổng số cơ sở",value:_e.total,icon:mi,variant:"info",active:r===null,onClick:()=>{N(null),V("all")}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1107,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1049,columnNumber:9},this),e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-3)",padding:"var(--spacing-4) 0",width:"100%"},children:[e.jsxDEV(os,{appliedFilters:M,onApply:i=>{xe(i),C.success("Đã áp dụng bộ lọc nâng cao")},onClear:()=>{xe({hasViolations:"all",hasComplaints:"all",riskLevel:"all",businessType:"all"}),C.success("Đã xoá bộ lọc nâng cao")},hasActiveFilters:M.hasViolations!=="all"||M.hasComplaints!=="all"||M.riskLevel!=="all"||M.businessType!=="all",iconOnly:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1129,columnNumber:11},this),e.jsxDEV(Se,{value:p,onValueChange:h,disabled:ni,children:[e.jsxDEV(Ce,{style:{width:"200px",border:"1px solid #e5e7eb"},children:e.jsxDEV(we,{placeholder:ni?"Đang tải...":"Chọn địa bàn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1156,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1155,columnNumber:13},this),e.jsxDEV(Ae,{children:[e.jsxDEV(W,{value:"all",children:"Tất cả địa bàn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1159,columnNumber:15},this),O.map(i=>e.jsxDEV(W,{value:i.id,children:i.name},i.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1161,columnNumber:17},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1158,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1154,columnNumber:11},this),e.jsxDEV(Se,{value:u,onValueChange:V,children:[e.jsxDEV(Ce,{style:{width:"200px",border:"1px solid #e5e7eb"},children:e.jsxDEV(we,{placeholder:"Chọn trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1171,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1170,columnNumber:13},this),e.jsxDEV(Ae,{children:[e.jsxDEV(W,{value:"all",children:"Tất cả trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1174,columnNumber:15},this),e.jsxDEV(W,{value:"pending",children:"Chờ duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1175,columnNumber:15},this),e.jsxDEV(W,{value:"active",children:"Đang hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1176,columnNumber:15},this),e.jsxDEV(W,{value:"suspended",children:"Tạm ngưng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1177,columnNumber:15},this),e.jsxDEV(W,{value:"rejected",children:"Từ chối phê duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1178,columnNumber:15},this),e.jsxDEV(W,{value:"closed",children:"Ngừng hoạt động"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1179,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1173,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1169,columnNumber:11},this),e.jsxDEV("div",{style:{width:"280px",flexShrink:0},children:e.jsxDEV(Ai,{placeholder:"Tên cơ sở",value:n,onChange:i=>l(i.target.value)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1185,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1184,columnNumber:11},this),e.jsxDEV(A,{variant:"outline",size:"sm",onClick:ot,disabled:!Ei,title:Ei?"Xem trên bản đồ điều hành":"Vui lòng chọn ít nhất một bộ lọc để xem bản đồ",style:{height:"38px",padding:"0 var(--spacing-4)",display:"inline-flex",alignItems:"center",gap:"var(--spacing-2)"},children:[e.jsxDEV(Qt,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1207,columnNumber:13},this),"Bản đồ"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1193,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1121,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1047,columnNumber:7},this),e.jsxDEV("div",{className:me.tableContainer,children:di?e.jsxDEV(pi,{children:e.jsxDEV(vi,{style:{padding:"40px",textAlign:"center"},children:e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[e.jsxDEV(yi,{size:32,style:{animation:"spin 1s linear infinite"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1219,columnNumber:17},this),e.jsxDEV("p",{style:{fontSize:"16px",color:"#666"},children:"Đang tải dữ liệu cơ sở..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1220,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1218,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1217,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1216,columnNumber:11},this):li?e.jsxDEV(pi,{children:e.jsxDEV(vi,{style:{padding:"40px",textAlign:"center"},children:e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",color:"#d32f2f"},children:[e.jsxDEV(ke,{size:32},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1228,columnNumber:17},this),e.jsxDEV("p",{style:{fontSize:"16px"},children:["Lỗi khi tải dữ liệu: ",li]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1229,columnNumber:17},this),e.jsxDEV(A,{size:"sm",onClick:()=>window.location.reload(),children:"Tải lại trang"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1230,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1227,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1226,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1225,columnNumber:11},this):e.jsxDEV(pi,{children:e.jsxDEV(vi,{className:me.tableCard,children:[v.size>0&&e.jsxDEV(bt,{selectedCount:v.size,actions:lt,onClear:()=>d(new Set)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1241,columnNumber:17},this),e.jsxDEV(Vt,{columns:at,data:hi,selectable:!0,selectedRows:v,onSelectRow:nt,onSelectAll:rt,getRowId:i=>i.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1248,columnNumber:15},this),e.jsxDEV(gt,{currentPage:o,totalPages:it,totalRecords:Fe.length,pageSize:E,onPageChange:a,onPageSizeChange:i=>{B(i),a(1)}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1259,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1238,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1237,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1214,columnNumber:7},this),e.jsxDEV(St,{open:f.open,onOpenChange:i=>T({...f,open:i}),title:f.title,description:f.description,variant:f.variant,onConfirm:f.onConfirm,requireDoubleConfirm:f.requireDoubleConfirm},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1276,columnNumber:7},this),e.jsxDEV(el,{open:D.open,onOpenChange:i=>Q({...D,open:i}),storeName:D.storeName,onConfirm:$},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1286,columnNumber:7},this),e.jsxDEV(il,{open:x.open,onOpenChange:i=>_({...x,open:i}),store:x.store,onConfirm:t,onApprove:De,onReject:Qe},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1293,columnNumber:7},this),e.jsxDEV(Qn,{open:q,onOpenChange:k,onDownloadTemplate:()=>{jn(),C.success("Đã tải file mẫu Excel với dữ liệu demo")},onImport:async i=>{try{const c=await _n(i);k(!1),s("/registry/import-review",{state:{importResult:c}})}catch(c){console.error("Import failed:",c),C.error(c.message||"Có lỗi xảy ra khi xử lý file")}}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1302,columnNumber:7},this),e.jsxDEV(tl,{open:te,onOpenChange:Oe,totalRecords:z.length,selectedCount:v.size,onExport:i=>{console.log("Export with options:",i),C.success("Xuất dữ liệu thành công")}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1328,columnNumber:7},this),e.jsxDEV(_l,{open:Ie,onOpenChange:le,onSubmit:async i=>{try{if(console.log("📝 AddStoreDialogTabbed submitted data:",i),!i.business_name){C.error("Vui lòng nhập tên cơ sở");return}if(!i.taxCode){C.error("Vui lòng nhập mã số thuế");return}if(!i.registeredAddress){C.error("Vui lòng nhập địa chỉ");return}if(!i.province){C.error("Vui lòng chọn tỉnh/thành phố");return}if(!i.ward){C.error("Vui lòng chọn phường/xã");return}if(!i.latitude||!i.longitude){C.error("Vui lòng chọn vị trí trên bản đồ");return}const c=i.jurisdiction||"Quận 1",g={p_business_name:i.business_name,p_owner_name:i.ownerName||"",p_owner_phone:i.ownerPhone||"",p_license_status:"valid",p_tax_code:i.taxCode||"",p_business_type:i.industryName||"retail",p_province_id:i.province||null,p_ward_id:i.ward||null,p_address:i.registeredAddress||"",p_latitude:i.latitude||0,p_longitude:i.longitude||0,p_status:i.status||"pending",p_established_date:i.establishedDate||null,p_fax:i.fax||null,p_department_id:"0c081448-e64b-4d8e-a332-b79f743823c7",p_note:i.notes||null,p_business_phone:i.businessPhone||null,p_business_email:i.email||null,p_website:i.website||null,p_store_area:i.area_name||null,p_owner_phone_2:i.ownerPhone2||null,p_owner_birth_year:i.ownerBirthYear?parseInt(i.ownerBirthYear):null,p_owner_identity_no:i.ownerIdNumber||null,p_owner_email:null};console.log("📤 Sending API payload:",g);const I=await wt(g);console.log("✅ Merchant created via API:",I);const U={id:Math.random()*1e6|0,name:i.business_name,type:i.industryName||"Chưa xác định",address:i.registeredAddress||"",province:i.province,provinceCode:i.province,jurisdiction:c,jurisdictionCode:i.jurisdiction,ward:i.ward,wardCode:i.ward,managementUnit:i.managementUnit||`Chi cục QLTT ${c}`,status:i.status||"pending",riskLevel:"none",lastInspection:"Chưa kiểm tra",latitude:i.latitude,longitude:i.longitude,gpsCoordinates:i.latitude&&i.longitude?`${i.latitude.toFixed(6)}, ${i.longitude.toFixed(6)}`:void 0,taxCode:i.taxCode,industryName:i.industryName,establishedDate:i.establishedDate,operationStatus:i.operationStatus,businessArea:(I==null?void 0:I.area_name)||i.businessArea||null,businessPhone:i.businessPhone,email:i.email,website:i.website,fax:i.fax,notes:i.notes,ownerName:i.ownerName,ownerBirthYear:i.ownerBirthYear,ownerIdNumber:i.ownerIdNumber,ownerPhone:i.ownerPhone,registeredAddress:i.registeredAddress||"",headquarterAddress:i.headquarterAddress,productionAddress:i.productionAddress,phone:i.ownerPhone,businessType:i.industryName,isVerified:!1};console.log("✅ New store object:",U),Ft(U),ee(ne=>[U,...ne]),a(1),le(!1),C.success("Thêm cửa hàng thành công",{description:"Cửa hàng mới đã được thêm vào hệ thống"})}catch(c){console.error("❌ Error creating merchant:",c),C.error("Lỗi khi thêm cửa hàng",{description:c.message||"Vui lòng thử lại"})}}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1339,columnNumber:7},this),e.jsxDEV(zs,{open:Ne.open,onOpenChange:i=>Ge({...Ne,open:i}),document:Ne.document},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1484,columnNumber:7},this),e.jsxDEV(qa,{open:b.open,onOpenChange:i=>Ee({...b,open:i}),actionType:b.actionType,selectedStores:Ni,loading:b.loading,onConfirm:tt},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1490,columnNumber:7},this),e.jsxDEV(Qs,{open:oe.open,onOpenChange:i=>We({...oe,open:i}),storeName:oe.storeName,onConfirm:je},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1499,columnNumber:7},this),e.jsxDEV(js,{open:ue.open,onOpenChange:i=>Be({...ue,open:i}),storeName:ue.storeName,onConfirm:et},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1506,columnNumber:7},this),e.jsxDEV(Yr,{open:xi,onClose:()=>Xe(!1)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:1513,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/pages/StoresListPage.tsx",lineNumber:967,columnNumber:5},this)}export{jo as default};
