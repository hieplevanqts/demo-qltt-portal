import{_ as se}from"./system-admin-ex6_k_qZ.js";import{k as ie,j as e,r as m,e as oe,aA as De,v as Le}from"./vendor-Cja35lIC.js";import{aa as ke,C as _e,ab as je,x as ue,p as Qe,X as ye,O as Pe,T as Ce,Q as we,f as Se,a8 as Ie,ac as Ne,a3 as Ve,N as Ae,ad as Y,E as ze,a0 as fe,e as pe,A as be,a2 as Fe,ae as Oe,j as de,af as $e,ag as Be,ah as Me,Z as Re,ai as Ze}from"./icons-BAlVBlw-.js";const Je=ie.lazy(()=>se(()=>Promise.resolve().then(()=>bs),void 0).then(s=>({default:s.CalendarPage}))),qe=ie.lazy(()=>se(()=>Promise.resolve().then(()=>Is),void 0).then(s=>({default:s.TaskListPage}))),We=ie.lazy(()=>se(()=>Promise.resolve().then(()=>zs),void 0).then(s=>({default:s.TaskFormPage}))),Ke=ie.lazy(()=>se(()=>Promise.resolve().then(()=>pi),void 0).then(s=>({default:s.TaskDetailPage}))),vi={path:"todolist",children:[{index:!0,element:e.jsxDEV(Je,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/routes.tsx",lineNumber:22,columnNumber:16},void 0)},{path:"list",element:e.jsxDEV(qe,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/routes.tsx",lineNumber:26,columnNumber:16},void 0)},{path:"create",element:e.jsxDEV(We,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/routes.tsx",lineNumber:30,columnNumber:16},void 0)},{path:":id",element:e.jsxDEV(Ke,{},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/routes.tsx",lineNumber:34,columnNumber:16},void 0)}]},Ye="_dot_1ijht_3",Ge="_sm_1ijht_17",Xe="_md_1ijht_27",Ue="_lg_1ijht_37",et="_urgent_1ijht_49",tt="_high_1ijht_57",st="_medium_1ijht_65",it="_low_1ijht_73",ot="_wrapper_1ijht_83",lt="_label_1ijht_95",q={dot:Ye,sm:Ge,md:Xe,lg:Ue,urgent:et,high:tt,medium:st,low:it,wrapper:ot,label:lt},at={urgent:{label:"Khẩn cấp"},high:{label:"Cao"},medium:{label:"Trung bình"},low:{label:"Thấp"}};function Te({priority:s,showLabel:t=!1,size:i="md"}){const o=at[s],r=[q.dot,q[s],q[i]].filter(Boolean).join(" ");return t?e.jsxDEV("span",{className:q.wrapper,children:[e.jsxDEV("span",{className:r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/PriorityIndicator.tsx",lineNumber:45,columnNumber:7},this),e.jsxDEV("span",{className:q.label,children:o.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/PriorityIndicator.tsx",lineNumber:46,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/PriorityIndicator.tsx",lineNumber:44,columnNumber:5},this):e.jsxDEV("span",{className:r,title:o.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/PriorityIndicator.tsx",lineNumber:36,columnNumber:7},this)}const nt="_button_jm6yz_3",ne={button:nt,"size-sm":"_size-sm_jm6yz_45","size-icon-sm":"_size-icon-sm_jm6yz_59","size-md":"_size-md_jm6yz_75","size-lg":"_size-lg_jm6yz_87","variant-default":"_variant-default_jm6yz_101","variant-outline":"_variant-outline_jm6yz_127","variant-ghost":"_variant-ghost_jm6yz_149","variant-destructive":"_variant-destructive_jm6yz_167"},V=m.forwardRef(({variant:s="default",size:t="md",className:i="",children:o,...r},n)=>{const l=[ne.button,ne[`variant-${s}`],ne[`size-${t}`],i].filter(Boolean).join(" ");return e.jsxDEV("button",{ref:n,className:l,...r,children:o},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Button.tsx",lineNumber:22,columnNumber:7},void 0)});V.displayName="Button";const rt="_container_ue551_3",mt="_header_ue551_17",ct="_title_ue551_31",dt="_nav_ue551_47",ut="_grid_ue551_59",Nt="_dayHeader_ue551_79",pt="_dayCell_ue551_101",Tt="_today_ue551_131",ht="_otherMonth_ue551_141",gt="_dayNumber_ue551_149",vt="_tasksContainer_ue551_183",Vt="_taskItem_ue551_197",ft="_taskText_ue551_269",bt="_more_ue551_283",k={container:rt,header:mt,title:ct,nav:dt,grid:ut,dayHeader:Nt,dayCell:pt,today:Tt,otherMonth:ht,dayNumber:gt,tasksContainer:vt,taskItem:Vt,taskText:ft,more:bt};function Ht({tasks:s=[],onTaskClick:t}){const[i,o]=m.useState(new Date),[r,n]=m.useState([]);m.useEffect(()=>{l()},[i]);const l=()=>{const p=i.getFullYear(),v=i.getMonth(),f=new Date(p,v,1),L=new Date(f);L.setDate(L.getDate()-f.getDay());const w=[],C=new Date(L);for(;w.length<42;)w.push(new Date(C)),C.setDate(C.getDate()+1);n(w)},N=p=>Array.isArray(s)?s.filter(v=>{const f=new Date(v.dueDate);return f.getFullYear()===p.getFullYear()&&f.getMonth()===p.getMonth()&&f.getDate()===p.getDate()}):[],g=()=>{o(new Date(i.getFullYear(),i.getMonth()-1,1))},u=()=>{o(new Date(i.getFullYear(),i.getMonth()+1,1))},T=()=>{o(new Date)},d=p=>{const v=new Date;return p.getFullYear()===v.getFullYear()&&p.getMonth()===v.getMonth()&&p.getDate()===v.getDate()},a=p=>p.getMonth()===i.getMonth(),h=i.toLocaleDateString("vi-VN",{month:"long",year:"numeric"});return e.jsxDEV("div",{className:k.container,children:[e.jsxDEV("div",{className:k.header,children:[e.jsxDEV("h2",{className:k.title,children:h},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:88,columnNumber:9},this),e.jsxDEV("div",{className:k.nav,children:[e.jsxDEV(V,{variant:"outline",size:"sm",onClick:T,children:"Hôm nay"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:90,columnNumber:11},this),e.jsxDEV(V,{variant:"outline",size:"icon-sm",onClick:g,children:e.jsxDEV(ke,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:94,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:93,columnNumber:11},this),e.jsxDEV(V,{variant:"outline",size:"icon-sm",onClick:u,children:e.jsxDEV(_e,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:97,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:96,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:89,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:87,columnNumber:7},this),e.jsxDEV("div",{className:k.grid,children:[["CN","T2","T3","T4","T5","T6","T7"].map(p=>e.jsxDEV("div",{className:k.dayHeader,children:p},p,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:105,columnNumber:11},this)),r.map((p,v)=>{const f=N(p),L=!a(p),w=d(p),C=[k.dayCell,L?k.otherMonth:"",w?k.today:""].filter(Boolean).join(" ");return e.jsxDEV("div",{className:C,children:[e.jsxDEV("span",{className:k.dayNumber,children:p.getDate()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:126,columnNumber:15},this),e.jsxDEV("div",{className:k.tasksContainer,children:[f.slice(0,3).map(P=>e.jsxDEV("button",{onClick:()=>t==null?void 0:t(P),className:k.taskItem,title:P.title,children:[e.jsxDEV(Te,{priority:P.priority,size:"sm"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:136,columnNumber:21},this),e.jsxDEV("span",{className:k.taskText,children:P.title},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:137,columnNumber:21},this)]},P.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:130,columnNumber:19},this)),f.length>3&&e.jsxDEV("div",{className:k.more,children:["+",f.length-3," công việc khác"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:141,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:128,columnNumber:15},this)]},v,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:125,columnNumber:13},this)})]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:103,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskCalendar.tsx",lineNumber:85,columnNumber:5},this)}const xt="_panel_paay9_3",Et="_header_paay9_23",Dt="_headerTitle_paay9_33",Lt="_layoutButton_paay9_53",kt="_buttonWrapper_paay9_89",_t="_createButton_paay9_99",jt="_list_paay9_143",Qt="_topicItem_paay9_155",yt="_active_paay9_191",Pt="_colorDot_paay9_201",Ct="_topicIcon_paay9_215",wt="_topicContent_paay9_225",St="_topicName_paay9_237",It="_count_paay9_259",E={panel:xt,header:Et,headerTitle:Dt,layoutButton:Lt,buttonWrapper:kt,createButton:_t,list:jt,topicItem:Qt,active:yt,colorDot:Pt,topicIcon:Ct,topicContent:wt,topicName:St,count:It};function He({topics:s,selectedTopicId:t,onTopicSelect:i,onCreateTopic:o,totalTaskCount:r}){return e.jsxDEV("div",{className:E.panel,children:[e.jsxDEV("div",{className:E.header,children:e.jsxDEV("div",{className:E.headerTitle,children:[e.jsxDEV("span",{children:"Chủ đề / Phiên"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:24,columnNumber:11},this),e.jsxDEV("button",{className:E.layoutButton,"aria-label":"Cài đặt",children:e.jsxDEV(je,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:26,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:25,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:23,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:22,columnNumber:7},this),e.jsxDEV("div",{className:E.buttonWrapper,children:e.jsxDEV("button",{className:E.createButton,onClick:o,children:[e.jsxDEV(ue,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:33,columnNumber:11},this),"Tạo chủ đề mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:32,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:31,columnNumber:7},this),e.jsxDEV("div",{className:E.list,children:[e.jsxDEV("button",{className:`${E.topicItem} ${t===null?E.active:""}`,onClick:()=>i(null),children:[e.jsxDEV(Qe,{size:16,className:E.topicIcon},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:45,columnNumber:11},this),e.jsxDEV("div",{className:E.topicContent,children:e.jsxDEV("span",{className:E.topicName,children:"Tất cả nhiệm vụ"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:47,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:46,columnNumber:11},this),e.jsxDEV("span",{className:E.count,children:r},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:49,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:39,columnNumber:9},this),s.map(n=>e.jsxDEV("button",{className:`${E.topicItem} ${t===n.id?E.active:""}`,onClick:()=>i(n.id),children:[e.jsxDEV("div",{className:E.colorDot,style:{backgroundColor:n.color}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:60,columnNumber:13},this),e.jsxDEV("div",{className:E.topicContent,children:e.jsxDEV("span",{className:E.topicName,children:n.name},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:65,columnNumber:15},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:64,columnNumber:13},this),e.jsxDEV("span",{className:E.count,children:n.taskCount},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:67,columnNumber:13},this)]},n.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:53,columnNumber:11},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:38,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TopicsPanel.tsx",lineNumber:21,columnNumber:5},this)}const At="_toastContainer_jihzh_3",zt="_toast_jihzh_3",Ft="_slideInRight_jihzh_1",Ot="_exiting_jihzh_77",$t="_slideOutRight_jihzh_1",Bt="_icon_jihzh_107",Mt="_success_jihzh_115",Rt="_error_jihzh_123",Zt="_warning_jihzh_131",Jt="_info_jihzh_139",qt="_content_jihzh_147",Wt="_title_jihzh_155",Kt="_message_jihzh_171",Yt="_closeButton_jihzh_185",A={toastContainer:At,toast:zt,slideInRight:Ft,exiting:Ot,slideOutRight:$t,icon:Bt,success:Mt,error:Rt,warning:Zt,info:Jt,content:qt,title:Wt,message:Kt,closeButton:Yt};function Gt({id:s,type:t,title:i,message:o,duration:r=5e3,onClose:n}){m.useEffect(()=>{if(r>0){const N=setTimeout(()=>{n(s)},r);return()=>clearTimeout(N)}},[s,r,n]);const l={success:e.jsxDEV(Se,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:28,columnNumber:14},this),error:e.jsxDEV(we,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:29,columnNumber:12},this),warning:e.jsxDEV(Ce,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:30,columnNumber:14},this),info:e.jsxDEV(Pe,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:31,columnNumber:11},this)};return e.jsxDEV("div",{className:`${A.toast} ${A[t]}`,children:[e.jsxDEV("div",{className:A.icon,children:l[t]},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:36,columnNumber:7},this),e.jsxDEV("div",{className:A.content,children:[e.jsxDEV("div",{className:A.title,children:i},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:38,columnNumber:9},this),o&&e.jsxDEV("div",{className:A.message,children:o},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:39,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:37,columnNumber:7},this),e.jsxDEV("button",{className:A.closeButton,onClick:()=>n(s),"aria-label":"Đóng thông báo",children:e.jsxDEV(ye,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:46,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:41,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:35,columnNumber:5},this)}function Xt({toasts:s,onClose:t}){return s.length===0?null:e.jsxDEV("div",{className:A.toastContainer,children:s.map(i=>e.jsxDEV(Gt,{...i,onClose:t},i.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:63,columnNumber:9},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/Toast.tsx",lineNumber:61,columnNumber:5},this)}const Ut="_banner_1c474_3",es="_icon_1c474_25",ts="_content_1c474_49",ss="_title_1c474_57",is="_description_1c474_73",os="_actions_1c474_89",M={banner:Ut,icon:es,content:ts,title:ss,description:is,actions:os};function ls({onEnable:s,onDismiss:t}){return e.jsxDEV("div",{className:M.banner,children:[e.jsxDEV("div",{className:M.icon,children:e.jsxDEV(Ie,{size:20},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/NotificationBanner.tsx",lineNumber:14,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/NotificationBanner.tsx",lineNumber:13,columnNumber:7},this),e.jsxDEV("div",{className:M.content,children:[e.jsxDEV("h4",{className:M.title,children:"Bật thông báo công việc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/NotificationBanner.tsx",lineNumber:17,columnNumber:9},this),e.jsxDEV("p",{className:M.description,children:"Nhận cảnh báo khi công việc sắp hết hạn ngay trên trình duyệt"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/NotificationBanner.tsx",lineNumber:18,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/NotificationBanner.tsx",lineNumber:16,columnNumber:7},this),e.jsxDEV("div",{className:M.actions,children:[e.jsxDEV(V,{onClick:s,size:"sm",variant:"default",children:"Bật ngay"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/NotificationBanner.tsx",lineNumber:23,columnNumber:9},this),e.jsxDEV(V,{onClick:t,size:"sm",variant:"outline",children:"Để sau"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/NotificationBanner.tsx",lineNumber:26,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/NotificationBanner.tsx",lineNumber:22,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/NotificationBanner.tsx",lineNumber:12,columnNumber:5},this)}let as=0;function ns(){const[s,t]=m.useState([]),[i,o]=m.useState(!1);m.useEffect(()=>{"Notification"in window&&Notification.permission==="granted"&&o(!0)},[]);const r=m.useCallback(async()=>{if("Notification"in window){const u=await Notification.requestPermission();return o(u==="granted"),u==="granted"}return!1},[]),n=m.useCallback((u,T,d,a=5e3)=>{const h=`toast-${as++}`,p={id:h,type:u,title:T,message:d,duration:a,onClose:v=>{t(f=>f.filter(L=>L.id!==v))}};return t(v=>[...v,p]),h},[]),l=m.useCallback((u,T)=>{if(i&&"Notification"in window)try{const d=new Notification(u,{icon:"/favicon.ico",badge:"/favicon.ico",...T});return d.onclick=()=>{window.focus(),d.close()},d}catch(d){console.error("Failed to show browser notification:",d)}return null},[i]),N=m.useCallback((u,T,d,a)=>{n(u,T,d,a==null?void 0:a.duration),a!=null&&a.browserNotification&&i&&l(T,{body:d,tag:`notification-${Date.now()}`})},[n,l,i]),g=m.useCallback(u=>{t(T=>T.filter(d=>d.id!==u))},[]);return{toasts:s,notify:N,showToast:n,showBrowserNotification:l,closeToast:g,requestNotificationPermission:r,browserNotificationsEnabled:i}}const ge=s=>{const t=new Date;return t.setHours(t.getHours()+s),t.toISOString()},rs=[{id:"1",title:"Hoàn thành báo cáo tháng 1/2026",description:"Tổng hợp dữ liệu và viết báo cáo tổng kết công việc tháng đầu năm",status:"in-progress",priority:"urgent",dueDate:ge(3),tags:["báo cáo","quan trọng"],topicId:"topic-1",notes:"Cần phối hợp với phòng kế hoạch để lấy số liệu",attachments:[],createdAt:"2026-01-15T08:00:00Z",updatedAt:"2026-01-21T10:30:00Z",estimatedHours:8,actualHours:5},{id:"2",title:"Cập nhật tài liệu API v2.0",description:"Chỉnh sửa và bổ sung tài liệu API cho phiên bản mới",status:"in-progress",priority:"high",dueDate:"2026-01-28T17:00:00Z",tags:["tài liệu","api","technical"],topicId:"topic-3",notes:"Tham khảo tài liệu cũ và ghi chú của team dev",attachments:[],createdAt:"2026-01-18T09:00:00Z",updatedAt:"2026-01-21T11:00:00Z",estimatedHours:6,actualHours:3},{id:"3",title:"Review code PR #234",description:"Kiểm tra và review code cho pull request module thanh toán",status:"not-started",priority:"high",dueDate:ge(12),tags:["code-review","urgent"],topicId:"topic-2",notes:"Chú ý kiểm tra logic xử lý exception",attachments:[],createdAt:"2026-01-21T08:30:00Z",updatedAt:"2026-01-21T08:30:00Z",estimatedHours:2},{id:"4",title:"Họp team weekly",description:"Cuộc họp định kỳ hàng tuần với team để review công việc",status:"completed",priority:"medium",dueDate:"2026-01-20T14:00:00Z",tags:["meeting","weekly"],topicId:"topic-1",notes:"Đã thảo luận kế hoạch sprint mới",attachments:[],createdAt:"2026-01-13T10:00:00Z",updatedAt:"2026-01-20T15:30:00Z",completedAt:"2026-01-20T15:30:00Z",estimatedHours:1,actualHours:1.5},{id:"5",title:"Xử lý email khách hàng",description:"Trả lời các email hỗ trợ từ khách hàng về vấn đề đăng nhập",status:"completed",priority:"medium",dueDate:"2026-01-19T17:00:00Z",tags:["support","customer"],topicId:"topic-2",notes:"Đã hướng dẫn reset password và xác nhận email",attachments:[],createdAt:"2026-01-19T09:00:00Z",updatedAt:"2026-01-19T16:00:00Z",completedAt:"2026-01-19T16:00:00Z",estimatedHours:2,actualHours:1.5},{id:"6",title:"Chuẩn bị slides thuyết trình",description:"Tạo bộ slides cho buổi training nhân viên mới",status:"completed",priority:"low",dueDate:"2026-01-18T17:00:00Z",tags:["training","presentation"],topicId:"topic-1",notes:"Slides đã được duyệt bởi trưởng phòng",attachments:[],createdAt:"2026-01-10T10:00:00Z",updatedAt:"2026-01-18T14:00:00Z",completedAt:"2026-01-18T14:00:00Z",estimatedHours:4,actualHours:5},{id:"7",title:"Testing module thanh toán mới",description:"Kiểm tra toàn bộ flow thanh toán với các phương thức khác nhau",status:"not-started",priority:"high",dueDate:"2026-01-30T17:00:00Z",tags:["testing","payment","qa"],topicId:"topic-3",notes:"Cần test với cả môi trường sandbox và production",attachments:[],createdAt:"2026-01-20T14:00:00Z",updatedAt:"2026-01-20T14:00:00Z",estimatedHours:8},{id:"8",title:"Nghiên cứu công nghệ mới",description:"Tìm hiểu về React Server Components và Next.js 15",status:"paused",priority:"low",dueDate:"2026-02-15T17:00:00Z",tags:["learning","research","react"],topicId:"topic-2",notes:"Tạm dừng để ưu tiên các công việc khác",attachments:[],createdAt:"2026-01-05T09:00:00Z",updatedAt:"2026-01-20T10:00:00Z",estimatedHours:10,actualHours:3}],ms=[{id:"c1",taskId:"1",content:"Đã hoàn thành phần thu thập dữ liệu, đang tiến hành phân tích",createdAt:"2026-01-21T10:30:00Z",author:"Nguyễn Văn A"},{id:"c2",taskId:"1",content:"Cần bổ sung biểu đồ so sánh với tháng trước",createdAt:"2026-01-21T14:00:00Z",author:"Trần Thị B"},{id:"c3",taskId:"2",content:"Đã update các endpoint mới trong tài liệu",createdAt:"2026-01-21T11:00:00Z",author:"Nguyễn Văn A"}],R="i-todolist-tasks",$="i-todolist-comments",z="i-todolist-history",te=()=>{localStorage.getItem(R)||localStorage.setItem(R,JSON.stringify(rs)),localStorage.getItem($)||localStorage.setItem($,JSON.stringify(ms)),localStorage.getItem(z)||localStorage.setItem(z,JSON.stringify([]))},re=s=>s.status==="completed"?!1:new Date(s.dueDate)<new Date,ee=(s,t,i,o,r)=>{const n=localStorage.getItem(z),l=n?JSON.parse(n):[],N={id:`history-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,taskId:s,action:t,description:i,oldValue:o,newValue:r,createdAt:new Date().toISOString(),author:"Người dùng"};l.push(N),localStorage.setItem(z,JSON.stringify(l))},x={getAllTasks:async()=>{te();const s=localStorage.getItem(R);return s?JSON.parse(s):[]},getTaskById:async s=>(await x.getAllTasks()).find(i=>i.id===s)||null,createTask:async s=>{const t=await x.getAllTasks(),i={...s,id:`task-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isOverdue:!1};return t.push(i),localStorage.setItem(R,JSON.stringify(t)),ee(i.id,"created",`Tạo nhiệm vụ: ${i.title}`),i},updateTask:async(s,t)=>{const i=await x.getAllTasks(),o=i.findIndex(l=>l.id===s);if(o===-1)return null;const r=i[o],n={...r,...t,updatedAt:new Date().toISOString(),isOverdue:re({...r,...t})};return t.status&&t.status!==r.status&&(t.status==="completed"&&(n.completedAt=new Date().toISOString()),ee(s,"status_changed",`Thay đổi trạng thái từ "${r.status}" sang "${t.status}"`,r.status,t.status)),(t.title||t.description||t.dueDate||t.priority)&&ee(s,"updated","Cập nhật thông tin nhiệm vụ"),i[o]=n,localStorage.setItem(R,JSON.stringify(i)),n},deleteTask:async s=>{const t=await x.getAllTasks(),i=t.filter(o=>o.id!==s);return i.length===t.length?!1:(localStorage.setItem(R,JSON.stringify(i)),!0)},getStatistics:async()=>{const s=await x.getAllTasks(),t=new Date,i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),o=new Date(i);o.setDate(i.getDate()-i.getDay());const r=new Date(t.getFullYear(),t.getMonth(),1),n={total:s.length,completed:s.filter(l=>l.status==="completed").length,inProgress:s.filter(l=>l.status==="in-progress").length,notStarted:s.filter(l=>l.status==="not-started").length,paused:s.filter(l=>l.status==="paused").length,overdue:s.filter(l=>re(l)).length,completionRate:0,completedToday:s.filter(l=>l.status==="completed"&&l.completedAt&&new Date(l.completedAt)>=i).length,completedThisWeek:s.filter(l=>l.status==="completed"&&l.completedAt&&new Date(l.completedAt)>=o).length,completedThisMonth:s.filter(l=>l.status==="completed"&&l.completedAt&&new Date(l.completedAt)>=r).length};return n.completionRate=n.total>0?n.completed/n.total*100:0,n},getOverdueTasks:async()=>(await x.getAllTasks()).filter(re),getTasksByTag:async s=>(await x.getAllTasks()).filter(i=>i.tags.includes(s)),getAllTags:async()=>{const s=await x.getAllTasks(),t=new Set;return s.forEach(i=>i.tags.forEach(o=>t.add(o))),Array.from(t)},getDashboardStats:async()=>{const s=await x.getAllTasks(),t=await x.getStatistics(),i=await xe.getRecentHistory(10),o=new Date,r=new Date(o.getTime()+10080*60*1e3),n=s.filter(N=>N.status!=="completed"&&new Date(N.dueDate)>=o&&new Date(N.dueDate)<=r).sort((N,g)=>new Date(N.dueDate).getTime()-new Date(g.dueDate).getTime()).slice(0,5),l=[];for(let N=6;N>=0;N--){const g=new Date(o);g.setDate(g.getDate()-N),g.setHours(0,0,0,0);const u=new Date(g);u.setDate(g.getDate()+1);const T=s.filter(d=>d.status==="completed"&&d.completedAt&&new Date(d.completedAt)>=g&&new Date(d.completedAt)<u).length;l.push({date:g.toISOString().split("T")[0],completed:T})}return{overview:t,recentActivities:i,upcomingTasks:n,overdueCount:t.overdue,productivityTrend:l}},filterTasks:async s=>{let t=await x.getAllTasks();if(s.status&&(t=t.filter(i=>i.status===s.status)),s.priority&&(t=t.filter(i=>i.priority===s.priority)),s.search){const i=s.search.toLowerCase();t=t.filter(o=>o.title.toLowerCase().includes(i)||o.description.toLowerCase().includes(i))}return s.dateFrom&&(t=t.filter(i=>new Date(i.dueDate)>=new Date(s.dateFrom))),s.dateTo&&(t=t.filter(i=>new Date(i.dueDate)<=new Date(s.dateTo))),t}},me={getCommentsByTaskId:async s=>{te();const t=localStorage.getItem($);return(t?JSON.parse(t):[]).filter(o=>o.taskId===s)},addComment:async(s,t,i="Người dùng")=>{const o=localStorage.getItem($),r=o?JSON.parse(o):[],n={id:`comment-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,taskId:s,content:t,createdAt:new Date().toISOString(),author:i};return r.push(n),localStorage.setItem($,JSON.stringify(r)),n},deleteComment:async s=>{const t=localStorage.getItem($),i=t?JSON.parse(t):[],o=i.filter(r=>r.id!==s);return o.length===i.length?!1:(localStorage.setItem($,JSON.stringify(o)),ee("","commented","Xóa bình luận"),!0)}},xe={getTaskHistory:async s=>{te();const t=localStorage.getItem(z);return(t?JSON.parse(t):[]).filter(o=>o.taskId===s).sort((o,r)=>new Date(r.createdAt).getTime()-new Date(o.createdAt).getTime())},getRecentHistory:async(s=10)=>{te();const t=localStorage.getItem(z);return(t?JSON.parse(t):[]).sort((o,r)=>new Date(r.createdAt).getTime()-new Date(o.createdAt).getTime()).slice(0,s)},clearOldHistory:async()=>{const s=localStorage.getItem(z),i=(s?JSON.parse(s):[]).sort((o,r)=>new Date(r.createdAt).getTime()-new Date(o.createdAt).getTime()).slice(0,100);localStorage.setItem(z,JSON.stringify(i))}};function cs(s){const t=new Date,i=[];return s.forEach(o=>{if(o.status==="completed")return;const n=new Date(o.dueDate).getTime()-t.getTime(),l=n/(1e3*60*60);n<0?i.push({task:o,type:"overdue",hoursUntilDue:Math.abs(l)}):l<=24&&l>0&&i.push({task:o,type:"due-soon",hoursUntilDue:l})}),i}function ve(s){return s<1?`${Math.floor(s*60)} phút`:s<24?`${Math.floor(s)} giờ`:`${Math.floor(s/24)} ngày`}function ds(s){const{task:t,type:i,hoursUntilDue:o}=s;return i==="overdue"?{title:"⚠️ Công việc quá hạn",message:`"${t.title}" đã quá hạn ${o?ve(o):""}`}:{title:"⏰ Công việc sắp hết hạn",message:`"${t.title}" sẽ hết hạn trong ${o?ve(o):""}`}}const us="_page_1hbo3_3",Ns="_mainContent_1hbo3_19",ps="_header_1hbo3_31",Ts="_headerLeft_1hbo3_45",hs="_title_1hbo3_57",gs="_subtitle_1hbo3_73",vs="_actions_1hbo3_87",Vs="_content_1hbo3_97",I={page:us,mainContent:Ns,header:ps,headerLeft:Ts,title:hs,subtitle:gs,actions:vs,content:Vs};function fs(){const s=oe(),[t,i]=m.useState([]),[o,r]=m.useState([]),[n,l]=m.useState(null),[N,g]=m.useState(!1),[u,T]=m.useState(null),{toasts:d,notify:a,closeToast:h,requestNotificationPermission:p,browserNotificationsEnabled:v}=ns();m.useEffect(()=>{C(),!v&&"Notification"in window&&Notification.permission==="default"&&(localStorage.getItem("notification_banner_dismissed")||g(!0))},[v]),m.useEffect(()=>{t.length>0&&(P(),f())},[t]),m.useEffect(()=>{const b=setInterval(()=>{t.length>0&&f()},6e5);return()=>clearInterval(b)},[t]);const f=()=>{const b=new Date;if(u&&b.getTime()-u.getTime()<300*1e3)return;cs(t).forEach(j=>{const{title:S,message:O}=ds(j),K=j.type==="overdue"?"error":"warning";a(K,S,O,{duration:8e3,browserNotification:!0})}),T(b)},L=async()=>{await p()&&(g(!1),a("success","Đã bật thông báo","Bạn sẽ nhận được cảnh báo khi công việc sắp hết hạn",{duration:5e3}),f())},w=()=>{g(!1),localStorage.setItem("notification_banner_dismissed","true")},C=async()=>{const b=await x.getAllTasks();i(Array.isArray(b)?b:[])},P=()=>{const b=localStorage.getItem("todolist_topics");if(b){const j=JSON.parse(b).map(S=>({...S,taskCount:t.filter(O=>O.topicId===S.id).length}));r(j)}else{const j=[{id:"topic-1",name:"Phiên làm việc - Báo cáo QL",color:"#3B82F6",taskCount:0,createdAt:new Date().toISOString()},{id:"topic-2",name:"Chủ đề - Task cá nhân",color:"#10B981",taskCount:0,createdAt:new Date().toISOString()},{id:"topic-3",name:"Dự án Website",color:"#F97316",taskCount:0,createdAt:new Date().toISOString()}].map(S=>({...S,taskCount:t.filter(O=>O.topicId===S.id).length}));r(j),localStorage.setItem("todolist_topics",JSON.stringify(j))}},F=Array.isArray(t)&&n?t.filter(b=>b.topicId===n):Array.isArray(t)?t:[],le=b=>{s(`/todolist/${b.id}`)},W=()=>{const b=prompt("Nhập tên chủ đề mới:");if(b){const B={id:`topic-${Date.now()}`,name:b,color:"#"+Math.floor(Math.random()*16777215).toString(16),taskCount:0,createdAt:new Date().toISOString()},j=[...o,B];r(j),localStorage.setItem("todolist_topics",JSON.stringify(j))}};return e.jsxDEV("div",{className:I.page,children:[e.jsxDEV(He,{topics:o,selectedTopicId:n,onTopicSelect:l,onCreateTopic:W,totalTaskCount:t.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:183,columnNumber:7},this),e.jsxDEV("div",{className:I.mainContent,children:[e.jsxDEV("div",{className:I.header,children:[e.jsxDEV("div",{className:I.headerLeft,children:[e.jsxDEV("h1",{className:I.title,children:"Nhật ký công việc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:194,columnNumber:13},this),e.jsxDEV("p",{className:I.subtitle,children:["Quản lý ",t.length," công việc • ",F.length," hiển thị"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:195,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:193,columnNumber:11},this),e.jsxDEV("div",{className:I.actions,children:[e.jsxDEV(V,{variant:"default",size:"sm",children:[e.jsxDEV(Ne,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:201,columnNumber:15},this),"Lịch"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:200,columnNumber:13},this),e.jsxDEV(V,{variant:"outline",size:"sm",onClick:()=>s("/todolist/list"),children:[e.jsxDEV(Ve,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:209,columnNumber:15},this),"Danh sách"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:204,columnNumber:13},this),e.jsxDEV(V,{variant:"default",size:"sm",onClick:()=>s("/todolist/create"),children:[e.jsxDEV(ue,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:213,columnNumber:15},this),"Tạo mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:212,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:199,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:192,columnNumber:9},this),e.jsxDEV("div",{className:I.content,children:[N&&e.jsxDEV(ls,{onEnable:L,onDismiss:w},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:221,columnNumber:13},this),e.jsxDEV(Ht,{tasks:F,onTaskClick:le},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:226,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:219,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:191,columnNumber:7},this),e.jsxDEV(Xt,{toasts:d,onClose:h},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:230,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/CalendarPage.tsx",lineNumber:182,columnNumber:5},this)}const bs=Object.freeze(Object.defineProperty({__proto__:null,CalendarPage:fs},Symbol.toStringTag,{value:"Module"})),Hs="_badge_1nj68_3",xs="_sm_1nj68_25",Es="_md_1nj68_35",Ds="_notstarted_1nj68_45",Ls="_inprogress_1nj68_55",ks="_completed_1nj68_65",_s="_paused_1nj68_75",ce={badge:Hs,sm:xs,md:Es,notstarted:Ds,inprogress:Ls,completed:ks,paused:_s},js={"not-started":{label:"Chưa bắt đầu"},"in-progress":{label:"Đang làm"},completed:{label:"Hoàn thành"},paused:{label:"Tạm dừng"}};function Qs({status:s,size:t="md"}){const i=js[s],o=[ce.badge,ce[s.replace("-","")],ce[t]].filter(Boolean).join(" ");return e.jsxDEV("span",{className:o,children:i.label},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskStatusBadge.tsx",lineNumber:34,columnNumber:5},this)}const ys="_dropdown_1wjxe_3",Ps="_trigger_1wjxe_13",Cs="_content_1wjxe_27",ws="_item_1wjxe_79",Z={dropdown:ys,trigger:Ps,content:Cs,item:ws,"item-destructive":"_item-destructive_1wjxe_121"},Ee=m.createContext(null);function he(){const s=m.useContext(Ee);if(!s)throw new Error("Dropdown components must be used within DropdownMenu");return s}function G({children:s}){const[t,i]=m.useState(!1);return e.jsxDEV(Ee.Provider,{value:{isOpen:t,setIsOpen:i},children:e.jsxDEV("div",{className:Z.dropdown,children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/DropdownMenu.tsx",lineNumber:24,columnNumber:7},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/DropdownMenu.tsx",lineNumber:23,columnNumber:5},this)}function X({children:s}){const{isOpen:t,setIsOpen:i}=he(),o=m.useRef(null);return m.useEffect(()=>{if(!t)return;const r=n=>{o.current&&!o.current.contains(n.target)&&i(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[t,i]),e.jsxDEV("div",{ref:o,className:Z.trigger,onClick:()=>i(!t),children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/DropdownMenu.tsx",lineNumber:47,columnNumber:5},this)}function U({children:s}){const{isOpen:t}=he();return t?e.jsxDEV("div",{className:Z.content,children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/DropdownMenu.tsx",lineNumber:62,columnNumber:10},this):null}function _({children:s,onClick:t,variant:i}){const{setIsOpen:o}=he(),r=()=>{t==null||t(),o(!1)},n=i==="destructive"?`${Z.item} ${Z["item-destructive"]}`:Z.item;return e.jsxDEV("button",{className:n,onClick:r,children:s},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/DropdownMenu.tsx",lineNumber:86,columnNumber:5},this)}function Ss(){const s=oe(),[t,i]=m.useState([]),[o,r]=m.useState([]),[n,l]=m.useState(!0),[N,g]=m.useState(""),[u,T]=m.useState("all"),[d,a]=m.useState("all"),[h,p]=m.useState(!1),[v,f]=m.useState(null),[L,w]=m.useState([]),[C,P]=m.useState([]),[F,le]=m.useState(null);m.useEffect(()=>{W()},[]),m.useEffect(()=>{t.length>0&&b()},[t]),m.useEffect(()=>{B()},[t,N,u,d,F,h,v]);const W=async()=>{l(!0);try{const c=await x.getAllTasks();i(c);const H=await x.getAllTags();w(H)}finally{l(!1)}},b=()=>{const c=localStorage.getItem("todolist_topics");if(c){const Q=JSON.parse(c).map(J=>({...J,taskCount:t.filter(ae=>ae.topicId===J.id).length}));P(Q)}else{const Q=[{id:"topic-1",name:"Phiên làm việc - Báo cáo QL",color:"#3B82F6",taskCount:0,createdAt:new Date().toISOString()},{id:"topic-2",name:"Chủ đề - Task cá nhân",color:"#10B981",taskCount:0,createdAt:new Date().toISOString()},{id:"topic-3",name:"Dự án Website",color:"#F97316",taskCount:0,createdAt:new Date().toISOString()}].map(J=>({...J,taskCount:t.filter(ae=>ae.topicId===J.id).length}));P(Q),localStorage.setItem("todolist_topics",JSON.stringify(Q))}},B=()=>{let c=[...t];if(F!==null&&(c=c.filter(H=>H.topicId===F)),u!=="all"&&(c=c.filter(H=>H.status===u)),d!=="all"&&(c=c.filter(H=>H.priority===d)),N){const H=N.toLowerCase();c=c.filter(Q=>Q.title.toLowerCase().includes(H)||Q.description.toLowerCase().includes(H))}h&&(c=c.filter(K)),v&&(c=c.filter(H=>H.tags.includes(v))),c.sort((H,Q)=>new Date(H.dueDate).getTime()-new Date(Q.dueDate).getTime()),r(c)},j=async c=>{confirm("Bạn có chắc muốn xóa công việc này?")&&(await x.deleteTask(c),await W())},S=()=>{const c=prompt("Nhập tên chủ đề mới:");if(c){const H={id:`topic-${Date.now()}`,name:c,color:"#"+Math.floor(Math.random()*16777215).toString(16),taskCount:0,createdAt:new Date().toISOString()},Q=[...C,H];P(Q),localStorage.setItem("todolist_topics",JSON.stringify(Q))}},O=c=>new Date(c).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),K=c=>c.status==="completed"?!1:new Date(c.dueDate)<new Date;return n?e.jsxDEV("div",{className:"todolist-loading",children:[e.jsxDEV("div",{className:"todolist-spinner"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:180,columnNumber:9},this),e.jsxDEV("p",{children:"Đang tải dữ liệu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:181,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:179,columnNumber:7},this):e.jsxDEV("div",{className:"todolist-container",children:[e.jsxDEV(He,{topics:C,selectedTopicId:F,onTopicSelect:le,onCreateTopic:S,totalTaskCount:t.length},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:188,columnNumber:7},this),e.jsxDEV("div",{className:"todolist-main-content",children:[e.jsxDEV("div",{className:"todolist-page-header",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"todolist-page-title",children:"Danh sách công việc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:200,columnNumber:13},this),e.jsxDEV("p",{className:"todolist-page-subtitle",children:["Quản lý ",t.length," công việc • ",o.length," kết quả"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:201,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:199,columnNumber:11},this),e.jsxDEV("div",{className:"todolist-page-actions",children:[e.jsxDEV("button",{className:"todolist-tab-button",onClick:()=>s("/todolist"),children:[e.jsxDEV(Ne,{size:16,style:{display:"inline",marginRight:"6px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:210,columnNumber:15},this),"Lịch"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:206,columnNumber:13},this),e.jsxDEV("button",{className:"todolist-tab-button active",children:[e.jsxDEV(Ve,{size:16,style:{display:"inline",marginRight:"6px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:214,columnNumber:15},this),"Danh sách"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:213,columnNumber:13},this),e.jsxDEV(V,{onClick:()=>s("/todolist/create"),children:[e.jsxDEV(ue,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:218,columnNumber:15},this),"Tạo mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:217,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:205,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:198,columnNumber:9},this),e.jsxDEV("div",{className:"todolist-content-wrapper",children:[e.jsxDEV("div",{className:"todolist-toolbar",children:[e.jsxDEV("div",{className:"todolist-search-box",children:[e.jsxDEV(Ae,{className:"h-4 w-4",style:{color:"var(--muted-foreground)"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:228,columnNumber:15},this),e.jsxDEV("input",{type:"text",placeholder:"Tìm kiếm công việc...",value:N,onChange:c=>g(c.target.value),className:"todolist-search-input"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:229,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:227,columnNumber:13},this),e.jsxDEV("div",{className:"todolist-filters",children:[e.jsxDEV(G,{children:[e.jsxDEV(X,{asChild:!0,children:e.jsxDEV(V,{variant:"outline",size:"sm",children:[e.jsxDEV(Y,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:242,columnNumber:21},this),"Trạng thái",u!=="all"&&e.jsxDEV("span",{className:"todolist-filter-badge",children:"1"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:244,columnNumber:48},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:241,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:240,columnNumber:17},this),e.jsxDEV(U,{children:[e.jsxDEV(_,{onClick:()=>T("all"),children:"Tất cả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:248,columnNumber:19},this),e.jsxDEV(_,{onClick:()=>T("not-started"),children:"Chưa bắt đầu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:251,columnNumber:19},this),e.jsxDEV(_,{onClick:()=>T("in-progress"),children:"Đang làm"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:254,columnNumber:19},this),e.jsxDEV(_,{onClick:()=>T("completed"),children:"Hoàn thành"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:257,columnNumber:19},this),e.jsxDEV(_,{onClick:()=>T("paused"),children:"Tạm dừng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:260,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:247,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:239,columnNumber:15},this),e.jsxDEV(G,{children:[e.jsxDEV(X,{asChild:!0,children:e.jsxDEV(V,{variant:"outline",size:"sm",children:[e.jsxDEV(Y,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:269,columnNumber:21},this),"Ưu tiên",d!=="all"&&e.jsxDEV("span",{className:"todolist-filter-badge",children:"1"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:271,columnNumber:50},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:268,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:267,columnNumber:17},this),e.jsxDEV(U,{children:[e.jsxDEV(_,{onClick:()=>a("all"),children:"Tất cả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:275,columnNumber:19},this),e.jsxDEV(_,{onClick:()=>a("urgent"),children:"Khẩn cấp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:278,columnNumber:19},this),e.jsxDEV(_,{onClick:()=>a("high"),children:"Cao"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:281,columnNumber:19},this),e.jsxDEV(_,{onClick:()=>a("medium"),children:"Trung bình"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:284,columnNumber:19},this),e.jsxDEV(_,{onClick:()=>a("low"),children:"Thấp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:287,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:274,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:266,columnNumber:15},this),e.jsxDEV(G,{children:[e.jsxDEV(X,{asChild:!0,children:e.jsxDEV(V,{variant:"outline",size:"sm",children:[e.jsxDEV(Y,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:296,columnNumber:21},this),"Hạn chót",h&&e.jsxDEV("span",{className:"todolist-filter-badge",children:"1"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:298,columnNumber:39},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:295,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:294,columnNumber:17},this),e.jsxDEV(U,{children:[e.jsxDEV(_,{onClick:()=>p(!1),children:"Tất cả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:302,columnNumber:19},this),e.jsxDEV(_,{onClick:()=>p(!0),children:"Quá hạn"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:305,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:301,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:293,columnNumber:15},this),e.jsxDEV(G,{children:[e.jsxDEV(X,{asChild:!0,children:e.jsxDEV(V,{variant:"outline",size:"sm",children:[e.jsxDEV(Y,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:314,columnNumber:21},this),"Thẻ",v&&e.jsxDEV("span",{className:"todolist-filter-badge",children:"1"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:316,columnNumber:37},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:313,columnNumber:19},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:312,columnNumber:17},this),e.jsxDEV(U,{children:[e.jsxDEV(_,{onClick:()=>f(null),children:"Tất cả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:320,columnNumber:19},this),L.map(c=>e.jsxDEV(_,{onClick:()=>f(c),children:c},c,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:324,columnNumber:21},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:319,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:311,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:238,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:226,columnNumber:11},this),e.jsxDEV("div",{className:"todolist-task-list",children:o.length===0?e.jsxDEV("div",{className:"todolist-empty",children:e.jsxDEV("p",{children:"Không tìm thấy công việc nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:337,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:336,columnNumber:15},this):o.map(c=>e.jsxDEV("div",{className:`todolist-task-card ${K(c)?"overdue":""}`,children:[e.jsxDEV("div",{className:"todolist-task-content",children:[e.jsxDEV("div",{className:"todolist-task-header",children:[e.jsxDEV(Te,{priority:c.priority,size:"md"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:347,columnNumber:23},this),e.jsxDEV("h3",{className:"todolist-task-title",children:c.title},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:348,columnNumber:23},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:346,columnNumber:21},this),e.jsxDEV("p",{className:"todolist-task-description",children:c.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:350,columnNumber:21},this),e.jsxDEV("div",{className:"todolist-task-meta",children:[e.jsxDEV(Qs,{status:c.status,size:"sm"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:352,columnNumber:23},this),e.jsxDEV("span",{className:"todolist-meta-item",children:[e.jsxDEV("svg",{className:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:360,columnNumber:27},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:354,columnNumber:25},this),O(c.dueDate)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:353,columnNumber:23},this),c.tags.length>0&&e.jsxDEV("div",{className:"todolist-task-tags",children:c.tags.slice(0,2).map(H=>e.jsxDEV("span",{className:"todolist-task-tag",children:H},H,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:372,columnNumber:29},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:370,columnNumber:25},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:351,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:345,columnNumber:19},this),e.jsxDEV("div",{className:"todolist-task-actions",children:[e.jsxDEV(V,{variant:"ghost",size:"icon-sm",onClick:()=>s(`/todolist/${c.id}`),title:"Xem chi tiết",children:e.jsxDEV(ze,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:387,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:381,columnNumber:21},this),e.jsxDEV(V,{variant:"ghost",size:"icon-sm",onClick:()=>s(`/todolist/create?edit=${c.id}`),title:"Chỉnh sửa",children:e.jsxDEV(fe,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:395,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:389,columnNumber:21},this),e.jsxDEV(V,{variant:"ghost",size:"icon-sm",onClick:()=>j(c.id),title:"Xóa",style:{color:"var(--destructive)"},children:e.jsxDEV(pe,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:404,columnNumber:23},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:397,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:380,columnNumber:19},this)]},c.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:341,columnNumber:17},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:334,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:224,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:196,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskListPage.tsx",lineNumber:187,columnNumber:5},this)}const Is=Object.freeze(Object.defineProperty({__proto__:null,TaskListPage:Ss},Symbol.toStringTag,{value:"Module"}));function As(){const s=oe(),[t]=De(),i=t.get("edit"),o=!!i,[r,n]=m.useState(!1),[l,N]=m.useState({title:"",description:"",status:"not-started",priority:"medium",dueDate:"",tags:"",notes:"",estimatedHours:"",topicId:""});m.useEffect(()=>{i&&g(i)},[i]);const g=async a=>{var p;const h=await x.getTaskById(a);h&&N({title:h.title,description:h.description,status:h.status,priority:h.priority,dueDate:h.dueDate.split("T")[0],tags:h.tags.join(", "),notes:h.notes,estimatedHours:((p=h.estimatedHours)==null?void 0:p.toString())||"",topicId:h.topicId||""})},u=async a=>{if(a.preventDefault(),!l.title||!l.dueDate){alert("Vui lòng điền đầy đủ thông tin bắt buộc");return}n(!0);try{const h={title:l.title,description:l.description,status:l.status,priority:l.priority,dueDate:new Date(l.dueDate).toISOString(),tags:l.tags.split(",").map(p=>p.trim()).filter(Boolean),notes:l.notes,attachments:[],estimatedHours:l.estimatedHours?Number(l.estimatedHours):void 0,topicId:l.topicId||void 0};o&&i?await x.updateTask(i,h):await x.createTask(h),s("/todolist/list")}finally{n(!1)}},[T,d]=m.useState([]);return m.useEffect(()=>{const a=localStorage.getItem("todolist_topics");a&&d(JSON.parse(a))},[]),e.jsxDEV("div",{className:"todolist-form-container",children:[e.jsxDEV("div",{className:"todolist-form-header",children:[e.jsxDEV(V,{variant:"ghost",size:"sm",onClick:()=>s("/todolist/list"),children:[e.jsxDEV(be,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:100,columnNumber:11},this),"Quay lại"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:99,columnNumber:9},this),e.jsxDEV("h1",{className:"todolist-form-title",children:o?"Chỉnh sửa công việc":"Tạo công việc mới"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:103,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:98,columnNumber:7},this),e.jsxDEV("form",{onSubmit:u,className:"todolist-form",children:[e.jsxDEV("div",{className:"todolist-form-group",children:[e.jsxDEV("label",{className:"todolist-form-label",children:["Tiêu đề ",e.jsxDEV("span",{className:"todolist-form-required",children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:111,columnNumber:21},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:110,columnNumber:11},this),e.jsxDEV("input",{type:"text",value:l.title,onChange:a=>N({...l,title:a.target.value}),className:"todolist-form-input",placeholder:"Nhập tiêu đề công việc",required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:113,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:109,columnNumber:9},this),e.jsxDEV("div",{className:"todolist-form-group",children:[e.jsxDEV("label",{className:"todolist-form-label",children:"Mô tả"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:124,columnNumber:11},this),e.jsxDEV("textarea",{value:l.description,onChange:a=>N({...l,description:a.target.value}),className:"todolist-form-textarea",placeholder:"Mô tả chi tiết công việc",rows:4},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:125,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:123,columnNumber:9},this),e.jsxDEV("div",{className:"todolist-form-row",children:[e.jsxDEV("div",{className:"todolist-form-group",children:[e.jsxDEV("label",{className:"todolist-form-label",children:["Ngày đến hạn ",e.jsxDEV("span",{className:"todolist-form-required",children:"*"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:137,columnNumber:28},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:136,columnNumber:13},this),e.jsxDEV("input",{type:"date",value:l.dueDate,onChange:a=>N({...l,dueDate:a.target.value}),className:"todolist-form-input",required:!0},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:139,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:135,columnNumber:11},this),e.jsxDEV("div",{className:"todolist-form-group",children:[e.jsxDEV("label",{className:"todolist-form-label",children:"Thời gian ước tính (giờ)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:149,columnNumber:13},this),e.jsxDEV("input",{type:"number",value:l.estimatedHours,onChange:a=>N({...l,estimatedHours:a.target.value}),className:"todolist-form-input",placeholder:"0",min:"0",step:"0.5"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:150,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:148,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:134,columnNumber:9},this),e.jsxDEV("div",{className:"todolist-form-row",children:[e.jsxDEV("div",{className:"todolist-form-group",children:[e.jsxDEV("label",{className:"todolist-form-label",children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:164,columnNumber:13},this),e.jsxDEV("select",{value:l.status,onChange:a=>N({...l,status:a.target.value}),className:"todolist-form-select",children:[e.jsxDEV("option",{value:"not-started",children:"Chưa bắt đầu"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:172,columnNumber:15},this),e.jsxDEV("option",{value:"in-progress",children:"Đang làm"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:173,columnNumber:15},this),e.jsxDEV("option",{value:"completed",children:"Hoàn thành"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:174,columnNumber:15},this),e.jsxDEV("option",{value:"paused",children:"Tạm dừng"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:175,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:165,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:163,columnNumber:11},this),e.jsxDEV("div",{className:"todolist-form-group",children:[e.jsxDEV("label",{className:"todolist-form-label",children:"Mức độ ưu tiên"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:180,columnNumber:13},this),e.jsxDEV("select",{value:l.priority,onChange:a=>N({...l,priority:a.target.value}),className:"todolist-form-select",children:[e.jsxDEV("option",{value:"low",children:"Thấp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:188,columnNumber:15},this),e.jsxDEV("option",{value:"medium",children:"Trung bình"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:189,columnNumber:15},this),e.jsxDEV("option",{value:"high",children:"Cao"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:190,columnNumber:15},this),e.jsxDEV("option",{value:"urgent",children:"Khẩn cấp"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:191,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:181,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:179,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:162,columnNumber:9},this),e.jsxDEV("div",{className:"todolist-form-group",children:[e.jsxDEV("label",{className:"todolist-form-label",children:"Chủ đề"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:197,columnNumber:11},this),e.jsxDEV("select",{value:l.topicId,onChange:a=>N({...l,topicId:a.target.value}),className:"todolist-form-select",children:[e.jsxDEV("option",{value:"",children:"-- Chọn chủ đề --"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:203,columnNumber:13},this),T.map(a=>e.jsxDEV("option",{value:a.id,children:a.name},a.id,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:205,columnNumber:15},this))]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:198,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:196,columnNumber:9},this),e.jsxDEV("div",{className:"todolist-form-group",children:[e.jsxDEV("label",{className:"todolist-form-label",children:"Nhãn (Tags)"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:213,columnNumber:11},this),e.jsxDEV("input",{type:"text",value:l.tags,onChange:a=>N({...l,tags:a.target.value}),className:"todolist-form-input",placeholder:"Nhập các nhãn, cách nhau bằng dấu phẩy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:214,columnNumber:11},this),e.jsxDEV("span",{style:{fontSize:"var(--font-size-xs)",color:"var(--muted-foreground)",marginTop:"var(--spacing-1)",display:"block"},children:"Ví dụ: báo cáo, quan trọng, urgent"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:221,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:212,columnNumber:9},this),e.jsxDEV("div",{className:"todolist-form-group",children:[e.jsxDEV("label",{className:"todolist-form-label",children:"Ghi chú"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:232,columnNumber:11},this),e.jsxDEV("textarea",{value:l.notes,onChange:a=>N({...l,notes:a.target.value}),className:"todolist-form-textarea",placeholder:"Ghi chú thêm về công việc",rows:4},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:233,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:231,columnNumber:9},this),e.jsxDEV("div",{className:"todolist-form-actions",children:[e.jsxDEV(V,{type:"button",variant:"outline",onClick:()=>s("/todolist/list"),disabled:r,children:"Hủy"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:243,columnNumber:11},this),e.jsxDEV(V,{type:"submit",disabled:r,children:[e.jsxDEV(Fe,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:252,columnNumber:13},this),r?"Đang lưu...":o?"Cập nhật":"Tạo mới"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:251,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:242,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:108,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskFormPage.tsx",lineNumber:97,columnNumber:5},this)}const zs=Object.freeze(Object.defineProperty({__proto__:null,TaskFormPage:As},Symbol.toStringTag,{value:"Module"})),Fs="_container_9t1aj_3",Os="_title_9t1aj_15",$s="_form_9t1aj_31",Bs="_textarea_9t1aj_43",Ms="_formActions_9t1aj_87",Rs="_commentsList_9t1aj_97",Zs="_comment_9t1aj_97",Js="_avatar_9t1aj_129",qs="_commentContent_9t1aj_159",Ws="_commentHeader_9t1aj_167",Ks="_author_9t1aj_181",Ys="_time_9t1aj_195",Gs="_text_9t1aj_43",Xs="_deleteButton_9t1aj_225",Us="_empty_9t1aj_267",D={container:Fs,title:Os,form:$s,textarea:Bs,formActions:Ms,commentsList:Rs,comment:Zs,avatar:Js,commentContent:qs,commentHeader:Ws,author:Ks,time:Ys,text:Gs,deleteButton:Xs,empty:Us};function ei({taskId:s}){const[t,i]=m.useState([]),[o,r]=m.useState(""),[n,l]=m.useState(!1);m.useEffect(()=>{N()},[s]);const N=async()=>{const d=await me.getCommentsByTaskId(s);i(d)},g=async d=>{if(d.preventDefault(),!(!o.trim()||n)){l(!0);try{await me.addComment(s,o.trim()),r(""),await N()}finally{l(!1)}}},u=async d=>{confirm("Bạn có chắc muốn xóa bình luận này?")&&(await me.deleteComment(d),await N())},T=d=>{const a=new Date(d),p=new Date().getTime()-a.getTime(),v=Math.floor(p/6e4),f=Math.floor(p/36e5),L=Math.floor(p/864e5);return v<1?"Vừa xong":v<60?`${v} phút trước`:f<24?`${f} giờ trước`:L<7?`${L} ngày trước`:a.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})};return e.jsxDEV("div",{className:D.container,children:[e.jsxDEV("h3",{className:D.title,children:["Bình luận (",t.length,")"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:68,columnNumber:7},this),e.jsxDEV("form",{onSubmit:g,className:D.form,children:[e.jsxDEV("textarea",{value:o,onChange:d=>r(d.target.value),placeholder:"Viết bình luận...",className:D.textarea,rows:3,disabled:n},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:72,columnNumber:9},this),e.jsxDEV("div",{className:D.formActions,children:e.jsxDEV(V,{type:"submit",size:"sm",disabled:!o.trim()||n,children:[e.jsxDEV(Oe,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:82,columnNumber:13},this),"Gửi"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:81,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:80,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:71,columnNumber:7},this),e.jsxDEV("div",{className:D.commentsList,children:t.length===0?e.jsxDEV("div",{className:D.empty,children:"Chưa có bình luận nào"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:91,columnNumber:11},this):t.map(d=>e.jsxDEV("div",{className:D.comment,children:[e.jsxDEV("div",{className:D.avatar,children:d.author.charAt(0).toUpperCase()},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:95,columnNumber:15},this),e.jsxDEV("div",{className:D.commentContent,children:[e.jsxDEV("div",{className:D.commentHeader,children:[e.jsxDEV("span",{className:D.author,children:d.author},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:100,columnNumber:19},this),e.jsxDEV("span",{className:D.time,children:T(d.createdAt)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:101,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:99,columnNumber:17},this),e.jsxDEV("div",{className:D.text,children:d.content},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:103,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:98,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>u(d.id),className:D.deleteButton,title:"Xóa bình luận",children:e.jsxDEV(pe,{size:14},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:110,columnNumber:17},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:105,columnNumber:15},this)]},d.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:94,columnNumber:13},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:89,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/CommentSection.tsx",lineNumber:67,columnNumber:5},this)}const ti="_timeline_1fut7_3",si="_item_1fut7_15",ii="_iconWrapper_1fut7_47",oi="_created_1fut7_75",li="_updated_1fut7_85",ai="_completed_1fut7_95",ni="_statusChanged_1fut7_105",ri="_content_1fut7_115",mi="_action_1fut7_125",ci="_timestamp_1fut7_141",di="_empty_1fut7_153",y={timeline:ti,item:si,iconWrapper:ii,created:oi,updated:li,completed:ai,statusChanged:ni,content:ri,action:mi,timestamp:ci,empty:di};function ui({taskId:s}){const[t,i]=m.useState([]),[o,r]=m.useState(!0);m.useEffect(()=>{n()},[s]);const n=async()=>{try{const u=await xe.getTaskHistory(s);i(u)}finally{r(!1)}},l=u=>{const T=new Date(u);return new Intl.DateTimeFormat("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(T)},N=u=>{switch(u){case"created":return e.jsxDEV(Me,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:42,columnNumber:16},this);case"status_changed":return e.jsxDEV(Be,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:44,columnNumber:16},this);case"updated":return e.jsxDEV(fe,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:46,columnNumber:16},this);case"commented":return e.jsxDEV($e,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:48,columnNumber:16},this);default:return e.jsxDEV(de,{size:16},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:50,columnNumber:16},this)}},g=u=>{switch(u){case"created":return y.created;case"status_changed":return y.statusChanged;case"updated":return y.updated;case"completed":return y.completed;default:return""}};return o?e.jsxDEV("div",{className:y.empty,children:"Đang tải lịch sử..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:70,columnNumber:12},this):t.length===0?e.jsxDEV("div",{className:y.empty,children:"Chưa có lịch sử thay đổi"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:74,columnNumber:12},this):e.jsxDEV("div",{className:y.timeline,children:t.map(u=>e.jsxDEV("div",{className:y.item,children:[e.jsxDEV("div",{className:`${y.iconWrapper} ${g(u.action)}`,children:N(u.action)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:81,columnNumber:11},this),e.jsxDEV("div",{className:y.content,children:[e.jsxDEV("p",{className:y.action,children:[e.jsxDEV("strong",{children:u.author},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:86,columnNumber:15},this)," ",u.description]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:85,columnNumber:13},this),e.jsxDEV("span",{className:y.timestamp,children:l(u.createdAt)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:88,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:84,columnNumber:11},this)]},u.id,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:80,columnNumber:9},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/components/TaskHistoryTimeline.tsx",lineNumber:78,columnNumber:5},this)}function Ni(){const{id:s}=Le(),t=oe(),[i,o]=m.useState(null),[r,n]=m.useState(!0);m.useEffect(()=>{s&&l(s)},[s]);const l=async a=>{n(!0);try{const h=await x.getTaskById(a);o(h)}finally{n(!1)}},N=async()=>{!i||!confirm("Bạn có chắc muốn xóa công việc này?")||(await x.deleteTask(i.id),t("/todolist/list"))},g=async a=>{i&&(await x.updateTask(i.id,{status:a}),await l(i.id))},u=a=>new Date(a).toLocaleDateString("vi-VN",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}),T=a=>new Date(a).toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),d=a=>a.status==="completed"?!1:new Date(a.dueDate)<new Date;return r?e.jsxDEV("div",{className:"todolist-loading",children:[e.jsxDEV("div",{className:"todolist-spinner"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:73,columnNumber:9},this),e.jsxDEV("p",{children:"Đang tải dữ liệu..."},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:74,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:72,columnNumber:7},this):i?e.jsxDEV("div",{className:"todolist-detail-container",children:[e.jsxDEV("div",{className:"todolist-detail-header",children:[e.jsxDEV(V,{variant:"ghost",size:"sm",onClick:()=>t("/todolist/list"),children:[e.jsxDEV(be,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:95,columnNumber:11},this),"Quay lại"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:94,columnNumber:9},this),e.jsxDEV("div",{className:"todolist-detail-actions",children:[e.jsxDEV(V,{variant:"outline",size:"sm",onClick:()=>t(`/todolist/create?edit=${i.id}`),children:[e.jsxDEV(Re,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:104,columnNumber:13},this),"Chỉnh sửa"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:99,columnNumber:11},this),e.jsxDEV(V,{variant:"outline",size:"sm",onClick:N,style:{color:"var(--destructive)"},children:[e.jsxDEV(pe,{className:"h-4 w-4"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:113,columnNumber:13},this),"Xóa"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:107,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:98,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:93,columnNumber:7},this),e.jsxDEV("div",{className:"todolist-detail-content",children:[e.jsxDEV("div",{className:"todolist-detail-main",children:[e.jsxDEV("div",{className:"todolist-detail-card",children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-3)",marginBottom:"var(--spacing-4)"},children:[e.jsxDEV(Te,{priority:i.priority,showLabel:!0,size:"lg"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:124,columnNumber:15},this),e.jsxDEV("h1",{className:"todolist-detail-title",children:i.title},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:125,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:123,columnNumber:13},this),d(i)&&e.jsxDEV("div",{style:{padding:"var(--spacing-2) var(--spacing-3)",background:"rgba(239, 68, 68, 0.1)",color:"var(--destructive)",borderRadius:"var(--radius)",marginBottom:"var(--spacing-4)",fontSize:"var(--font-size-sm)",fontWeight:"var(--font-weight-medium)"},children:"⚠️ Công việc đã quá hạn!"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:129,columnNumber:15},this),e.jsxDEV("div",{className:"todolist-detail-description",style:{marginBottom:"var(--spacing-6)"},children:i.description},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:142,columnNumber:13},this),e.jsxDEV("div",{className:"todolist-detail-info-grid",style:{marginBottom:"var(--spacing-6)"},children:[e.jsxDEV("div",{className:"todolist-detail-info-item",children:[e.jsxDEV("div",{className:"todolist-detail-info-label",children:[e.jsxDEV(Ne,{className:"h-3 w-3",style:{display:"inline",marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:150,columnNumber:19},this),"Đến hạn"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:149,columnNumber:17},this),e.jsxDEV("div",{className:"todolist-detail-info-value",children:u(i.dueDate)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:153,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:148,columnNumber:15},this),e.jsxDEV("div",{className:"todolist-detail-info-item",children:[e.jsxDEV("div",{className:"todolist-detail-info-label",children:[e.jsxDEV(de,{className:"h-3 w-3",style:{display:"inline",marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:158,columnNumber:19},this),"Thời gian ước tính"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:157,columnNumber:17},this),e.jsxDEV("div",{className:"todolist-detail-info-value",children:[i.estimatedHours||0," giờ"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:161,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:156,columnNumber:15},this),i.actualHours&&e.jsxDEV("div",{className:"todolist-detail-info-item",children:[e.jsxDEV("div",{className:"todolist-detail-info-label",children:[e.jsxDEV(de,{className:"h-3 w-3",style:{display:"inline",marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:167,columnNumber:21},this),"Thời gian thực tế"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:166,columnNumber:19},this),e.jsxDEV("div",{className:"todolist-detail-info-value",children:[i.actualHours," giờ"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:170,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:165,columnNumber:17},this),i.tags.length>0&&e.jsxDEV("div",{className:"todolist-detail-info-item",children:[e.jsxDEV("div",{className:"todolist-detail-info-label",children:[e.jsxDEV(Ze,{className:"h-3 w-3",style:{display:"inline",marginRight:"4px"}},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:177,columnNumber:21},this),"Nhãn"]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:176,columnNumber:19},this),e.jsxDEV("div",{className:"todolist-task-tags",children:i.tags.map(a=>e.jsxDEV("span",{className:"todolist-task-tag",children:a},a,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:182,columnNumber:23},this))},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:180,columnNumber:19},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:175,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:147,columnNumber:13},this),e.jsxDEV("div",{style:{marginBottom:"var(--spacing-6)"},children:[e.jsxDEV("div",{className:"todolist-detail-info-label",style:{marginBottom:"var(--spacing-2)"},children:"Trạng thái"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:193,columnNumber:15},this),e.jsxDEV("div",{style:{display:"flex",gap:"var(--spacing-2)",flexWrap:"wrap"},children:["not-started","in-progress","completed","paused"].map(a=>{const h={"not-started":"Chưa bắt đầu","in-progress":"Đang làm",completed:"Hoàn thành",paused:"Tạm dừng"};return e.jsxDEV("button",{onClick:()=>g(a),className:"todolist-tab-button",style:{background:i.status===a?"var(--primary)":"transparent",color:i.status===a?"var(--primary-foreground)":"var(--foreground)",borderColor:i.status===a?"var(--primary)":"var(--border)"},children:h[a]},a,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:205,columnNumber:21},this)})},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:196,columnNumber:15},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:192,columnNumber:13},this),i.notes&&e.jsxDEV("div",{style:{marginBottom:"var(--spacing-6)"},children:[e.jsxDEV("h3",{className:"todolist-detail-section-title",children:"Ghi chú"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:225,columnNumber:17},this),e.jsxDEV("div",{className:"todolist-detail-description",children:i.notes},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:226,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:224,columnNumber:15},this),e.jsxDEV("div",{style:{display:"flex",gap:"var(--spacing-4)",paddingTop:"var(--spacing-4)",borderTop:"var(--border-width) solid var(--border)",fontSize:"var(--font-size-xs)",color:"var(--muted-foreground)"},children:[e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Tạo lúc:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:240,columnNumber:17},this)," ",T(i.createdAt)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:239,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Cập nhật:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:243,columnNumber:17},this)," ",T(i.updatedAt)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:242,columnNumber:15},this),i.completedAt&&e.jsxDEV("div",{children:[e.jsxDEV("strong",{children:"Hoàn thành:"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:247,columnNumber:19},this)," ",T(i.completedAt)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:246,columnNumber:17},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:231,columnNumber:13},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:122,columnNumber:11},this),e.jsxDEV("div",{className:"todolist-detail-card",children:e.jsxDEV(ei,{taskId:i.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:255,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:254,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:121,columnNumber:9},this),e.jsxDEV("div",{className:"todolist-detail-sidebar",children:e.jsxDEV("div",{className:"todolist-detail-card",children:e.jsxDEV(ui,{taskId:i.id},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:262,columnNumber:13},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:261,columnNumber:11},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:260,columnNumber:9},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:119,columnNumber:7},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:91,columnNumber:5},this):e.jsxDEV("div",{className:"todolist-detail-container",children:e.jsxDEV("div",{className:"todolist-empty",children:[e.jsxDEV("p",{children:"Không tìm thấy công việc"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:83,columnNumber:11},this),e.jsxDEV(V,{onClick:()=>t("/todolist/list"),children:"Quay lại danh sách"},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:84,columnNumber:11},this)]},void 0,!0,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:82,columnNumber:9},this)},void 0,!1,{fileName:"E:/Hieplv/VHV-QLTT/src/modules/i-todolist/pages/TaskDetailPage.tsx",lineNumber:81,columnNumber:7},this)}const pi=Object.freeze(Object.defineProperty({__proto__:null,TaskDetailPage:Ni},Symbol.toStringTag,{value:"Module"}));export{vi as i};
